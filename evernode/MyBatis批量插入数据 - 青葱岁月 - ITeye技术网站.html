<html>
<head>
  <title>MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5788"/>
<h1>MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/21 10:32</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://chenzhou123520.iteye.com/blog/1583407/"><i>http://chenzhou123520.iteye.com/blog/1583407/</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="text-align:center;font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:12px;line-height:1.5;color:black;background:white;"><div style="background:white;text-align:center;background-color:rgb(239, 250, 255);"><div style="text-align:left;"><div style="overflow:hidden;background-color:white;"><div style="background-color:white;">
  <div style="margin-bottom:15px;">
    <h3 style="line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;font-size:16px;padding-top:10px;">
      <a href="http://chenzhou123520.iteye.com/blog/1583407" style="color:rgb(16, 138, 198);text-decoration:underline;">MyBatis批量插入数据</a>
      <em style="font-style:italic;">      </em>
    </h3>
    <ul style="padding:0px;margin:0px;list-style-type:none;"><strong style="font-weight:bold;">博客分类：</strong> <li style="margin:0px 5px 0px 0px;padding:0px;list-style-type:none;display:inline;"><a href="http://chenzhou123520.iteye.com/category/200787" style="color:rgb(16, 138, 198);text-decoration:underline;">Spring</a></li><li style="margin:0px 5px 0px 0px;padding:0px;list-style-type:none;display:inline;"><a href="http://chenzhou123520.iteye.com/category/196060" style="color:rgb(16, 138, 198);text-decoration:underline;">Java</a></li><li style="margin:0px 5px 0px 0px;padding:0px;list-style-type:none;display:inline;"><a href="http://chenzhou123520.iteye.com/category/225004" style="color:rgb(16, 138, 198);text-decoration:underline;">数据库</a></li><li style="margin:0px 5px 0px 0px;padding:0px;list-style-type:none;display:inline;"><a href="http://chenzhou123520.iteye.com/category/232202" style="color:rgb(16, 138, 198);text-decoration:underline;">MyBatis</a></li> </ul>
        <div style="clear:both;display:block;margin:10px 0px 5px;line-height:20px;"><a href="http://www.iteye.com/blogs/tag/mybatis" style="color:rgb(255, 255, 255);text-decoration:none;display:inline-block;margin:0px 5px 5px 0px;padding:0px 10px;background-color:rgb(170, 181, 195);border-radius:10px;">mybatis</a><a href="http://www.iteye.com/blogs/tag/%E6%89%B9%E9%87%8F" style="color:rgb(255, 255, 255);text-decoration:none;display:inline-block;margin:0px 5px 5px 0px;padding:0px 10px;background-color:rgb(170, 181, 195);border-radius:10px;">批量</a><a href="http://www.iteye.com/blogs/tag/%E6%95%B0%E6%8D%AE%E5%BA%93" style="color:rgb(255, 255, 255);text-decoration:none;display:inline-block;margin:0px 5px 5px 0px;padding:0px 10px;background-color:rgb(170, 181, 195);border-radius:10px;">数据库</a><a href="http://www.iteye.com/blogs/tag/%E9%94%99%E8%AF%AF" style="color:rgb(255, 255, 255);text-decoration:none;display:inline-block;margin:0px 5px 5px 0px;padding:0px 10px;background-color:rgb(170, 181, 195);border-radius:10px;">错误</a><a href="http://www.iteye.com/blogs/tag/%E6%8F%92%E5%85%A5" style="color:rgb(255, 255, 255);text-decoration:none;display:inline-block;margin:0px 5px 5px 0px;padding:0px 10px;background-color:rgb(170, 181, 195);border-radius:10px;">插入</a> <span style="line-height:20px;display:block;height:0px;clear:both;visibility:hidden;">.</span></div>
    	  
    	
    	
  		
      </div>

  <div style="font-size:14px;line-height:1.8em;">
    <p style="margin:0px;padding:0px;">在程序中封装了一个List集合对象，然后需要把该集合中的实体插入到数据库中，由于项目使用了Spring+MyBatis的配置，所以打算使用MyBatis批量插入，由于之前没用过批量插入，在网上找了一些资料后最终实现了，把详细过程贴出来。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">实体类TrainRecord结构如下：</p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image.png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> TrainRecord </span><span style="color:rgb(127, 0, 85);font-weight:bold;">implements</span><span style="color:black;"> Serializable {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">static</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">final</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">long</span><span style="color:black;"> serialVersionUID = -1206960462117924923L;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">long</span><span style="color:black;"> id;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">long</span><span style="color:black;"> activityId;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">long</span><span style="color:black;"> empId;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">int</span><span style="color:black;"> flag;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> String addTime;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">          </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//setter and getter </span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">      </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">对应的mapper.xml中定义如下：</p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [1].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">resultMap</span><span style="color:black;"> </span><span style="color:red;">type</span><span style="color:black;">=</span><span style="color:blue;">&quot;TrainRecord&quot;</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;trainRecordResultMap&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">id</span><span style="color:black;"> </span><span style="color:red;">column</span><span style="color:black;">=</span><span style="color:blue;">&quot;id&quot;</span><span style="color:black;"> </span><span style="color:red;">property</span><span style="color:black;">=</span><span style="color:blue;">&quot;id&quot;</span><span style="color:black;"> </span><span style="color:red;">jdbcType</span><span style="color:black;">=</span><span style="color:blue;">&quot;BIGINT&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">result</span><span style="color:black;"> </span><span style="color:red;">column</span><span style="color:black;">=</span><span style="color:blue;">&quot;add_time&quot;</span><span style="color:black;"> </span><span style="color:red;">property</span><span style="color:black;">=</span><span style="color:blue;">&quot;addTime&quot;</span><span style="color:black;"> </span><span style="color:red;">jdbcType</span><span style="color:black;">=</span><span style="color:blue;">&quot;VARCHAR&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">result</span><span style="color:black;"> </span><span style="color:red;">column</span><span style="color:black;">=</span><span style="color:blue;">&quot;emp_id&quot;</span><span style="color:black;"> </span><span style="color:red;">property</span><span style="color:black;">=</span><span style="color:blue;">&quot;empId&quot;</span><span style="color:black;"> </span><span style="color:red;">jdbcType</span><span style="color:black;">=</span><span style="color:blue;">&quot;BIGINT&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">result</span><span style="color:black;"> </span><span style="color:red;">column</span><span style="color:black;">=</span><span style="color:blue;">&quot;activity_id&quot;</span><span style="color:black;"> </span><span style="color:red;">property</span><span style="color:black;">=</span><span style="color:blue;">&quot;activityId&quot;</span><span style="color:black;"> </span><span style="color:red;">jdbcType</span><span style="color:black;">=</span><span style="color:blue;">&quot;BIGINT&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">result</span><span style="color:black;"> </span><span style="color:red;">column</span><span style="color:black;">=</span><span style="color:blue;">&quot;flag&quot;</span><span style="color:black;"> </span><span style="color:red;">property</span><span style="color:black;">=</span><span style="color:blue;">&quot;status&quot;</span><span style="color:black;"> </span><span style="color:red;">jdbcType</span><span style="color:black;">=</span><span style="color:blue;">&quot;VARCHAR&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">resultMap</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">mapper.xml中批量插入方法的定义如下：</p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [2].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">insert</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;addTrainRecordBatch&quot;</span><span style="color:black;"> </span><span style="color:red;">useGeneratedKeys</span><span style="color:black;">=</span><span style="color:blue;">&quot;true&quot;</span><span style="color:black;"> </span><span style="color:red;">parameterType</span><span style="color:black;">=</span><span style="color:blue;">&quot;java.util.List&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">selectKey</span><span style="color:black;"> </span><span style="color:red;">resultType</span><span style="color:black;">=</span><span style="color:blue;">&quot;long&quot;</span><span style="color:black;"> </span><span style="color:red;">keyProperty</span><span style="color:black;">=</span><span style="color:blue;">&quot;id&quot;</span><span style="color:black;"> </span><span style="color:red;">order</span><span style="color:black;">=</span><span style="color:blue;">&quot;AFTER&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        SELECT  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        LAST_INSERT_ID()  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">selectKey</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    insert into t_train_record (add_time,emp_id,activity_id,flag)   </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    values  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">foreach</span><span style="color:black;"> </span><span style="color:red;">collection</span><span style="color:black;">=</span><span style="color:blue;">&quot;list&quot;</span><span style="color:black;"> </span><span style="color:red;">item</span><span style="color:black;">=</span><span style="color:blue;">&quot;item&quot;</span><span style="color:black;"> </span><span style="color:red;">index</span><span style="color:black;">=</span><span style="color:blue;">&quot;index&quot;</span><span style="color:black;"> </span><span style="color:red;">separator</span><span style="color:black;">=</span><span style="color:blue;">&quot;,&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        (#{item.addTime},#{item.empId},#{item.activityId},#{item.flag})  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">foreach</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">insert</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
 
<p style="margin:0px;padding:0px;">对于foreach标签的解释参考了网上的资料，具体如下：</p>
<p style="margin:0px;padding:0px;"><span style="white-space:pre;">	</span>foreach的主要用在构建in条件中，它可以在SQL语句中进行迭代一个集合。foreach元素的属性主要有 item，index，collection，open，separator，close。item表示集合中每一个元素进行迭代时的别名，index指 定一个名字，用于表示在迭代过程中，每次迭代到的位置，open表示该语句以什么开始，separator表示在每次进行迭代之间以什么符号作为分隔 符，close表示以什么结束，在使用foreach的时候最关键的也是最容易出错的就是collection属性，该属性是必须指定的，但是在不同情况 下，该属性的值是不一样的，主要有一下3种情况：</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">1.如果传入的是单参数且参数类型是一个List的时候，collection属性值为list</p>
<p style="margin:0px;padding:0px;">2.如果传入的是单参数且参数类型是一个array数组的时候，collection的属性值为array</p>
<p style="margin:0px;padding:0px;">3.如果传入的参数是多个的时候，我们就需要把它们封装成一个Map了，当然单参数也可以封装成map</p>
<p style="margin:0px;padding:0px;">关于foreach的具体例子在这里就先不举，以后有机会可以把每一种情况都举一个例子列出来。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">MysqlBaseDAO：</p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [3].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> MySqlBaseDAO </span><span style="color:rgb(127, 0, 85);font-weight:bold;">extends</span><span style="color:black;"> SqlSessionDaoSupport {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">/**</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * insert:插入操作. &lt;br/&gt;</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     *</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @author chenzhou</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @param method 插入操作的方法名</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @param entity 查询参数或实体类</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @return 返回影响的行数</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @since JDK 1.6</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     */</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">int</span><span style="color:black;"> insert(String method,Object entity){  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(127, 0, 85);font-weight:bold;">return</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">this</span><span style="color:black;">.getSqlSession().insert(method, entity);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">          </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//其余方法省略</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;">TrainRecord实体类对应的TrainRecordDAO 定义如下：</p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [4].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> TrainRecordDAO </span><span style="color:rgb(127, 0, 85);font-weight:bold;">extends</span><span style="color:black;"> MySqlBaseDAO {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">/**</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * addTrainRecordBatch:批量插入培训记录. &lt;br/&gt;</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     *</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @author chenzhou</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @param trainRecordList 培训记录list集合</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @return 影响的行数</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     * @since JDK 1.6</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">     */</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">int</span><span style="color:black;"> addTrainRecordBatch(List&lt;TrainRecord&gt; trainRecordList){  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(127, 0, 85);font-weight:bold;">return</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">this</span><span style="color:black;">.insert(</span><span style="color:blue;">&quot;addTrainRecordBatch&quot;</span><span style="color:black;">, trainRecordList);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">      </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//省略其余的方法</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">然后直接调用TrainRecordDAO 中的 <span style="white-space:pre;background-color:#fafafa;">addTrainRecordBatch方法就可以批量插入了。</span></p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">特别说明的是在尝试时碰到了一个让人无语的错误，折腾了我差不多1个小时才解决。就是我在定义mapper.xml中的插入方法时一般都会默认用&lt;![CDATA[ ]]&gt;标签把sql语句括起来，如下所示：</p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [5].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">&lt;![CDATA[</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">    select * from t_train_record t where t.activity_id=#{activityId}</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">]]&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">这样做的目的主要是因为在 XML 元素中，&quot;&lt;&quot; 和 &quot;&amp;&quot; 是非法的。&quot;&lt;&quot; 会产生错误，因为解析器会把该字符解释为新元素的开始。&quot;&amp;&quot; 也会产生错误，因为解析器会把该字符解释为字符实体的开始。而sql语句或者脚本语句中可能会存在 &quot;&lt;&quot; 或 &quot;&amp;&quot; 字符。为了避免错误，可以将sql语句定义为 CDATA。CDATA 部分中的所有内容都会被解析器忽略。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">当时我在<span style="white-space:pre;background-color:#fafafa;">addTrainRecordBatch方法中也用了这种用法：</span></p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [6].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">&lt;![CDATA[</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">    insert into t_train_record (add_time,emp_id,activity_id,flag) </span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">    values</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">    &lt;foreach collection=&quot;list&quot; item=&quot;item&quot; index=&quot;index&quot; separator=&quot;,&quot; &gt;</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">        (#{item.addTime},#{item.empId},#{item.activityId},#{item.flag})</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">    &lt;/foreach&gt;</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(255, 20, 147);">]]&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">结果程序在执行时老是报错: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException，查看错误信息就是传入的参数都是null。纠结了很久，后面才发现原来是&lt;![CDATA[ ]]&gt;把xml中的&lt;foreach&gt;标签括起来后把标签直接当成字符串处理了。后面把外面的&lt;![CDATA[ ]]&gt;去掉后就能正常执行了。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"> </p>
  </div>

  

  
  <ins></ins>
  

  <div style="display:block;">
    
    <div style="text-align:right;display:inline-block;width:160px;height:32px;margin:0px;padding:27px 5px 0px 0px;background:none;color:rgb(51, 51, 51);float:right;cursor:auto;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:32px;font-family:Arial, Helvetica, sans-serif;">分享到：
      <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;background:transparent;" title="分享到新浪微博"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" height="16" style="border:0px;margin:0px 5px;" width="16"/></a>
      <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;background:transparent;" title="分享到腾讯微博"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" height="16" style="border:0px;margin:0px 5px;" width="16"/></a>
    </div>
  <span style="display:block;height:0px;clear:both;visibility:hidden;">.</span></div>

  <div style="right:20px;margin-bottom:15px;">
    <div style="float:right;text-align:right;padding-top:5px;">
      <a href="http://chenzhou123520.iteye.com/blog/1584667" style="color:rgb(16, 138, 198);text-decoration:underline;padding:0px 15px;background-repeat:no-repeat;background-image:url(&quot;http://www.iteye.com/images/gray_west_arrow.gif&quot;);background-position:left center;" title="Word中无法使用搜狗输入法解决方案">Word中无法使用搜狗输入法解决方案</a>
      |
      <a href="http://chenzhou123520.iteye.com/blog/1583054" style="color:rgb(16, 138, 198);text-decoration:underline;padding:0px 15px;background-repeat:no-repeat;background-image:url(&quot;http://www.iteye.com/images/gray_east_arrow.gif&quot;);background-position:right center;" title="MySQL报错: java.sql.SQLException: Column count doesn't match value count at row 1">MySQL报错: java.sql.SQLException: Colum ...</a>
    </div>
  </div>
  <div style="padding:15px 0px 5px;">
    <ul style="margin:0px 0px 1.5em;padding:0px;">
      <li style="padding:0px;margin:0px 10px 0px 0px;list-style:none;display:inline;float:left;padding-right:10px;border-right:1px solid;color:rgb(16, 138, 198);border-right-color:rgb(16, 138, 198);">2012-07-10 08:50</li>
      <li style="padding:0px;margin:0px 10px 0px 0px;list-style:none;display:inline;float:left;padding-right:10px;border-right:1px solid;color:rgb(16, 138, 198);border-right-color:rgb(16, 138, 198);">浏览 234497</li>
      <li style="padding:0px;margin:0px 10px 0px 0px;list-style:none;display:inline;float:left;padding-right:10px;border-right:1px solid;color:rgb(16, 138, 198);border-right-color:rgb(16, 138, 198);"><a href="http://chenzhou123520.iteye.com/blog/1583407/#comments" style="color:rgb(16, 138, 198);text-decoration:underline;">评论(15)</a></li>
      
      
      <li style="padding:0px;margin:0px 10px 0px 0px;list-style:none;display:inline;float:left;padding-right:10px;border-right:1px solid;color:rgb(16, 138, 198);border-right-color:rgb(16, 138, 198);">分类:<a href="http://www.iteye.com/blogs/category/opensource" style="color:rgb(16, 138, 198);text-decoration:underline;">开源软件</a></li>      
      <li style="padding:0px;margin:0px 10px 0px 0px;list-style:none;display:inline;float:left;padding-right:10px;color:rgb(16, 138, 198);border-right-color:rgb(16, 138, 198);border-right:none;"><a href="http://www.iteye.com/wiki/blog/1583407" style="color:rgb(16, 138, 198);text-decoration:underline;padding-right:50px;background-repeat:no-repeat;background-image:url(&quot;http://www.iteye.com/images/icon_more.gif&quot;);background-position:right center;" target="_blank">相关推荐</a></li>
    </ul>    
  </div>
  
		    
		
<div style="margin-top:15px;padding:15px;border-top:1px solid gray;width:685px;border-top-color:rgb(16, 138, 198);">
	  <div style="display:block;">
	    <h5 style="line-height:1.3em;margin:0px 0px 0.25em;padding:0px;font-size:1.1em;color:rgb(51, 51, 51);font-weight:normal;font-family:微软雅黑;">参考知识库</h5>
	    
	    <dl style="margin:0px 0px 1.5em;line-height:1.4em;padding:18px 0px 0px;float:left;height:60px;overflow:hidden;">
	    
          <dd style="padding:0px;margin:0px;float:left;width:60px;height:60px;"><a href="http://lib.csdn.net/base/vras" style="color:rgb(16, 138, 198);text-decoration:underline;display:block;" target="_blank"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/1490587425183_183.jpg" type="image/jpeg" data-filename="1490587425183_183.jpg" alt="" height="58" style="border:1px solid rgb(245, 245, 245);" width="58"/></a></dd>
          <dt style="margin:0.25em 0px;padding:0px;float:left;width:158px;margin-left:10px;padding-top:5px;">
              <a href="http://lib.csdn.net/base/vras" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank">语音识别与合成知识库</a>
              <span style="display:block;color:rgb(153, 153, 153);font-size:14px;font-weight:normal;margin-top:12px;vertical-align:middle;">
                 <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">394</em>  关注 <i style="font-style:normal;font-size:smaller;color:rgb(153, 153, 153);">|</i> <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">265</em>  收录                  
              </span>
          </dt>
      
	    </dl>
	    
	    <dl style="margin:0px 0px 1.5em;line-height:1.4em;padding:18px 0px 0px;float:left;height:60px;overflow:hidden;">
	    
          <dd style="padding:0px;margin:0px;float:left;width:60px;height:60px;"><a href="http://lib.csdn.net/base/computervison" style="color:rgb(16, 138, 198);text-decoration:underline;display:block;" target="_blank"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/1490352585394_394.jpg" type="image/jpeg" data-filename="1490352585394_394.jpg" alt="" height="58" style="border:1px solid rgb(245, 245, 245);" width="58"/></a></dd>
          <dt style="margin:0.25em 0px;padding:0px;float:left;width:158px;margin-left:10px;padding-top:5px;">
              <a href="http://lib.csdn.net/base/computervison" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank">计算机视觉知识库</a>
              <span style="display:block;color:rgb(153, 153, 153);font-size:14px;font-weight:normal;margin-top:12px;vertical-align:middle;">
                 <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">981</em>  关注 <i style="font-style:normal;font-size:smaller;color:rgb(153, 153, 153);">|</i> <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">251</em>  收录                  
              </span>
          </dt>
      
	    </dl>
	    
	    <dl style="margin:0px 0px 1.5em;line-height:1.4em;padding:18px 0px 0px;float:left;height:60px;overflow:hidden;">
	    
          <dd style="padding:0px;margin:0px;float:left;width:60px;height:60px;"><a href="http://lib.csdn.net/base/nlp" style="color:rgb(16, 138, 198);text-decoration:underline;display:block;" target="_blank"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/1490351555268_268.jpg" type="image/jpeg" data-filename="1490351555268_268.jpg" alt="" height="58" style="border:1px solid rgb(245, 245, 245);" width="58"/></a></dd>
          <dt style="margin:0.25em 0px;padding:0px;float:left;width:158px;margin-left:10px;padding-top:5px;">
              <a href="http://lib.csdn.net/base/nlp" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank">自然语言理解和处理知识库</a>
              <span style="display:block;color:rgb(153, 153, 153);font-size:14px;font-weight:normal;margin-top:12px;vertical-align:middle;">
                 <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">367</em>  关注 <i style="font-style:normal;font-size:smaller;color:rgb(153, 153, 153);">|</i> <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">87</em>  收录                  
              </span>
          </dt>
      
	    </dl>
	    
	    <dl style="margin:0px 0px 1.5em;line-height:1.4em;padding:18px 0px 0px;float:left;height:60px;overflow:hidden;">
	    
          <dd style="padding:0px;margin:0px;float:left;width:60px;height:60px;"><a href="http://lib.csdn.net/base/knowledgeengineering" style="color:rgb(16, 138, 198);text-decoration:underline;display:block;" target="_blank"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/1490788422140_140.jpg" type="image/jpeg" data-filename="1490788422140_140.jpg" alt="" height="58" style="border:1px solid rgb(245, 245, 245);" width="58"/></a></dd>
          <dt style="margin:0.25em 0px;padding:0px;float:left;width:158px;margin-left:10px;padding-top:5px;">
              <a href="http://lib.csdn.net/base/knowledgeengineering" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank">知识工程知识库</a>
              <span style="display:block;color:rgb(153, 153, 153);font-size:14px;font-weight:normal;margin-top:12px;vertical-align:middle;">
                 <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">116</em>  关注 <i style="font-style:normal;font-size:smaller;color:rgb(153, 153, 153);">|</i> <em style="font-style:normal;color:rgb(100, 177, 203);font-weight:normal;vertical-align:middle;">69</em>  收录                  
              </span>
          </dt>
      
	    </dl>
	    
	  <span style="display:block;height:0px;clear:both;visibility:hidden;">.</span></div>
</div>
 		
      
  <div style="margin-top:15px;padding:15px;border-top:1px solid gray;width:685px;border-top-color:rgb(16, 138, 198);">
    <h5 style="font-size:1.1em;line-height:1.3em;margin:0px 0px 0.25em;padding:0px;color:black;">评论</h5>
    <a name="comments" style="color:rgb(16, 138, 198);text-decoration:underline;"></a>
    <div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    15 楼
    <a href="http://fisher.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="fisher">fisher</a>
    2016-09-25  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">赞！！！刚好需要</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    14 楼
    <a href="http://pake35.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="pake35">pake35</a>
    2016-07-14  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">批量插入，还要获取插入数据的ID，<br/><br/>如： 插入： 浙江省，[{杭州市，西湖区},{宁波市，江北区}，{湖州市，德清县}]<br/><br/>要插入浙江省，拿到浙江省的ID，做为杭州市的 parent_id ;<br/><br/>再插入杭州市的id,做为西湖区的parent_id;<br/><br/><br/></div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    13 楼
    <a href="http://pake35.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="pake35">pake35</a>
    2016-07-14  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;"><br/>批量插入，还要获取插入数据的ID，<br/><br/>如： 插入： 浙江省，杭州市，西湖区，<br/></div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    12 楼
    <a href="http://463190712.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="463190712">463190712</a>
    2016-06-16  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">item.flag   （flag）为数组   里面有多个属性怎么写</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    11 楼
    <a href="http://fangts.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="fangts">fangts</a>
    2015-05-29  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">如果ID是oracle序列呢，你怎么解</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    10 楼
    <a href="http://langke93.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="langke93">langke93</a>
    2015-03-25  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">不错，解决了很大性能问题</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    9 楼
    <a href="http://songjianyong.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="宋建勇">宋建勇</a>
    2015-01-06  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">如果list大小是4000条，Mybatis也是一次性全部插入还是分批次？！</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    8 楼
    <a href="http://liu-20110919.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="liu_20110919">liu_20110919</a>
    2014-11-20  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/icon_idea.gif" type="image/gif" data-filename="icon_idea.gif" height="19" style="border:0px;" width="19"/> </div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    7 楼
    <a href="http://aa00aa00.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="aa00aa00">aa00aa00</a>
    2014-07-25  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">上面针对的是mysql的批量插入操作,oracle可以使用<br/>&lt;insert id=&quot;addRoleModule&quot; parameterType=&quot;java.util.List&quot;&gt;<br/>    INSERT INTO T_P_ROLE_MODULE (ROLE_ID, MODULE_ID)<br/>    &lt;foreach collection=&quot;list&quot; item=&quot;item&quot; index=&quot;index&quot; separator=&quot; UNION ALL &quot;&gt;  <br/>    SELECT #{item.roleId}, #{item.moduleId} FROM DUAL<br/>    &lt;/foreach&gt;  <br/>&lt;/insert&gt;<br/></div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    6 楼
    <a href="http://dsjt.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="dsjt">dsjt</a>
    2014-05-30  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;"><div style="font-weight:bold;padding:5px;margin:5px 0px 0px 15px;">chenzhou123520 写道</div><div style="border:1px solid rgb(204, 204, 204);margin:0px 5px 5px 15px;padding:3px;background:rgb(250, 250, 250);"><div style="font-weight:bold;padding:5px;margin:5px 0px 0px 15px;">li735245459 写道</div><div style="border:1px solid rgb(204, 204, 204);margin:0px 5px 5px 15px;padding:3px;background:rgb(250, 250, 250);">您好这个批量添加适用于oracle么?我的控制台报<br/>insert into TC (TEACHER_ID,COURSE_ID) values (?,?),(?,?)<br/>提示命令未正确结束</div><br/>这个是支持Oracle的，你可否把你的xml完整的sql贴出来？</div><br/><br/><br/>oracle 不支持。。。。</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    5 楼
    <a href="http://chenzhou123520.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="chenzhou123520">chenzhou123520</a>
    2014-05-23  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;"><div style="font-weight:bold;padding:5px;margin:5px 0px 0px 15px;">li735245459 写道</div><div style="border:1px solid rgb(204, 204, 204);margin:0px 5px 5px 15px;padding:3px;background:rgb(250, 250, 250);">您好这个批量添加适用于oracle么?我的控制台报<br/>insert into TC (TEACHER_ID,COURSE_ID) values (?,?),(?,?)<br/>提示命令未正确结束</div><br/>这个是支持Oracle的，你可否把你的xml完整的sql贴出来？</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    4 楼
    <a href="http://li735245459.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="li735245459">li735245459</a>
    2014-05-14  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">您好这个批量添加适用于oracle么?我的控制台报<br/>insert into TC (TEACHER_ID,COURSE_ID) values (?,?),(?,?)<br/>提示命令未正确结束</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    3 楼
    <a href="http://demonu.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="DEMONU">DEMONU</a>
    2014-04-25  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;">顶你个肺。3gods.com</div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    2 楼
    <a href="http://201304230838.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="以斗为名">以斗为名</a>
    2014-04-04  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/icon_lol.gif" type="image/gif" data-filename="icon_lol.gif" height="19" style="border:0px;" width="19"/> </div>
</div>

<div>
  <div style="padding:3px;background-color:rgb(239, 250, 255);">
    1 楼
    <a href="http://1792991235.iteye.com/" style="color:rgb(16, 138, 198);text-decoration:underline;" target="_blank" title="夏日娃">夏日娃</a>
    2013-09-28  
    
    
  </div>
  <div style="padding:3px;margin-bottom:10px;"><img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/icon_twisted.gif" type="image/gif" data-filename="icon_twisted.gif" height="19" style="border:0px;" width="19"/> </div>
</div>


    
    
  </div>

  <div style="margin-top:15px;padding:15px;border-top:1px solid gray;width:685px;border-top-color:rgb(16, 138, 198);">
    <h5 style="font-size:1.1em;line-height:1.3em;margin:0px 0px 0.25em;padding:0px;color:black;">发表评论</h5>
            <p style="margin:0px;padding:0px;text-align:center;margin-top:30px;margin-bottom:0px;"><a href="http://chenzhou123520.iteye.com/login" style="color:rgb(16, 138, 198);text-decoration:underline;background-color:white;"> <img src="MyBatis批量插入数据 - 青葱岁月 - ITeye技术网站_files/Image [7].png" type="image/png" data-filename="Image.png" height="32" style="border:0px;vertical-align:middle;margin-right:10px;" width="26"/></a><a href="http://chenzhou123520.iteye.com/login" style="color:rgb(16, 138, 198);text-decoration:underline;">  您还没有登录,请您登录后再发表评论 </a></p>
      </div>
</div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 