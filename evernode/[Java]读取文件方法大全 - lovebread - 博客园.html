<html>
<head>
  <title>[Java]读取文件方法大全 - lovebread - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8073"/>
<h1>[Java]读取文件方法大全 - lovebread - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2015/8/22 23:51</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2015/8/22 23:53</i></td></tr>
</table>
</div>
<br/>

<div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div>1、按字节读取文件内容<br/>2、按字符读取文件内容<br/>3、按行读取文件内容<br/>4、随机读取文件内容 <div><br/></div><div><br/></div>public class ReadFromFile {<br/>    /**<br/>     * 以字节为单位读取文件，常用于读二进制文件，如图片、声音、影像等文件。<br/>     */<br/>    public static void readFileByBytes(String fileName) {<br/>        File file = new File(fileName);<br/>        InputStream in = null;<br/>        try {<br/>            System.out.println(&quot;以字节为单位读取文件内容，一次读一个字节：&quot;);<br/>            // 一次读一个字节<br/>            in = new FileInputStream(file);<br/>            int tempbyte;<br/>            while ((tempbyte = in.read()) != -1) {<br/>                System.out.write(tempbyte);<br/>            }<br/>            in.close();<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>            return;<br/>        }<br/>        try {<br/>            System.out.println(&quot;以字节为单位读取文件内容，一次读多个字节：&quot;);<br/>            // 一次读多个字节<br/>            byte[] tempbytes = new byte[100];<br/>            int byteread = 0;<br/>            in = new FileInputStream(fileName);<br/>            ReadFromFile.showAvailableBytes(in);<br/>            // 读入多个字节到字节数组中，byteread为一次读入的字节数<br/>            while ((byteread = in.read(tempbytes)) != -1) {<br/>                System.out.write(tempbytes, 0, byteread);<br/>            }<br/>        } catch (Exception e1) {<br/>            e1.printStackTrace();<br/>        } finally {<br/>            if (in != null) {<br/>                try {<br/>                    in.close();<br/>                } catch (IOException e1) {<br/>                }<br/>            }<br/>        }<br/>    }<div><br/></div>    /**<br/>     * 以字符为单位读取文件，常用于读文本，数字等类型的文件<br/>     */<br/>    public static void readFileByChars(String fileName) {<br/>        File file = new File(fileName);<br/>        Reader reader = null;<br/>        try {<br/>            System.out.println(&quot;以字符为单位读取文件内容，一次读一个字节：&quot;);<br/>            // 一次读一个字符<br/>            reader = new InputStreamReader(new FileInputStream(file));<br/>            int tempchar;<br/>            while ((tempchar = reader.read()) != -1) {<br/>                // 对于windows下，\r\n这两个字符在一起时，表示一个换行。<br/>                // 但如果这两个字符分开显示时，会换两次行。<br/>                // 因此，屏蔽掉\r，或者屏蔽\n。否则，将会多出很多空行。<br/>                if (((char) tempchar) != '\r') {<br/>                    System.out.print((char) tempchar);<br/>                }<br/>            }<br/>            reader.close();<br/>        } catch (Exception e) {<br/>            e.printStackTrace();<br/>        }<br/>        try {<br/>            System.out.println(&quot;以字符为单位读取文件内容，一次读多个字节：&quot;);<br/>            // 一次读多个字符<br/>            char[] tempchars = new char[30];<br/>            int charread = 0;<br/>            reader = new InputStreamReader(new FileInputStream(fileName));<br/>            // 读入多个字符到字符数组中，charread为一次读取字符数<br/>            while ((charread = reader.read(tempchars)) != -1) {<br/>                // 同样屏蔽掉\r不显示<br/>                if ((charread == tempchars.length)<br/>                        &amp;&amp; (tempchars[tempchars.length - 1] != '\r')) {<br/>                    System.out.print(tempchars);<br/>                } else {<br/>                    for (int i = 0; i &lt; charread; i++) {<br/>                        if (tempchars[i] == '\r') {<br/>                            continue;<br/>                        } else {<br/>                            System.out.print(tempchars[i]);<br/>                        }<br/>                    }<br/>                }<br/>            }<div><br/></div>        } catch (Exception e1) {<br/>            e1.printStackTrace();<br/>        } finally {<br/>            if (reader != null) {<br/>                try {<br/>                    reader.close();<br/>                } catch (IOException e1) {<br/>                }<br/>            }<br/>        }<br/>    }<div><br/></div>    /**<br/>     * 以行为单位读取文件，常用于读面向行的格式化文件<br/>     */<br/>    public static void readFileByLines(String fileName) {<br/>        File file = new File(fileName);<br/>        BufferedReader reader = null;<br/>        try {<br/>            System.out.println(&quot;以行为单位读取文件内容，一次读一整行：&quot;);<br/>            reader = new BufferedReader(new FileReader(file));<br/>            String tempString = null;<br/>            int line = 1;<br/>            // 一次读入一行，直到读入null为文件结束<br/>            while ((tempString = reader.readLine()) != null) {<br/>                // 显示行号<br/>                System.out.println(&quot;line &quot; + line + &quot;: &quot; + tempString);<br/>                line++;<br/>            }<br/>            reader.close();<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        } finally {<br/>            if (reader != null) {<br/>                try {<br/>                    reader.close();<br/>                } catch (IOException e1) {<br/>                }<br/>            }<br/>        }<br/>    }<div><br/></div>    /**<br/>     * 随机读取文件内容<br/>     */<br/>    public static void readFileByRandomAccess(String fileName) {<br/>        RandomAccessFile randomFile = null;<br/>        try {<br/>            System.out.println(&quot;随机读取一段文件内容：&quot;);<br/>            // 打开一个随机访问文件流，按只读方式<br/>            randomFile = new RandomAccessFile(fileName, &quot;r&quot;);<br/>            // 文件长度，字节数<br/>            long fileLength = randomFile.length();<br/>            // 读文件的起始位置<br/>            int beginIndex = (fileLength &gt; 4) ? 4 : 0;<br/>            // 将读文件的开始位置移到beginIndex位置。<br/>            randomFile.seek(beginIndex);<br/>            byte[] bytes = new byte[10];<br/>            int byteread = 0;<br/>            // 一次读10个字节，如果文件内容不足10个字节，则读剩下的字节。<br/>            // 将一次读取的字节数赋给byteread<br/>            while ((byteread = randomFile.read(bytes)) != -1) {<br/>                System.out.write(bytes, 0, byteread);<br/>            }<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        } finally {<br/>            if (randomFile != null) {<br/>                try {<br/>                    randomFile.close();<br/>                } catch (IOException e1) {<br/>                }<br/>            }<br/>        }<br/>    }<div><br/></div>    /**<br/>     * 显示输入流中还剩的字节数<br/>     */<br/>    private static void showAvailableBytes(InputStream in) {<br/>        try {<br/>            System.out.println(&quot;当前字节输入流中的字节数为:&quot; + in.available());<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }<div><br/></div>    public static void main(String[] args) {<br/>        String fileName = &quot;C:/temp/newTemp.txt&quot;;<br/>        ReadFromFile.readFileByBytes(fileName);<br/>        ReadFromFile.readFileByChars(fileName);<br/>        ReadFromFile.readFileByLines(fileName);<br/>        ReadFromFile.readFileByRandomAccess(fileName);<br/>    }<br/>}<div><br/></div><div><br/></div>5、将内容追加到文件尾部<div><br/></div><div><br/></div>public class AppendToFile {<br/>    /**<br/>     * A方法追加文件：使用RandomAccessFile<br/>     */<br/>    public static void appendMethodA(String fileName, String content) {<br/>        try {<br/>            // 打开一个随机访问文件流，按读写方式<br/>            RandomAccessFile randomFile = new RandomAccessFile(fileName, &quot;rw&quot;);<br/>            // 文件长度，字节数<br/>            long fileLength = randomFile.length();<br/>            //将写文件指针移到文件尾。<br/>            randomFile.seek(fileLength);<br/>            randomFile.writeBytes(content);<br/>            randomFile.close();<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }<div><br/></div>    /**<br/>     * B方法追加文件：使用FileWriter<br/>     */<br/>    public static void appendMethodB(String fileName, String content) {<br/>        try {<br/>            //打开一个写文件器，构造函数中的第二个参数true表示以追加形式写文件<br/>            FileWriter writer = new FileWriter(fileName, true);<br/>            writer.write(content);<br/>            writer.close();<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }<div><br/></div>    public static void main(String[] args) {<br/>        String fileName = &quot;C:/temp/newTemp.txt&quot;;<br/>        String content = &quot;new append!&quot;;<br/>        //按方法A追加文件<br/>        AppendToFile.appendMethodA(fileName, content);<br/>        AppendToFile.appendMethodA(fileName, &quot;append end. \n&quot;);<br/>        //显示文件内容<br/>        ReadFromFile.readFileByLines(fileName);<br/>        //按方法B追加文件<br/>        AppendToFile.appendMethodB(fileName, content);<br/>        AppendToFile.appendMethodB(fileName, &quot;append end. \n&quot;);<br/>        //显示文件内容<br/>        ReadFromFile.readFileByLines(fileName);<br/>    }<br/>}</div></span>
</div></body></html> 