<html>
<head>
  <title>Springboot 整合 Dubbo/ZooKeeper 详解 SOA 案例 | Spring For All</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5898"/>
<h1>Springboot 整合 Dubbo/ZooKeeper 详解 SOA 案例 | Spring For All</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/12/8 17:22</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.spring4all.com/article/179"><i>http://www.spring4all.com/article/179</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:14px;"><div style="box-sizing:inherit;overflow-x:hidden;min-width:320px;background:rgb(255, 255, 255);font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;font-size:14px;line-height:1.4285em;color:rgba(0, 0, 0, 0.870588);background-color:#f3f3f3;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:stretch;align-items:stretch;"><div style="box-sizing:inherit;vertical-align:top;"><div style="box-sizing:inherit;background:rgb(255, 255, 255);box-shadow:rgba(34, 36, 38, 0.14902) 0px 1px 2px 0px;border-radius:0.285714rem;font-size:1rem;"><h3 style="font-size:1.28571rem;box-sizing:inherit;border:none;line-height:1.28571em;font-weight:700;padding:0px;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;text-transform:none;margin-top:-0.142857em;padding-bottom:0.214286rem;border-bottom:2px solid rgb(219, 40, 40);color:rgb(219, 40, 40);"><i style="height:1em;box-sizing:inherit;font-family:Icons;backface-visibility:hidden;-webkit-font-smoothing:antialiased;speak:none;text-align:center;margin:0px 0.25rem 0px 0px;width:1.18em;text-decoration:inherit;font-weight:400;font-style:normal;font-size:1.5em;display:table-cell;vertical-align:middle;padding-top:0.142857em;opacity:1;margin-bottom:0px;"><span style="font-size:1.5em;font-family:Icons;font-style:normal;font-weight:400;text-align:center;background:0px 0px !important;"></span></i> <div style="box-sizing:inherit;display:table-cell;vertical-align:middle;padding-left:0.75rem;">Springboot 整合 Dubbo/ZooKeeper 详解 SOA 案例</div></h3> <div style="line-height:1.6;box-sizing:inherit;padding:0px;overflow:auto;font-family:&quot;Microsoft YaHei&quot;, Helvetica, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Monaco, monospace, Tahoma, STXihei, 华文细黑, STHeiti, &quot;Helvetica Neue&quot;, &quot;Droid Sans&quot;, &quot;wenquanyi micro hei&quot;, FreeSans, Arimo, Arial, SimSun, 宋体, Heiti, 黑体, sans-serif;font-size:14px;text-size-adjust:100%;word-wrap:break-word;text-align:left;color:rgb(51, 51, 51);width:100%;background-color:rgb(255, 255, 255);"><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-bottom:16px;margin-top:0px;">摘要: 原创出处:www.bysocket.com 泥瓦匠BYSocket 希望转载，保留摘要，谢谢！</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><em style="box-sizing:border-box;">“看看星空，会觉得自己很渺小，可能我们在宇宙中从来就是一个偶然。所以，无论什么事情，仔细想一想，都没有什么大不了的。这能帮助自己在遇到挫折时稳定心态，想得更开。”  - 《腾讯传》</em></p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">本文提纲</p>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">一、为啥整合 Dubbo 实现 SOA</li><li style="box-sizing:border-box;">二、运行 springboot-dubbo-server 和 springboot-dubbo-client 工程</li><li style="box-sizing:border-box;">三、springboot-dubbo-server 和 springboot-dubbo-client 工程配置详解</li></ul>
<h2 style="font-size:1.75em;box-sizing:border-box;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;font-weight:bold;line-height:1.225;margin-top:1em;margin-bottom:16px;position:relative;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);"><a name="一、为啥整合 Dubbo 实现 SOA" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>一、为啥整合 Dubbo 实现 SOA</h2><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Dubbo 不单单只是高性能的 RPC 调用框架，更是 SOA 服务治理的一种方案。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">核心：</p>
<ol style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">远程通信，向本地调用一样调用远程方法。</li><li style="box-sizing:border-box;">集群容错</li><li style="box-sizing:border-box;">服务自动发现和注册，可平滑添加或者删除服务提供者。</li></ol>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">我们常常使用 Springboot 暴露 HTTP 服务，并走 JSON 模式。但慢慢量大了，一种 SOA 的治理方案。这样可以暴露出 Dubbo 服务接口，提供给 Dubbo 消费者进行 RPC 调用。下面我们详解下如何集成 Dubbo。</p>
<h2 style="font-size:1.75em;box-sizing:border-box;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;font-weight:bold;line-height:1.225;margin-top:1em;margin-bottom:16px;position:relative;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);"><a name="二、运行 springboot-dubbo-server 和 springboot-dubbo-client 工程" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>二、运行 springboot-dubbo-server 和 springboot-dubbo-client 工程</h2><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">运行环境：JDK 7 或 8，Maven 3.0+<br style="box-sizing:border-box;"/>技术栈：SpringBoot 1.5+、Dubbo 2.5+、ZooKeeper 3.3+</p>
<h3 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.43;font-weight:bold;font-size:1.5em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="1.ZooKeeper 服务注册中心" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>1.ZooKeeper 服务注册中心</h3><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">ZooKeeper 是一个分布式的，开放源码的分布式应用程序协调服务。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">下载 ZooKeeper ，地址 <a href="http://www.apache.org/dyn/closer.cgi/zookeeper" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://www.apache.org/dyn/closer.cgi/zookeeper</a><br style="box-sizing:border-box;"/>解压 ZooKeeper</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>tar zxvf zookeeper-3.4.8.tar.gz
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">在 conf 目录新建 zoo.cfg ，照着该目录的 zoo_sample.cfg 配置如下。</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>cd zookeeper-3.3.6/conf
vim zoo.cfg
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">zoo.cfg 代码如下（自己指定 log 文件目录）：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>tickTime=2000
dataDir=/javaee/zookeeper/data 
dataLogDir=/javaee/zookeeper/log
clientPort=2181
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">在 bin 目录下，启动 ZooKeeper：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>cd zookeeper-3.3.6/bin
./zkServer.sh start
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><h3 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.43;font-weight:bold;font-size:1.5em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="2. git clone 下载工程 springboot-learning-example" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>2. git clone 下载工程 springboot-learning-example</h3><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">项目地址见 GitHub - <a href="https://github.com/JeffLi1993/springboot-learning-example%EF%BC%9A" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/JeffLi1993/springboot-learning-example：</a></p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>git clone git@github.com:JeffLi1993/springboot-learning-example.git
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">然后，Maven 编译安装这个工程：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>cd springboot-learning-example
mvn clean install
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><h3 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.43;font-weight:bold;font-size:1.5em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="3.运行 springboot-dubbo-server Dubbo 服务提供者工程" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>3.运行 springboot-dubbo-server Dubbo 服务提供者工程</h3><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">右键运行 springboot-dubbo-server 工程 ServerApplication 应用启动类的 main 函数。Console 中出现如下表示项目启动成功。这里表示 Dubbo 服务已经启动成功，并注册到 ZK （ZooKeeper）中。</p>
<h3 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.43;font-weight:bold;font-size:1.5em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="4.运行 springboot-dubbo-client Dubbo 服务消费者工程" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>4.运行 springboot-dubbo-client Dubbo 服务消费者工程</h3><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">右键运行 springboot-dubbo-client 工程 ClientApplication 应用启动类的 main 函数。Console 中出现如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>...
2017-03-01 16:31:38.473  INFO 9896 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2017-03-01 16:31:38.538  INFO 9896 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8081 (http)
2017-03-01 16:31:38.547  INFO 9896 --- [           main] org.spring.springboot.ClientApplication  : Started ClientApplication in 6.055 seconds (JVM running for 7.026)
City{id=1, provinceId=2, cityName='温岭', description='是我的故乡'}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">最后打印的城市信息，就是通过 Dubbo 服务接口调用获取的。顺利运行成功，下面详解下各个代码及配置。</p>
<h2 style="font-size:1.75em;box-sizing:border-box;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;font-weight:bold;line-height:1.225;margin-top:1em;margin-bottom:16px;position:relative;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);"><a name="三、springboot-dubbo-server 和 springboot-dubbo-client 工程配置详解" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>三、springboot-dubbo-server 和 springboot-dubbo-client 工程配置详解</h2><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">代码都在 GitHub 上， <a href="https://github.com/JeffLi1993/springboot-learning-example%E3%80%82" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/JeffLi1993/springboot-learning-example。</a></p>
<h3 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.43;font-weight:bold;font-size:1.5em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="1.详解 springboot-dubbo-server Dubbo 服务提供者工程" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>1.详解 springboot-dubbo-server Dubbo 服务提供者工程</h3><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">springboot-dubbo-server 工程目录结构</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>├── pom.xml
└── src
    └── main
        ├── java
        │   └── org
        │       └── spring
        │           └── springboot
        │               ├── ServerApplication.java
        │               ├── domain
        │               │   └── City.java
        │               └── dubbo
        │                   ├── CityDubboService.java
        │                   └── impl
        │                       └── CityDubboServiceImpl.java
        └── resources
            └── application.properties
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">a.pom.xml 配置<br style="box-sizing:border-box;"/>pom.xml 中依赖了 spring-boot-starter-dubbo 工程，该项目地址是 <a href="https://github.com/teaey/spring-boot-starter-dubbo%E3%80%82" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/teaey/spring-boot-starter-dubbo。</a></p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">pom.xml 配置如下</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;springboot&lt;/groupId&gt;
    &lt;artifactId&gt;springboot-dubbo-server&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;springboot-dubbo 服务端:: 整合 Dubbo/ZooKeeper 详解 SOA 案例&lt;/name&gt;

    &lt;!-- Spring Boot 启动父依赖 --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.5.1.RELEASE&lt;/version&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;dubbo-spring-boot&gt;1.0.0&lt;/dubbo-spring-boot&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;

        &lt;!-- Spring Boot Dubbo 依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.dubbo.springboot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-dubbo&lt;/artifactId&gt;
            &lt;version&gt;${dubbo-spring-boot}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- Spring Boot Web 依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- Spring Boot Test 依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- Junit --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.12&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">b.application.properties 配置</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>## Dubbo 服务提供者配置
spring.dubbo.application.name=provider
spring.dubbo.registry.address=zookeeper://127.0.0.1:2181
spring.dubbo.protocol.name=dubbo
spring.dubbo.protocol.port=20880
spring.dubbo.scan=org.spring.springboot.dubbo
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">这里 ZK 配置的地址和端口，就是上面本机搭建的 ZK 。如果有自己的 ZK 可以修改下面的配置。配置解释如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>spring.dubbo.application.name 应用名称
spring.dubbo.registry.address 注册中心地址
spring.dubbo.protocol.name 协议名称
spring.dubbo.protocol.port 协议端口
spring.dubbo.scan dubbo 服务类包目录
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">c.CityDubboServiceImpl.java 城市业务 Dubbo 服务层实现层类</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>// 注册为 Dubbo 服务
@Service(version = &quot;1.0.0&quot;)
public class CityDubboServiceImpl implements CityDubboService {

    public City findCityByName(String cityName) {
        return new City(1L,2L,&quot;温岭&quot;,&quot;是我的故乡&quot;);
    }
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="https://github.com/Service" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;" title="@Service">@Service</a> 注解标识为 Dubbo 服务，并通过 version 指定了版本号。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">d.City.java 城市实体类<br style="box-sizing:border-box;"/>实体类通过 Dubbo 服务之间 RPC 调用，则需要实现序列化接口。最好指定下 serialVersionUID 值。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">2.详解 springboot-dubbo-client Dubbo 服务消费者工程<br style="box-sizing:border-box;"/>springboot-dubbo-client 工程目录结构</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>├── pom.xml
└── src
    └── main
        ├── java
        │   └── org
        │       └── spring
        │           └── springboot
        │               ├── ClientApplication.java
        │               ├── domain
        │               │   └── City.java
        │               └── dubbo
        │                   ├── CityDubboConsumerService.java
        │                   └── CityDubboService.java
        └── resources
            └── application.properties
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">pom.xml 、 CityDubboService.java、City.java 没有改动。Dubbo 消费者通过引入接口实现 Dubbo 接口的调用。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">a.application.properties 配置</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>## 避免和 server 工程端口冲突
server.port=8081

## Dubbo 服务消费者配置
spring.dubbo.application.name=consumer
spring.dubbo.registry.address=zookeeper://127.0.0.1:2181
spring.dubbo.scan=org.spring.springboot.dubbo
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">因为 springboot-dubbo-server 工程启动占用了 8080 端口，所以这边设置端口为 8081。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">b.CityDubboConsumerService.java 城市 Dubbo 服务消费者</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>@Component
public class CityDubboConsumerService {

    @Reference(version = &quot;1.0.0&quot;)
    CityDubboService cityDubboService;

    public void printCity() {
        String cityName=&quot;温岭&quot;;
        City city = cityDubboService.findCityByName(cityName);
        System.out.println(city.toString());
    }
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="https://github.com/Reference" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;" title="@Reference">@Reference</a>(version = “1.0.0”) 通过该注解，订阅该接口版本为 1.0.0 的 Dubbo 服务。<br style="box-sizing:border-box;"/>这里将 CityDubboConsumerService 注入 Spring 容器，是为了更方便的获取该 Bean，然后验证这个 Dubbo 调用是否成功。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">c.ClientApplication.java 客户端启动类</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>@SpringBootApplication
public class ClientApplication {

    public static void main(String[] args) {
        // 程序启动入口
        // 启动嵌入式的 Tomcat 并初始化 Spring 环境及其各 Spring 组件
        ConfigurableApplicationContext run = SpringApplication.run(ClientApplication.class, args);
        CityDubboConsumerService cityService = run.getBean(CityDubboConsumerService.class);
        cityService.printCity();
    }
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">解释下这段逻辑，就是启动后从 Bean 容器中获取城市 Dubbo 服务消费者 Bean。然后调用该 Bean 方法去验证 Dubbo 调用是否成功。</p>
<h2 style="font-size:1.75em;box-sizing:border-box;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;font-weight:bold;line-height:1.225;margin-top:1em;margin-bottom:16px;position:relative;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);"><a name="四、小结" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>四、小结</h2><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">还有涉及到服务的监控，治理。这本质上和 SpringBoot 无关，所以这边不做一一介绍。感谢阿里 teaey 提供的 starter-dubbo 项目。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:0px;">欢迎扫一扫我的公众号关注 — 及时得到博客订阅哦！<br style="box-sizing:border-box;"/>— <a href="http://www.bysocket.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://www.bysocket.com/</a> —<br style="box-sizing:border-box;"/>— <a href="https://github.com/JeffLi1993" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/JeffLi1993</a> —</p>
</div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 