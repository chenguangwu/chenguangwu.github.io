<html>
<head>
  <title>通过数据分析进行问题排查的case - Axb的自我修养</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6956"/>
<h1>通过数据分析进行问题排查的case - Axb的自我修养</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/4/23 10:15</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.2baxb.me/archives/1665"><i>http://blog.2baxb.me/archives/1665</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%; position: relative;"><div style="font-family:sans-serif;text-size-adjust:100%;"><div style="background-color:rgb(255, 255, 255);color:rgb(68, 68, 68);font-family:TIBch, &quot;Classic Grotesque W01&quot;, &quot;Helvetica Neue&quot;, Arial, &quot;Hiragino Sans GB&quot;, STHeiti, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif;-webkit-font-smoothing:antialiased;font-size:14px;"><div><div><div style="zoom:1;"><div><div><div>
				<h1 style="font-size:25px;margin:0px;font-family:ff-tisa-web-pro, Cambria, &quot;Times New Roman&quot;, Georgia, Times, sans-serif;color:rgb(85, 85, 85);text-align:left;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:1.2;">通过数据分析进行问题排查的case</h1>
				<ul style="padding:0px;margin:9px 0px 0px;color:rgb(153, 153, 153);text-align:left;">
					<li style="display:inline-block;">四月 23, 2018</li>
					<li style="float:right;margin-top:-30px;display:inline-block;"><a href="http://blog.2baxb.me/archives/1665#respond" style="background:transparent;color:rgb(110, 113, 115);text-decoration:none;transition:all 0.1s ease-in;">0 条评论</a></li>
				</ul>
				<div style="font-size:15px;line-height:1.715;color:rgb(68, 68, 68);padding-top:10px;padding-bottom:15px;border-bottom:1.5px dashed rgb(221, 221, 221);">
					<div style="font-size:120%;padding:5px;background:rgb(248, 248, 248);line-height:120%;max-width:30%;border:1px solid rgb(221, 221, 221);position:relative;z-index:1000;margin-top:10px;margin:0 0 10px 10px;float:right;"><div style="margin:0px 0px 3px;padding:0px;font-size:130%;font-weight:bold;">目录</div><span style="font-size:9pt;">[<a href="#" style="background:transparent;color:rgb(110, 113, 115);text-decoration:none;transition:all 0.1s ease-in;border-bottom:1px solid rgb(221, 221, 221);">显示</a>]</span>

</div>
<p style="margin:0px 0px 1.234em;">前几天帮忙排查一个问题，简单记录一下。</p>
<h2 style="font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.28571em;"><em style="font-size:85%;font-style:normal;font-weight:700;margin-right:5px;">1.</em>背景</h2>
<p style="margin:0px 0px 1.234em;">答题服务，近期用户答题率（答题人数/发题时的在线人数）有明显下降，需要分析这部分用户没有答题的原因。</p>
<h2 style="font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.28571em;"><em style="font-size:85%;font-style:normal;font-weight:700;margin-right:5px;">2.</em>初步排查</h2>
<ol>
<li>从服务端监控来看，客户端尝试连接、断连、超时比例都没有明显异常，整体也没有容量上的问题。</li>
<li>从没有答题的用户分析，没有明显的特征。</li>
<li>从没有答题的设备分析，大部分集中在IOS客户端。</li>
<li>从没有答题的设备网络分析，没有明显的地域或ISP分布。</li>
</ol>
<h2 style="font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.28571em;"><em style="font-size:85%;font-style:normal;font-weight:700;margin-right:5px;">3.</em>进一步排查</h2>
<p style="margin:0px 0px 1.234em;">在初步排查基本排除了服务端整体性能问题之后，接下来的问题是：这一部分IOS用户为什么在房间里但是没有答题？</p>
<p style="margin:0px 0px 1.234em;">可能的解释有几种：</p>
<ol>
<li>发题的时候用户在线，但是没有弹出题目</li>
<li>发题的时候用户在线，弹出题目了，但是没有选择答案</li>
<li>发题的时候用户在线，弹出题目、选择答案了，但是没有提交成功</li>
<li>发题的时候用户其实不在线，统计有问题</li>
</ol>
<p style="margin:0px 0px 1.234em;">想要继续统计有一个比较麻烦的地方，如何根据已有日志判断某个用户在发布题目的时候是否在线，进而得知这个用户在这段时间内究竟发生了什么？</p>
<p style="margin:0px 0px 1.234em;">记录的日志大概是这个画风：</p>
<p style="margin:0px 0px 1.234em;"></p>

		<div style="font-weight:500;text-align:left;text-size-adjust:none;line-height:15px !important;font-size:12px !important;margin-bottom:12px;width:100%;padding:0px;margin:0px;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;box-sizing:border-box;margin-top:12px;text-shadow:none;background:rgb(253, 253, 253);border-color:rgb(221, 221, 221);border-style:solid;border-width:1px;direction:ltr;position:relative;overflow:hidden;height:auto;">
		
			
			
			<div style="background:0px center;border:0px;text-align:left;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;padding:0px;margin:0px;height:auto;"></div>
			<div style="background:0px center;border:0px;text-align:left;padding:0px;margin:0px;width:100%;overflow:hidden;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;position:relative;z-index:1;">
				<table style="margin-top:0px;font-size:12px;font-style:inherit;font-variant:inherit;font-weight:inherit;margin-bottom:0px;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;margin:0px;border:none;margin-right:0px;background:none;width:auto;border-spacing:0px;border-collapse:collapse;table-layout:auto;padding:0px;">
					<tbody style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;"><tr style="background:0px center;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;padding:0px;border:none;vertical-align:top;margin:0px;">
				<td style="border-bottom:1px solid rgb(170, 170, 170);font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;vertical-align:top;padding:0px;margin:0px;border:none;background:rgb(253, 253, 253);color:rgb(212, 212, 212);">
					<div style="background:0px center;border:0px;padding:0px;margin:0px;text-align:left;white-space:nowrap;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:12px !important;line-height:15px !important;"><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">1</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">2</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">3</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">4</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">5</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">6</div></div>
				</td>
						<td style="border-bottom:1px solid rgb(170, 170, 170);width:100%;background:0px center;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;vertical-align:top;padding:0px;margin:0px;border:none;"><div style="overflow:visible;background:none;padding:0px;margin:0px;text-align:left;color:rgb(0, 0, 0);white-space:pre;border:none;tab-size:4;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:12px !important;line-height:15px !important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;"><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">12</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">30</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">00</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">aaa</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">join </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">room</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">12</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">30</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">00</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">bbb</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">join </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">room</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">12</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">30</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">30</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">bbb</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">show </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">question</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">12</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">30</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">35</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">bbb</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">submit </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">answer</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">12</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">31</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">00</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">aaa</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">exit </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">room</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">12</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">30</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">00</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">bbb</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">:</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">exit </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">room</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>

<p style="margin:0px 0px 1.234em;"></p>
<p style="margin:0px 0px 1.234em;">也就是说，需要通过事件日志获得“对于没有答题的用户来说，在发题的时间段内，哪些用户是在线状态”，进而分析“没有答题的用户的时间轴与正常用户的时间轴有什么区别”，如果是一个用户可以人肉观察的方式，针对具体case定性，但是对于几十上百万个用户来说，需要进行定量分析，从而判断出“影响答题率的关键因素究竟是哪个问题”。</p>
<p style="margin:0px 0px 1.234em;">在这里利用了红黑树进行辅助分析，针对每一个用户创建一颗基于事件的红黑树，key为时间戳，value则是具体事件类型。在对所有用户创建树后，则可以使用某一个具体的时间戳，获取某个指定用户“在这个时间点发生的事件“、”在这个时间之前（之后）发生的的事件”和“用户的完整时间轴”。</p>
<p style="margin:0px 0px 1.234em;">在此之上，如果某个用户在某个时间点之前的最后一个事件是断开连接，则是离线状态，否则为在线状态。</p>
<p style="margin:0px 0px 1.234em;">伪代码如下：</p>
<p style="margin:0px 0px 1.234em;"></p>

		<div style="font-weight:500;text-align:left;text-size-adjust:none;line-height:15px !important;font-size:12px !important;margin-bottom:12px;width:100%;padding:0px;margin:0px;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;box-sizing:border-box;margin-top:12px;text-shadow:none;background:rgb(253, 253, 253);border-color:rgb(221, 221, 221);border-style:solid;border-width:1px;direction:ltr;position:relative;overflow:hidden;height:auto;">
		
			
			
			<div style="background:0px center;border:0px;text-align:left;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;padding:0px;margin:0px;height:auto;"></div>
			<div style="background:0px center;border:0px;text-align:left;padding:0px;margin:0px;width:100%;overflow:hidden;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;position:relative;z-index:1;">
				<table style="margin-top:0px;font-size:12px;font-style:inherit;font-variant:inherit;font-weight:inherit;margin-bottom:0px;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;margin:0px;border:none;margin-right:0px;background:none;width:auto;border-spacing:0px;border-collapse:collapse;table-layout:auto;padding:0px;">
					<tbody style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;"><tr style="background:0px center;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;padding:0px;border:none;vertical-align:top;margin:0px;">
				<td style="border-bottom:1px solid rgb(170, 170, 170);font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;vertical-align:top;padding:0px;margin:0px;border:none;background:rgb(253, 253, 253);color:rgb(212, 212, 212);">
					<div style="background:0px center;border:0px;padding:0px;margin:0px;text-align:left;white-space:nowrap;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:12px !important;line-height:15px !important;"><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">1</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">2</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">3</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">4</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">5</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">6</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">7</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">8</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">9</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">10</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">11</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">12</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">13</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">14</div></div>
				</td>
						<td style="border-bottom:1px solid rgb(170, 170, 170);width:100%;background:0px center;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;vertical-align:top;padding:0px;margin:0px;border:none;"><div style="overflow:visible;background:none;padding:0px;margin:0px;text-align:left;color:rgb(0, 0, 0);white-space:pre;border:none;tab-size:4;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:12px !important;line-height:15px !important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;"><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(136, 136, 136);">// 建森林</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">foreach</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span>所有事件<span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">    </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">TreeMap </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">userTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">=</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">allTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">[</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">uid</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">]</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">    </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">userTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">put</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">,</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"> </div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(136, 136, 136);">// 获取某个时间点在线用户列表</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">public</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">List</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">&lt;</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">TreeMap</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">&gt;</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">getOnlineUsers</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">long</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">timestamp</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">    </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">foreach</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">allTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">        </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">if</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">!</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">userTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">floorEntry</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">timeStamp</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">==</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 102, 153);">&quot;断开连接&quot;</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">            </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">result</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">add</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">userTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">        </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">    </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>

<p style="margin:0px 0px 1.234em;"></p>
<p style="margin:0px 0px 1.234em;">筛出异常用户后，进一步对异常用户的时间轴作分析，获取每个时间点上的事件数量。</p>
<p style="margin:0px 0px 1.234em;"></p>

		<div style="font-weight:500;text-align:left;text-size-adjust:none;line-height:15px !important;font-size:12px !important;margin-bottom:12px;width:100%;padding:0px;margin:0px;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;box-sizing:border-box;margin-top:12px;text-shadow:none;background:rgb(253, 253, 253);border-color:rgb(221, 221, 221);border-style:solid;border-width:1px;direction:ltr;position:relative;overflow:hidden;height:auto;">
		
			
			
			<div style="background:0px center;border:0px;text-align:left;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;padding:0px;margin:0px;height:auto;"></div>
			<div style="background:0px center;border:0px;text-align:left;padding:0px;margin:0px;width:100%;overflow:hidden;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;position:relative;z-index:1;">
				<table style="margin-top:0px;font-size:12px;font-style:inherit;font-variant:inherit;font-weight:inherit;margin-bottom:0px;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;margin:0px;border:none;margin-right:0px;background:none;width:auto;border-spacing:0px;border-collapse:collapse;table-layout:auto;padding:0px;">
					<tbody style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;"><tr style="background:0px center;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;padding:0px;border:none;vertical-align:top;margin:0px;">
				<td style="border-bottom:1px solid rgb(170, 170, 170);font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;vertical-align:top;padding:0px;margin:0px;border:none;background:rgb(253, 253, 253);color:rgb(212, 212, 212);">
					<div style="background:0px center;border:0px;padding:0px;margin:0px;text-align:left;white-space:nowrap;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:12px !important;line-height:15px !important;"><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">1</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">2</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">3</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">4</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">5</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">6</div><div style="background:0px center;border:0px;padding:0px 5px;margin:0px;text-align:center;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;">7</div><div style="font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);padding:0px 5px;margin:0px;text-align:center;border:0px;height:inherit;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(212, 212, 212);">8</div></div>
				</td>
						<td style="border-bottom:1px solid rgb(170, 170, 170);width:100%;background:0px center;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;vertical-align:top;padding:0px;margin:0px;border:none;"><div style="overflow:visible;background:none;padding:0px;margin:0px;text-align:left;color:rgb(0, 0, 0);white-space:pre;border:none;tab-size:4;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:12px !important;line-height:15px !important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;"><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">for</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">=</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">start</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">&lt;</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">end</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">++</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">    </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">foreach</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">allTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">        </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">=</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">userTree</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">.</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">get</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">time</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">        </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:bold;color:rgb(204, 102, 0);">if</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">(</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">!=</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(204, 102, 0);">null</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">)</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);"> </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">{</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">            </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">eventStastics</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">[</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">timestamp</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">]</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">[</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">event</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">]</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(34, 34, 34);">++</span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">;</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">        </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div><div style="background:0px center;border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(0, 111, 224);">    </span><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div><div style="border:0px;margin:0px;text-align:left;padding:0px 5px;height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;background:rgb(250, 250, 250);font-size:inherit;line-height:inherit;font-weight:inherit;"><span style="height:inherit;font-family:Monaco, MonacoRegular, &quot;Courier New&quot;, monospace;font-size:inherit;line-height:inherit;font-weight:inherit;color:rgb(51, 51, 51);">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>

<p style="margin:0px 0px 1.234em;"></p>
<p style="margin:0px 0px 1.234em;">将异常用户与正常用户的加入房间请求做对比，可以发现答题开始前有加房间请求的异常峰值。</p>
<p style="margin:0px 0px 1.234em;"><img src="通过数据分析进行问题排查的case - Axb的自我修养_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" height="159" style="border:0px;padding:1em 0px;max-width:100%;height:auto;" width="300"/></p>
<p style="margin:0px 0px 1.234em;">由于红黑树可以顺序遍历，因此用程序对所有异常用户的时间轴进行分析，发现异常用户都是有两次加入房间请求，并且都是第一次连接关闭后直接发起请求，但第二次加入房间后没有任何操作，直到直播结束。</p>
<h2 style="font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.28571em;"><em style="font-size:85%;font-style:normal;font-weight:700;margin-right:5px;">4.</em>结论</h2>
<p style="margin:0px 0px 1.234em;">怀疑断线后有误加房间逻辑，重新review客户端断线重连代码，发现bug，解决。
</p><div>
<ul style="background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);overflow:auto;padding:0.5em 2.4em;border-radius:3px;margin:1.8em 0px;"><a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license" style="background:transparent;color:rgb(110, 113, 115);text-decoration:none;transition:all 0.1s ease-in;border-bottom:1px solid rgb(221, 221, 221);"><img src="通过数据分析进行问题排查的case - Axb的自我修养_files/80x15.png" type="image/png" data-filename="80x15.png" height="15" style="border:0px;padding:0;max-width:100%;height:auto;background:rgb(255, 255, 255);position:relative;bottom:-4px;border-width:0;" width="80"/></a><br/>本作品采用<a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license" style="background:transparent;color:rgb(110, 113, 115);text-decoration:none;transition:all 0.1s ease-in;border-bottom:1px solid rgb(221, 221, 221);">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可，转载请注明作者及原网址。</ul>
</div>
				</div>
			</div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 