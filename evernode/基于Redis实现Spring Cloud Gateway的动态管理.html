<html>
<head>
  <title>基于Redis实现Spring Cloud Gateway的动态管理</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="12740"/>
<h1>基于Redis实现Spring Cloud Gateway的动态管理</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/8/23 16:20</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzI5MDEzMzg5Nw==&mid=2660399184&idx=1&sn=6187addb9d5baf005544c0d241c32d4b&chksm=f7425ab6c035d3a06715dcdef3a8e2a6c7fd04d49aeae871f937a48c3b1832ddbf5733534d78#rd"><i>http://mp.weixin.qq.com/s?__biz=MzI5MDEzMzg5Nw==&amp;mid=2660399184&amp;idx=1&amp;sn=6187addb9d5baf005544c0d241c32d4b&amp;chksm=f7425ab6c035d3a06715dcdef3a8e2a6c7fd04d49aeae871f937a48c3b1832ddbf5733534d78#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="text-size-adjust:100%;line-height:1.6;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div style="font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(51, 51, 51);background-color:rgb(242, 242, 242);letter-spacing:0.034em;line-height:1.6;font-size:16px;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div><div style="overflow-wrap:break-word;"><div style="background-color:rgb(255, 255, 255);"><div><div>

                
                <h2 style="font-weight:400;font-size:22px;margin:0px;padding:0px;line-height:1.4;margin-bottom:14px;">
                    
                    
                    
            基于Redis实现Spring Cloud Gateway的动态管理
                      </h2>
                <div style="margin:0px;padding:0px;margin-bottom:22px;line-height:20px;font-size:0px;overflow-wrap:break-word;word-break:break-all;position:relative;z-index:1;">
                                                            <span style="margin:0px 10px 10px 0px;padding:0px;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);margin-right:0px;color:rgba(0, 0, 0, 0.3);">原创：</span>
                                                                                        <span style="margin:0px 10px 10px 0px;padding:0px;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);color:rgba(0, 0, 0, 0.3);">
                                                        将晓渔
                                                    </span>
                                                                
                                        <span style="margin:0px 10px 10px 0px;padding:0px;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);position:relative;">
                      <a href="#" style="margin:0px;padding:0px;color:rgb(87, 107, 149);text-decoration:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);">
                        EAWorld                      </a>
                      
                    </span>


                    <em style="margin:0px 10px 10px 0px;padding:0px;font-style:normal;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);color:rgba(0, 0, 0, 0.3);">昨天</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div style="margin:0px;padding:0px;overflow:hidden;color:rgb(51, 51, 51);font-size:17px;overflow-wrap:break-word;text-align:justify;position:relative;z-index:0;">
                    

                    

                    
                    
                    <p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-right:8px;margin-left:8px;white-space:normal;text-align:center;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640.gif" type="image/gif" data-filename="640.gif" height="25" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:299px !important;visibility:visible !important;" width="299"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640.webp" type="image/webp" data-filename="640.webp" height="383" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;text-align:center;width:574px !important;visibility:visible !important;" width="574"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-right:8px;margin-left:8px;white-space:normal;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;color:rgb(136, 136, 136);">转载本文需注明出处：微信公众号EAWorld，违者必究。</span></strong></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:5px;margin-bottom:5px;white-space:normal;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;background-color:rgb(255, 255, 255);font-size:16px;text-align:center;line-height:normal;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;word-wrap:break-word !important;"><div style="margin:0px;padding:10px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;display:inline-block;width:558px;border-width:1px;border-style:solid;border-color:rgb(192, 200, 209);background-color:rgb(239, 239, 239);word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:18px;color:rgb(0, 0, 0);word-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">引言：</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;text-indent:2em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;min-height:1em;text-indent:2em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;text-indent:2em;">Spring Cloud Gateway是当前使用非常广泛的一种API网关。它本身能力并不能完全满足企业对网关的期望，人们希望它可以提供更多的服务治理能力。但Spring Cloud Gateway并不提供数据的动态管理，甚至修改个路由都需要重启。我们如何解决它这个短板，同时实现治理配置数据的高效动态管理呢？本文将带来我们网关与Redis组合的实践。  </span></div></div></div></div></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:10px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;display:inline-block;width:558px;border-width:1px;border-style:solid;border-color:rgb(192, 200, 209);background-color:rgb(239, 239, 239);word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;color:rgb(0, 0, 0);font-size:18px;word-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">目录：</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">1.Spring Cloud Gateway 简介  </span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">2.网关数据管理</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">3.实现细节  </span></p></div></div></div></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></div></div></div></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:0.5em;margin-bottom:0.5em;white-space:normal;border-bottom:1px solid black;line-height:1.2;text-align:center;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:-1px;display:inline-block;border-bottom:6px solid rgb(95, 156, 239);border-top-color:rgb(95, 156, 239);border-right-color:rgb(95, 156, 239);border-left-color:rgb(95, 156, 239);color:rgb(95, 156, 239);word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:20px;">1.Spring Cloud Gateway 简介</span></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(74, 148, 231);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">API 网关</span></strong></span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">API 网关出现的原因是微服务架构的出现，不同的微服务一般会有不同的网络地址，而外部客户端可能需要调用多个服务的接口才能完成一个业务需求，如果让客户端直接与各个微服务通信，会有以下的问题：</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:disc;margin-left:8px;margin-right:8px;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">客户端会多次请求不同的微服务，增加了客户端的复杂性。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">存在跨域请求，在一定场景下处理相对复杂。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">认证复杂，每个服务都需要独立认证。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">难以重构，随着项目的迭代，可能需要重新划分微服务。例如，可能将多个服务合并成一个或者将一个服务拆分成多个。如果客户端直接与微服务通信，那么重构将会很难实施。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">某些微服务可能使用了防火墙 / 浏览器不友好的协议，直接访问会有一定的困难。</span></p></li></ul><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">以上这些问题可以借助 API 网关解决。API 网关是介于客户端和服务器端之间的中间层，所有的外部请求都会先经过 API 网关这一层。也就是说，API 的实现方面更多的考虑。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;text-align:center;margin-left:8px;margin-right:8px;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [1].webp" type="image/webp" data-filename="640.webp" height="374" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:100% !important;visibility:visible !important;" width="661"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"></span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">使用 API 网关后的优点如下：</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"> </span></div><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:disc;margin-left:8px;margin-right:8px;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">易于监控。可以在网关收集监控数据并将其推送到外部系统进行分析。 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">易于认证。可以在网关上进行认证，然后再将请求转发到后端的微服务，而无须在每个微服务中进行认证。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">减少了客户端与各个微服务之间的交互次数。</span></p></li></ul><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(74, 148, 231);">Spring Cloud Gateway</span></strong></span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">Spring Cloud Gateway是Spring官方基于Spring 5.0，Spring Boot 2.0和Project Reactor等技术开发的网关，Spring Cloud Gateway旨在为微服务架构提供一种简单而有效的统一的API路由管理方式。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">Spring Cloud Gateway作为Spring Cloud生态系中的网关，目标是替代Netflix ZUUL，其不仅提供统一的路由方式，并且基于Filter链的方式提供了网关基本的功能，例如：安全，监控/埋点，和限流等。</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;text-align:center;margin-left:8px;margin-right:8px;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/Image.png" type="image/png" data-filename="Image.png" height="275" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:277.31px !important;background-color:rgb(238, 237, 235);border:1px solid rgb(238, 237, 235);background-size:22px;background-position:center center;background-repeat:no-repeat;background-image:url(data:image/gif;base64,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");width:661px !important;" width="659"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(136, 136, 136);">SCG架构</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">如图所示，SCG的架构看起来很简单。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">首先，它内部包含了一个高性能的Netty Server，用来接收各类网络请求。请求进来之后，会根据配置的各个路由进行匹配并处理请求。每个路由都可以定义多个断言(Predicate)，用于路由匹配。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">SCG默认提供了10多个内建的断言，可以基于请求的各个方面（请求头，路径，路径，时间，Cookie，http方法等）进行路由匹配。如果还不够，用户还可以自已扩展。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">请求匹配到了合适的路由之后，就会按照路由中配置的各过滤器(filter)，按顺序对请求进行处理。Filter也基本上可以对请求的所有属性做处理，修改，添加或者除请求头，修改请求数据，修改返回的数据等，几乎无所不能。当然，修改请求也只是一方面的用途，认证，鉴权，记录日志等也都可以在网关中统一来做。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">所有filter形成处理链，直到所有的filter处理完，才会交给最后面的 Netty Client，由它将处理过的请求发送至对应的微服务。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">在请求发送至微服务之前，还可以定义它的负载均衡策略(LoadBalancerRule)，以决定请求至底发往微服务的哪个实例。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">Filter 与 LoadBalancerRule 都支持自行扩展。</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:0.5em;margin-bottom:0.5em;border-bottom:1px solid black;line-height:1.2;text-align:center;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:-1px;display:inline-block;border-bottom:6px solid rgb(95, 156, 239);border-top-color:rgb(95, 156, 239);border-right-color:rgb(95, 156, 239);border-left-color:rgb(95, 156, 239);color:rgb(95, 156, 239);word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:20px;">2.网关数据管理</span></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">实现一个适合自已的网关，对数据管理需要考虑哪些方面的东西呢？</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">1.首先，我们要考虑一下，我们需要管理些什么数据。</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">SCG本身对数据管理的管理是很弱的。它没有提供数据的持久化方案，它所有的数据都来自初始化，来自它的配置文件(application.yml)。它本身虽然也对外提供了一些管理接口(Actuator API)能力不够，但能力不够，且这些修改都是暂时的，网关一停，数据就消失了。这就要求我们要用一套更完善的方案，把网关的这些数据管理起来，不能让它只能写在配置文件中，而要支持持久化，支持动态变更。再有就是我们对各微服务的治理数据。网关只用来做路由转发，那就太浪费了，统一认证，统一鉴权，访问日志记录，应用访问统计，黑白名单过滤，API订阅管理，流量限制，甚至数据格式转换，网络协议转换，都可以在网关中来做。而所有的这些能力，无不需要数据的支持。因此，这些服务的治理配置，也是网关需要管理的数据。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">2.数据有了，我们还得考虑怎么把它保存起来，不能网关一重启，所有数据就没了。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">3.还得再考虑一下数据的读取。网关对性能的要求是很高的，每次对过关的数据进行治理，都需要去读取这些配置信息。如果配置信息读取太消耗资源，无疑对网关是不利的。所以，我们还得考虑数据如何缓存，以提高数据的读取性能。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">4.单个网关，可以处理的请求量是有上限的。为了应对大的流量，我们可能会需要对网关做水平扩容。当多个网关实例共存时，如何保障对网关的修改，能快速同步到每个网关实例呢？数据变更通知也得考虑。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">5.最多，我们还得考虑一下方案的扩展，数据存储能不能改个地方，通知能不能换种方式？</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">综合考虑了这些方面之后，我们的网关的架构如下：</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;text-align:center;margin-left:8px;margin-right:8px;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [2].webp" type="image/webp" data-filename="640.webp" height="267" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:100% !important;visibility:visible !important;" width="661"/></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(136, 136, 136);">gateway-arch</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"></span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">如图，以上就是我们网关的整体设计。方案设计要点如下：</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:decimal;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">网关对外提供治理数据管理接口, 微服务治理平台可通过这些接口, 将治理配置推送到网关</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">网关通过治理数据统一存储接口, 将治理配置数据保持至治理数据持久存储(这里我们默认为Redis) </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">Redis通过发布订阅能力, 将数据的变更通知到各网关实例 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">各网关实例收到通知后, 将数据从持久存储同步至内部高速缓存 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">内部缓存在网关启动时, 会自动从持久存储加载对应配置进入缓存. 同时它也支持清空, 以及按需加载 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">外部业务请求经过网关时, 对数据执行鉴权,处理转换, 以及灰度策略时,所需要治理配置,都从内部缓存中获取, 以提升性能 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">方案中, 外部持久存储(默认用的Redis, 可以换成Mysql, 文件, Appolo等), 以及数据变更通知(默认使用的是Redis的发布订阅, 可以换成Appolo通知, 消息队列, 定时扫描等), 都是可以扩展的</span></p></li></ol><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-right:8px;margin-left:8px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:0.5em;margin-bottom:0.5em;white-space:normal;border-bottom:1px solid black;line-height:1.2;text-align:center;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:-1px;display:inline-block;border-bottom:6px solid rgb(95, 156, 239);border-top-color:rgb(95, 156, 239);border-right-color:rgb(95, 156, 239);border-left-color:rgb(95, 156, 239);color:rgb(95, 156, 239);word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:20px;">3.实现细节</span></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(74, 148, 231);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">动态路由管理</span></strong></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:justify;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">Spring Cloud Gateway作为所有请求流量的入口，在实际生产环境中为了保证高可靠和高可用，尽量避免重启, 需要实现Spring Cloud Gateway动态路由配置。实现动态路由其实很简单, 重点在于 RouteDefinitionRepository 这个接口. 这个接口继承自两个接口, 其中 RouteDefinitionLocator 是用来加载路由的. 它有很多实现类, 其中的 PropertiesRouteDefinitionLocator 就用来实现从yml中加载路由. 另一个 RouteDefinitionWriter 用来实现路由的添加与删除. 通过查看spring cloud gateway的源码可以发现, 在 org.springframework.cloud.gateway.config.GatewayAutoConfiguration中这么一段:</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:justify;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="margin:10px 0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(51, 51, 51);position:relative;background-color:rgba(0, 0, 0, 0.03);border:1px solid rgb(240, 240, 240);border-radius:2px;display:flex;line-height:26px;"><ul style="margin:0px;padding:1em;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;flex-shrink:0;height:100%;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">1</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">2</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">3</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">4</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">5</span></li></ul><pre style="margin:0px;padding:1em 1em 1em 0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;overflow-x:auto;white-space:normal;-webkit-box-flex:1;flex:1 1 0%;"><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">@Bean</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);">@ConditionalOnMissingBean</span>(RouteDefinitionRepository.class)</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> InMemoryRouteDefinitionRepository <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">inMemoryRouteDefinitionRepository()</span> </span>{</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">return</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> InMemoryRouteDefinitionRepository();</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">}</span></code></pre></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(136, 136, 136);">（左右滑动查看全部代码）</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:justify;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">可以看出, 网关中如果没有RouteDefinitionRepository的Bean, 就会采用InMemoryRouteDefinitionRepository做为实现。这个 InMemoryRouteDefinitionRepository有一个问题, 就是数据没有持久化, 网关重启之后,原来通过接口设置的路由就会丢失了。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">这当然是不可接受的, 所以我们需要实现自已的 RouteDefinitionRepository, 来提供路由配置信息。如使用redis做为存储, 来实现路由的存储。实现请参考文章：https://dwz.cn/tsHfKwMe</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">除此以外, 每当路由更改之后, 还需要通知网关刷新路由。这需要发送 RefreshRoutesEvent 来通知网关。如下列示例：</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:justify;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="margin:10px 0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(51, 51, 51);position:relative;background-color:rgba(0, 0, 0, 0.03);border:1px solid rgb(240, 240, 240);border-radius:2px;display:flex;line-height:26px;"><ul style="margin:0px;padding:1em;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;flex-shrink:0;height:100%;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">1</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">2</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">3</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">4</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">5</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">6</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">7</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">8</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">9</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">10</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">11</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">12</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">13</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">14</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">15</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">16</span></li></ul><pre style="margin:0px;padding:1em 1em 1em 0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;overflow-x:auto;white-space:normal;-webkit-box-flex:1;flex:1 1 0%;"><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">@Component</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">class</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(14, 156, 229);">RouteDynamicService</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">implements</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(14, 156, 229);">ApplicationEventPublisherAware</span> </span>{</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">private</span> ApplicationEventPublisher publisher;</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><br style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"/></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);">@Override</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">void</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">setApplicationEventPublisher(ApplicationEventPublisher publisher)</span> </span>{</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">this</span>.publisher = publisher;</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><br style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"/></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">/**</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    * 刷新路由表</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    */</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">void</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">refreshRoutes()</span> </span>{</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      publisher.publishEvent(<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> RefreshRoutesEvent(<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">this</span>));</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">}</span></code></pre></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(136, 136, 136);font-size:14px;text-align:center;">（左右滑动查看全部代码）</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">刷新可以通过消息通知机制来触发, 当然, 也可以对外接供rest接口, 手动触发。</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">### 数据存储 </span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;text-align:center;margin-left:8px;margin-right:8px;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [3].webp" type="image/webp" data-filename="640.webp" height="289" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:100% !important;visibility:visible !important;" width="661"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">如上述类图所示, IGovernDataRepository为治理数据统一存储接口。RedisGovernDataRepository为实现的它的抽像类, 它需要依赖两个, 一个是StringRedisTemplate，用来实现redis数据的存储。另一个为 RedisKeyGenerator, 用来为各治理对象生成对应的key。RedisGovernDataRepository下面则为各个治理数据存储的实现类。使用Redis做为持久存储时, 需要注意以下几点: </span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:decimal;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">为对象生成key时, 建议为key添加一个命名空间(就是加一段有意义的前缀) </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">在redis中进行模糊搜索时, 提供给Redis的pattern, 不能是一个正则的通配, 它支持三种通配 *(多个), ?(单个)</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">如果数据量比较大, 不建议使用keys进行模糊查询, 应该使用scan方式</span></p></li></ol><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(74, 148, 231);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">数据缓存</span></strong></span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">我们提供了内部缓存，它处于使用者与持久存储之间，缓存数据以提升性能。缓存的实现主要有如下几点：</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><ol style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;list-style-type:decimal;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">实现了 InitializingBean 以实现在网关启动时, 自动加载数据 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">内部使用了ConcurrentHashMap, 保证写时的线程同步, 又保证了get时的高效(get整个过程不需要加锁) </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">从缓存中取数据时, 如果需要懒加载, 当从持久存储中加载不到数据时, 建议使用空数据, 或空集合占位, 避免每次都去持久存储中查询</span></p></li></ol><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">代码示例如下:</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:10px 0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(51, 51, 51);position:relative;background-color:rgba(0, 0, 0, 0.03);border:1px solid rgb(240, 240, 240);border-radius:2px;display:flex;line-height:26px;"><ul style="margin:0px;padding:1em;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;flex-shrink:0;height:100%;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">1</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">2</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">3</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">4</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">5</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">6</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">7</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">8</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">9</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">10</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">11</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">12</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">13</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">14</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">15</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">16</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">17</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">18</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">19</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">20</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">21</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">22</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">23</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">24</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">25</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">26</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">27</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">28</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">29</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">30</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">31</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">32</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">33</span></li></ul><pre style="margin:0px;padding:1em 1em 1em 0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;overflow-x:auto;white-space:normal;-webkit-box-flex:1;flex:1 1 0%;"><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">/**</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  * 根据 appCode 获取流量策略</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  * </span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  * @param appCode</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  * @return</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  */</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> Set&lt;ApplicationTrafficPolicy&gt; getAppTrafficPolicies(String appCode) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 从缓存加载</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  Map&lt;String, ApplicationTrafficPolicy&gt; <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span> = policyMap.get(appCode);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 缓存中没有</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">if</span> (<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span> == null) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 尝试从持久存储中加载所有此网关的流量策略</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    Set&lt;ApplicationTrafficPolicy&gt; policies = trafficPolicyRepository.fuzzyQuery();</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 持久存储中没有任何流量策略，占个位置，防止缓存重复去加载</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">if</span> (policies == null || policies.size() == <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(14, 156, 229);">0</span>) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span> = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> ConcurrentHashMap&lt;&gt;();</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      policyMap.put(appCode, <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span>);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    } <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">else</span> {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 持久存储中有流量策略，放入缓存</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">for</span> (ApplicationTrafficPolicy policy : policies) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">        setTrafficPolicy(policy);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 重新从缓存中加载一次</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span> = policyMap.get(appCode);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// 如果还是没有，使用空 map 占位子</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">if</span> (<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span> == null) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">        <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span> = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> ConcurrentHashMap&lt;&gt;();</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">        policyMap.put(appCode, <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span>);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">return</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">map</span>.values().stream().collect(Collectors.toSet());</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">}</span></code></pre></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(136, 136, 136);">（左右滑动查看全部代码）</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(74, 148, 231);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">事件通知</span></strong></span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">事件通知，这里我们使用的是redis的发布与订阅能力。Redis默认是不发送事件的，要让它发布事件，需要先修改它的配置文件redis.conf，添加一个配置：</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:10px 0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(51, 51, 51);position:relative;background-color:rgba(0, 0, 0, 0.03);border:1px solid rgb(240, 240, 240);border-radius:2px;display:flex;line-height:26px;"><ul style="margin:0px;padding:1em;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;flex-shrink:0;height:100%;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">1</span></li></ul><pre style="margin:0px;padding:1em 1em 1em 0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;overflow-x:auto;white-space:normal;-webkit-box-flex:1;flex:1 1 0%;"><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">notify-keyspace-events <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;K<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(14, 156, 229);">$g</span>&quot;</span></span></code></pre></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">上面的配置将使得Redis中发生数据的添加，修改或删除时，发送set或del事件。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">然后，我们需要配置一个RedisMessageListenerContainer，用来订阅我们感兴趣的事件。</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div><div style="margin:10px 0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;color:rgb(51, 51, 51);position:relative;background-color:rgba(0, 0, 0, 0.03);border:1px solid rgb(240, 240, 240);border-radius:2px;display:flex;line-height:26px;"><ul style="margin:0px;padding:1em;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;flex-shrink:0;height:100%;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">1</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">2</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">3</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">4</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">5</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">6</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">7</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">8</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">9</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">10</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">11</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">12</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">13</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">14</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">15</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">16</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">17</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">18</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">19</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">20</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">21</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">22</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">23</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">24</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">25</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">26</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">27</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">28</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">29</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">30</span></li><li style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;list-style-type:none;text-align:right;"><span style="list-style-type:none;text-align:right;min-width:1.5em;left:-2.5em;display:inline;color:rgba(0, 0, 0, 0.15);">31</span></li></ul><pre style="margin:0px;padding:1em 1em 1em 0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;overflow-x:auto;white-space:normal;-webkit-box-flex:1;flex:1 1 0%;"><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">@Bean</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">RedisMessageListenerContainer container(MessageListenerAdapter listenerAdapter) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span> gtwReidsPattern = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;__keyspace@*__:&quot;</span> + GTW + keyGenerator.getGatewayCode() + <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;]*&quot;</span>;</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span> cofRedisPattern = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;__keyspace@*__:&quot;</span> + COF + cacheKey.getKeyNameSpace() + USER_NAME + <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;*&quot;</span>;</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  log.info(<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;Add gateway redis message listener, patternTopic is {}&quot;</span>, gtwReidsPattern);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  log.info(<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;Add coframe redis message listener, patternTopic is {}&quot;</span>, cofRedisPattern);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  RedisMessageListenerContainer container = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> RedisMessageListenerContainer();</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  container.setConnectionFactory(redisTemplate.getConnectionFactory());</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);font-style:italic;">// PatternTopic 参考：http://redisdoc.com/topic/notification.html</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  container.addMessageListener(listenerAdapter, Arrays.asList(<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> PatternTopic(PatternUtil.fmt(gtwReidsPattern)), <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> PatternTopic(PatternUtil.fmt(cofRedisPattern))));</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">return</span> container;</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">}</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">当redis事件订阅好了之后, 每次其中我们关心的数据有变更, 都会发送<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">set</span>或del事件.</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">我们需要定义一个 MessageListener, 来接收事件:</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);">@Service</span>(value = RedisMessageListener.REDIS_LISTENER_NAME)</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">class</span> RedisMessageListener <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">implements</span> MessageListener {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(175, 175, 175);">@Override</span></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">public</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">void</span> onMessage(Message message, byte[] pattern) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span> ops = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span>(message.getBody());</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span> channel = <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">new</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span>(message.getChannel());</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span> key = channel.split(<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;:&quot;</span>)[<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(14, 156, 229);">1</span>];</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"><br style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;"/></span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">if</span> (<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;set&quot;</span>.equals(ops)) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">String</span> value = redisTemplate.opsForValue().get(key);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      handleSet(key, value);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    } <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">else</span> <span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(202, 125, 55);">if</span> (<span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(221, 17, 68);">&quot;del&quot;</span>.equals(ops)) {</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">      handleDel(key);</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">    }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  }</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">  ...</span></code><code style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><span style="margin:0px;padding:0px;max-width:1000%;box-sizing:border-box;overflow-wrap:break-word;">}</span></code></pre></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"></span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(136, 136, 136);font-size:14px;text-align:center;">（左右滑动查看全部代码）</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-left:8px;margin-right:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;">接收到事件后，会调用相应的内部缓存，更新内部缓存中的数据，以实现治理数据变更的及时生效。</span></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:10px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;display:inline-block;width:668px;border-width:1px;border-style:solid;border-color:rgb(226, 226, 226);box-shadow:rgb(226, 226, 226) 0px 16px 1px -13px;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">精选提问：</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;word-wrap:break-word !important;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">问1：</span></strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">当前网关实例因为网络的原因，如果没有订阅到消息，消息会重发吗？</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">答：</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">不会。但内存缓存会定期清理，以解决这种数据不同步的问题。也可以主动清理。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">问2：</span></strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">网关使用了zuul了吗？还是自己实现的网关？</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">答：</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">网关于Spring Cloud Gateway开发，他就是一个类似于zuul的API网关。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">问3：</span></strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">netttyserver是干嘛的？</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">答：</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">那是Spring Cloud Gateway本身使用的组件, 用来接收与处理请求的。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">问4：</span></strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">文件上传的接口也通过网关吗？</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">答：</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">这个要看具体需求。也可以走网关,  但会对性能有一定影响。不走网关, 就得在应用那一层来控制权限。网关控制权限, 只是相当于把权限校验前移与统一化了。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">问5：</span></strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">在微服务化之后，网关路由到服务，调用会有超时的情况怎么处理？有些接口是必须要这么长时间，例如批量操作 。只能通过加大超时时间吗？</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">答：</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">这个一个考虑适当增大超时时间,  另一个,  你可以考虑采用异步模式, 比如用任务来处理。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">问6：</span></strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">我想提问下，目前gateway我看实现是基于netty实现的http协议的，通过相关的mapping处理断言然后处理过滤器。那有基于netty的tcp协议的实现方案吗？基于tcp怎么整合断言和过滤器呢？</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;word-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">答：</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">TCP的我们也在考虑, 有这方面的需求.  但是直接基于TCP实现断言与过滤, 工作量估计会比较大.  现在倾向的方案是在网关前做一层TCP的协议转换, 将TCP将成 http 再发往网关. 这样可以直接利用网关现有能力。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"></span></p></div></div></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-right:8px;margin-left:8px;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:15px;"></span></p></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;border-width:0px;border-style:none;border-color:initial;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-right:10px;padding-left:10px;display:inline-block;width:558px;vertical-align:top;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;border-width:0px;border-style:none;border-color:initial;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(62, 62, 62);letter-spacing:0px;font-size:15px;">推荐阅读</strong><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></div></div></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;border-width:0px;border-style:none;border-color:initial;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:0.5em;margin-bottom:0.5em;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:1px;background-color:rgb(182, 228, 253);color:rgb(5, 115, 175);"></div></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;border-width:0px;border-style:none;border-color:initial;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75;color:rgb(62, 62, 62);letter-spacing:0px;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5MDEzMzg5Nw==&amp;mid=2660398456&amp;idx=1&amp;sn=e2536f01cc0361a4b33f4b65b2c900f2&amp;chksm=f742579ec035de88b1f803cb9ee08944bf546790e0d44572d81100b94916d68abc38fb074a96&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(87, 107, 149);text-decoration:underline;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);max-width:100%;box-sizing:border-box;overflow-wrap:break-word;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">应用基础框架之权限控制</span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5MDEzMzg5Nw==&amp;mid=2660397065&amp;idx=1&amp;sn=4fd84714ace8af312abca4f58391858e&amp;chksm=f74252efc035dbf952d5985d50564a441f9283dae0bc1b06fded31d8ad067e4f4ba60bb775fd&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(87, 107, 149);text-decoration:underline;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);max-width:100%;box-sizing:border-box;overflow-wrap:break-word;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">普元容器云关键设计和实践之路</span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5MDEzMzg5Nw==&amp;mid=2660395551&amp;idx=1&amp;sn=2f186d7f6099ae9336816e2d941828e1&amp;chksm=f74248f9c035c1ef5ca1285b027a2012d9a28dbd6e52482f3000807aba243475f3ac8b612f7e&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(87, 107, 149);text-decoration:underline;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">容器时代的DevOps部署</span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></div></div></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [4].webp" type="image/webp" data-filename="640.webp" height="172" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;white-space:normal;float:left;width:123px !important;visibility:visible !important;" width="123"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;text-indent:0em;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;word-wrap:break-word !important;">关于作者</span></strong><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;text-indent:0em;word-wrap:break-word !important;">：</span>将晓渔，现任普元云计算架</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">构师。</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">曾在PDM，云计算，数据备份，移动互联相关领域公司工作，十年以上IT工作经验。</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">曾为科企桌面虚拟化产品的核心工程师，爱数容灾备份云柜系统设计师，万达信息的食安管理与追溯平台开发经理。</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">国内IAAS云计算的早期实践者，容器技术专家。</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;"></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [5].webp" type="image/webp" data-filename="640.webp" height="123" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;height:auto !important;color:rgb(62, 62, 62);font-size:16px;float:left;visibility:visible !important;width:123px !important;" width="123"/><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;text-indent:0em;word-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;font-size:14px;word-wrap:break-word !important;">关于EAWorld</span></strong><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;text-indent:0em;font-size:14px;word-wrap:break-word !important;">：微服务，DevOps，数据治理，移动架构原创技术分享。<strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;">长按二维码关注！</strong></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;white-space:normal;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word;text-indent:0em;font-size:14px;word-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></strong></span></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;display:flex;justify-content:flex-end;align-items:center;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;width:20px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;width:20px;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [6].webp" type="image/webp" data-filename="640.webp" height="21" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;display:block;width:100% !important;visibility:visible !important;" width="20"/></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;display:inline-block;text-align:right;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:16px;color:#3f3f3f;letter-spacing:2px;margin-bottom:-15px;transform:rotate(0deg);-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);">在看点这里</div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;width:22px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;width:22px;margin-top:15px;"><img src="基于Redis实现Spring Cloud Gateway的动态管理_files/640 [1].gif" type="image/gif" data-filename="640.gif" height="22" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;display:block;width:100% !important;visibility:visible !important;" width="22"/></div></div></div></div>
                </div>
                

                
  


                
                

                
                                

                
                            </div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 