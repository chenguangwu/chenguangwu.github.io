<html>
<head>
  <title>MySql字符转义 - 风生水起 - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6734"/>
<h1>MySql字符转义 - 风生水起 - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/6 10:24</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.cnblogs.com/end/archive/2011/04/01/2002516.html"><i>http://www.cnblogs.com/end/archive/2011/04/01/2002516.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:'PingFang SC', 'Helvetica Neue', Helvetica, Arial, sans-serif;word-break:break-all;line-height:160%;text-align:left;background-color:rgb(246, 246, 246);font-size:14px;"><div><div><div style="text-align:left;"><div><div style="color:rgb(75, 75, 75);font-size:13px;background-color:white;"><div style="word-break:break-word;line-height:1.5;"><div><p style="font-size:13px;margin:10px auto;text-indent:0px;">在字符串中，某些序列具有特殊含义。这些序列均用反斜线(‘\’)开始，即所谓的<em>转义字符</em>。MySQL识别下面的转义序列：</p> <table border="1" cellpadding="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border:1px solid silver;border-collapse:collapse;word-break:break-word;display:block;overflow:scroll;"> <tbody> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\0 </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">ASCII 0(NUL)字符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\' </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">单引号(‘'’)。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\&quot; </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">双引号(‘&quot;’)。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\b </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">退格符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\n </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">换行符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\r </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">回车符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\t </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">tab字符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\Z </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;"><span>ASCII  26(</span>控制（Ctrl）-Z)。该字符可以编码为‘\Z’，以允许你解决在Windows中<span>ASCII  26</span>代表文件结尾这一问题。(如果你试图使用<span>mysql <em>db_name</em> &lt;  <em>file_name</em></span>，ASCII 26会带来问题）。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\\ </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">反斜线(‘\’)字符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\% </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">‘%’字符。参见表后面的注解。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\_ </p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">‘_’字符。参见表后面的注解。</p></td></tr></tbody></table> <p style="font-size:13px;margin:10px auto;text-indent:0px;">这些序列对大小写敏感。例如，‘\b’解释为退格，但‘\B’解释为‘B’。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;">‘\%’和‘\_’序列用于搜索可能会解释为通配符的模式匹配环境中的‘%’和‘_’文字实例。参见<a href="http://www.cnblogs.com/end/admin/functions.html#string-comparison-functions" style="color:rgb(0, 0, 0);" title="12.3.1. String Comparison Functions">12.3.1节，“字符串比较函数”</a>。请注意如果你在其它环境中使用‘\%’或‘\_’，它们返回字符串‘\%’和‘\_’，而不是‘%’和‘_’。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;">在其它转义序列中，反斜线被忽略。也就是说，转义字符解释为仿佛没有转义。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;">有几种方式可以在字符串中包括引号：</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;"><span>·<span>          </span></span>在字符串内用‘'’引用的‘'’可以写成‘''’。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;"><span>·<span>          </span></span>在字符串内用‘&quot;’引用的‘&quot;’可以写成‘&quot;&quot;’。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;"><span>·<span>          </span></span>可以在引号前加转义字符(‘\’)。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;"><span>·<span>          </span></span>在字符串内用‘&quot;’引用的‘'’不需要特殊处理，不需要用双字符或转义。同样，在字符串内用‘'’引用的‘&quot;’也不需要特殊处理。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;">下面的SELECT语句显示了引用和转义如何工作：</p><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">mysql&gt; <strong><span>SELECT 'hello', '&quot;hello&quot;', '&quot;&quot;hello&quot;&quot;', 'hel''lo', '\'hello';</span></strong></pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+-------+---------+-----------+--------+--------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">| hello | &quot;hello&quot; | &quot;&quot;hello&quot;&quot; | hel'lo | 'hello |</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+-------+---------+-----------+--------+--------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"> </pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">mysql&gt; <strong><span>SELECT &quot;hello&quot;, &quot;'hello'&quot;, &quot;''hello''&quot;, &quot;hel&quot;&quot;lo&quot;, &quot;\&quot;hello&quot;;</span></strong></pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+-------+---------+-----------+--------+--------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">| hello | 'hello' | ''hello'' | hel&quot;lo | &quot;hello |</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+-------+---------+-----------+--------+--------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"> </pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">mysql&gt; <strong><span>SELECT 'This\nIs\nFour\nLines';</span></strong></pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+--------------------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">| This</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">Is</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">Four</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">Lines |</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+--------------------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"> </pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">mysql&gt; <strong><span>SELECT 'disappearing\ backslash';</span></strong></pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+------------------------+</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">| disappearing backslash |</pre><pre style="margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;">+------------------------+</pre> <p style="font-size:13px;margin:10px auto;text-indent:0px;">如果你想要在字符串列内插入二进制数据(例如BLOB)，必须通过转义序列表示下面的字符：</p> <table border="1" cellpadding="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border:1px solid silver;border-collapse:collapse;word-break:break-word;display:block;overflow:scroll;"> <tbody> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">NUL</p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">NUL字节<span>(ASCII  0)</span>。用‘<span>\0’</span>表示该字符(反斜线后面跟一个ASCII‘0’字符)。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">\</p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">反斜线(ASCII 92)。用‘\\’表示该字符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">'</p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">单引号(ASCII 39)。用‘\'’表示该字符。</p></td></tr> <tr> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">&quot;</p></td> <td style="font-size:12px;font-family:Verdana, Helvetica, Arial;word-break:break-all;line-height:150%;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;"> <p style="font-size:13px;margin:10px auto;text-indent:0px;">双引号<span>(ASCII  34)</span>。用‘\&quot;’表示该字符。</p></td></tr></tbody></table> <p style="font-size:13px;margin:10px auto;text-indent:0px;">当编写应用程序时，在包含这些特殊字符的字符串用于发送到MySQL服务器的SQL语句中的数据值之前，必须对它们正确进行转义。可以用两种方法来完成：</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;"><span>·<span>          </span></span>用转义特殊字符的函数处理字符串。例如，在C程序中，可以使用mysql_real_escape_string()<span>  C API</span>函数来转义字符。参见<a href="http://www.cnblogs.com/end/admin/apis.html#mysql-real-escape-string" style="color:rgb(0, 0, 0);" title="25.2.3.52. mysql_real_escape_string()">25.2.3.52节，“mysql_real_escape_string()”</a>。<span>Perl  DBI</span>接口提供一个quote方法来将特殊字符转换为正确的转义序列。参见<a href="http://www.cnblogs.com/end/admin/apis.html#perl" style="color:rgb(0, 0, 0);" title="25.4. MySQL Perl API">25.4节，“MySQL Perl  API”</a>。</p> <p style="font-size:13px;margin:10px auto;text-indent:0px;">·<span>         </span>显式转义特殊字符，许多<span>MySQL  API</span>提供了占位符功能，允许你在查询字符串中插入特殊标记，然后当你发出查询时将数据值同它们绑定起来。在这种情况下，API关注转义值中的特殊字符。</p></div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 