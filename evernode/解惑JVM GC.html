<html>
<head>
  <title>解惑JVM GC</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="11736"/>
<h1>解惑JVM GC</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/4/2 0:56</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzIwMzY1OTU1NQ==&mid=2247484091&idx=1&sn=183f4491ff058ad11d7b38532d75abda&chksm=96cd42f7a1bacbe1c514086e3fcc41831e06fd9342ba89b7cf9f004b526280d3ce853da85160&mpshare=1&scene=1&srcid=0402xvFJoRJF51NSde5JD8qd#rd"><i>http://mp.weixin.qq.com/s?__biz=MzIwMzY1OTU1NQ==&amp;mid=2247484091&amp;idx=1&amp;sn=183f4491ff058ad11d7b38532d75abda&amp;chksm=96cd42f7a1bacbe1c514086e3fcc41831e06fd9342ba89b7cf9f004b526280d3ce853da85160&amp;mpshare=1&amp;scene=1&amp;srcid=0402xvFJoRJF51NSde5JD8qd#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="margin:0;position:relative;padding:20px 15px 15px;background-color:#fff"><div style="margin:0;padding:0"><h2 style="margin:0;padding:0;margin-bottom:10px;line-height:1.4;font-weight:400;font-size:24px"> 解惑JVM GC </h2><div style="margin:0;padding:0;margin-bottom:18px;line-height:20px;font-size:0"><em style="margin:0;padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;color:#8c8c8c">2018-03-30</em><em style="margin:0;padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;color:#8c8c8c">特牛的阿飞</em><a href="http://mp.weixin.qq.com/s?__biz=MzIwMzY1OTU1NQ==&amp;mid=2247484091&amp;idx=1&amp;sn=183f4491ff058ad11d7b38532d75abda&amp;chksm=96cd42f7a1bacbe1c514086e3fcc41831e06fd9342ba89b7cf9f004b526280d3ce853da85160&amp;mpshare=1&amp;scene=1&amp;srcid=0402xvFJoRJF51NSde5JD8qd##" style="margin:0;padding:0;color:#607fa6;text-decoration:none;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px">占小狼的博客</a></div><div style="margin:0;padding:0;overflow:hidden;color:#3e3e3e"><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">前言</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">JVM的GC机制让Java程序员省去了自己垃圾回收的烦恼，大大提高了生产效率。但是正因为JVM垃圾回收机制足够优秀，导致很多Java程序员对JVM这个黑盒了解甚少，很多人没有去了解它，很多人也没机会去了解它。然而要想成为一名优秀的Java程序员，了解JVM和它的GC机制，写出JVM GC机制更喜欢的代码，是必须要掌握的一门技术；</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">这篇文章我主要说一下<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">如何初步诊断JVM的GC是否允许正常</strong>，重点讲解<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">诊断GC</code>，而不是JVM基础和GC基础。所以看这篇文章，需要对JVM有一定的了解，比如常用的垃圾回收器，堆的模型以及分代等，如果你还对JVM一无所知，那么请先花点时间看一下周志明的&lt;&lt;深入理解Java虚拟机&gt;&gt;，重点关注&quot;<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">第二部分 自动内存管理机制</strong>&quot;。</p><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">GC概念纠正</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">对GC机制有一定了解的同学都知道，GC主要有YoungGC，OldGC，FullGC（还有G1中独有的Mixed GC，收集整个young区以及部分Old区，提及的概率相对少很多，本篇文章不打算讲解），在讲解如何判断这三种GC是否正常之前，先再次解释一下这三种GC，因为很多很多的同学对OldGC和FullGC有误解；</p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">YoungGC</strong>：应该是最没有歧义的一种GC了，只是有些地方称之为<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">Minor GC</code>，或者简称<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">YGC</code>，都是没有问题的；</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">OldGC</strong>：截止Java发展到现在JDK9为止，<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">只单独回收Old区的只有CMS GC</code>，且是CMS的<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">concurrent collection</code>模式（CMS有两种模式，请参考寒泉子的文章JVM源码分析之SystemGC完全解读）。G1出来之前，CMS GC也是OLTP系统最常用的；而JDK8以前默认的垃圾回收器ParallelOldGC，在Old满后触发的是FullGC；</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">FullGC</strong>：有些地方称之为<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">Major GC</code>，Major GC通常是跟FullGC是等价的，都是收集整个GC堆。但因为HotSpot VM发展了这么多年，外界对各种名词的解读已经完全混乱了，当有人说“Major GC”的时候一定要问清楚他想要指的是上面的FullGC还是OldGC（参考R大的Major GC和Full GC的区别）。对这个GC的误解最大，尤其最常用的ParNew+CMS组合，很多人误解FullGC可能是受到<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">jstat</code>结果的影响。<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">如果配置了CMS垃圾回收器，那么jstat中的FGC并不表示就一定发生了FullGC，很有可能是发生了CMS GC</code>，<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">而且每发生一次CMS GC，jstat中的FGC就会+2</code>（因为CMS GC时初始化标记和重新标记都会STW，所以FGC的值会+2，可以通过让JVM按照预期GC提供的代码验证）；事实上，FullGC的触发条件比较苛刻，<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">判断是否发生了FullGC最好通过GC日志</code>，所以<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">强烈建议生产环境开启GC日志</strong>，它的价值远大于它对性能的影响；</p></li></ul><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">FullGC触发条件</span></h1><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">没有配置 -XX:+DisableExplicitGC情况下System.gc()可能会触发FullGC；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">Promotion failed；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">concurrent mode failure；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">Metaspace Space使用达到MaxMetaspace阈值；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">执行jmap -histo:live或者jmap -dump:live</span></p></li></ul><blockquote style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding-left:10px;border-left:3px solid #dbdbdb;margin-top:1em;margin-bottom:1em;padding:15px 15px 15px 1rem;border-left-width:6px;border-left-color:rgb(220,230,240);white-space:normal;color:rgb(129,145,152);font-size:0.9em;line-height:inherit;background:rgb(242,247,251);overflow:auto"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit">说明：统计发现之前YGC的平均晋升大小比目前old gen剩余的空间大，触发CMS GC；Metaspace Space使用达到Metaspace阈值是触发CMS GC；</p></blockquote><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">健康的GC</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">诊断GC的第一步，当然是知道你的JVM的GC是否正常。那么GC是否正常，首先就要看YoungGC，OldGC和FullGC是否正常；无论是定位YoungGC，OldGC，FullGC哪一种GC，判断其是否正常主要从两个维度：<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">GC频率和STW时间</code>；要得到这两个维度的值，我们需要知道JVM运行了多久，执行如下命令即可：</p><blockquote style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding-left:10px;border-left:3px solid #dbdbdb;margin-top:1em;margin-bottom:1em;padding:15px 15px 15px 1rem;border-left-width:6px;border-left-color:rgb(220,230,240);white-space:normal;color:rgb(129,145,152);font-size:0.9em;line-height:inherit;background:rgb(242,247,251);overflow:auto"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit">ps -p pid -o etime</p></blockquote><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">运行结果参考，下面的运行结果表示这个JVM运行了24天16个小时37分35秒，如果JVM运行时间没有超过一天，执行结果是这样<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">&quot;16:37:35&quot;</code>：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;line-height:inherit;background-color:rgb(255,255,255)"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(168,161,159);line-height:18px;border-radius:0;background:rgb(27,25,24);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;overflow-y:auto !important">[afei@ubuntu ~]$ ps -p <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">11864</span> -o etime<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    ELAPSED<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24</span>-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">16</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(123,151,38);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">:</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">37</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(123,151,38);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">:</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">35</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">那么怎样的GC频率和STW时间才算是正常呢？这里以我以前开发过的一个<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">读多写少</code>的dubbo服务作为参考，该dubbo服务基本情况如下：</p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">日调用量1亿+次，接口平均响应时间6ms以内</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">4个JVM</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">每个JVM设置Xmx和Xms为4G，Xmn1G</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">4核CPU&amp;8G内存服务器</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">JDK7</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">AWS云虚拟机</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">GC情况如下图所示：</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><img src="解惑JVM GC_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;margin-right:auto;margin-left:auto;border-width:2px;border-style:solid;border-color:rgb(238,238,238);border-radius:6px;font-size:inherit;color:inherit;line-height:inherit;display:block;width:auto !important;visibility:visible !important" title="GC统计信息"/><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:10px;font-size:0.7em;color:rgb(153,153,153);line-height:inherit;text-align:center">GC统计信息</div></div><blockquote style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding-left:10px;border-left:3px solid #dbdbdb;margin-top:1em;margin-bottom:1em;padding:15px 15px 15px 1rem;border-left-width:6px;border-left-color:rgb(220,230,240);white-space:normal;color:rgb(129,145,152);font-size:0.9em;line-height:inherit;background:rgb(242,247,251);overflow:auto"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit">根据这张图输出数据，可以得到如下一些信息：</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">JVM运行总时间为6944534秒（day<em style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-style:italic;font-size:inherit;color:inherit;line-height:inherit">24</em>3600+hour<em style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-style:italic;font-size:inherit;color:inherit;line-height:inherit">3600+minutes</em>60+second）</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">YoungGC频率为4s/次（建议通过GC日志中两次YoungGC时间差计算得出）</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">CMS GC频率为9天/次（FGC=18，即最多发生9次CMS GC，所以CMS GC频率为80/9≈9天/次）</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">每次YoungGC的时间为6ms（通过YGCT/YGC计算得出）</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">FullGC几乎没有（JVM总计运行80天，FGC才18，即使是18次FullGC，FullGC频率也才4.5天/次，更何况实际上FGC=18肯定包含了若干次CMS GC）</span></p></li></ol></blockquote><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">根据上面的GC情况，给个<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">可参考的健康的GC状况</code>：</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">YoungGC频率5秒/次；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">CMS GC频率不超过1天/次；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">每次YoungGC的时间不超过30ms；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">FullGC频率尽可能完全杜绝；</span></p></li></ol><blockquote style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding-left:10px;border-left:3px solid #dbdbdb;margin-top:1em;margin-bottom:1em;padding:15px 15px 15px 1rem;border-left-width:6px;border-left-color:rgb(220,230,240);white-space:normal;color:rgb(129,145,152);font-size:0.9em;line-height:inherit;background:rgb(242,247,251);overflow:auto"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit">说明：G1&amp;CMS时，FullGC回收算法会退化成Serial+SerialOld，即单线程串行回收，且完全STW，影响很大且STW时间完全不可预估，所以FullGC频率尽可能完全杜绝。另外，<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">可参考的健康的GC状况</code>这里只是参考，不是绝对，不能说这个GC状况有多好，起码横向对比业务规模，以及服务器规格，你的GC状况不能与上面的dubbo服务有明显的差距；</p></blockquote><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">了解GC健康时候的样子，那么接下来把脉你的JVM GC，一一讲解YoungGC，OldGC，FullGC。看看是有疾在腠理，还是在肌肤，还是在肠胃，甚至已经在骨髓病入膏肓了；</p><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">YoungGC</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">YoungGC是最频繁发生的，发生的概率是OldGC和FullGC的的10倍，100倍，甚至1000倍。同时YoungGC的问题也是最难定位的。这里给出YoungGC定位三板斧（都是踩过坑）：</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">查看服务器SWAP&amp;IO情况，如果服务器发生SWAP，会严重拖慢GC效率，导致STW时间异常长，拉长接口响应时间，从而影响用户体验（推荐神器<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">sar</code>，yum install sysstat即可，想了解该命令，请搜索&quot;<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">linux sar</code>&quot;）；</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">查看StringTable情况（请参考探索StringTable提升YGC性能）</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">排查每次YoungGC后幸存对象大小（JVM模型基于分配的对象朝生夕死的假设设计，如果每次YoungGC后幸存对象较大，可能存在问题）</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">未完待续……（可以在留言中分享你的IDEA）</span></p></li></ol><blockquote style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding-left:10px;border-left:3px solid #dbdbdb;margin-top:1em;margin-bottom:1em;padding:15px 15px 15px 1rem;border-left-width:6px;border-left-color:rgb(220,230,240);white-space:normal;color:rgb(129,145,152);font-size:0.9em;line-height:inherit;background:rgb(242,247,251);overflow:auto"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit">排查每次YoungGC后幸存对象大小可通过GC日志中发生YoungGC的日志计算得出：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"/>例如下面两行GC日志，黑色加粗部分，第二次YoungGC相比第一次YoungGC，整个Heap并没有增长（都是647K），说明回收效果非常理想：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"/>2017-11-28T10:22:57.332+0800: [GC (Allocation Failure) 2017-11-28T10:22:57.332+0800: [ParNew: 7974K-&gt;0K(9216K), 0.0016636 secs] <strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">7974K-&gt;647K</strong>(19456K), 0.0016865 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"/>2017-11-28T10:22:57.334+0800: [GC (Allocation Failure) 2017-11-28T10:22:57.334+0800: [ParNew: 7318K-&gt;0K(9216K), 0.0002355 secs] <strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">7965K-&gt;647K</strong>(19456K), 0.0002742 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"/>再看下面两行GC日志，黑色加粗部分，第二次YoungGC相比第一次YoungGC，整个Heap从2707K增长到了4743K，说明回收效果一般：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"/>2017-11-28T10:26:41.890+0800: [GC (Allocation Failure) 2017-11-28T10:26:41.890+0800: [ParNew: 7783K-&gt;657K(9216K), 0.0013021 secs] <strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">7783K-&gt;2707K</strong>(19456K), 0.0013416 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"/>2017-11-28T10:26:41.892+0800: [GC (Allocation Failure) 2017-11-28T10:26:41.892+0800: [ParNew: 7982K-&gt;0K(9216K), 0.0018354 secs] <strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">10032K-&gt;4743K</strong>(19456K), 0.0018536 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]</p></blockquote><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">可参考的健康的GC状况</code>给出建议YoungGC频率5秒/次，经验值3秒~6秒/次都是比较合理的YoungGC频率；</p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">如果YoungGC频率远高于这个值，例如20秒/次，30秒/次，甚至60秒/次，这种情况下，JVM相当空闲，处于基本上无事可做的状态。建议缩容，减少服务器浪费；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">如果YoungGC频率远低于这个值，例如1秒/次，甚至1秒/好多次，这种情况下，JVM相当繁忙，建议follow如下步骤进行初步症断：</span></p></li></ul><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">检查Young区，Young区在整个堆占比在25%~40%比较合理，如果Young区太小，建议扩大Xmn。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">检查SurvivorRatio，保持默认值8即可，Eden:S0:S1=8:1:1是一个比较合理的值；</span></p></li></ol><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">OldGC</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)">上面已经提及：到目前为止HotSpot JVM虚拟机<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">只单独回收Old区的只有CMS GC</code>。触发CMS GC条件比较简单，JVM有一个线程定时扫描Old区，时间间隔可以通过参数<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">-XX:CMSWaitDuration=2000</code>设置（默认就是2s），如果发现Old区占比超过参数<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">-XX:CMSInitiatingOccupancyFraction=75</code>设定值（CMS条件下默认为68%），就会触发CMS GC。建议搭配<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">-XX:+UseCMSInitiatingOccupancyOnly</code>参数使用，简化CMS GC触发条件，<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">只有</strong>在Old区占比满足条件的情况下才触发CMS GC；</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">可参考的健康的GC状况</code>给出建议CMS GC频率不超过1天/次，如果CMS GC频率1天发生数次，甚至上10次，说明你的GC情况病的不轻了，建议follow如下步骤进行初步症断：</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">检查Young区与Old区比值，尽量留60%以上的堆空间给Old区；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">通过jstat查看每次YoungGC后晋升到Old区对象占比，如果发现每次YoungGC后Old区涨好几个百分点，甚至上10个点，说明有大对象，建议dump（<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">jmap -dump:format=b,file=app.bin pid</code>）后用MAT分析；</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">如果不停的CMS GC，Old区降不下去，建议先执行<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">jmap -histo pid | head -n20</code> 查看TOP20对象分布，如果除了<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">[B和[C</code>，即byte[]和char[]，还有其他占比较大的实例，如下图所示中TOP1的Object数组，也可通过dump后用MAT分析问题；</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">如果TOP20对象中有<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">StandartSession</strong>对象，排查你的业务代码中有没有显示使用<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">HttpSession</strong>，例如<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">String id = request.getSession().getId();</code>，一般的OLTP系统几乎不会使用<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">HttpSession</strong>，且<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">HttpSession</strong>的的生命周期很长，会加快Old区增长速度；</p></li></ol><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><img src="解惑JVM GC_files/640 [1].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;margin-right:auto;margin-left:auto;border-width:2px;border-style:solid;border-color:rgb(238,238,238);border-radius:6px;font-size:inherit;color:inherit;line-height:inherit;display:block;width:auto !important;visibility:visible !important" title="异常的大对象.png"/><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:10px;font-size:0.7em;color:rgb(153,153,153);line-height:inherit;text-align:center">异常的大对象.png</div></div><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em;color:rgb(62,62,62);white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit">FullGC</span></h1><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">如果配置CMS，由于CMS采用标记清理算法，会有内存碎片的问题，推荐配置一个查看内存碎片程度的JVM参数PrintFLSStatistics。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">如果配置ParallelOldGC，那么每次Old区满后，会触发FullGC，如果FullGC频率过高，也可以通过上面<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit">OldGC段落</strong>提及的排查方法；</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em">如果没有配置<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">-XX:+DisableExplicitGC</code>，即没有屏蔽<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">System.gc()</code>触发FullGC，那么可以通过排查GC日志中有System字样判断是否System.gc()触发（日志样本：<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">558082.666: [Full GC (System) [PSYoungGen: 368K-&gt;0K(42112K)] [PSOldGen: 36485K-&gt;32282K(87424K)] 36853K-&gt;32282K(129536K) [PSPermGen: 34270K-&gt;34252K(196608K)], 0.2997530 secs]</code> ）；或者通过<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">jstat -gccause pid 2s pid</code>判定，<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">LGCC</code>表示最近一次GC原因，如果为&quot;System.gc&quot;，表示由System.gc()触发，<code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:2px;margin-left:2px;padding:2px 4px;font-size:inherit;color:rgb(233,105,0);line-height:inherit;border-radius:4px;background:rgb(248,248,248)">GCC</code>表示当前GC原因，如果当前没有GC，那么就是No GC：</p></li></ul><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;line-height:inherit;background-color:rgb(255,255,255)"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(168,161,159);line-height:18px;border-radius:0;background:rgb(27,25,24);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;overflow-y:auto !important"> [afei@aliyun~]$ jstat -gccause <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">23606</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">2</span>s <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>  S<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                 <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">00</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100.00</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">37.50</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">83.17</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">93.31</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">84.35</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5597</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span>     <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">000</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span> G1 Evacuation Pause  No GC               <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">00</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100.00</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">37.50</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">83.17</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">93.31</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">84.35</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5597</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span>     <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">000</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span> G1 Evacuation Pause  No GC               <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">00</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100.00</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">37.50</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">83.17</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">93.31</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">84.35</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5597</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span>     <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">000</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span> G1 Evacuation Pause  No GC               <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">00</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100.00</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">37.50</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">83.17</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">93.31</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">84.35</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5597</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span>     <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">000</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span> G1 Evacuation Pause  No GC               <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">00</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100.00</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">37.50</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">83.17</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">93.31</span>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">84.35</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5597</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span>     <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">000</span>   <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(223,83,32);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">24.116</span> G1 Evacuation Pause  No GC<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);font-size:16px;white-space:normal;line-height:inherit;background-color:rgb(255,255,255)"><img src="解惑JVM GC_files/640 [2].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;margin-right:auto;margin-left:auto;border-width:2px;border-style:solid;border-color:rgb(238,238,238);border-radius:6px;font-size:inherit;color:inherit;line-height:inherit;display:block;width:auto !important;visibility:visible !important" title="System.gc引起的FullGC.png"/></div></div><a href="http://mp.weixin.qq.com/s?__biz=MzIwMzY1OTU1NQ==&amp;mid=2247484091&amp;idx=1&amp;sn=183f4491ff058ad11d7b38532d75abda&amp;chksm=96cd42f7a1bacbe1c514086e3fcc41831e06fd9342ba89b7cf9f004b526280d3ce853da85160&amp;mpshare=1&amp;scene=1&amp;srcid=0402xvFJoRJF51NSde5JD8qd##" style="text-decoration:none;display:block;padding:.75em 1em 0;-webkit-tap-highlight-color:rgba(0,0,0,0);color:#3e3e3e;border:1px solid #eaeaea;margin:20px 0"><p style="margin:0;padding:0;position:relative;padding-bottom:.5em;font-size:15px">内容转载自公众号</p><div style="margin:0;padding:10px 0;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center"><div style="margin:0;padding:0"><span style="margin:0;display:inline-block;background-color:#fff;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;overflow:hidden;vertical-align:middle;width:27px;height:27px;padding:0;margin-right:.5em"><img src="解惑JVM GC_files/0.jpg" type="image/jpeg" data-filename="0.jpg" alt="匠心零度" style="margin:0;padding:0;display:block;width:100%;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;background-color:#eee;height:100% !important"/></span></div><div style="margin:0;padding:0;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;box-flex:1;flex:1;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal"> 匠心零度 </div><div style="margin:0;padding:0;font-size:14px;color:#8c8c8c;padding-left:1em;white-space:nowrap">了解更多</div></div></a></div></div></div></span>
</div></body></html> 