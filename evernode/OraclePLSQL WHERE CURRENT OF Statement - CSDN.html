<html>
<head>
  <title>Oracle/PLSQL: WHERE CURRENT OF Statement - CSDN博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="9508"/>
<h1>Oracle/PLSQL: WHERE CURRENT OF Statement - CSDN博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/6/22 14:08</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://blog.csdn.net/fenglibing/article/details/1859805"><i>https://blog.csdn.net/fenglibing/article/details/1859805</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="outline:0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:0px;font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:1.57143;background-color:rgb(245, 246, 247);color:rgb(51, 51, 51);"><div style="outline:0px;box-sizing:content-box;"><span style="box-sizing:inherit;outline:0px;"><div style="box-sizing:inherit;outline:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.0470588) 0px 2px 4px 0px;">
	<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:16px;">
			<span style="border-radius:50%;display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;font-size:12px;outline:0px;box-sizing:inherit;color:rgb(121, 165, 229);border:1px solid rgb(228, 237, 250);margin-right:8px;margin-top:4px;float:left;">译</span>		<h1 style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:24px;word-break:break-all;">Oracle/PLSQL: WHERE CURRENT OF Statement</h1>
	</div>
	<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:14px;border-bottom:1px solid rgb(227, 227, 227);">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;color:rgb(133, 133, 133);display:flex;">
												<span style="box-sizing:inherit;outline:0px;margin-right:14px;">2007年10月31日 17:31:00</span>
			<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-left:auto;float:right;">
				<span style="box-sizing:inherit;outline:0px;margin-right:14px;">阅读数：10177</span>
											</div>
		</div>
	</div>
	<div style="box-sizing:inherit;outline:0px;display:block;position:relative;padding-top:16px;">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-break:break-all;">
                    
            <div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;word-break:break-all;">
                 
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:12pt;color:#4f618e;">Oracle/PLSQL: WHERE CURRENT OF Statement</span></strong></div>
<div align="center" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;"></span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">If you plan on updating or deleting records that have been referenced by a <a href="http://www.techonthenet.com/oracle/cursors/for_update.php" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;" target="_blank"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;color:#333399;">Select For Update</span></strong></a> statement, you can use the <strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;">Where Current Of</strong> statement.</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">译：如果你想删除或者更新被</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;"><a href="http://www.techonthenet.com/oracle/cursors/for_update.php" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;" target="_blank"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;color:#333399;">Select For Update</span></strong></a></span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">引用的记录，你可以使用</span><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;">Where Current Of</span></strong><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">语句。</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">The syntax for the <strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;">Where Current Of</strong> statement is either:</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">UPDATE table_name<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    SET set_clause<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    WHERE CURRENT OF cursor_name;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">OR</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">DELETE FROM table_name<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>WHERE CURRENT OF cursor_name;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"> </div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">The Where Current Of statement allows you to update or delete the record that was last fetched by the cursor.</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">译：</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">Where Current Of</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">语句允许你更新或者是删除最后由</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">cursor</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">取的记录。</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;color:#4f618e;">Updating using the WHERE CURRENT OF Statement</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">Here is an example where we are updating records using the <strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;">Where Current Of</strong> Statement:</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">译：下面一个使用</span><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;">Where Current Of</span></strong><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">更新记录的例子：</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">CREATE OR REPLACE Function FindCourse<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>   ( name_in IN varchar2 )<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>   RETURN number<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>IS<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    cnumber number;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">    CURSOR c1<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    IS<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>       SELECT course_number, instructor<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        from courses_tbl<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        where course_name = name_in<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        FOR UPDATE of instructor;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>BEGIN</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">open c1;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>fetch c1 into cnumber;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>if c1%notfound then<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>     cnumber := 9999;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">else<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>     UPDATE courses_tbl<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        SET instructor = 'SMITH'<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        WHERE CURRENT OF c1;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">    COMMIT;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">end if;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>close c1;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">RETURN cnumber;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">END;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"> </strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;color:#4f618e;">Deleting using the WHERE CURRENT OF Statement</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">Here is an example where we are deleting records using the <strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;">Where Current Of</strong> Statement:</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">译：下面一个使用</span><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;">Where Current Of</span></strong><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:9pt;">删除记录的例子：</span></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">CREATE OR REPLACE Function FindCourse<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>   ( name_in IN varchar2 )<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>   RETURN number<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>IS<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    cnumber number;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">    CURSOR c1<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    IS<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>       SELECT course_number, instructor<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        from courses_tbl<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        where course_name = name_in<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        FOR UPDATE of instructor;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>BEGIN</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">open c1;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>fetch c1 into cnumber;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>if c1%notfound then<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>     cnumber := 9999;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">else<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>     DELETE FROM courses_tbl<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        WHERE CURRENT OF c1;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">    COMMIT;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">end if;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>close c1;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">RETURN cnumber;</span></strong></div>
<div align="left" style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><strong style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;font-weight:700;word-break:break-all;font-size:9pt;color:#2e5348;">END;</span></strong></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"> </div>
             </div>
                <span style="display:block;clear:both;"></span></div>
				
        	</div>
	
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:16px;margin-top:36px;border-bottom:1px solid rgb(227, 227, 227);">
						<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;">
			<span style="box-sizing:inherit;outline:0px;color:rgb(77, 77, 77);">文章标签：</span>
						<a href="http://so.csdn.net/so/search/s.do?q=delete&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">delete						</a><a href="http://so.csdn.net/so/search/s.do?q=function&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">function						</a><a href="http://so.csdn.net/so/search/s.do?q=table&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">table						</a><a href="http://so.csdn.net/so/search/s.do?q=c&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">c						</a>
		</div>
						<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:12px;margin-bottom:0px;">
			<span style="box-sizing:inherit;outline:0px;color:rgb(77, 77, 77);">个人分类：</span>
						<a href="https://blog.csdn.net/fenglibing/article/category/192853" style="box-sizing:inherit;outline:0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">ORACLE						</a>
		</div>
					</div>
	
	
		</div></span></div></div></div></div>
</div>
</span>
</div></body></html> 