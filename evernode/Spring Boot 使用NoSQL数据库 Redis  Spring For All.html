<html>
<head>
  <title>Spring Boot 使用NoSQL数据库 Redis | Spring For All</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5769"/>
<h1>Spring Boot 使用NoSQL数据库 Redis | Spring For All</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/12/8 18:01</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.spring4all.com/article/254"><i>http://www.spring4all.com/article/254</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:14px;"><div style="box-sizing:inherit;overflow-x:hidden;min-width:320px;background:rgb(255, 255, 255);font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;font-size:14px;line-height:1.4285em;color:rgba(0, 0, 0, 0.870588);background-color:#f3f3f3;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:stretch;align-items:stretch;"><div style="box-sizing:inherit;vertical-align:top;"><div style="box-sizing:inherit;background:rgb(255, 255, 255);box-shadow:rgba(34, 36, 38, 0.14902) 0px 1px 2px 0px;border-radius:0.285714rem;font-size:1rem;"><h3 style="font-size:1.28571rem;box-sizing:inherit;border:none;line-height:1.28571em;font-weight:700;padding:0px;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;text-transform:none;margin-top:-0.142857em;padding-bottom:0.214286rem;border-bottom:2px solid rgb(219, 40, 40);color:rgb(219, 40, 40);"><i style="height:1em;box-sizing:inherit;font-family:Icons;backface-visibility:hidden;-webkit-font-smoothing:antialiased;speak:none;text-align:center;margin:0px 0.25rem 0px 0px;width:1.18em;text-decoration:inherit;font-weight:400;font-style:normal;font-size:1.5em;display:table-cell;vertical-align:middle;padding-top:0.142857em;opacity:1;margin-bottom:0px;"><span style="font-size:1.5em;font-family:Icons;font-style:normal;font-weight:400;text-align:center;background:0px 0px !important;"></span></i> <div style="box-sizing:inherit;display:table-cell;vertical-align:middle;padding-left:0.75rem;">Spring Boot 使用NoSQL数据库 Redis</div></h3> <div style="line-height:1.6;box-sizing:inherit;padding:0px;overflow:auto;font-family:&quot;Microsoft YaHei&quot;, Helvetica, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Monaco, monospace, Tahoma, STXihei, 华文细黑, STHeiti, &quot;Helvetica Neue&quot;, &quot;Droid Sans&quot;, &quot;wenquanyi micro hei&quot;, FreeSans, Arimo, Arial, SimSun, 宋体, Heiti, 黑体, sans-serif;font-size:14px;text-size-adjust:100%;word-wrap:break-word;text-align:left;color:rgb(51, 51, 51);width:100%;background-color:rgb(255, 255, 255);"><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-bottom:16px;margin-top:0px;">Spring Boot中除了对常用的关系型数据库提供了优秀的自动化支持之外，对于很多NoSQL数据库一样提供了自动化配置的支持，包括：Redis, MongoDB, Elasticsearch, Solr和Cassandra。</p>
<h2 style="font-size:1.75em;box-sizing:border-box;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;font-weight:bold;line-height:1.225;margin-top:1em;margin-bottom:16px;position:relative;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);"><a name="使用Redis" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>使用Redis</h2><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库。</p>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="http://redis.io/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Redis官网</a></li><li style="box-sizing:border-box;"><a href="http://www.redis.cn/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Redis中文社区</a></li></ul>
<h4 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.4;font-weight:bold;font-size:1.25em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="引入依赖" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>引入依赖</h4><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Spring Boot提供的数据访问框架Spring Data Redis基于Jedis。可以通过引入<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>spring-boot-starter-redis<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>来配置依赖关系。</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>
<h4 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.4;font-weight:bold;font-size:1.25em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="参数配置" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>参数配置</h4><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">按照惯例在<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>application.properties<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>中加入Redis服务端的相关配置，具体说明如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span># REDIS (RedisProperties)
# Redis数据库索引（默认为0）
spring.redis.database=0
# Redis服务器地址
spring.redis.host=localhost
# Redis服务器连接端口
spring.redis.port=6379
# Redis服务器连接密码（默认为空）
spring.redis.password=
# 连接池最大连接数（使用负值表示没有限制）
spring.redis.pool.max-active=8
# 连接池最大阻塞等待时间（使用负值表示没有限制）
spring.redis.pool.max-wait=-1
# 连接池中的最大空闲连接
spring.redis.pool.max-idle=8
# 连接池中的最小空闲连接
spring.redis.pool.min-idle=0
# 连接超时时间（毫秒）
spring.redis.timeout=0
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">其中spring.redis.database的配置通常使用0即可，Redis在配置的时候可以设置数据库数量，默认为16，可以理解为数据库的schema</strong></p>
<h4 style="font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;padding:0px;box-sizing:border-box;line-height:1.4;font-weight:bold;font-size:1.25em;margin-top:1em;margin-bottom:16px;position:relative;"><a name="测试访问" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a>测试访问</h4><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">通过编写测试用例，举例说明如何访问Redis。</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>@RunWith(SpringJUnit4ClassRunner.class)
@SpringApplicationConfiguration(Application.class)
public class ApplicationTests {

    @Autowired
    private StringRedisTemplate stringRedisTemplate;

    @Test
    public void test() throws Exception {

        // 保存字符串
        stringRedisTemplate.opsForValue().set(&quot;aaa&quot;, &quot;111&quot;);
        Assert.assertEquals(&quot;111&quot;, stringRedisTemplate.opsForValue().get(&quot;aaa&quot;));

    }

}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">通过上面这段极为简单的测试案例演示了如何通过自动配置的<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>StringRedisTemplate<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>对象进行Redis的读写操作，该对象从命名中就可注意到支持的是String类型。如果有使用过spring-data-redis的开发者一定熟悉<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>RedisTemplate&lt;K, V&gt;<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>接口，<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>StringRedisTemplate<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>就相当于<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>RedisTemplate&lt;String, String&gt;<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>的实现。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">除了String类型，实战中我们还经常会在Redis中存储对象，这时候我们就会想是否可以使用类似<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>RedisTemplate&lt;String, User&gt;<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>来初始化并进行操作。但是Spring Boot并支持直接使用，需要我们自己实现<code style="box-sizing:border-box;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;padding:3px;margin:0px;border-radius:3px;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);margin-left:5px;margin-right:4px;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span>RedisSerializer&lt;T&gt;<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:14px;letter-spacing:-0.2em;"> </span></code>接口来对传入对象进行序列化和反序列化，下面我们通过一个实例来完成对象的读写操作。</p>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">创建要存储的对象：User</li></ul>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>public class User implements Serializable {

    private static final long serialVersionUID = -1L;

    private String username;
    private Integer age;

    public User(String username, Integer age) {
        this.username = username;
        this.age = age;
    }

    // 省略getter和setter

}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">实现对象的序列化接口</li></ul>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>
public class RedisObjectSerializer implements RedisSerializer&lt;Object&gt; {

  private Converter&lt;Object, byte[]&gt; serializer = new SerializingConverter();
  private Converter&lt;byte[], Object&gt; deserializer = new DeserializingConverter();

  static final byte[] EMPTY_ARRAY = new byte[0];

  public Object deserialize(byte[] bytes) {
    if (isEmpty(bytes)) {
      return null;
    }

    try {
      return deserializer.convert(bytes);
    } catch (Exception ex) {
      throw new SerializationException(&quot;Cannot deserialize&quot;, ex);
    }
  }

  public byte[] serialize(Object object) {
    if (object == null) {
      return EMPTY_ARRAY;
    }

    try {
      return serializer.convert(object);
    } catch (Exception ex) {
      return EMPTY_ARRAY;
    }
  }

  private boolean isEmpty(byte[] data) {
    return (data == null || data.length == 0);
  }
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">配置针对User的RedisTemplate实例</li></ul>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>
@Configuration
public class RedisConfig {

    @Bean
    JedisConnectionFactory jedisConnectionFactory() {
        return new JedisConnectionFactory();
    }

    @Bean
    public RedisTemplate&lt;String, User&gt; redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate&lt;String, User&gt; template = new RedisTemplate&lt;String, User&gt;();
        template.setConnectionFactory(jedisConnectionFactory());
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new RedisObjectSerializer());
        return template;
    }


}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">完成了配置工作后，编写测试用例实验效果</li></ul>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>
@RunWith(SpringJUnit4ClassRunner.class)
@SpringApplicationConfiguration(Application.class)
public class ApplicationTests {

    @Autowired
    private RedisTemplate&lt;String, User&gt; redisTemplate;

    @Test
    public void test() throws Exception {

        // 保存对象
        User user = new User(&quot;超人&quot;, 20);
        redisTemplate.opsForValue().set(user.getUsername(), user);

        user = new User(&quot;蝙蝠侠&quot;, 30);
        redisTemplate.opsForValue().set(user.getUsername(), user);

        user = new User(&quot;蜘蛛侠&quot;, 40);
        redisTemplate.opsForValue().set(user.getUsername(), user);

        Assert.assertEquals(20, redisTemplate.opsForValue().get(&quot;超人&quot;).getAge().longValue());
        Assert.assertEquals(30, redisTemplate.opsForValue().get(&quot;蝙蝠侠&quot;).getAge().longValue());
        Assert.assertEquals(40, redisTemplate.opsForValue().get(&quot;蜘蛛侠&quot;).getAge().longValue());

    }

}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">当然spring-data-redis中提供的数据操作远不止这些，本文仅作为在Spring Boot中使用redis时的配置参考，更多对于redis的操作使用，请参考<a href="http://docs.spring.io/spring-data/redis/docs/1.6.2.RELEASE/reference/html/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Spring-data-redis Reference</a>。</p>
<ul style="box-sizing:border-box;padding:0px;margin-top:0px;padding-left:2em;margin-bottom:0px;">
<li style="box-sizing:border-box;"><a href="http://git.oschina.net/didispace/SpringBoot-Learning" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">本文完整示例chapter3-2-5</a></li></ul>
</div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 