<html>
<head>
  <title>全文搜索引擎 Elasticsearch 入门教程 - 阮一峰的网络日志</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="14993"/>
<h1>全文搜索引擎 Elasticsearch 入门教程 - 阮一峰的网络日志</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2020/4/20 17:50</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.ruanyifeng.com/blog/2017/08/elasticsearch.html"><i>http://www.ruanyifeng.com/blog/2017/08/elasticsearch.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="background-color:rgb(245, 245, 213);list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);font-family:Georgia, serif;letter-spacing:-0.01em;word-spacing:0.2em;line-height:1.8em;font-size:62.5%;"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);background-color:rgb(245, 245, 213);min-width:640px;"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div>
                                    <h1 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);line-height:250%;font-family:&quot;Trebuchet MS&quot;, Arial, &quot;Lucida Grande&quot;, Verdana, Lucida, Helvetica, sans-serif;">全文搜索引擎 Elasticsearch 入门教程</h1>
                                            <div style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);float:right;padding-right:2em;padding-top:1em;">
<a href="http://www.bshare.cn/share" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);background:none;font:12px/14px Helvetica, Calibri, Tahoma, Arial, 宋体, sans-serif;overflow:hidden;height:21px;line-height:18px;font-size:12px;padding-left:0px;display:block;width:51px;"><div style="margin:0px;padding:0px;list-style-type:none;text-align:center;text-decoration:none;font-weight:bold;font-style:normal;border:none;color:#333;zoom:1;display:inline-block;background:transparent url('http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif') no-repeat;line-height:1.2;cursor:pointer;height:21px;width:51px;"></div><div style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);zoom:1;display:inline-block;background:none;line-height:1.2;clear:both;"></div></a>





</div>

<div style="margin:1.5em auto 2em;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);line-height:0.8;">
                                        

                                            <p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">作者： <a href="http://www.ruanyifeng.com/" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);">阮一峰</a></p>
                                    <p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">日期： <a href="http://www.ruanyifeng.com/blog/2017/08/" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);"><abbr style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);" title="2017-08-17T07:36:20+08:00">2017年8月17日</abbr></a></p>


</div>








                                
                                <div style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);">

                                    
                                        <p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;"><a href="https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">全文搜索</a>属于最常见的需求，开源的 <a href="https://www.elastic.co/" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">Elasticsearch</a> （以下简称 Elastic）是目前全文搜索引擎的首选。</p>

                                    


                                    
                                        <p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">它可以快速地储存、搜索和分析海量数据。维基百科、Stack Overflow、Github 都采用它。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;"><img src="全文搜索引擎 Elasticsearch 入门教程 - 阮一峰的网络日志_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" alt="" height="218" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:0.3em solid rgb(224, 223, 204);color:rgb(17, 17, 17);border-radius:1em;" title="" width="560"/></p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 的底层是开源库 <a href="https://lucene.apache.org/" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">Lucene</a>。但是，你没法直接用 Lucene，必须自己写代码去调用它的接口。Elastic 是 Lucene 的封装，提供了 REST API 的操作接口，开箱即用。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">本文从零开始，讲解如何使用 Elastic 搭建自己的全文搜索引擎。每一步都有详细的说明，大家跟着做就能学会。</p>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">一、安装</h2>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 需要 Java 8 环境。如果你的机器还没安装 Java，可以参考<a href="https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-debian-8" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">这篇文章</a>，注意要保证环境变量<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">JAVA_HOME</code>正确设置。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">安装完 Java，就可以跟着<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-targz.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">官方文档</a>安装 Elastic。直接下载压缩包比较简单。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ wget https<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>artifacts<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>elastic<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>co<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>downloads<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">-5.5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>zip
$ unzip elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">-5.5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>zip
$ cd elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">-5.5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span> 
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">接着，进入解压后的目录，运行下面的命令，启动 Elastic。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>bin<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>elasticsearch
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">如果这时<a href="https://github.com/spujadas/elk-docker/issues/92" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">报错</a>&quot;max virtual memory areas vm.max<em style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);">map</em>count [65530] is too low&quot;，要运行下面的命令。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ sudo sysctl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>w vm<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>max_map_count<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">=</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">262144</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">如果一切正常，Elastic 就会在默认的9200端口运行。这时，打开另一个命令行窗口，请求该端口，会得到说明信息。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl localhost<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">9200</span>

<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;name&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;atntrTf&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;cluster_name&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;elasticsearch&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;cluster_uuid&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;tf9250XhQ6ee4h7YI11anA&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;version&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;number&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;5.5.1&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;build_hash&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;19c13d0&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;build_date&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;2017-07-18T20:44:24.823Z&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;build_snapshot&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">false</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;lucene_version&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;6.6.0&quot;</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;tagline&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;You Know, for Search&quot;</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，请求9200端口，Elastic 返回一个 JSON 对象，包含当前节点、集群、版本等信息。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">按下 Ctrl + C，Elastic 就会停止运行。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">默认情况下，Elastic 只允许本机访问，如果需要远程访问，可以修改 Elastic 安装目录的<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">config/elasticsearch.yml</code>文件，去掉<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">network.host</code>的注释，将它的值改成<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">0.0.0.0</code>，然后重新启动 Elastic。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
network<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>host<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0.0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0.0</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，设成<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">0.0.0.0</code>让任何人都可以访问。线上服务不要这样设置，要设成具体的 IP。</p>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">二、基本概念</h2>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">2.1 Node 与 Cluster</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 本质上是一个分布式数据库，允许多台服务器协同工作，每台服务器可以运行多个 Elastic 实例。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">单个 Elastic 实例称为一个节点（node）。一组节点构成一个集群（cluster）。</p>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">2.2 Index</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 会索引所有字段，经过处理后写入一个反向索引（Inverted Index）。查找数据的时候，直接查找该索引。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">所以，Elastic 数据管理的顶层单位就叫做 Index（索引）。它是单个数据库的同义词。每个 Index （即数据库）的名字必须是小写。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">下面的命令可以查看当前节点的所有 Index。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X GET <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'<a href="http://localhost/" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);">http://localhost</a>:9200/_cat/indices?v'</span>
</code></pre></blockquote>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">2.3 Document</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Index 里面单条的记录称为 Document（文档）。许多条 Document 构成了一个 Index。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Document 使用 JSON 格式表示，下面是一个例子。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;user&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;张三&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;title&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;工程师&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;desc&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;数据库管理&quot;</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">同一个 Index 里面的 Document，不要求有相同的结构（scheme），但是最好保持相同，这样有利于提高搜索效率。</p>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">2.4 Type</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Document 可以分组，比如<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">weather</code>这个 Index 里面，可以按城市分组（北京和上海），也可以按气候分组（晴天和雨天）。这种分组就叫做 Type，它是虚拟的逻辑分组，用来过滤 Document。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">不同的 Type 应该有相似的结构（schema），举例来说，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">id</code>字段不能在这个组是字符串，在另一个组是数值。这是与关系型数据库的表的<a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/mapping.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">一个区别</a>。性质完全不同的数据（比如<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">products</code>和<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">logs</code>）应该存成两个 Index，而不是一个 Index 里面的两个 Type（虽然可以做到）。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">下面的命令可以列出每个 Index 所包含的 Type。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/_mapping?pretty=true'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">根据<a href="https://www.elastic.co/blog/index-type-parent-child-join-now-future-in-elasticsearch" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">规划</a>，Elastic 6.x 版只允许每个 Index 包含一个 Type，7.x 版将会彻底移除 Type。</p>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">三、新建和删除 Index</h2>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">新建 Index，可以直接向 Elastic 服务器发出 PUT 请求。下面的例子是新建一个名叫<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">weather</code>的 Index。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X PUT <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/weather'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">服务器返回一个 JSON 对象，里面的<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">acknowledged</code>字段表示操作成功。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;acknowledged&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">true</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;shards_acknowledged&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">true</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">然后，我们发出 DELETE 请求，删除这个 Index。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X DELETE <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/weather'</span>
</code></pre></blockquote>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">四、中文分词设置</h2>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">首先，安装中文分词插件。这里使用的是 <a href="https://github.com/medcl/elasticsearch-analysis-ik/" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">ik</a>，也可以考虑其他插件（比如 <a href="https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-smartcn.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">smartcn</a>）。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>bin<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>plugin install https<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>github<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>com<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>medcl<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>analysis<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>ik<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>releases<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>download<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>v5<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">.5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">/</span>elasticsearch<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>analysis<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>ik<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">-5.5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">.</span>zip
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码安装的是5.5.1版的插件，与 Elastic 5.5.1 配合使用。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">接着，重新启动 Elastic，就会自动加载这个新安装的插件。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">然后，新建一个 Index，指定需要分词的字段。这一步根据数据结构而异，下面的命令只针对本文。基本上，凡是需要搜索的中文字段，都要单独设置一下。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X PUT <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts'</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;mappings&quot;: {
    &quot;person&quot;: {
      &quot;properties&quot;: {
        &quot;user&quot;: {
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_max_word&quot;,
          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;
        },
        &quot;title&quot;: {
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_max_word&quot;,
          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;
        },
        &quot;desc&quot;: {
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_max_word&quot;,
          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;
        }
      }
    }
  }
}'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，首先新建一个名称为<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">accounts</code>的 Index，里面有一个名称为<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">person</code>的 Type。<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">person</code>有三个字段。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;">
  <ul style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);margin-left:4em;">
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;">user</li>
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;">title</li>
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;">desc</li>
</ul>
</blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">这三个字段都是中文，而且类型都是文本（text），所以需要指定中文分词器，不能使用默认的英文分词器。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 的分词器称为 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">analyzer</a>。我们对每个字段指定分词器。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;user&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;text&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;analyzer&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;ik_max_word&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;search_analyzer&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;ik_max_word&quot;</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">analyzer</code>是字段文本的分词器，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">search_analyzer</code>是搜索词的分词器。<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">ik_max_word</code>分词器是插件<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">ik</code>提供的，可以对文本进行最大数量的分词。</p>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">五、数据操作</h2>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">5.1 新增记录</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">向指定的 /Index/Type 发送 PUT 请求，就可以在 Index 里面新增一条记录。比如，向<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">/accounts/person</code>发送请求，就可以新增一条人员记录。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X PUT <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/1'</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;user&quot;: &quot;张三&quot;,
  &quot;title&quot;: &quot;工程师&quot;,
  &quot;desc&quot;: &quot;数据库管理&quot;
}'</span> 
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">服务器返回的 JSON 对象，会给出 Index、Type、Id、Version 等信息。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;1&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_version&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;result&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;created&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_shards&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;successful&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;failed&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;created&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">true</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">如果你仔细看，会发现请求路径是<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">/accounts/person/1</code>，最后的<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">1</code>是该条记录的 Id。它不一定是数字，任意字符串（比如<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">abc</code>）都可以。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">新增记录的时候，也可以不指定 Id，这时要改成 POST 请求。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X POST <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person'</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;user&quot;: &quot;李四&quot;,
  &quot;title&quot;: &quot;工程师&quot;,
  &quot;desc&quot;: &quot;系统管理&quot;
}'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，向<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">/accounts/person</code>发出一个 POST 请求，添加一个记录。这时，服务器返回的 JSON 对象里面，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">_id</code>字段就是一个随机字符串。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;AV3qGfrC6jMbsbXb6k1p&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_version&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;result&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;created&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_shards&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;successful&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;failed&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;created&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">true</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">注意，如果没有先创建 Index（这个例子是<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">accounts</code>），直接执行上面的命令，Elastic 也不会报错，而是直接生成指定的 Index。所以，打字的时候要小心，不要写错 Index 的名称。</p>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">5.2 查看记录</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">向<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">/Index/Type/Id</code>发出 GET 请求，就可以查看这条记录。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/1?pretty=true'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码请求查看<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">/accounts/person/1</code>这条记录，URL 的参数<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">pretty=true</code>表示以易读的格式返回。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">返回的数据中，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">found</code>字段表示查询成功，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">_source</code>字段返回原始记录。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;1&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_version&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;found&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">true</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_source&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;user&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;张三&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;title&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;工程师&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;desc&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;数据库管理&quot;</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">如果 Id 不正确，就查不到数据，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">found</code>字段就是<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">false</code>。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/weather/beijing/abc?pretty=true'</span>

<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;abc&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;found&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">false</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">5.3 删除记录</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">删除记录就是发出 DELETE 请求。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X DELETE <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/1'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">这里先不要删除这条记录，后面还要用到。</p>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">5.4 更新记录</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">更新记录就是使用 PUT 请求，重新发送一次数据。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>X PUT <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/1'</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
    &quot;user&quot; : &quot;张三&quot;,
    &quot;title&quot; : &quot;工程师&quot;,
    &quot;desc&quot; : &quot;数据库管理，软件开发&quot;
}'</span> 

<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;1&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_version&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;result&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;updated&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_shards&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;successful&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;failed&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;created&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">false</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，我们将原始数据从&quot;数据库管理&quot;改成&quot;数据库管理，软件开发&quot;。 返回结果里面，有几个字段发生了变化。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_version&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;result&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;updated&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;created&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">false</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">可以看到，记录的 Id 没变，但是版本（version）从<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">1</code>变成<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">2</code>，操作类型（result）从<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">created</code>变成<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">updated</code>，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">created</code>字段变成<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">false</code>，因为这次不是新建记录。</p>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">六、数据查询</h2>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">6.1 返回所有记录</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">使用 GET 方法，直接请求<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">/Index/Type/_search</code>，就会返回所有记录。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/_search'</span>

<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;took&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;timed_out&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">false</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_shards&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;successful&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;failed&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;hits&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">2</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;max_score&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1.0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;hits&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">[</span>
      <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;AV3qGfrC6jMbsbXb6k1p&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_score&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1.0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_source&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;user&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;李四&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;title&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;工程师&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;desc&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;系统管理&quot;</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
      <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
      <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;1&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_score&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1.0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_source&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;user&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;张三&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;title&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;工程师&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;desc&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;数据库管理，软件开发&quot;</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
      <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">]</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码中，返回结果的 <code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">took</code>字段表示该操作的耗时（单位为毫秒），<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">timed_out</code>字段表示是否超时，<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">hits</code>字段表示命中的记录，里面子字段的含义如下。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;">
  <ul style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);margin-left:4em;">
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);">total</code>：返回记录数，本例是2条。</li>
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);">max_score</code>：最高的匹配程度，本例是<code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);">1.0</code>。</li>
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);">hits</code>：返回的记录组成的数组。</li>
</ul>
</blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">返回的记录中，每条记录都有一个<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">_score</code>字段，表示匹配的程序，默认是按照这个字段降序排列。</p>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">6.2 全文搜索</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 的查询非常特别，使用自己的<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">查询语法</a>，要求 GET 请求带有数据体。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/_search'</span>  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;软件&quot; }}
}'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码使用 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-match-query.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">Match 查询</a>，指定的匹配条件是<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">desc</code>字段里面包含&quot;软件&quot;这个词。返回结果如下。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;took&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">3</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;timed_out&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">false</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_shards&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;successful&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">5</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;failed&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;hits&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;total&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">1</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;max_score&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0.28582606</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;hits&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">[</span>
      <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_index&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;accounts&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_type&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;person&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_id&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;1&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_score&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 0, 85);">0.28582606</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;_source&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">{</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;user&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;张三&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;title&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;工程师&quot;</span><span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">,</span>
          <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;desc&quot;</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">:</span> <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">&quot;数据库管理，软件开发&quot;</span>
        <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
      <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
    <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">]</span>
  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
<span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(153, 153, 153);">}</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">Elastic 默认一次返回10条结果，可以通过<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">size</code>字段改变这个设置。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/_search'</span>  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;管理&quot; }},
  &quot;size&quot;: 1
}'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码指定，每次只返回一条结果。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">还可以通过<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">from</code>字段，指定位移。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/_search'</span>  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;管理&quot; }},
  &quot;from&quot;: 1,
  &quot;size&quot;: 1
}'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码指定，从位置1开始（默认是从位置0开始），只返回一条结果。</p>

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:1.87em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">6.3 逻辑运算</h3>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">如果有多个搜索关键字， Elastic 认为它们是<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">or</code>关系。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/_search'</span>  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;软件 系统&quot; }}
}'</span>
</code></pre></blockquote>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">上面代码搜索的是<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">软件 or 系统</code>。</p>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">如果要执行多个关键词的<code style="margin:auto 3px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);display:inline-block;padding-left:5px;padding-right:5px;font-size:120%;background-color:pink;border-radius:5px;">and</code>搜索，必须使用<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-bool-query.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">布尔查询</a>。</p>

<blockquote style="margin:2em;padding:1em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);background-color:rgb(245, 242, 240);border-radius:1em;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;border-width:0.3em;border-color:rgb(224, 223, 204);border-style:solid;text-shadow:white 0px 1px;overflow:auto;"><pre style="margin:0px;padding:0em 0em 0.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;overflow:auto;background:rgb(245, 242, 240);"><code style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:black;text-shadow:white 0px 1px;font-family:monospace, Consolas, Monaco, &quot;Andale Mono&quot;;direction:ltr;white-space:pre;word-spacing:normal;font-size:1.2em;tab-size:4;hyphens:none;">
$ curl <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'localhost:9200/accounts/person/_search'</span>  <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(166, 127, 89);background:rgba(255, 255, 255, 0.5);">-</span>d <span style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(102, 153, 0);">'
{
  &quot;query&quot;: {
    &quot;bool&quot;: {
      &quot;must&quot;: [
        { &quot;match&quot;: { &quot;desc&quot;: &quot;软件&quot; } },
        { &quot;match&quot;: { &quot;desc&quot;: &quot;系统&quot; } }
      ]
    }
  }
}'</span>
</code></pre></blockquote>

<h2 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:500;font-style:normal;border:none;color:rgb(0, 0, 0);font-size:2.88em;line-height:1.35em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin-top:1.5em;">七、参考链接</h2>

<ul style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);margin-left:4em;">
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">ElasticSearch 官方手册</a></li>
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:220%;"><a href="https://www.elastic.co/blog/a-practical-introduction-to-elasticsearch" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:underline;font-weight:normal;font-style:normal;border:none;color:rgb(34, 52, 114);" target="_blank">A Practical Introduction to Elasticsearch</a></li>
</ul>

<p style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);font-size:1.6em;line-height:180%;margin-top:1em;margin-left:0.8em;">（完）</p>

                                    

                                </div>
    
                                <div style="margin:0px 0px 1em;padding:1.5em;list-style-type:none;text-align:left;text-decoration:none;font-weight:bold;font-style:normal;border:1px solid rgb(211, 211, 211);color:rgb(252, 178, 151);border-radius:1em;box-shadow:rgb(238, 238, 238) 0px 1px 0px 0px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0.05, rgb(170, 210, 240)), to(rgb(139, 193, 237))) rgb(170, 210, 240);text-shadow:rgb(238, 238, 238) 1px 1px 0px;margin-top:2em;background-color:rgb(222, 235, 247);">

<h3 style="margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;list-style-type:none;text-align:left;text-decoration:none;font-weight:bold;font-style:normal;border:none;color:rgb(85, 102, 119);font-size:1.92em;letter-spacing:-0.03em;border-bottom:1px solid gray;">文档信息</h3>
<ul style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(17, 17, 17);padding-left:2em;padding-right:2em;">
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);font-size:1.6em;line-height:220%;">版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);">创意共享3.0许可证</a>）</li>
<li style="margin:0px;padding:0px;list-style-type:square;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(85, 102, 119);font-size:1.6em;line-height:220%;">发表日期： <abbr style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:none;color:rgb(61, 61, 61);" title="2017-08-17T07:36:20+08:00">2017年8月17日</abbr></li>

</ul>
                                </div>
</div></div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 