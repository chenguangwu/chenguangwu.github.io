<html>
<head>
  <title>MyBatis对于时间等转换记载</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="9226"/>
<h1>MyBatis对于时间等转换记载</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/7/13 14:17</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.jianshu.com/p/7b4734b1dcf4"><i>https://www.jianshu.com/p/7b4734b1dcf4</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:10px;-webkit-tap-highlight-color:transparent;"><div style="box-sizing:border-box;font-size:17px;line-height:1.42857;background-color:rgb(255, 255, 255);min-width:768px;color:rgb(51, 51, 51);font-family:-apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;">
        <h1 style="box-sizing:border-box;color:inherit;margin-top:20px;margin-bottom:10px;font-size:34px;margin:20px 0px 0px;font-family:-apple-system, &quot;SF UI Display&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;font-weight:700;line-height:1.3;word-break:break-word;">MyBatis对于时间等转换记载</h1>

        
        <div style="box-sizing:border-box;margin:30px 0px 40px;">
          <a href="https://www.jianshu.com/u/47db90c95a70" style="box-sizing:border-box;background-color:transparent;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;width:48px;height:48px;display:inline-block;vertical-align:middle;">
            <img src="MyBatis对于时间等转换记载_files/96" type="image/jpeg" data-filename="96" height="46" style="box-sizing:border-box;vertical-align:middle;border:1px solid rgb(221, 221, 221);width:100%;height:100%;border-radius:50%;" width="46"/>
</a>          <div style="box-sizing:border-box;vertical-align:middle;display:inline-block;margin-left:8px;">
            <span style="box-sizing:border-box;margin-right:3px;font-size:16px;vertical-align:middle;"><a href="https://www.jianshu.com/u/47db90c95a70" style="box-sizing:border-box;background-color:transparent;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;">吴世浩</a></span>
            
            <a style="cursor:pointer;background-color:rgb(66, 192, 46);color:rgb(255, 255, 255);text-decoration:none;display:inline-block;margin-bottom:0px;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;box-sizing:border-box;background-image:none;border:1px solid transparent;white-space:nowrap;user-select:none;border-radius:40px;line-height:normal;border-color:rgb(66, 192, 46);font-size:12px;padding:0px 7px 0px 5px;"><i style="box-sizing:border-box;font-size:inherit;font-style:normal;-webkit-font-smoothing:antialiased;font-family:iconfont;font-weight:400;"><span style="font-size:inherit;font-style:normal;font-family:iconfont;font-weight:400;"></span></i><span style="box-sizing:border-box;margin-left:2px;display:inline;">关注</span></a>
            
            <div style="box-sizing:border-box;margin-top:5px;font-size:12px;color:rgb(150, 150, 150);">
              
                <span style="box-sizing:border-box;padding-right:5px;" title="">2016.12.21 19:23*</span>
              <span style="box-sizing:border-box;padding-right:5px;">字数 111</span>
            <span style="box-sizing:border-box;padding-right:5px;">阅读 141</span><span style="box-sizing:border-box;padding-right:5px;">评论 0</span><span style="box-sizing:border-box;padding-right:5px;">喜欢 2</span></div>
          </div>
          
        </div>


        
        <div style="box-sizing:border-box;color:rgb(47, 47, 47);font-size:16px;font-weight:400;line-height:1.7;word-break:break-word;">
          <div style="box-sizing:border-box;">
            <h3 style="box-sizing:border-box;font-family:inherit;margin-top:20px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:22px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">Mybatis中数据字段转换</h3>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">需要实现TypeHandler的接口<br style="box-sizing:border-box;"/>
<strong style="box-sizing:border-box;font-weight:700;">1、对于时间的转换</strong></p>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">class</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">TimeValueHandler</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">implements</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">TypeHandler</span>&lt;<span style="box-sizing:border-box;color:rgb(230, 192, 123);">String</span>&gt;</span>{

    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">private</span> SimpleDateFormat  sd = <span style="box-sizing:border-box;color:rgb(198, 120, 221);">new</span> SimpleDateFormat (<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)
    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> String <span style="box-sizing:border-box;color:rgb(97, 174, 238);">getResult</span><span style="box-sizing:border-box;">(ResultSet rs, String str)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> sd.format(rs.getTimestamp(str));
    }

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> String <span style="box-sizing:border-box;color:rgb(97, 174, 238);">getResult</span><span style="box-sizing:border-box;">(ResultSet arg0, <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> arg1)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">null</span>;
    }

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> String <span style="box-sizing:border-box;color:rgb(97, 174, 238);">getResult</span><span style="box-sizing:border-box;">(CallableStatement arg0, <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> arg1)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        <span style="box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;">// TODO Auto-generated method stub</span>
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">null</span>;
    }

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">void</span> <span style="box-sizing:border-box;color:rgb(97, 174, 238);">setParameter</span><span style="box-sizing:border-box;">(PreparedStatement arg0, <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> arg1, String arg2, JdbcType arg3)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        
    }
}
</code></pre>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;"><strong style="box-sizing:border-box;font-weight:700;">2、对于null的转换</strong></p>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">class</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">NullValueHandler</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">implements</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">TypeHandler</span>&lt;<span style="box-sizing:border-box;color:rgb(230, 192, 123);">String</span>&gt; </span>{

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> String <span style="box-sizing:border-box;color:rgb(97, 174, 238);">getResult</span><span style="box-sizing:border-box;">(ResultSet resultSet, String str)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        String columnValue = resultSet.getString(str);
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">if</span> (CommonUtils.isBlank(columnValue))
            <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> <span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;&quot;</span>;
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> columnValue;
    }

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> String <span style="box-sizing:border-box;color:rgb(97, 174, 238);">getResult</span><span style="box-sizing:border-box;">(ResultSet resultSet, <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> index)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        String columnValue = resultSet.getString(index);
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">if</span> (CommonUtils.isBlank(columnValue))
            <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> <span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;&quot;</span>;
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> columnValue;
    }

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> String <span style="box-sizing:border-box;color:rgb(97, 174, 238);">getResult</span><span style="box-sizing:border-box;">(CallableStatement cs, <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> index)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
        <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">null</span>;
    }

    <span style="box-sizing:border-box;color:rgb(97, 174, 238);">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">void</span> <span style="box-sizing:border-box;color:rgb(97, 174, 238);">setParameter</span><span style="box-sizing:border-box;">(PreparedStatement pstmt, <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> index, String str, JdbcType type)</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">throws</span> SQLException </span>{
    }

}
</code></pre>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">这里想实现的就是因为之前我的全局转换失败，所以想从数据库层面将时间类型转换为我想要的字符串类型。所以handle实现后，需要做的就是在mapper.xml中做处理。</p>
<h3 style="box-sizing:border-box;font-family:inherit;margin-top:20px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:22px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">xml中所作的处理</h3>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;">&lt;<span style="box-sizing:border-box;color:rgb(224, 108, 117);">mapper</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">namespace</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;com.mouse.test.mapper.TestMapper&quot;</span>&gt;</span>
    <span style="box-sizing:border-box;">&lt;<span style="box-sizing:border-box;color:rgb(224, 108, 117);">resultMap</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">type</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;map&quot;</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">id</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;TestResult&quot;</span>&gt;</span>
        <span style="box-sizing:border-box;">&lt;<span style="box-sizing:border-box;color:rgb(224, 108, 117);">result</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">column</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;CREATE_TIME&quot;</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">property</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;CREATE_TIME&quot;</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">typeHandler</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;com.mouse.test.common.handler.TimeValueHandler&quot;</span>/&gt;</span>
        <span style="box-sizing:border-box;">&lt;<span style="box-sizing:border-box;color:rgb(224, 108, 117);">result</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">column</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;UPDATE_TIME&quot;</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">property</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;UPDATE_TIME&quot;</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">typeHandler</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;com.mouse.test.common.handler.TimeValueHandler&quot;</span>/&gt;</span>
    <span style="box-sizing:border-box;">&lt;/<span style="box-sizing:border-box;color:rgb(224, 108, 117);">resultMap</span>&gt;</span> 

<span style="box-sizing:border-box;">&lt;<span style="box-sizing:border-box;color:rgb(224, 108, 117);">select</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">id</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;selectUser&quot;</span> <span style="box-sizing:border-box;color:rgb(209, 154, 102);">resultMap</span>=<span style="box-sizing:border-box;color:rgb(152, 195, 121);">&quot;TestResult&quot;</span>&gt;</span>
      select * from t_user 
<span style="box-sizing:border-box;">&lt;/<span style="box-sizing:border-box;color:rgb(224, 108, 117);">select</span>&gt;</span>
<span style="box-sizing:border-box;">&lt;/<span style="box-sizing:border-box;color:rgb(224, 108, 117);">mapper</span>&gt;</span> 
</code></pre>
<h3 style="box-sizing:border-box;font-family:inherit;margin-top:20px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:22px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">浩语</h3>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;">                                          _<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>                                                        
                            _<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>  <span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>  ___<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span> _<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span><span style="box-sizing:border-box;">|  |</span>_<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span> ____<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>    __<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>
                            \ \/ \/ <span style="box-sizing:border-box;color:rgb(152, 195, 121);">/  |  \  |  \\__  \  /</span>  <span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span> \   
                             \     /<span style="box-sizing:border-box;">|  |</span>  /   Y  \/ _<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span> \(  &lt;<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>&gt; )
                              \/\<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span>/ <span style="box-sizing:border-box;">|____/|</span>__<span style="box-sizing:border-box;color:rgb(209, 154, 102);">_</span><span style="box-sizing:border-box;">|  (____  /\____/ 
                                                    \/     \/          
          走在自己的路上，遇到要遇到的人，经历要经历的事，这才是我们需要面对的。
                                                       
</span></code></pre>

          </div>
        </div>
    </div></div></div></div></div></div>
</div>
</span>
</div></body></html> 