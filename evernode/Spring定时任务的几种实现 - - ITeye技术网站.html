<html>
<head>
  <title>Spring定时任务的几种实现 - - ITeye技术网站</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6815"/>
<h1>Spring定时任务的几种实现 - - ITeye技术网站</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/28 16:48</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://gong1208.iteye.com/blog/1773177"><i>http://gong1208.iteye.com/blog/1773177</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="text-align:center;font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:12px;line-height:1.5;color:black;background:white;"><div style="background:white;text-align:center;background-color:rgb(239, 250, 255);"><div style="text-align:left;"><div style="overflow:hidden;background-color:white;"><div style="background-color:white;"><div style="font-size:14px;line-height:1.8em;"><div style="font-size:14px;">
<h1 style="font-size:2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;text-align:center;">Spring定时任务的几种实现</h1>
<p style="margin:0px;padding:0px;">近日项目开发中需要执行一些定时任务，比如需要在每天凌晨时候，分析一次前一天的日志信息，借此机会整理了一下定时任务的几种实现方式，由于项目采用spring框架，所以我都将结合</p>
<p style="margin:0px;padding:0px;">spring框架来介绍。</p>
<h2 style="font-size:1.5em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">一．分类</h2>
<ul style="margin:0px 0px 1.5em;padding:0px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;">
<h3 style="font-size:1.2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">从实现的技术上来分类，目前主要有三种技术（或者说有三种产品）：</h3>
</li>
</ul>
<ol style="font-size:1em;line-height:1.4em;margin:0px 0px 1.5em;padding:0px;">
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">Java自带的java.util.Timer类，这个类允许你调度一个java.util.TimerTask任务。使用这种方式可以让你的程序按照某一个频度执行，但不能在指定时间运行。一般用的较少，这篇文章将不做详细介绍。</li>
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">使用Quartz，这是一个功能比较强大的的调度器，可以让你的程序在指定时间执行，也可以按照某一个频度执行，配置起来稍显复杂，稍后会详细介绍。</li>
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">Spring3.0以后自带的task，可以将它看成一个轻量级的Quartz，而且使用起来比Quartz简单许多，稍后会介绍。</li>
</ol>
<ul style="margin:0px 0px 1.5em;padding:0px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;">
<h3 style="font-size:1.2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">从作业类的继承方式来讲，可以分为两类：</h3>
</li>
</ul>
<ol style="font-size:1em;line-height:1.4em;margin:0px 0px 1.5em;padding:0px;">
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">作业类需要继承自特定的作业类基类，如Quartz中需要继承自org.springframework.scheduling.quartz.QuartzJobBean；java.util.Timer中需要继承自java.util.TimerTask。</li>
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">作业类即普通的java类，不需要继承自任何基类。</li>
</ol>
<p style="margin:0px;padding:0px;">注:个人推荐使用第二种方式，因为这样所以的类都是普通类，不需要事先区别对待。</p>
<p style="margin:0px;padding:0px;"> </p>
<ul style="margin:0px 0px 1.5em;padding:0px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;">
<h5 style="font-size:1.1em;line-height:1.3em;margin:0px 0px 0.25em;padding:0px;color:black;">从任务调度的触发时机来分，这里主要是针对作业使用的触发器，主要有以下两种：</h5>
</li>
</ul>
<ol style="font-size:1em;line-height:1.4em;margin:0px 0px 1.5em;padding:0px;">
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">每隔指定时间则触发一次，在Quartz中对应的触发器为：org.springframework.scheduling.quartz.SimpleTriggerBean</li>
<li style="font-size:1em;margin:0px 0px 0.25em 30px;padding:0px;">每到指定时间则触发一次，在Quartz中对应的调度器为：org.springframework.scheduling.quartz.CronTriggerBean</li>
</ol>
<p style="margin:0px;padding:0px;">注：并非每种任务都可以使用这两种触发器，如java.util.TimerTask任务就只能使用第一种。Quartz和spring task都可以支持这两种触发条件。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"> </p>
<h2 style="font-size:1.5em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">二．用法说明</h2>
<p style="margin:0px;padding:0px;">详细介绍每种任务调度工具的使用方式，包括Quartz和spring task两种。</p>
<h2 style="font-size:1.5em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">Quartz</h2>
<h3 style="font-size:1.2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">第一种，作业类继承自特定的基类：org.springframework.scheduling.quartz.QuartzJobBean。</h3>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第一步：定义作业类</strong></p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image.png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> org.quartz.JobExecutionContext;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> org.quartz.JobExecutionException;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> org.springframework.scheduling.quartz.QuartzJobBean;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> Job1 </span><span style="color:rgb(127, 0, 85);font-weight:bold;">extends</span><span style="color:black;"> QuartzJobBean {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">int</span><span style="color:black;"> timeout;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">static</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">int</span><span style="color:black;"> i = </span><span style="color:rgb(192, 0, 0);">0</span><span style="color:black;">;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//调度工厂实例化后，经过timeout时间开始执行调度</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;"> setTimeout(</span><span style="color:rgb(127, 0, 85);font-weight:bold;">int</span><span style="color:black;"> timeout) {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">this</span><span style="color:black;">.timeout = timeout;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">/**</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">* 要调度的具体任务</span> </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">*/</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(100, 100, 100);">@Override</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">protected</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;"> executeInternal(JobExecutionContext context)  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">throws</span><span style="color:black;"> JobExecutionException {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  System.out.println(<span style="color:blue;">&quot;定时任务执行中…&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;"> 第二步：spring配置文件中配置作业类JobDetailBean</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [1].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;job1&quot;</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.JobDetailBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;jobClass&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;com.gy.Job1&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;jobDataAsMap&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">map</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">entry</span><span style="color:black;"> </span><span style="color:red;">key</span><span style="color:black;">=</span><span style="color:blue;">&quot;timeout&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;0&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">map</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"> 说明：org.springframework.scheduling.quartz.JobDetailBean有两个属性，jobClass属性即我们在java代码中定义的任务类，jobDataAsMap属性即该任务类中需要注入的属性值。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第三步：配置作业调度的触发方式（触发器）</strong></p>
<p style="margin:0px;padding:0px;">Quartz的作业触发器有两种，分别是</p>
<p style="margin:0px;padding:0px;">org.springframework.scheduling.quartz.SimpleTriggerBean</p>
<p style="margin:0px;padding:0px;">org.springframework.scheduling.quartz.CronTriggerBean</p>
<p style="margin:0px;padding:0px;">第一种SimpleTriggerBean，只支持按照一定频度调用任务，如每隔30分钟运行一次。</p>
<p style="margin:0px;padding:0px;">配置方式如下：</p>
<p style="margin:0px;padding:0px;"> </p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [2].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;simpleTrigger&quot;</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.SimpleTriggerBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;jobDetail&quot;</span><span style="color:black;"> </span><span style="color:red;">ref</span><span style="color:black;">=</span><span style="color:blue;">&quot;job1&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;startDelay&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;0&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!-- 调度工厂实例化后，经过0秒开始执行调度 --&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;repeatInterval&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;2000&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!-- 每2秒调度一次 --&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">第二种CronTriggerBean，支持到指定时间运行一次，如每天12:00运行一次等。</p>
<p style="margin:0px;padding:0px;">配置方式如下：</p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [3].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;cronTrigger&quot;</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.CronTriggerBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;jobDetail&quot;</span><span style="color:black;"> </span><span style="color:red;">ref</span><span style="color:black;">=</span><span style="color:blue;">&quot;job1&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">&lt;!—每天12:00运行一次 --<span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;cronExpression&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;0 0 12 * * ?&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"> 关于cronExpression表达式的语法参见附录。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第四步：配置调度工厂 </strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [4].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.SchedulerFactoryBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;triggers&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">list</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">ref</span><span style="color:black;"> </span><span style="color:red;">bean</span><span style="color:black;">=</span><span style="color:blue;">&quot;cronTrigger&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">list</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"> 说明：该参数指定的就是之前配置的触发器的名字。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第五步：启动你的应用即可，即将工程部署至tomcat或其他容器。</strong></p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"> </p>
<h3 style="font-size:1.2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">第二种，作业类不继承特定基类。</h3>
<p style="margin:0px;padding:0px;">Spring能够支持这种方式，归功于两个类：</p>
<p style="margin:0px;padding:0px;">org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean</p>
<p style="margin:0px;padding:0px;">org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean</p>
<p style="margin:0px;padding:0px;">这两个类分别对应spring支持的两种实现任务调度的方式，即前文提到到java自带的timer task方式和Quartz方式。这里我只写MethodInvokingJobDetailFactoryBean的用法，使用该类的好处是,我们的任务类不再需要继承自任何类，而是普通的pojo。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第一步：编写任务类</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [5].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> Job2 {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;"> doJob2() {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">System.out.println(<span style="color:blue;">&quot;不继承QuartzJobBean方式-调度进行中...&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"> 可以看出，这就是一个普通的类，并且有一个方法。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第二步：配置作业类</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [6].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;job2&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;targetObject&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;com.gy.Job2&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;targetMethod&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;doJob2&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;concurrent&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;false&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!-- 作业不并发调度 --&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"> 说明：这一步是关键步骤，声明一个MethodInvokingJobDetailFactoryBean，有两个关键属性：targetObject指定任务类，targetMethod指定运行的方法。往下的步骤就与方法一相同了，为了完整，同样贴出。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第三步：配置作业调度的触发方式（触发器）</strong></p>
<p style="margin:0px;padding:0px;">Quartz的作业触发器有两种，分别是</p>
<p style="margin:0px;padding:0px;">org.springframework.scheduling.quartz.SimpleTriggerBean</p>
<p style="margin:0px;padding:0px;">org.springframework.scheduling.quartz.CronTriggerBean</p>
<p style="margin:0px;padding:0px;">第一种SimpleTriggerBean，只支持按照一定频度调用任务，如每隔30分钟运行一次。</p>
<p style="margin:0px;padding:0px;">配置方式如下：</p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [7].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;simpleTrigger&quot;</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.SimpleTriggerBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;jobDetail&quot;</span><span style="color:black;"> </span><span style="color:red;">ref</span><span style="color:black;">=</span><span style="color:blue;">&quot;job2&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;startDelay&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;0&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!-- 调度工厂实例化后，经过0秒开始执行调度 --&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;repeatInterval&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;2000&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!-- 每2秒调度一次 --&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"> 第二种CronTriggerBean，支持到指定时间运行一次，如每天12:00运行一次等。</p>
<p style="margin:0px;padding:0px;">配置方式如下：</p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [8].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;cronTrigger&quot;</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.CronTriggerBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;jobDetail&quot;</span><span style="color:black;"> </span><span style="color:red;">ref</span><span style="color:black;">=</span><span style="color:blue;">&quot;job2&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">&lt;!—每天12:00运行一次 --<span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;cronExpression&quot;</span><span style="color:black;"> </span><span style="color:red;">value</span><span style="color:black;">=</span><span style="color:blue;">&quot;0 0 12 * * ?&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">以上两种调度方式根据实际情况，任选一种即可。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第四步：配置调度工厂 </strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [9].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;"> </span><span style="color:red;">class</span><span style="color:black;">=</span><span style="color:blue;">&quot;org.springframework.scheduling.quartz.SchedulerFactoryBean&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:black;"> </span><span style="color:red;">name</span><span style="color:black;">=</span><span style="color:blue;">&quot;triggers&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">list</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">ref</span><span style="color:black;"> </span><span style="color:red;">bean</span><span style="color:black;">=</span><span style="color:blue;">&quot;cronTrigger&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">list</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">property</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">说明：该参数指定的就是之前配置的触发器的名字。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第五步：启动你的应用即可，即将工程部署至tomcat或其他容器。</strong></p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">到此，spring中Quartz的基本配置就介绍完了，当然了，使用之前，要导入相应的spring的包与Quartz的包，这些就不消多说了。</p>
<p style="margin:0px;padding:0px;">其实可以看出Quartz的配置看上去还是挺复杂的，没有办法，因为Quartz其实是个重量级的工具，如果我们只是想简单的执行几个简单的定时任务，有没有更简单的工具，有！</p>
<p style="margin:0px;padding:0px;">请看我第下文Spring task的介绍。</p>
<p style="margin:0px;padding:0px;"> </p>
<h2 style="font-size:1.5em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">Spring-Task</h2>
<p style="margin:0px;padding:0px;">上节介绍了在Spring 中使用Quartz，本文介绍Spring3.0以后自主开发的定时任务工具，spring task，可以将它比作一个轻量级的Quartz，而且使用起来很简单，除spring相关的包外不需要额外的包，而且支持注解和配置文件两种</p>
<p style="margin:0px;padding:0px;">形式，下面将分别介绍这两种方式。</p>
<h3 style="font-size:1.2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">第一种：配置文件方式</h3>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第一步：编写作业类</strong></p>
<p style="margin:0px;padding:0px;">即普通的pojo，如下：</p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [10].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> org.springframework.stereotype.Service;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(100, 100, 100);">@Service</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> TaskJob {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">      </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;"> job1() {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        System.out.println(“任务进行中。。。”);  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;"> 第二步：在spring配置文件头中添加命名空间及描述</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [11].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">beans</span><span style="color:black;"> </span><span style="color:red;">xmlns</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/beans&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xmlns:task</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/task&quot;</span><span style="color:black;">   </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    。。。。。。  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xsi:schemaLocation</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;"> 第三步：spring配置文件中设置具体的任务</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [12].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">task:scheduled-tasks</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">   </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">task:scheduled</span><span style="color:black;"> </span><span style="color:red;">ref</span><span style="color:black;">=</span><span style="color:blue;">&quot;taskJob&quot;</span><span style="color:black;"> </span><span style="color:red;">method</span><span style="color:black;">=</span><span style="color:blue;">&quot;job1&quot;</span><span style="color:black;"> </span><span style="color:red;">cron</span><span style="color:black;">=</span><span style="color:blue;">&quot;0 * * * * ?&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">   </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span style="color:rgb(0, 102, 153);font-weight:bold;">task:scheduled-tasks</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">context:component-scan</span><span style="color:black;"> </span><span style="color:red;">base-package</span><span style="color:black;">=</span><span style="color:blue;">&quot; com.gy.mytask &quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">说明：ref参数指定的即任务类，method指定的即需要运行的方法，cron及cronExpression表达式，具体写法这里不介绍了，详情见上篇文章附录。</p>
<p style="margin:0px;padding:0px;">&lt;context:component-scan base-package=&quot;com.gy.mytask&quot; /&gt;这个配置不消多说了，spring扫描注解用的。</p>
<p style="margin:0px;padding:0px;">到这里配置就完成了，是不是很简单。</p>
<h3 style="font-size:1.2em;line-height:1.5em;margin:0px 0px 0.5em;padding:0px;color:black;">第二种：使用注解形式</h3>
<p style="margin:0px;padding:0px;">也许我们不想每写一个任务类还要在xml文件中配置下，我们可以使用注解@Scheduled，我们看看源文件中该注解的定义：</p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [13].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(100, 100, 100);">@Target</span><span style="color:black;">({java.lang.annotation.ElementType.METHOD, java.lang.annotation.ElementType.ANNOTATION_TYPE})  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(100, 100, 100);">@Retention</span><span style="color:black;">(RetentionPolicy.RUNTIME)  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(100, 100, 100);">@Documented</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">@interface</span><span style="color:black;"> Scheduled  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">{  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">abstract</span><span style="color:black;"> String cron();  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">abstract</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">long</span><span style="color:black;"> fixedDelay();  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">abstract</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">long</span><span style="color:black;"> fixedRate();  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"> 可以看出该注解有三个方法或者叫参数，分别表示的意思是：</p>
<p style="margin:0px;padding:0px;">cron：指定cron表达式</p>
<p style="margin:0px;padding:0px;">fixedDelay：官方文档解释：An interval-based trigger where the interval is measured from the completion time of the previous task. The time unit value is measured in milliseconds.即表示从上一个任务完成开始到下一个任务开始的间隔，单位是毫秒。</p>
<p style="margin:0px;padding:0px;">fixedRate：官方文档解释：An interval-based trigger where the interval is measured from the start time of the previous task. The time unit value is measured in milliseconds.即从上一个任务开始到下一个任务开始的间隔，单位是毫秒。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;">下面我来配置一下。</p>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;">第一步：编写pojo</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [14].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> org.springframework.scheduling.annotation.Scheduled;    </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> org.springframework.stereotype.Component;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(100, 100, 100);">@Component</span><span style="color:black;">(“taskJob”)  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> TaskJob {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(100, 100, 100);">@Scheduled</span><span style="color:black;">(cron = </span><span style="color:blue;">&quot;0 0 3 * * ?&quot;</span><span style="color:black;">)  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;"> job1() {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        System.out.println(“任务进行中。。。”);  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
<p style="margin:0px;padding:0px;"><strong style="font-weight:bold;"> 第二步：添加task相关的配置：</strong></p>
<div style="font-family:Monaco, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码 <div style="animation-duration:0.001s;animation-name:playerInserted;"></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Spring定时任务的几种实现 - - ITeye技术网站_files/Image [15].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;?</span><span style="color:rgb(0, 102, 153);font-weight:bold;">xml</span><span style="color:black;"> </span><span style="color:red;">version</span><span style="color:black;">=</span><span style="color:blue;">&quot;1.0&quot;</span><span style="color:black;"> </span><span style="color:red;">encoding</span><span style="color:black;">=</span><span style="color:blue;">&quot;UTF-8&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">?&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">beans</span><span style="color:black;"> </span><span style="color:red;">xmlns</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/beans&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xmlns:xsi</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span style="color:black;"> </span><span style="color:red;">xmlns:aop</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/aop&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xmlns:context</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/context&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xmlns:tx</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/tx&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xmlns:task</span><span style="color:black;">=</span><span style="color:blue;">&quot;http://www.springframework.org/schema/task&quot;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">xsi:schemaLocation</span><span style="color:black;">=&quot;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        http://www.springframework.org/schema/context   </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd&quot;  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:red;">default-lazy-init</span><span style="color:black;">=</span><span style="color:blue;">&quot;false&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">context:annotation-config</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    &lt;!—spring扫描注解的配置   --<span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">context:component-scan</span><span style="color:black;"> </span><span style="color:red;">base-package</span><span style="color:black;">=</span><span style="color:blue;">&quot;com.gy.mytask&quot;</span><span style="color:black;"> </span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">      </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">&lt;!—开启这个配置，spring才能识别@Scheduled注解   --<span style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">task:annotation-driven</span><span style="color:black;"> </span><span style="color:red;">scheduler</span><span style="color:black;">=</span><span style="color:blue;">&quot;qbScheduler&quot;</span><span style="color:black;"> </span><span style="color:red;">mode</span><span style="color:black;">=</span><span style="color:blue;">&quot;proxy&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left:1px solid rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">task:scheduler</span><span style="color:black;"> </span><span style="color:red;">id</span><span style="color:black;">=</span><span style="color:blue;">&quot;qbScheduler&quot;</span><span style="color:black;"> </span><span style="color:red;">pool-size</span><span style="color:black;">=</span><span style="color:blue;">&quot;10&quot;</span><span style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">  </span></span></li></ol></div>
<p style="margin:0px;padding:0px;">说明：理论上只需要加上&lt;task:annotation-driven /&gt;这句配置就可以了，这些参数都不是必须的。</p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"> Ok配置完毕，当然spring task还有很多参数，我就不一一解释了，具体参考xsd文档http://www.springframework.org/schema/task/spring-task-3.0.xsd。</p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">附录：</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">cronExpression的配置说明，具体使用以及参数请百度google</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">字段   允许值   允许的特殊字符</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">秒    0-59    , - * /</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">分    0-59    , - * /</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">小时    0-23    , - * /</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">日期    1-31    , - * ? / L W C</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">月份    1-12 或者 JAN-DEC    , - * /</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">星期    1-7 或者 SUN-SAT    , - * ? / L C #</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">年（可选）    留空, 1970-2099    , - * / </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">- 区间  </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">* 通配符  </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">? 你不想设置那个字段</em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">下面只例出几个式子</em></p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">CRON表达式    含义 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 0 12 * * ?&quot;    每天中午十二点触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 15 10 ? * *&quot;    每天早上10：15触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 15 10 * * ?&quot;    每天早上10：15触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 15 10 * * ? *&quot;    每天早上10：15触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 15 10 * * ? 2005&quot;    2005年的每天早上10：15触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 * 14 * * ?&quot;    每天从下午2点开始到2点59分每分钟一次触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 0/5 14 * * ?&quot;    每天从下午2点开始到2：55分结束每5分钟一次触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 0/5 14,18 * * ?&quot;    每天的下午2点至2：55和6点至6点55分两个时间段内每5分钟一次触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 0-5 14 * * ?&quot;    每天14:00至14:05每分钟一次触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 10,44 14 ? 3 WED&quot;    三月的每周三的14：10和14：44触发 </em></p>
<p style="margin:0px;padding:0px;"><em style="font-style:italic;">&quot;0 15 10 ? * MON-FRI&quot;    每个周一、周二、周三、周四、周五的10：15触发 </em></p>
<p style="margin:0px;padding:0px;"> </p>
<p style="margin:0px;padding:0px;"> </p>
</div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 