<html>
<head>
  <title>ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6342"/>
<h1>ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/8/3 10:20</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/qq_21033663/article/details/52461543"><i>http://blog.csdn.net/qq_21033663/article/details/52461543</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="background:url(&quot;http://static.blog.csdn.net/skin/dark1/css/../images/body_bg.jpg&quot;) center 40px repeat;font-size:12px;font-family:Arial, Console, Verdana, &quot;Courier New&quot;;"><div><div style="text-align:left;"><div style="overflow:hidden;"><div style="min-width:700px;background:rgb(255, 255, 255);"><div>
    <div style="display:block;margin:5px 0px;color:rgb(0, 0, 0);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:20px;line-height:30px;font-family:&quot;Microsoft YaHei&quot;;">   
         <span style="display:inline-block;width:19px;height:19px;margin:0px 2px 0px 0px;background:url(&quot;http://static.blog.csdn.net/skin/dark1/css/../../../images/ico_Original.gif&quot;) 0px 0px no-repeat;vertical-align:middle;"></span>

    <h1 style="font-size:20px;padding:0px;margin:0px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:30px;font-family:&quot;Microsoft YaHei&quot;;vertical-align:middle;font-variant:normal;display:inline;">
        <span><a href="http://blog.csdn.net/qq_21033663/article/details/52461543" style="text-decoration:none;color:rgb(0, 0, 0);">
        ActiveMQ安装配置及使用        
           
        </a>
        </span>

         
    </h1>
<span style="color:rgb(0, 0, 0);font-style:normal;font-variant:normal;font-weight:normal;font-size:20px;line-height:30px;font-family:&quot;Microsoft YaHei&quot;;display:block;height:0px;clear:both;visibility:hidden;">.</span></div>

   

        <div style="line-height:22px;padding:0px 20px 5px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:12px;color:rgb(153, 153, 153);font-family:Arial;text-align:right;border-bottom:1px solid rgb(237, 237, 237);margin:0px -20px;overflow:hidden;display:block;">
        <div>
            <span style="margin:0px 5px 0px 0px;">2016-09-07 17:28</span>
            <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(&quot;http://static.blog.csdn.net/css/../../../images/ico_view.png&quot;) left center no-repeat;" title="阅读次数">1613人阅读</span>
            <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(&quot;http://static.blog.csdn.net/css/../../../images/ico_comm.png&quot;) left center no-repeat;" title="评论次数"> <a href="http://blog.csdn.net/qq_21033663/article/details/52461543#comments" style="color:rgb(202, 0, 0);text-decoration:none;">评论</a>(0)</span>
            <span style="margin:0px 5px;"> <a href="#" style="color:rgb(202, 0, 0);text-decoration:none;" target="_blank" title="收藏">收藏</a></span>
             <span style="margin:0px 5px;"> <a href="http://blog.csdn.net/qq_21033663/article/details/52461543#report" style="color:rgb(202, 0, 0);text-decoration:none;" title="举报">举报</a></span>

        </div>
    <span style="color:rgb(153, 153, 153);font-style:normal;font-variant:normal;font-weight:400;font-size:12px;line-height:22px;font-family:Arial;text-align:right;height:0px;visibility:hidden;display:block;clear:both;">.</span></div>    
    
      <div style="border-bottom:1px solid rgb(237, 237, 237);margin:0px -20px;padding:5px 20px;display:block;">
        <div style="font-size:14px;float:left;display:inline-block;color:rgb(51, 51, 51);width:70px;line-height:28px;">
           <img src="ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客_files/category_icon.jpg" type="image/jpeg" data-filename="category_icon.jpg" height="12" style="border:none;vertical-align:middle;" width="14"/>
            <span style="vertical-align:middle;display:inline-block;">分类：</span>
        </div>
        <div style="font-size:14px;float:left;display:inline-block;color:rgb(223, 52, 52);width:90%;">
                    <span style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">
                        <span>java<em style="font-style:normal;">（48）</em></span>
                      <img src="ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客_files/arrow_triangle _down.jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:none;display:inline;" width="10"/>
                      
                        
                    </span>                    
                    <span style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">
                        <span>消息队列<em style="font-style:normal;">（5）</em></span>
                      <img src="ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客_files/arrow_triangle _down [1].jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:none;display:inline;" width="10"/>
                      
                        
                    </span>                    
        </div>
    <span style="height:0px;visibility:hidden;display:block;clear:both;">.</span></div>
        <div style="padding:20px 0px;">         
            <p style="margin:0px;padding:0px;height:14px;line-height:14px;border-left:3px solid rgb(228, 28, 30);padding-left:10px;color:rgb(102, 102, 102);font-size:14px;">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
        </div>

  

  
  
     


<div style="clear:both;"></div><div style="border:solid 1px #ccc;background:#eee;float:left;min-width:200px;padding:4px 10px;"><p style="margin:0;padding:0px;text-align:right;"><span style="float:left;">目录<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="color:rgb(202, 0, 0);text-decoration:none;" title="系统根据文章中H1到H6标签自动生成文章目录">(?)</a></span><a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="color:rgb(202, 0, 0);text-decoration:none;" title="展开">[+]</a></p></div><div style="clear:both;"></div><div style="margin:20px 0px 0px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14px;line-height:26px;font-family:Arial;">
        <div style="font-family:&quot;microsoft yahei&quot;;font-size:15px;color:rgb(63, 63, 63);"><h2 style="padding:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;line-height:1.3em;font-size:2.13em;"><a name="t0" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank"></a>（一）ActiveMQ介绍</h2>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">ActiveMQ 是Apache出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个完全支持JMS1.1和J2EE 1.4规范的 JMS Provider实现，尽管JMS规范出台已经是很久的事情了，但是JMS在当今的J2EE应用中间仍然扮演着特殊的地位。 <br style="box-sizing:border-box;"/>
特性列表： <br style="box-sizing:border-box;"/>
⒈ 多种语言和协议编写客户端。语言: <a href="http://lib.csdn.net/base/java" style="color:#df3434;text-decoration:none;box-sizing:border-box;font-weight:bold;" target="_blank" title="Java 知识库">Java</a>,C,C++,C#,Ruby,Perl,<a href="http://lib.csdn.net/base/python" style="color:#df3434;text-decoration:none;box-sizing:border-box;font-weight:bold;" target="_blank" title="Python知识库">Python</a>,<a href="http://lib.csdn.net/base/php" style="color:#df3434;text-decoration:none;box-sizing:border-box;font-weight:bold;" target="_blank" title="PHP知识库">PHP</a>。应用协议： OpenWire,Stomp REST,WS Notification,XMPP,AMQP <br style="box-sizing:border-box;"/>
⒉ 完全支持JMS1.1和J2EE 1.4规范 （持久化，XA消息，事务) <br style="box-sizing:border-box;"/>
⒊ 对<a href="http://lib.csdn.net/base/javaee" style="color:#df3434;text-decoration:none;box-sizing:border-box;font-weight:bold;" target="_blank" title="Java EE知识库">spring</a>的支持，ActiveMQ可以很容易内嵌到使用Spring的系统里面去，而且也支持Spring2.0的特性 <br style="box-sizing:border-box;"/>
⒋ 通过了常见J2EE服务器（如 Geronimo,JBoss 4,GlassFish,WebLogic)的<a href="http://lib.csdn.net/base/softwaretest" style="color:#df3434;text-decoration:none;box-sizing:border-box;font-weight:bold;" target="_blank" title="软件测试知识库">测试</a>，其中通过JCA 1.5 resource adaptors的配置，可以让ActiveMQ可以自动的部署到任何兼容J2EE 1.4 商业服务器上 <br style="box-sizing:border-box;"/>
⒌ 支持多种传送协议：in-VM,TCP,SSL,NIO,UDP,JGroups,JXTA <br style="box-sizing:border-box;"/>
⒍ 支持通过JDBC和journal提供高速的消息持久化 <br style="box-sizing:border-box;"/>
⒎ 从设计上保证了高性能的集群，客户端-服务器，点对点 <br style="box-sizing:border-box;"/>
⒏ 支持Ajax <br style="box-sizing:border-box;"/>
⒐ 支持与Axis的整合 <br style="box-sizing:border-box;"/>
⒑ 可以很容易的调用内嵌JMS provider，进行测试</p>

<hr style="border-right-color:initial;box-sizing:border-box;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;margin:2em 0px;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgba(128, 128, 128, 0.0980392);"/>

<h2 style="padding:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;line-height:1.3em;font-size:2.13em;"><a name="t1" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank"></a>（二）ActiveMQ安装、配置、启动、可视化界面</h2>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">1、安装 <br style="box-sizing:border-box;"/>
下载地址：<a href="http://activemq.apache.org/download.html" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank">http://activemq.apache.org/download.html</a> <br style="box-sizing:border-box;"/>
2、配置（conf目录下） <br style="box-sizing:border-box;"/>
1）用户名密码设置 <br style="box-sizing:border-box;"/>
<img src="ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客_files/20160907170258922.png" type="image/png" data-filename="20160907170258922.png" alt="设置用户名密码" height="384" style="border:none;box-sizing:border-box;max-width:100%;" title="" width="637"/> <br style="box-sizing:border-box;"/>
2）开启jmx监控 <br style="box-sizing:border-box;"/>
activemq.xml中进行如下修改 <br style="box-sizing:border-box;"/>
<img src="ActiveMQ安装配置及使用 - 猴子哥哥的博客 - CSDN博客_files/20160907170518361.png" type="image/png" data-filename="20160907170518361.png" alt="这里写图片描述" height="562" style="border:none;box-sizing:border-box;max-width:100%;" title="" width="945"/> <br style="box-sizing:border-box;"/>
注：这里的配置不是必须，根据需要自行配置 <br style="box-sizing:border-box;"/>
3、启动 <br style="box-sizing:border-box;"/>
直接运行bin目录下：activemq.bat <br style="box-sizing:border-box;"/>
4、可视化界面 <br style="box-sizing:border-box;"/>
浏览器中：<a href="http://localhost:8161/admin/index.jsp" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank">http://localhost:8161/admin/index.jsp</a> <br style="box-sizing:border-box;"/>
用户名，密码在：jetty-realm.properties中设置</p>

<hr style="border-right-color:initial;box-sizing:border-box;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;margin:2em 0px;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgba(128, 128, 128, 0.0980392);"/>



<h2 style="padding:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;line-height:1.3em;font-size:2.13em;"><a name="t2" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank"></a>（三）点对点式消息队列（Queue）</h2>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">消息生产者</p>



<pre style="word-wrap:break-word;box-sizing:border-box;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, monospace;border-radius:0px;font-size:14px;line-height:1.45;word-break:break-all;border:0px solid rgb(136, 136, 136);display:block;background-color:rgba(128, 128, 128, 0.0470588);padding:5px 5px 5px 60px;position:relative;overflow-y:hidden;overflow-x:auto;white-space:nowrap;margin:0px 0px 1.1em;"><code style="font-family:&quot;Source Code Pro&quot;, monospace;display:block;background:rgb(255, 255, 255);box-sizing:border-box;color:inherit;padding:0px;font-size:inherit;background-color:transparent;white-space:pre;border-radius:0px;word-wrap:normal;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Connection;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.ConnectionFactory;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Destination;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.JMSException;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.MessageProducer;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Session;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.TextMessage;</span>

<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> org.apache.activemq.ActiveMQConnectionFactory;</span>

<span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="box-sizing:border-box;"><span style="color:rgb(0, 0, 136);box-sizing:border-box;">class</span> <span style="box-sizing:border-box;color:rgb(102, 0, 102);">QueueProducer</span> {</span>

    <span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">static</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">void</span> main(String[] args) {
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接信息设置</span>
        String username = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;system&quot;</span>;
        String password = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;manager&quot;</span>;
        String brokerURL = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;failover://tcp://localhost:61616&quot;</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接工厂</span>
        ConnectionFactory connectionFactory = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接</span>
        Connection connection = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//会话 接受或者发送消息的线程</span>
        Session session = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//消息的目的地</span>
        Destination destination = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//消息生产者</span>
        MessageProducer messageProducer = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//实例化连接工厂</span>
        connectionFactory = <span style="color:rgb(0, 0, 136);box-sizing:border-box;">new</span> ActiveMQConnectionFactory(username, password, brokerURL);

        <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//通过连接工厂获取连接</span>
            connection = connectionFactory.createConnection();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//启动连接</span>
            connection.start();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建session</span>
            session = connection.createSession(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">true</span>, Session.AUTO_ACKNOWLEDGE);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建一个名称为QueueTest的消息队列</span>
            destination = session.createQueue(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;QueueTest&quot;</span>);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建消息生产者</span>
            messageProducer = session.createProducer(destination);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//发送消息</span>
            TextMessage message = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
            <span style="color:rgb(0, 0, 136);box-sizing:border-box;">for</span> (int i=<span style="color:rgb(0, 102, 102);box-sizing:border-box;">0</span>; i&lt;<span style="color:rgb(0, 102, 102);box-sizing:border-box;">10</span>; i++) {
                <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建要发送的文本信息</span>
                message = session.createTextMessage(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;Queue消息测试&quot;</span> +(i+<span style="color:rgb(0, 102, 102);box-sizing:border-box;">1</span>));
                <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//通过消息生产者发出消息 </span>
                messageProducer.send(message);
                System.out.println(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;发送成功：&quot;</span> + message.getText());
            }
            session.commit();
        } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (Exception e) {
            e.printStackTrace();
        }<span style="color:rgb(0, 0, 136);box-sizing:border-box;">finally</span>{
            <span style="color:rgb(0, 0, 136);box-sizing:border-box;">if</span>(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span> != connection){
                <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {
                    connection.close();
                } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (JMSException e) {
                    e.printStackTrace();
                }
            }
        }

    }

}
</code><ul style="margin:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;position:absolute;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;opacity:0;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li><li style="box-sizing:border-box;padding:0px 5px;">55</li><li style="box-sizing:border-box;padding:0px 5px;">56</li><li style="box-sizing:border-box;padding:0px 5px;">57</li><li style="box-sizing:border-box;padding:0px 5px;">58</li><li style="box-sizing:border-box;padding:0px 5px;">59</li><li style="box-sizing:border-box;padding:0px 5px;">60</li><li style="box-sizing:border-box;padding:0px 5px;">61</li><li style="box-sizing:border-box;padding:0px 5px;">62</li><li style="box-sizing:border-box;padding:0px 5px;">63</li><li style="box-sizing:border-box;padding:0px 5px;">64</li><li style="box-sizing:border-box;padding:0px 5px;">65</li><li style="box-sizing:border-box;padding:0px 5px;">66</li><li style="box-sizing:border-box;padding:0px 5px;">67</li></ul><ul style="left:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;position:absolute;margin:0px;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li><li style="box-sizing:border-box;padding:0px 5px;">55</li><li style="box-sizing:border-box;padding:0px 5px;">56</li><li style="box-sizing:border-box;padding:0px 5px;">57</li><li style="box-sizing:border-box;padding:0px 5px;">58</li><li style="box-sizing:border-box;padding:0px 5px;">59</li><li style="box-sizing:border-box;padding:0px 5px;">60</li><li style="box-sizing:border-box;padding:0px 5px;">61</li><li style="box-sizing:border-box;padding:0px 5px;">62</li><li style="box-sizing:border-box;padding:0px 5px;">63</li><li style="box-sizing:border-box;padding:0px 5px;">64</li><li style="box-sizing:border-box;padding:0px 5px;">65</li><li style="box-sizing:border-box;padding:0px 5px;">66</li><li style="box-sizing:border-box;padding:0px 5px;">67</li></ul></pre>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">消息消费者</p>



<pre style="word-wrap:break-word;box-sizing:border-box;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, monospace;border-radius:0px;font-size:14px;line-height:1.45;word-break:break-all;border:0px solid rgb(136, 136, 136);display:block;background-color:rgba(128, 128, 128, 0.0470588);padding:5px 5px 5px 60px;position:relative;overflow-y:hidden;overflow-x:auto;white-space:nowrap;margin:0px 0px 1.1em;"><code style="font-family:&quot;Source Code Pro&quot;, monospace;display:block;background:rgb(255, 255, 255);box-sizing:border-box;color:inherit;padding:0px;font-size:inherit;background-color:transparent;white-space:pre;border-radius:0px;word-wrap:normal;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Connection;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.ConnectionFactory;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Destination;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.JMSException;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.MessageConsumer;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Session;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.TextMessage;</span>

<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> org.apache.activemq.ActiveMQConnectionFactory;</span>

<span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="box-sizing:border-box;"><span style="color:rgb(0, 0, 136);box-sizing:border-box;">class</span> <span style="box-sizing:border-box;color:rgb(102, 0, 102);">QueueConsumer</span> {</span>

    <span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">static</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">void</span> main(String[] args) {
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接信息设置</span>
        String username = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;system&quot;</span>;
        String password = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;manager&quot;</span>;
        String brokerURL = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;failover://tcp://localhost:61616&quot;</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接工厂</span>
        ConnectionFactory connectionFactory = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接</span>
        Connection connection = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//会话 接受或者发送消息的线程</span>
        Session session = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//消息的目的地</span>
        Destination destination = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//消息消费者</span>
        MessageConsumer messageConsumer = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//实例化连接工厂</span>
        connectionFactory = <span style="color:rgb(0, 0, 136);box-sizing:border-box;">new</span> ActiveMQConnectionFactory(username, password, brokerURL);

        <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//通过连接工厂获取连接</span>
            connection = connectionFactory.createConnection();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//启动连接</span>
            connection.start();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建session</span>
            session = connection.createSession(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">false</span>, Session.AUTO_ACKNOWLEDGE);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建一个连接QueueTest的消息队列</span>
            destination = session.createQueue(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;QueueTest&quot;</span>);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建消息消费者</span>
            messageConsumer = session.createConsumer(destination);

            <span style="color:rgb(0, 0, 136);box-sizing:border-box;">while</span> (<span style="color:rgb(0, 102, 102);box-sizing:border-box;">true</span>) {
                TextMessage textMessage = (TextMessage) messageConsumer.receive(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">100000</span>);
                <span style="color:rgb(0, 0, 136);box-sizing:border-box;">if</span>(textMessage != <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>){
                    System.out.println(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;成功接收消息:&quot;</span> + textMessage.getText());
                }<span style="color:rgb(0, 0, 136);box-sizing:border-box;">else</span> {
                    <span style="color:rgb(0, 0, 136);box-sizing:border-box;">break</span>;
                }
            }
        } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (JMSException e) {
            e.printStackTrace();
        }
    }</code><ul style="margin:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;position:absolute;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;opacity:0;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li></ul><ul style="left:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;position:absolute;margin:0px;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li></ul></pre>

<hr style="border-right-color:initial;box-sizing:border-box;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;margin:2em 0px;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgba(128, 128, 128, 0.0980392);"/>



<h2 style="padding:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;line-height:1.3em;font-size:2.13em;"><a name="t3" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank"></a>（四）主题发布订阅式（Topic）</h2>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">主题发布者</p>



<pre style="word-wrap:break-word;box-sizing:border-box;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, monospace;border-radius:0px;font-size:14px;line-height:1.45;word-break:break-all;border:0px solid rgb(136, 136, 136);display:block;background-color:rgba(128, 128, 128, 0.0470588);padding:5px 5px 5px 60px;position:relative;overflow-y:hidden;overflow-x:auto;white-space:nowrap;margin:0px 0px 1.1em;"><code style="font-family:&quot;Source Code Pro&quot;, monospace;display:block;background:rgb(255, 255, 255);box-sizing:border-box;color:inherit;padding:0px;font-size:inherit;background-color:transparent;white-space:pre;border-radius:0px;word-wrap:normal;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Connection;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.ConnectionFactory;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.DeliveryMode;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.JMSException;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.MessageProducer;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Session;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.TextMessage;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Topic;</span>

<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> org.apache.activemq.ActiveMQConnectionFactory;</span>

<span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="box-sizing:border-box;"><span style="color:rgb(0, 0, 136);box-sizing:border-box;">class</span> <span style="box-sizing:border-box;color:rgb(102, 0, 102);">TopicProducer</span> {</span>

    <span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">static</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">void</span> main(String[] args) {
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接信息设置</span>
        String username = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;system&quot;</span>;
        String password = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;manager&quot;</span>;
        String brokerURL = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;failover://tcp://localhost:61616&quot;</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接工厂</span>
        ConnectionFactory connectionFactory = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接</span>
        Connection connection = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//会话 接受或者发送消息的线程</span>
        Session session = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//消息的主题</span>
        Topic topic = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//消息生产者</span>
        MessageProducer messageProducer = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//实例化连接工厂</span>
        connectionFactory = <span style="color:rgb(0, 0, 136);box-sizing:border-box;">new</span> ActiveMQConnectionFactory(username, password, brokerURL);
        <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//通过连接工厂获取连接</span>
            connection = connectionFactory.createConnection();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//启动连接</span>
            connection.start();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建session</span>
            session = connection.createSession(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">true</span>, Session.AUTO_ACKNOWLEDGE);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建名为TopicTest的主题</span>
            topic = session.createTopic(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;TopicTest&quot;</span>);  
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建主题生产者</span>
            messageProducer = session.createProducer(topic);
            messageProducer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);<span style="color:rgb(136, 0, 0);box-sizing:border-box;">//不将数据持久化</span>
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//发送主题</span>
            TextMessage message = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
            <span style="color:rgb(0, 0, 136);box-sizing:border-box;">for</span> (int i=<span style="color:rgb(0, 102, 102);box-sizing:border-box;">0</span>; i&lt;<span style="color:rgb(0, 102, 102);box-sizing:border-box;">10</span>; i++) {
                <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建要发送的文本信息</span>
                message = session.createTextMessage(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;Topic主题测试&quot;</span> +(i+<span style="color:rgb(0, 102, 102);box-sizing:border-box;">1</span>));
                <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//通过主题生产者发出消息 </span>
                messageProducer.send(message);
                System.out.println(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;发送成功：&quot;</span> + message.getText());
            }
            session.commit();
        } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (Exception e) {
            e.printStackTrace();
        }<span style="color:rgb(0, 0, 136);box-sizing:border-box;">finally</span>{
            <span style="color:rgb(0, 0, 136);box-sizing:border-box;">if</span>(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span> != connection){
                <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {
                    connection.close();
                } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (JMSException e) {
                    e.printStackTrace();
                }
            }
        }  
    }

}</code><ul style="margin:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;position:absolute;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;opacity:0;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li><li style="box-sizing:border-box;padding:0px 5px;">55</li><li style="box-sizing:border-box;padding:0px 5px;">56</li><li style="box-sizing:border-box;padding:0px 5px;">57</li><li style="box-sizing:border-box;padding:0px 5px;">58</li><li style="box-sizing:border-box;padding:0px 5px;">59</li><li style="box-sizing:border-box;padding:0px 5px;">60</li><li style="box-sizing:border-box;padding:0px 5px;">61</li><li style="box-sizing:border-box;padding:0px 5px;">62</li><li style="box-sizing:border-box;padding:0px 5px;">63</li><li style="box-sizing:border-box;padding:0px 5px;">64</li><li style="box-sizing:border-box;padding:0px 5px;">65</li><li style="box-sizing:border-box;padding:0px 5px;">66</li></ul><ul style="left:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;position:absolute;margin:0px;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li><li style="box-sizing:border-box;padding:0px 5px;">55</li><li style="box-sizing:border-box;padding:0px 5px;">56</li><li style="box-sizing:border-box;padding:0px 5px;">57</li><li style="box-sizing:border-box;padding:0px 5px;">58</li><li style="box-sizing:border-box;padding:0px 5px;">59</li><li style="box-sizing:border-box;padding:0px 5px;">60</li><li style="box-sizing:border-box;padding:0px 5px;">61</li><li style="box-sizing:border-box;padding:0px 5px;">62</li><li style="box-sizing:border-box;padding:0px 5px;">63</li><li style="box-sizing:border-box;padding:0px 5px;">64</li><li style="box-sizing:border-box;padding:0px 5px;">65</li><li style="box-sizing:border-box;padding:0px 5px;">66</li></ul></pre>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">主题订阅者</p>



<pre style="word-wrap:break-word;box-sizing:border-box;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, monospace;border-radius:0px;font-size:14px;line-height:1.45;word-break:break-all;border:0px solid rgb(136, 136, 136);display:block;background-color:rgba(128, 128, 128, 0.0470588);padding:5px 5px 5px 60px;position:relative;overflow-y:hidden;overflow-x:auto;white-space:nowrap;margin:0px 0px 1.1em;"><code style="font-family:&quot;Source Code Pro&quot;, monospace;display:block;background:rgb(255, 255, 255);box-sizing:border-box;color:inherit;padding:0px;font-size:inherit;background-color:transparent;white-space:pre;border-radius:0px;word-wrap:normal;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Connection;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.ConnectionFactory;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.JMSException;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Message;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.MessageConsumer;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.MessageListener;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Session;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.TextMessage;</span>
<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> javax.jms.Topic;</span>

<span style="color:rgb(68, 68, 68);box-sizing:border-box;"><span style="color:rgb(68, 68, 68);box-sizing:border-box;">import</span> org.apache.activemq.ActiveMQConnectionFactory;</span>

<span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="box-sizing:border-box;"><span style="color:rgb(0, 0, 136);box-sizing:border-box;">class</span> <span style="box-sizing:border-box;color:rgb(102, 0, 102);">TopicConsumer</span> {</span>

    <span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">static</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">void</span> main(String[] args) {
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接信息设置</span>
        String username = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;system&quot;</span>;
        String password = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;manager&quot;</span>;
        String brokerURL = <span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;failover://tcp://localhost:61616&quot;</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接工厂</span>
        ConnectionFactory connectionFactory = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//连接</span>
        Connection connection = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//会话 接受或者发送消息的线程</span>
        Session session = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//主题的目的地</span>
        Topic topic = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//主题消费者</span>
        MessageConsumer messageConsumer = <span style="color:rgb(0, 102, 102);box-sizing:border-box;">null</span>;
        <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//实例化连接工厂</span>
        connectionFactory = <span style="color:rgb(0, 0, 136);box-sizing:border-box;">new</span> ActiveMQConnectionFactory(username, password, brokerURL);

        <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//通过连接工厂获取连接</span>
            connection = connectionFactory.createConnection();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//启动连接</span>
            connection.start();
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建session</span>
            session = connection.createSession(<span style="color:rgb(0, 102, 102);box-sizing:border-box;">false</span>, Session.AUTO_ACKNOWLEDGE);
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建一个连接TopicTest的主题</span>
            topic = session.createTopic(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;TopicTest&quot;</span>);  
            <span style="color:rgb(136, 0, 0);box-sizing:border-box;">//创建主题消费者</span>
            messageConsumer = session.createConsumer(topic);

            messageConsumer.setMessageListener(<span style="color:rgb(0, 0, 136);box-sizing:border-box;">new</span> MyMessageListener());
        } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (JMSException e) {
            e.printStackTrace();
        }
    }

}

<span style="box-sizing:border-box;"><span style="color:rgb(0, 0, 136);box-sizing:border-box;">class</span> <span style="box-sizing:border-box;color:rgb(102, 0, 102);">MyMessageListener</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">implements</span> <span style="box-sizing:border-box;color:rgb(102, 0, 102);">MessageListener</span> {</span>

    @Override
    <span style="color:rgb(0, 0, 136);box-sizing:border-box;">public</span> <span style="color:rgb(0, 0, 136);box-sizing:border-box;">void</span> onMessage(Message message) {  
        TextMessage textMessage = (TextMessage) message;  
        <span style="color:rgb(0, 0, 136);box-sizing:border-box;">try</span> {  
            System.out.println(<span style="color:rgb(0, 136, 0);box-sizing:border-box;">&quot;接收订阅主题：&quot;</span> + textMessage.getText());  
        } <span style="color:rgb(0, 0, 136);box-sizing:border-box;">catch</span> (JMSException e) {  
            e.printStackTrace();  
        }  
    } 

}
</code><ul style="margin:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;position:absolute;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;opacity:0;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li><li style="box-sizing:border-box;padding:0px 5px;">55</li><li style="box-sizing:border-box;padding:0px 5px;">56</li><li style="box-sizing:border-box;padding:0px 5px;">57</li><li style="box-sizing:border-box;padding:0px 5px;">58</li><li style="box-sizing:border-box;padding:0px 5px;">59</li><li style="box-sizing:border-box;padding:0px 5px;">60</li><li style="box-sizing:border-box;padding:0px 5px;">61</li><li style="box-sizing:border-box;padding:0px 5px;">62</li><li style="box-sizing:border-box;padding:0px 5px;">63</li><li style="box-sizing:border-box;padding:0px 5px;">64</li><li style="box-sizing:border-box;padding:0px 5px;">65</li><li style="box-sizing:border-box;padding:0px 5px;">66</li></ul><ul style="left:0px;box-sizing:border-box;width:50px;background-color:rgb(238, 238, 238);top:0px;position:absolute;margin:0px;padding:6px 0px 40px;border-right:1px solid rgb(221, 221, 221);list-style:none;text-align:right;"><li style="box-sizing:border-box;padding:0px 5px;">1</li><li style="box-sizing:border-box;padding:0px 5px;">2</li><li style="box-sizing:border-box;padding:0px 5px;">3</li><li style="box-sizing:border-box;padding:0px 5px;">4</li><li style="box-sizing:border-box;padding:0px 5px;">5</li><li style="box-sizing:border-box;padding:0px 5px;">6</li><li style="box-sizing:border-box;padding:0px 5px;">7</li><li style="box-sizing:border-box;padding:0px 5px;">8</li><li style="box-sizing:border-box;padding:0px 5px;">9</li><li style="box-sizing:border-box;padding:0px 5px;">10</li><li style="box-sizing:border-box;padding:0px 5px;">11</li><li style="box-sizing:border-box;padding:0px 5px;">12</li><li style="box-sizing:border-box;padding:0px 5px;">13</li><li style="box-sizing:border-box;padding:0px 5px;">14</li><li style="box-sizing:border-box;padding:0px 5px;">15</li><li style="box-sizing:border-box;padding:0px 5px;">16</li><li style="box-sizing:border-box;padding:0px 5px;">17</li><li style="box-sizing:border-box;padding:0px 5px;">18</li><li style="box-sizing:border-box;padding:0px 5px;">19</li><li style="box-sizing:border-box;padding:0px 5px;">20</li><li style="box-sizing:border-box;padding:0px 5px;">21</li><li style="box-sizing:border-box;padding:0px 5px;">22</li><li style="box-sizing:border-box;padding:0px 5px;">23</li><li style="box-sizing:border-box;padding:0px 5px;">24</li><li style="box-sizing:border-box;padding:0px 5px;">25</li><li style="box-sizing:border-box;padding:0px 5px;">26</li><li style="box-sizing:border-box;padding:0px 5px;">27</li><li style="box-sizing:border-box;padding:0px 5px;">28</li><li style="box-sizing:border-box;padding:0px 5px;">29</li><li style="box-sizing:border-box;padding:0px 5px;">30</li><li style="box-sizing:border-box;padding:0px 5px;">31</li><li style="box-sizing:border-box;padding:0px 5px;">32</li><li style="box-sizing:border-box;padding:0px 5px;">33</li><li style="box-sizing:border-box;padding:0px 5px;">34</li><li style="box-sizing:border-box;padding:0px 5px;">35</li><li style="box-sizing:border-box;padding:0px 5px;">36</li><li style="box-sizing:border-box;padding:0px 5px;">37</li><li style="box-sizing:border-box;padding:0px 5px;">38</li><li style="box-sizing:border-box;padding:0px 5px;">39</li><li style="box-sizing:border-box;padding:0px 5px;">40</li><li style="box-sizing:border-box;padding:0px 5px;">41</li><li style="box-sizing:border-box;padding:0px 5px;">42</li><li style="box-sizing:border-box;padding:0px 5px;">43</li><li style="box-sizing:border-box;padding:0px 5px;">44</li><li style="box-sizing:border-box;padding:0px 5px;">45</li><li style="box-sizing:border-box;padding:0px 5px;">46</li><li style="box-sizing:border-box;padding:0px 5px;">47</li><li style="box-sizing:border-box;padding:0px 5px;">48</li><li style="box-sizing:border-box;padding:0px 5px;">49</li><li style="box-sizing:border-box;padding:0px 5px;">50</li><li style="box-sizing:border-box;padding:0px 5px;">51</li><li style="box-sizing:border-box;padding:0px 5px;">52</li><li style="box-sizing:border-box;padding:0px 5px;">53</li><li style="box-sizing:border-box;padding:0px 5px;">54</li><li style="box-sizing:border-box;padding:0px 5px;">55</li><li style="box-sizing:border-box;padding:0px 5px;">56</li><li style="box-sizing:border-box;padding:0px 5px;">57</li><li style="box-sizing:border-box;padding:0px 5px;">58</li><li style="box-sizing:border-box;padding:0px 5px;">59</li><li style="box-sizing:border-box;padding:0px 5px;">60</li><li style="box-sizing:border-box;padding:0px 5px;">61</li><li style="box-sizing:border-box;padding:0px 5px;">62</li><li style="box-sizing:border-box;padding:0px 5px;">63</li><li style="box-sizing:border-box;padding:0px 5px;">64</li><li style="box-sizing:border-box;padding:0px 5px;">65</li><li style="box-sizing:border-box;padding:0px 5px;">66</li></ul></pre>

<p style="padding:0px;box-sizing:border-box;margin:0px 0px 1.1em;">注： <br style="box-sizing:border-box;"/>
1、代码中所需额外jar包在下载的mq文件夹中，例如我使用的：activemq-all-5.9.0.jar <br style="box-sizing:border-box;"/>
2、对于消息队列，异步生产和消费；对于主题发布订阅要先启动订阅者进行监听，然后在发布方可接收到订阅主题 <br style="box-sizing:border-box;"/>
3、关于Queue与Topic的具体区别，详见<a href="http://blog.csdn.net/qq_21033663/article/details/52458305" style="text-decoration:none;box-sizing:border-box;color:rgb(79, 161, 219);" target="_blank">http://blog.csdn.net/qq_21033663/article/details/52458305</a></p></div>
        
   
</div>









<div style="zoom:1;float:right;">
<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="padding-left:17px;color:rgb(51, 51, 51);background-image:url('http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png') !important;background-position:0 0 !important;float:left;font-size:12px;text-decoration:none;line-height:16px;height:16px;background-repeat:no-repeat;cursor:pointer;margin:6px 6px 6px 0px;" target="_blank"></a>
<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="line-height:16px;color:rgb(202, 0, 0);background-position:0 -52px !important;text-decoration:none;font-size:12px;padding-left:17px;float:left;height:16px;background-image:url(&quot;http://bdimg.share.baidu.com/static/api/css/../img/share/icons_0_16.png?v=91362611.png&quot;);background-repeat:no-repeat;cursor:pointer;margin:6px 6px 6px 0px;" target="_blank" title="分享到QQ空间"></a>
<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="line-height:16px;color:rgb(202, 0, 0);background-position:0 -104px !important;text-decoration:none;font-size:12px;padding-left:17px;float:left;height:16px;background-image:url(&quot;http://bdimg.share.baidu.com/static/api/css/../img/share/icons_0_16.png?v=91362611.png&quot;);background-repeat:no-repeat;cursor:pointer;margin:6px 6px 6px 0px;" target="_blank" title="分享到新浪微博"></a>
<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="line-height:16px;color:rgb(202, 0, 0);background-position:0 -260px !important;text-decoration:none;font-size:12px;padding-left:17px;float:left;height:16px;background-image:url(&quot;http://bdimg.share.baidu.com/static/api/css/../img/share/icons_0_16.png?v=91362611.png&quot;);background-repeat:no-repeat;cursor:pointer;margin:6px 6px 6px 0px;" target="_blank" title="分享到腾讯微博"></a>
<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="line-height:16px;color:rgb(202, 0, 0);background-position:0 -208px !important;text-decoration:none;font-size:12px;padding-left:17px;float:left;height:16px;background-image:url(&quot;http://bdimg.share.baidu.com/static/api/css/../img/share/icons_0_16.png?v=91362611.png&quot;);background-repeat:no-repeat;cursor:pointer;margin:6px 6px 6px 0px;" target="_blank" title="分享到人人网"></a>
<a href="http://blog.csdn.net/qq_21033663/article/details/52461543#" style="line-height:16px;color:rgb(202, 0, 0);background-position:0 -1612px !important;text-decoration:none;font-size:12px;padding-left:17px;float:left;height:16px;background-image:url(&quot;http://bdimg.share.baidu.com/static/api/css/../img/share/icons_0_16.png?v=91362611.png&quot;);background-repeat:no-repeat;cursor:pointer;margin:6px 6px 6px 0px;" target="_blank" title="分享到微信"></a>
<span style="visibility:hidden;display:block;height:0px;clear:both;">.</span></div>



   











 


        <div style="display:block;clear:both;width:182px;margin:0px auto;padding:30px 0px 15px;text-align:center;">
            <dl style="display:inline-block;float:left;width:72px;height:72px;overflow:hidden;margin:0px 2px;background:rgb(153, 153, 153);text-align:center;color:rgb(255, 255, 255);cursor:pointer;">
               
                 <dt style="margin:0px;padding:12px 0px 3px;color:rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:27px;line-height:30px;font-family:&quot;Microsoft YaHei&quot;;">顶</dt>
                <dd style="margin:0px;color:rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:22px;font-family:Arial;">0</dd>
            </dl>
           
              
            <dl style="display:inline-block;float:left;width:72px;height:72px;overflow:hidden;margin:0px 2px;background:rgb(153, 153, 153);text-align:center;color:rgb(255, 255, 255);cursor:pointer;">
              
                  <dt style="margin:0px;padding:12px 0px 3px;color:rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:27px;line-height:30px;font-family:&quot;Microsoft YaHei&quot;;">踩</dt>
                <dd style="margin:0px;color:rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:22px;font-family:Arial;">0</dd>               
            </dl>
            
        <span style="text-align:center;display:block;height:0px;clear:both;visibility:hidden;">.</span></div>
     <div><a href="#" style="color:rgb(202, 0, 0);text-decoration:none;" target="_blank"> </a>   </div>
    <div> <a href="#" style="color:rgb(202, 0, 0);text-decoration:none;" target="_blank"> </a></div>
    

   <ul style="line-height:24px;display:block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14px;color:rgb(102, 102, 102);font-family:&quot;Microsoft YaHei&quot;, Arial, Helvetica, sans-serif;clear:both;float:left;margin:0px 0px 5px;padding:10px 0px 0px;margin-top:30px;">
                <li style="list-style-type:none;clear:both;padding:0px 0px 3px;overflow:hidden;"><span style="color:rgb(255, 255, 255);display:block;width:52px;padding:0px 0px 0px 27px;height:26px;background-color:rgb(153, 153, 153);float:left;font-size:14px;margin-right:7px;background-image:url(&quot;http://static.blog.csdn.net/skin/dark1/css/../images/blog-page-arr.png&quot;);background-repeat:no-repeat;background-position:9px 8px;">上一篇</span><a href="http://blog.csdn.net/qq_21033663/article/details/52458305" style="text-decoration:none;display:block;float:left;font-size:14px;color:rgb(51, 51, 51);">Queue与Topic区别</a></li>
                <li style="list-style-type:none;clear:both;padding:0px 0px 3px;overflow:hidden;"><span style="color:rgb(255, 255, 255);display:block;width:52px;padding:0px 0px 0px 27px;height:26px;background-color:rgb(153, 153, 153);float:left;font-size:14px;margin-right:7px;background-image:url(&quot;http://static.blog.csdn.net/skin/dark1/css/../images/blog-page-arr.png&quot;);background-repeat:no-repeat;background-position:9px -22px;">下一篇</span><a href="http://blog.csdn.net/qq_21033663/article/details/52650565" style="text-decoration:none;display:block;float:left;font-size:14px;color:rgb(51, 51, 51);">Redis提供的API</a></li>
    <span style="color:rgb(102, 102, 102);font-style:normal;font-variant:normal;font-weight:normal;font-size:14px;line-height:24px;font-family:&quot;Microsoft YaHei&quot;, Arial, Helvetica, sans-serif;display:block;height:0px;clear:both;visibility:hidden;">.</span></ul>

    <div style="clear:both;height:10px;"></div>


            <div style="overflow:hidden;">
                    <h4 style="margin:0px;padding:0px;font-size:16px;color:rgb(51, 51, 51);"></h4>
                    <div style="border:1px solid rgb(187, 187, 187);margin:20px 0px 0px 0px;">
                        <div style="line-height:45px;border-bottom:1px solid rgb(220, 220, 220);">
                            相关文章推荐
                        </div>
                   
                        <div style="background:rgb(252, 252, 252);max-height:180px;overflow-y:auto;padding:10px 20px;">                       
                            <ul style="float:left;width:48%;list-style:none;margin:0px;padding:0px;">    
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/u012142787/article/details/43272291" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="CentOS 7 firewalld与iptables">CentOS 7 firewalld与iptables</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/zhangphil/article/details/48173665" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="ActiveMQ安装配置和使用简例">ActiveMQ安装配置和使用简例</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/clj198606061111/article/details/38145597" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="ActiveMQ安装部署(Windows)">ActiveMQ安装部署(Windows)</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/qq_21033663/article/details/52458305" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="Queue与Topic区别">Queue与Topic区别</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/u013755987/article/details/61916592" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="ActiveMQ的安装与配置">ActiveMQ的安装与配置</a>
                                   </li>
                            </ul>
                              <ul style="float:right;width:48%;list-style:none;margin:0px;padding:0px;">      
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/dlf123321/article/details/51615386" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="ActiveMQ安装配置及实例">ActiveMQ安装配置及实例</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/u013400939/article/details/51657253" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="Linux apache-activemq安装及配置">Linux apache-activemq安装及配置</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/hanghangaidoudou/article/details/52766215" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="activemq部署安装">activemq部署安装</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/lifetragedy/article/details/51836557" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="Apache ActiveMQ实战(1)-基本安装配置与消息类型">Apache ActiveMQ实战(1)-基本安装配置与消息类型</a>
                                   </li>
                                   <li style="list-style:none;line-height:30px;height:30px;overflow:hidden;text-overflow:ellipsis;">
                                       <em style="vertical-align:middle;font-style:normal;display:inline-block;margin-right:10px;">•</em>
                                       <a href="http://blog.csdn.net/u012891504/article/details/52160229" style="text-decoration:none;color:rgb(51, 51, 51);vertical-align:middle;display:inline-block;max-width:276px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" target="_blank" title="ActiveMQ学习教程（一）——安装与示例">ActiveMQ学习教程（一）——安装与示例</a>
                                   </li>
                            </ul>
                        </div>
                    </div>
                </div>   
      
</div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 