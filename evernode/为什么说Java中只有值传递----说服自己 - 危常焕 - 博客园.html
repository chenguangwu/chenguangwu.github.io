<html>
<head>
  <title>为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="593"/>
<h1>为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/12/25 14:16</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.cnblogs.com/wchxj/p/8729503.html"><i>https://www.cnblogs.com/wchxj/p/8729503.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;background-color:rgb(244, 237, 227);line-height:1.5;font-size:14px;"><div style="background-color:rgb(244, 237, 227);background-image:url(top.jpg);background-position:center top;background-repeat:no-repeat;font-family:微软雅黑;"><div style="background-color:transparent;"><div style="background-color:transparent;"><div style="background-color:transparent;background-position:right top;"><div style="background-color:transparent;"><div style="background-color:transparent;"><div style="background-color:transparent;">
		<h1 style="margin:0px;padding:0px;position:relative;width:690px;border:none;">
			<a href="https://www.cnblogs.com/wchxj/p/8729503.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(106, 99, 82);font-family:微软雅黑, 华文细黑, 黑体, Arial;font-size:18px;font-weight:normal;">为什么说Java中只有值传递----说服自己</a>
		</h1>
		<div style="margin:0px;padding:0px;background-color:transparent;clear:both;"></div>
		<div style="border:none;margin:0px;background-color:transparent;position:relative;width:690px;height:auto;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:none;line-height:1.6;">
			<div style="margin:0px;padding:0px;background-color:transparent;margin-bottom:20px;word-break:break-word;"><p style="padding:0px;margin:10px auto;text-indent:0px;">在开始深入讲解之前，有必要纠正一下大家以前的那些错误看法了。如果你有以下想法，那么你有必要好好阅读本文。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">错误理解一：值传递和引用传递，区分的条件是传递的内容，如果是个值，就是值传递。如果是个引用，就是引用传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">错误理解二：Java是引用传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">错误理解三：传递的参数如果是普通类型，那就是值传递，如果是对象，那就是引用传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">实参与形参</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">我们都知道，在Java中定义方法的时候是可以定义参数的。比如Java中的main方法：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">static<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> main(<span style="margin:0px;padding:0px;">String[] args)</span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">这里面的args就是参数。参数在程序语言中分为形式参数和实际参数。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">形式参数：是在定义函数名和函数体的时候使用的参数,目的是用来接收调用该函数时传入的参数。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">实际参数：在调用有参函数时，主调函数和被调函数之间有数据传递关系。在主调函数中调用一个函数时，函数名后面括号中的参数称为“实际参数”。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">简单举个例子：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">static<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">main(<span style="margin:0px;padding:0px;">String[] args)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   ParamTest pt =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> ParamTest();<br style="margin:0px;padding:0px;"/>   pt.sout(<span style="margin:0px;padding:0px;">&quot;Hollis&quot;);<span style="margin:0px;padding:0px;">//实际参数为 Hollis<br style="margin:0px;padding:0px;"/>}<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">sout(<span style="margin:0px;padding:0px;">String name)<span style="margin:0px;padding:0px;"> {<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">//形式参数为 name<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(name);<br style="margin:0px;padding:0px;"/>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">实际参数是调用有参方法的时候真正传递的内容，而形式参数是用于接收实参内容的参数。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">值传递与引用传递</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">上面提到了，当我们调用一个有参函数的时候，会把实际参数传递给形式参数。但是，在程序语言中，这个传递过程中传递的两种情况，即值传递和引用传递。我们来看下程序语言中是如何定义和区分值传递和引用传递的。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">值传递（pass by value）是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">引用传递（pass by reference）是指在调用函数时将实际参数的地址直接传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">有了上面的概念，然后大家就可以写代码实践了，来看看Java中到底是值传递还是引用传递 ，于是，最简单的一段代码出来了：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">static<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">main(<span style="margin:0px;padding:0px;">String[] args)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   ParamTest pt =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> ParamTest();<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>   <span style="margin:0px;padding:0px;">int<span style="margin:0px;padding:0px;"> i =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">10;<br style="margin:0px;padding:0px;"/>   pt.pass(<span style="margin:0px;padding:0px;">i );<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in main , i is &quot;<span style="margin:0px;padding:0px;"> + i);<br style="margin:0px;padding:0px;"/>}<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass(<span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">int<span style="margin:0px;padding:0px;"> j)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   j =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">20;<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in pass , j is &quot;<span style="margin:0px;padding:0px;"> + j);<br style="margin:0px;padding:0px;"/>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">上面的代码中，我们在pass方法中修改了参数j的值，然后分别在pass方法和main方法中打印参数的值。输出结果如下：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass<span style="margin:0px;padding:0px;"> , j<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">20<br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> main , i<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">10</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">可见，pass方法内部对name的值的修改并没有改变实际参数i的值。那么，按照上面的定义，有人得到结论：Java的方法传递是值传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">但是，很快就有人提出质疑了（哈哈，所以，不要轻易下结论咯。）。然后，他们会搬出以下代码：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">static<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">main(<span style="margin:0px;padding:0px;">String[] args)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   ParamTest pt =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> ParamTest();<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>   User hollis =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> User();<br style="margin:0px;padding:0px;"/>   hollis.setName(<span style="margin:0px;padding:0px;">&quot;Hollis&quot;);<br style="margin:0px;padding:0px;"/>   hollis.setGender(<span style="margin:0px;padding:0px;">&quot;Male&quot;);<br style="margin:0px;padding:0px;"/>   pt.pass(hollis);<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in main , user is &quot;<span style="margin:0px;padding:0px;"> + hollis);<br style="margin:0px;padding:0px;"/>}<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass(<span style="margin:0px;padding:0px;">User user)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   user.setName(<span style="margin:0px;padding:0px;">&quot;hollischuang&quot;);<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in pass , user is &quot;<span style="margin:0px;padding:0px;"> + user);<br style="margin:0px;padding:0px;"/>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">同样是一个pass方法，同样是在pass方法内修改参数的值。输出结果如下：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass<span style="margin:0px;padding:0px;"> , user<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> User{name=<span style="margin:0px;padding:0px;">'hollischuang', gender=<span style="margin:0px;padding:0px;">'Male'}<br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> main , user<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> User{name=<span style="margin:0px;padding:0px;">'hollischuang', gender=<span style="margin:0px;padding:0px;">'Male'}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">经过pass方法执行后，实参的值竟然被改变了，那按照上面的引用传递的定义，实际参数的值被改变了，这不就是引用传递了么。于是，根据上面的两段代码，有人得出一个新的结论：Java的方法中，在传递普通类型的时候是值传递，在传递对象类型的时候是引用传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">但是，这种表述仍然是错误的。不信你看下面这个参数类型为对象的参数传递：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">static<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">main(<span style="margin:0px;padding:0px;">String[] args)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   ParamTest pt =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> ParamTest();<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>   String name =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">&quot;Hollis&quot;;<br style="margin:0px;padding:0px;"/>   pt.pass(name);<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in main , name is &quot;<span style="margin:0px;padding:0px;"> + name);<br style="margin:0px;padding:0px;"/>}<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass(<span style="margin:0px;padding:0px;">String name)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   name =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">&quot;hollischuang&quot;;<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in pass , name is &quot;<span style="margin:0px;padding:0px;"> + name);<br style="margin:0px;padding:0px;"/>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">上面的代码输出结果为</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass<span style="margin:0px;padding:0px;"> , name<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> hollischuang<br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> main , name<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> Hollis</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">这又作何解释呢？同样传递了一个对象，但是原始参数的值并没有被修改，难道传递对象又变成值传递了？</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">Java中的值传递</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">上面，我们举了三个例子，表现的结果却不一样，这也是导致很多初学者，甚至很多高级程序员对于Java的传递类型有困惑的原因。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">其实，我想告诉大家的是，上面的概念没有错，只是代码的例子有问题。来，我再来给大家画一下概念中的重点，然后再举几个真正恰当的例子。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;color:#ff0000;">值传递（pass by value）是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。</span></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;color:#ff0000;"> </span></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;color:#ff0000;">引用传递（pass by reference）是指在调用函数时将实际参数的地址直接传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</span></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">那么，我来给大家总结一下，值传递和引用传递之前的区别的重点是什么。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/Image.png" type="image/png" data-filename="Image.png" height="1" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="1"/></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">我们上面看过的几个pass的例子中，都只关注了实际参数内容是否有改变。如传递的是User对象，我们试着改变他的name属性的值，然后检查是否有改变。其实，在实验方法上就错了，当然得到的结论也就有问题了。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">为什么说实验方法错了呢？这里我们来举一个形象的例子。再来深入理解一下值传递和引用传递，然后你就知道为啥错了。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">你有一把钥匙，当你的朋友想要去你家的时候，如果你直接把你的钥匙给他了，这就是引用传递。这种情况下，如果他对这把钥匙做了什么事情，比如他在钥匙上刻下了自己名字，那么这把钥匙还给你的时候，你自己的钥匙上也会多出他刻的名字。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">你有一把钥匙，当你的朋友想要去你家的时候，你复刻了一把新钥匙给他，自己的还在自己手里，这就是值传递。这种情况下，他对这把钥匙做什么都不会影响你手里的这把钥匙。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">但是，不管上面哪种情况，你的朋友拿着你给他的钥匙，进到你的家里，把你家的电视砸了。那你说你会不会受到影响？而我们在pass方法中，改变user对象的name属性的值的时候，不就是在“砸电视”么。你改变的不是那把钥匙，而是钥匙打开的房子。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">还拿上面的一个例子来举例，我们<code style="margin:0px;padding:0px;">真正的改变参数</code>，看看会发生什么？</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">static<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">main(<span style="margin:0px;padding:0px;">String[] args)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   ParamTest pt =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> ParamTest();<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>   User hollis =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> User();<br style="margin:0px;padding:0px;"/>   hollis.setName(<span style="margin:0px;padding:0px;">&quot;Hollis&quot;);<br style="margin:0px;padding:0px;"/>   hollis.setGender(<span style="margin:0px;padding:0px;">&quot;Male&quot;);<br style="margin:0px;padding:0px;"/>   pt.pass(hollis);<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in main , user is &quot;<span style="margin:0px;padding:0px;"> + hollis);<br style="margin:0px;padding:0px;"/>}<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">public<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">void<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass(<span style="margin:0px;padding:0px;">User user)<span style="margin:0px;padding:0px;"> {<br style="margin:0px;padding:0px;"/>   user =<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">new<span style="margin:0px;padding:0px;"> User();<br style="margin:0px;padding:0px;"/>   user.setName(<span style="margin:0px;padding:0px;">&quot;hollischuang&quot;);<br style="margin:0px;padding:0px;"/>   user.setGender(<span style="margin:0px;padding:0px;">&quot;Male&quot;);<br style="margin:0px;padding:0px;"/>   System.<span style="margin:0px;padding:0px;">out.println(<span style="margin:0px;padding:0px;">&quot;print in pass , user is &quot;<span style="margin:0px;padding:0px;"> + user);<br style="margin:0px;padding:0px;"/>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">上面的代码中，我们在pass方法中，改变了user对象，输出结果如下：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">pass<span style="margin:0px;padding:0px;"> , user<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> User{name=<span style="margin:0px;padding:0px;">'hollischuang', gender=<span style="margin:0px;padding:0px;">'Male'}<br style="margin:0px;padding:0px;"/><span style="margin:0px;padding:0px;">print<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">in<span style="margin:0px;padding:0px;"> main , user<span style="margin:0px;padding:0px;"> <span style="margin:0px;padding:0px;">is<span style="margin:0px;padding:0px;"> User{name=<span style="margin:0px;padding:0px;">'Hollis', gender=<span style="margin:0px;padding:0px;">'Male'}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">我们来画一张图，看一下整个过程中发生了什么，然后我再告诉你，为啥Java中只有值传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/640" type="image/jpeg" data-filename="640" height="721" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="859"/></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">稍微解释下这张图，当我们在main中创建一个User对象的时候，在堆中开辟一块内存，其中保存了name和gender等数据。然后hollis持有该内存的地址<code style="margin:0px;padding:0px;">0x123456</code>（图1）。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">当尝试调用pass方法，并且hollis作为实际参数传递给形式参数user的时候，会把这个地址<code style="margin:0px;padding:0px;">0x123456</code>交给user，这时，user也指向了这个地址（图2）。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">然后在pass方法内对参数进行修改的时候，即<code style="margin:0px;padding:0px;">user = new User();</code>，会重新开辟一块<code style="margin:0px;padding:0px;">0X456789</code>的内存，赋值给user。后面对user的任何修改都不会改变内存<code style="margin:0px;padding:0px;">0X123456</code>的内容（图3）。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">上面这种传递是什么传递？肯定不是引用传递，如果是引用传递的话，在执行user = new User();的时候，实际参数的引用也应该改为指向<code style="margin:0px;padding:0px;">0X456789</code>，但是实际上并没有。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">通过概念我们也能知道，这里是把实际参数的引用的地址<strong style="margin:0px;padding:0px;">复制</strong>了一份，传递给了形式参数。<strong style="margin:0px;padding:0px;">所以，上面的参数其实是值传递，把实参对象引用的地址当做值传递给了形式参数。</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">我们再来回顾下之前的那个“砸电视”的例子，看那个例子中的传递过程发生了什么。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/640 [1]" type="image/jpeg" data-filename="640" height="724" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="832"/></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">同样的，在参数传递的过程中，实际参数的地址<code style="margin:0px;padding:0px;">0X1213456</code>被拷贝给了形参，只是，在这个方法中，并没有对形参本身进行修改，而是修改的形参持有的地址中存储的内容。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">所以，值传递和引用传递的区别并不是传递的内容。而是实参到底有没有被复制一份给形参。</strong>在判断实参内容有没有受影响的时候，要看传的的是什么，如果你传递的是个地址，那么就看这个地址的变化会不会有影响，而不是看地址指向的对象的变化。就像钥匙和房子的关系。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">那么，既然这样，为啥上面同样是传递对象，传递的String对象和User对象的表现结果不一样呢？我们在pass方法中使用<code style="margin:0px;padding:0px;">name = &quot;hollischuang&quot;;</code>试着去更改name的值，阴差阳错的直接改变了name的引用的地址。因为这段代码，会new一个String，再把引用交给name，即等价于：</p>
<pre style="margin:0px;padding:0px;margin-top:0px;margin-bottom:0px;white-space:pre-wrap;word-wrap:break-word;"><code style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">name<span style="margin:0px;padding:0px;"> = new String(<span style="margin:0px;padding:0px;">&quot;hollischuang&quot;);</span></span></span></code></pre>
<p style="padding:0px;margin:10px auto;text-indent:0px;">而原来的那个&quot;Hollis&quot;字符串还是由实参持有着的，所以，并没有修改到实际参数的值。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/640 [2]" type="image/jpeg" data-filename="640" height="399" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="515"/></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">所以说，Java中其实还是值传递的，只不过对于对象参数，值的内容是对象的引用。</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">总结</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">无论是值传递还是引用传递，其实都是一种求值策略(Evaluation strategy)。</strong>在求值策略中，还有一种叫做按<strong style="margin:0px;padding:0px;">共享传递</strong>(call by sharing)。其实Java中的参数传递严格意义上说应该是按共享传递。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">按共享传递，是指在调用函数时，传递给函数的是实参的地址的拷贝（如果实参在栈中，则直接拷贝该值）。在函数内部对参数进行操作时，需要先拷贝的地址寻找到具体的值，再进行操作。如果该值在栈中，那么因为是直接拷贝的值，所以函数内部对参数进行操作不会对外部变量产生影响。如果原来拷贝的是原值在堆中的地址，那么需要先根据该地址找到堆中对应的位置，再进行操作。因为传递的是地址的拷贝所以函数内对值的操作对外部变量是可见的。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">简单点说，Java中的传递，是值传递，而这个值，实际上是对象的引用。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">而按共享传递其实只是按值传递的一个特例罢了。</strong>所以我们可以说Java的传递是按共享传递，或者说Java中的传递是值传递。</p></div>
<div style="margin:0px;padding:0px;background-color:transparent;clear:both;"></div>
<div style="margin:0px;padding:0px;background-color:transparent;margin-top:20px;">
<div style="margin:0px;padding:0px;background-color:transparent;margin-bottom:10px;">分类: <a href="https://www.cnblogs.com/wchxj/category/1193541.html" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;" target="_blank">理解 与总结</a></div>
<div style="background-color:transparent;position:relative;width:690px;height:auto;margin:20px 0px;border:none;padding:0px;margin-top:0px;"></div>
<div style="margin:0px;padding:0px;background-color:transparent;"><div style="margin:0px;background-color:transparent;padding:10px 0px;margin-bottom:10px;margin-top:10px;border:1px dashed silver;font-size:12px;width:320px;text-align:center;">
        <a href="#" style="border-radius:10px;font-size:14px;font-family:Arial, Helvetica, sans-serif;margin:0px;text-shadow:rgba(0, 0, 0, 0.25) 0px -1px 1px;text-decoration:none;cursor:pointer;margin-right:10px;display:inline-block;box-shadow:rgba(0, 0, 0, 0.5) 0px 1px 3px;font-weight:bold;vertical-align:middle;padding:3px 8px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D) repeat-x;background-color:rgb(45, 174, 191);border:none;color:rgb(255, 255, 255);">好文要顶</a>
            <a href="#" style="border-radius:10px;font-size:14px;font-family:Arial, Helvetica, sans-serif;margin:0px;text-shadow:rgba(0, 0, 0, 0.25) 0px -1px 1px;text-decoration:none;cursor:pointer;margin-right:10px;display:inline-block;box-shadow:rgba(0, 0, 0, 0.5) 0px 1px 3px;font-weight:bold;vertical-align:middle;padding:3px 8px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D) repeat-x;background-color:rgb(227, 49, 0);border:none;color:rgb(255, 255, 255);">关注我</a>
    <a href="#" style="border-radius:10px;font-size:14px;font-family:Arial, Helvetica, sans-serif;margin:0px;text-shadow:rgba(0, 0, 0, 0.25) 0px -1px 1px;text-decoration:none;cursor:pointer;margin-right:10px;display:inline-block;box-shadow:rgba(0, 0, 0, 0.5) 0px 1px 3px;font-weight:bold;vertical-align:middle;padding:3px 8px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D) repeat-x;background-color:rgb(255, 181, 21);border:none;color:rgb(255, 255, 255);">收藏该文</a>
    <a href="#" style="border-radius:10px;font-size:14px;font-family:Arial, Helvetica, sans-serif;margin:0px;text-shadow:none;text-decoration:none;cursor:pointer;margin-right:10px;display:inline-block;vertical-align:middle;font-weight:bold;box-shadow:none;padding:3px 2px;background:none;border:none;color:rgb(255, 255, 255);" title="分享至新浪微博"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" height="24" style="margin:0px;padding:0px;height:auto;border:none;vertical-align:middle;margin-left:5px;box-shadow:none;max-width:300px;" width="24"/></a>
    <a href="#" style="border-radius:10px;font-size:14px;font-family:Arial, Helvetica, sans-serif;margin:0px;text-shadow:none;text-decoration:none;cursor:pointer;margin-right:10px;display:inline-block;vertical-align:middle;font-weight:bold;box-shadow:none;padding:3px 2px;background:none;border:none;color:rgb(255, 255, 255);" title="分享至微信"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" height="24" style="margin:0px;padding:0px;border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;max-width:300px;" width="24"/></a>
</div>
<div style="margin:0px;padding:0px;background-color:transparent;float:left;width:280px;margin-top:0px;margin-bottom:10px;color:rgb(0, 0, 0);margin-left:0px;font-size:12px;">
    <div style="margin:0px;padding:0px;background-color:transparent;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/wchxj/" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;" target="_blank"><img src="为什么说Java中只有值传递----说服自己 - 危常焕 - 博客园_files/20170222172321.png" type="image/jpeg" data-filename="20170222172321.png" height="48" style="margin:0px;padding:0px;height:auto;border:0px;vertical-align:top;float:left;margin-right:5px;padding-top:5px;padding-left:2px;max-width:300px;" width="48"/></a>
        <div style="margin:0px;padding:0px;background-color:transparent;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/wchxj/" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;">危常焕</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/wchxj/followees" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;">关注 - 1</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/wchxj/followers" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;">粉丝 - 5</a>
        </div>
    </div>
    <div style="margin:0px;padding:0px;background-color:transparent;clear:both;"></div>
    <div style="margin:0px;padding:0px;background-color:transparent;"></div>
    <div style="margin:0px;padding:0px;background-color:transparent;">
                <a href="#" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;">+加关注</a>
    </div>
</div>
<div style="margin:0px;padding:0px;background-color:transparent;float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:125px;text-align:center;margin-top:10px;">
    <div style="cursor:pointer;background-color:transparent;padding:0px;margin:0px;text-align:center;width:46px;margin-top:2px;padding-top:5px;background:url(//static.cnblogs.com/images/upup.gif) no-repeat;height:52px;float:left;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">1</span>
    </div>
    <div style="cursor:pointer;background-color:transparent;padding:0px;margin:0px;background:url(//static.cnblogs.com/images/downdown.gif) no-repeat;text-align:center;margin-left:20px;margin-top:2px;padding-top:5px;height:52px;width:46px;float:right;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">1</span>
    </div>
    <div style="margin:0px;padding:0px;background-color:transparent;clear:both;"></div>
    <div style="margin:0px;padding:0px;background-color:transparent;margin-top:5px;margin-left:0px;font-size:12px;color:gray;">
    </div>
</div>
</div>
<div style="margin:0px;padding:0px;background-color:transparent;clear:both;"></div>
<div style="margin:0px;padding:0px;background-color:transparent;line-height:1.8;font-size:12px;"><a href="https://www.cnblogs.com/wchxj/p/8723953.html" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:none;">« </a> 上一篇：<a href="https://www.cnblogs.com/wchxj/p/8723953.html" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;" title="发布于2018-04-05 19:18">我对git的快速使用和理解</a><br style="margin:0px;padding:0px;"/><a href="https://www.cnblogs.com/wchxj/p/8825130.html" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:none;">» </a> 下一篇：<a href="https://www.cnblogs.com/wchxj/p/8825130.html" style="margin:0px;padding:0px;color:rgb(73, 73, 73);font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;text-decoration:underline;" title="发布于2018-04-14 00:29">加密算法---&gt;对称加密与非对称加密算举例说明</a><br style="margin:0px;padding:0px;"/></div>
</div>


		</div>
		<div style="border-bottom:1px dashed rgb(204, 204, 204);line-height:1.4;background-color:transparent;position:relative;width:690px;height:30px;padding:0px;color:rgb(102, 102, 102);font-family:Arial, Helvetica, sans-serif;font-size:12px;font-weight:normal;text-decoration:none;margin:0px;">posted @ <span style="margin:0px;padding:0px;">2018-04-07 00:01</span> <a href="https://www.cnblogs.com/wchxj/" style="margin:0px;padding:0px;color:rgb(102, 102, 102);font-family:Arial, Helvetica, sans-serif;font-size:12px;font-weight:normal;text-decoration:none;">危常焕</a> 阅读(<span style="margin:0px;padding:0px;">1546</span>) 评论(<span style="margin:0px;padding:0px;">2</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=8729503" rel="nofollow" style="margin:0px;padding:0px;color:rgb(102, 102, 102);font-family:Arial, Helvetica, sans-serif;font-size:12px;font-weight:normal;text-decoration:none;">编辑</a> <a href="https://www.cnblogs.com/wchxj/p/8729503.html#" style="margin:0px;padding:0px;color:rgb(102, 102, 102);font-family:Arial, Helvetica, sans-serif;font-size:12px;font-weight:normal;text-decoration:none;">收藏</a></div>
	</div></div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 