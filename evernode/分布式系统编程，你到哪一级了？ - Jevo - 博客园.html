<html>
<head>
  <title>分布式系统编程，你到哪一级了？ - Jevo - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="11048"/>
<h1>分布式系统编程，你到哪一级了？ - Jevo - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/29 17:03</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2018/4/27 14:45</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.cnblogs.com/jevo/p/3445175.html"><i>http://www.cnblogs.com/jevo/p/3445175.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color:rgb(0, 0, 0);background:url(&quot;/Skins/coffee/images/bg_body.gif&quot;) left top;line-height:1.5;font-size:14px;"><div style="min-width:auto;"><div style="min-width:auto;text-align:left;"><div style="background:transparent;text-align:left;overflow-x:hidden;"><div style="background:url(&quot;/Skins/coffee/images/bg_left.gif&quot;) left top repeat-x rgb(254, 254, 242);"><div><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div>
		<h1 style="margin:0px;padding:0px;width:100%;clear:both;font-weight:bold;float:left;line-height:1.5;font-size:14px;padding-left:5px;">
			<a href="http://www.cnblogs.com/jevo/p/3445175.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">(转)分布式系统编程，你到哪一级了？</a>
		</h1>
		<div style="margin:0px;padding:0px;clear:both;"></div>
		<div style="margin:0px;padding:5px 2px 5px 5px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin-top:5px;">
			<div style="margin:0px;padding:0px;margin-bottom:20px;word-break:break-word;"><p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">介绍</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">当分布式系统编程成为你生活中的一部分时，你需要经历一段学习曲线。这篇文章描述了一下我当前在这个领域大致属于哪个层次，并希望能为你指出足够多 的错误，从别人的错误中学习，从而使你能以最优的路径通向成功。先声明一下，我在1995年时达到第1级，我现在处于第3级。你自己属于哪一级呢？</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">第0</strong><strong style="margin:0px;padding:0px;">级：完全一无所知</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">每个<span style="margin:0px;padding:0px;line-height:1.5;">程序员</span>都从这一级开始。我不会在此浪费太多口舌，因为这实在没什么太多可说的。相反，我会引用一些我曾经经历过的对话，为从未接触过分布式系统的开发者们提供一些建议。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">对话1：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">NN：<span style="margin:0px;padding:0px;line-height:1.5;color:#888888;"><em style="margin:0px;padding:0px;">“</em>在分布式系统中，复制是个很容易的操作，你只需要让所有的结点同时存储你要复制的东东就行了</span><em style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">”</span></em><span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">。</span><em style="margin:0px;padding:0px;"> </em></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">另一段对话（从我记忆深处挖出来的）：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">NN: <span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“为了我们的第一人称射击游戏，我们得写一个自己的网络处理引擎。”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我：<span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“为什么？”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">NN: <span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“虽然已经有一些优秀的商业引擎了，但获取license的费用非常高昂，我们不想为此买单。”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我：<span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“你之前对于分布式系统有什么经验吗？”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">NN：<span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“是的，我之前写过一个套接字服务器。”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我：<span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“你觉得你要花多久能完成这个网络引擎？”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">NN：<span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“我想2周吧。保险起见，我计划用4周时间。”</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">好吧，有时候还是保持沉默比较好。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><a href="http://blog.jobbole.com/wp-content/uploads/2012/05/Distributed-Systems-.jpg" rel="lightbox[20304]" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="Distributed Systems"><div style="margin:0px;padding:0px;border:none;width:300px;height:348px;"></div></a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">第1级：RPC</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;line-height:1.5;color:#000000;"><span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">RMI是一种非常强 大的用来构建大型系统的技术。事实上，这个技术用Java来描述的话，结合一些工作的例子可以在短短几页纸内描述清楚。RMI技术非常令人振奋，而且它很 容易使用。你可以调用你所能绑定到的任何服务器资源，而且你可以构建出分布式的网络对象。过去人们常常为构建复杂的软件系统犯难，现在RMI打开了这道大 门。  </span><strong style="margin:0px;padding:0px;"><em style="margin:0px;padding:0px;"> ——  </em></strong></span> <em style="margin:0px;padding:0px;">Peter van der Linden, Just Java(</em><em style="margin:0px;padding:0px;">第4</em><em style="margin:0px;padding:0px;">版, Sun Microsystems)</em></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我先声明，我并不是说这本书很烂。我清楚的记得这本书读起来很有趣（尤其是章节之间插入的轶闻），我曾经学习Java的时候就是用的这本书（太久以 前了，简直不像在一个时空里似的）。一般情况下，我觉得作者说的挺好。他对RMI的态度就是典型的分布式系统设计的第1级水平。处于这个等级的人对统一的 对象有共同的看法。事实上，Waldo在他们著名的论文“<a href="http://labs.oracle.com/techrep/1994/abstract-29.html" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">a note on distributed computing</a>”（1994）上曾深入描述过，这里我做下总结：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">我所倡导的写分布式应用的策略可分为3个阶段。第1阶段，写这个应用时不用担心对象 存储的位置，以及它们之间的通讯如何实现。第2阶段，通过具体化对象的位置以及通讯方法来调整程序性能。第3阶段，真枪实弹的测试（网络隔离、机器宕机等 各种情况）。这里的思想就是，不管一个调用是本地的还是远程的，对程序的正确性都不会产生任何影响。</span></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">同样还是这篇论文，随后进一步挖掘了这个主题并展示了其中的问题。这个观点是错误的，而且已经错了快20年。不管如何，如果说Java RMI达成了一个目标，那就是：就算你从等式中拿掉传输协议、命名、绑定以及序列化，它还是不成立。能记得起<a href="http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">CORBA</a>的老程序员们同样也会记得它也是不好使的，但他们有一个借口：CORBA还在同各种底层的问题缠斗中。Java RMI将所有这些都抛开了，但使剩下的问题变得更为突出。其中有两点，第一点纯粹就是个麻烦：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">网络不是透明的</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">让我们看看这段简单的Java RMI代码示例（同样取自Just Java一书）</p>
<div style="margin:0px;padding:0px;">
<div style="padding:0px;width:100%;margin:1em 0px;position:relative;overflow:auto;font-size:1em;background-color:rgb(255, 255, 255);">
<table border="0" cellpadding="0" cellspacing="0" style="overflow:visible;overflow-x:scroll;display:block;font-variant:inherit;word-break:break-word;border-collapse:collapse;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;font-weight:normal;padding:0px;position:static;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:100%;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;background:none;border-radius:0px;font-style:normal;font-size:12px;">
<tbody style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<tr style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<td style="right:auto;white-space:nowrap;border-collapse:collapse;top:auto;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;text-align:left;float:none;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(175, 175, 175);width:35px;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">1</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">2</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">3</div>
</td>
<td style="right:auto;white-space:nowrap;border-collapse:collapse;text-align:left;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;float:none;top:auto;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;width:auto;">
<div style="position:relative;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">public</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">interface</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">WeatherIntf </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">extends</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">java.rmi.Remote {</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">public</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">String getWeather() </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">throws</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">java.rmi.RemoteException;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">}</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">想要使用天气服务的客户端需要这样做：</p>
<div style="margin:0px;padding:0px;">
<div style="padding:0px;width:100%;margin:1em 0px;position:relative;overflow:auto;font-size:1em;background-color:rgb(255, 255, 255);">
<table border="0" cellpadding="0" cellspacing="0" style="overflow:visible;overflow-x:scroll;display:block;font-variant:inherit;word-break:break-word;border-collapse:collapse;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;font-weight:normal;padding:0px;position:static;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:100%;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;background:none;border-radius:0px;font-style:normal;font-size:12px;">
<tbody style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<tr style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<td style="right:auto;white-space:nowrap;border-collapse:collapse;top:auto;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;text-align:left;float:none;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(175, 175, 175);width:35px;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">1</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">2</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">3</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">4</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">5</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">6</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">7</div>
</td>
<td style="right:auto;white-space:nowrap;border-collapse:collapse;text-align:left;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;float:none;top:auto;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;width:auto;">
<div style="position:relative;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">try</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">{</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">Remote robj = Naming.lookup(“</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 130, 0);">//localhost/WeatherServer”);</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">WeatherIntf weatherserver = (WeatherInf)robj;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">String forecast = weatherserver.getWeather();</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">System.out.println(“The weather will be “ + forecast);</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">}</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">catch</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">(Exception e) {</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">System.out.println(e.getMessage());</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">客户端代码需要将RemoteExceptions考虑在内。如果你想看看你究竟会遇到什么样的异常错误，可以看看那20多个<a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/RemoteException.html" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">子类</a>的定义。这样你的代码就会变得丑陋，好吧，这个我们就忍了。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">局部性错误</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">RMI的真正问题在于这些调用可能会出现局部性失败的情况。比如，调用可能会在对其他层的请求操作执行前失败，又或者请求成功了，但之后的返回值又不正确。引起这类局部性失败的原因非常多。其实，这些故障模式正是分布式系统特性的明确定义：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;line-height:1.5;color:#888888;">“分布式系统就是某一台你根本意识不到其存在的计算机，它的故障会造成你的计算机无法正常使用。”  </span><em style="margin:0px;padding:0px;">——  Leslie Lamport</em></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">如果这个方法只是去检索天气预报，出现问题时你可以简单的进行重试，但如果你想递增一个计数器，重试可能会导致产生0到2次的更新，结果就不确定 了。这个解决方案应该来自幂等操作，但构建这样的操作并不总是可行的。此外，因为你决定改变方法调用的语义，那你基本上就承认了RMI与本地调用是不同 的。而这也就承认了RMI实际上是个悖论。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">不论什么情况下，这种范式都是失败的。因为网络的透明度和分布式系统的架构抽象从来就是无法实现的。这也表明了某些软件所采用的方法比其他软件为此 所受到的影响更多。Scrum的一些变种方法中倾向于做原型化。原型更集中于“好的方面”（happy path），而好的方面通常都不是问题所在之处。这基本上意味着你将永远停留在第1级的水平。（不好意思，我知道这是个小小的打击）</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">那些脱离了第一级水平的人懂得对于需要解决的这个问题，我们要有足够的尊重。他们摒弃了网络透明化的思想，从战略性的角度来处理局部性失败的问题。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">第2</strong><strong style="margin:0px;padding:0px;">级：分布式算法 + </strong><strong style="margin:0px;padding:0px;">异步消息传递 + </strong><strong style="margin:0px;padding:0px;">语言级支持</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">OK，你已经学习了<a href="http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">分布式计算中的悖论</a>是什么。你决定吞下这颗子弹，然后对消息传递机制建模，以此显式地控制出现失败的情况。你将应用分为两个层次，底层负责网络和消息传递，而上层处理消息的到达，以及需要处理的各种请求。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">这个上层实现了一种<a href="http://en.wikipedia.org/wiki/Paxos_%28computer_science%29" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">分布式状态机</a>，如果你去问设计者这个状态机是用来做什么的，他们可能会这样回答你：这是建立在TCP之上的一个Multi-Paxos算法实现。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">明智的开发，这里用到的策略可以归结为：程序员首先在本地主要采用线程来模拟不同的进程来开发这个应用。每个线程运行分布式状态机的一个部分，基本 上就是负责运行一段消息处理的循环。一旦这个应用是本地完整的且运行正确，就可以在远端的计算机上用真正的进程来取代线程。到这个阶段，除去网络中可能出 现的问题外，这个分布式应用已经可以正常工作了。到容错阶段时，可以通过配置每个分布式实体来正确反映故障的方式来达成，这种方式很直接。（我引述自“<a href="http://dl.acm.org/citation.cfm?id=2149921&amp;preflayout=tabs" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">A Fault Tolerant Abstraction for Transparent Distributed Programming</a>”）</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">因为分布式状态机的存在，局部性故障可以通过设计来解决。对于线程，其实也有很多种选择，但协程（<a href="http://en.wikipedia.org/wiki/Coroutine" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">coroutines</a>）更适合（在各种不同的<span style="margin:0px;padding:0px;line-height:1.5;">编程语言</span>中，协程也被称为纤程fiber，轻量级线程，微线程或者就叫线程），因为协程允许我们对并发行为有更细粒度的控制。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">结合“C代码并不会使网络变得更快”的论点，你可以转移到在语言级支持这种细粒度并发控制的编程语言中去。流行的选择如下（排名不分先后）注意，这些编程语言往往都是<a href="http://en.wikipedia.org/wiki/Functional_programming" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">函数式</a>的：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1.  <a href="http://www.mozart-oz.org/" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Mozart</a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">2.  <a href="http://www.erlang.org/" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Erlang</a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">3. <a href="http://caml.inria.fr/" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">OCaml</a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">4. <a href="http://www.haskell.org/haskellwiki/Haskell" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Haskell</a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">5. <a href="http://www.stackless.com/" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Stackless</a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">6.  <a href="http://clojure.org/" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Clojure</a></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">举个例子，下面让我们看看在Erlang中这种并发控制的代码看起来是怎样的（取自<a href="http://www.erlang.org/doc/getting_started/conc_prog.html" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Erlang concurrent programming</a>）</p>
<div style="margin:0px;padding:0px;">
<div style="padding:0px;width:100%;margin:1em 0px;position:relative;overflow:auto;font-size:1em;background-color:rgb(255, 255, 255);">
<table border="0" cellpadding="0" cellspacing="0" style="overflow:visible;overflow-x:scroll;display:block;font-variant:inherit;word-break:break-word;border-collapse:collapse;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;font-weight:normal;padding:0px;position:static;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:100%;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;background:none;border-radius:0px;font-style:normal;font-size:12px;">
<tbody style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<tr style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<td style="right:auto;white-space:nowrap;border-collapse:collapse;top:auto;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;text-align:left;float:none;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(175, 175, 175);width:35px;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">1</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">2</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">3</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">4</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">5</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">6</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">7</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">8</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">9</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">10</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">11</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">12</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">13</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">14</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">15</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">16</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">17</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">18</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">19</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">20</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">21</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">22</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">23</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">24</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">25</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">26</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">27</div>
</td>
<td style="right:auto;white-space:nowrap;border-collapse:collapse;text-align:left;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;float:none;top:auto;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;width:auto;">
<div style="position:relative;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">-</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">module</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">(tut15)</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">-</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">export</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">([start/0, ping/2, pong/0]).</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">ping(0, </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">) -&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">! finished,</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(255, 20, 147);">io:format</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">(“ping finished~n”, []);</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"> </div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">ping(N, </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">)-&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">! {ping, self()},</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">receive</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">        </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">pong -&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">        </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(255, 20, 147);">io:format</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">(“</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Ping</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">received pong~n”, [])</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">end</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">,</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">ping(N – 1, </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">).</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"> </div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">pong() -&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">receive</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">finished -&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">        </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(255, 20, 147);">io:format</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">(“</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">finished~n”, []);</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">{ping, </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Ping_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">} -&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">        </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(255, 20, 147);">io:format</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">(“</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">received ping~n”, []),</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">        </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Ping_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">! pong,</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">        </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">pong()</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">end</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">.</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"> </div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">start() -&gt;</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">= spawn(tut15, pong, []),</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">spawn(tut15, ping, [3, </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">Pong_PID</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">]).</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">这看起来绝对是对旧有的RPC机制的一个重大提升。现在你可以推想一下，如果有消息没有到达时会发生什么事情了。Erlang还有附加的超时消息以及一个语言内建的“超时”组件，可以使你以一种优雅的方式来处理超时。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">现在，你选择了你要采用的策略，选择了恰当的分布式算法以及合适的编程语言，然后就可以开干了。你很自信能驾驭分布式编程这头野兽了，因为你再也不是第一级的水平了。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">哎呀，可惜的是这一路上并非风平浪静。过了一段时间，当第一个版本发布后，你将陷入泥潭之中。人们会告诉你，你的分布式应用有些问题。问题报告中的 主题全都是和变化有关的。开始时会出现“有时”或者“一次”这样的表示频率的词，之后的描述变成了：系统处于不期望的状态，卡住不动了。如果够幸运，你有 足够的log信息，可以开始着手检查这些日志。稍后，你发现是一系列不幸的事件序列造成了报告中所描述的情况。确实，这是个新的问题。你从来没有考虑过这 些，而且在你做大量的测试和模拟时问题从未出现过。所以，你修改代码以将这种情况也纳入考虑范围。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">因为你试着要超前考虑，你决定构建一个“<a href="http://www.folklore.org/StoryView.py?project=Macintosh&amp;story=Monkey_Lives.txt&amp;sortOrder=Sort%20by%20Date&amp;detail=high&amp;showcomments=1" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">猴子</a>”组件，它以伪随机的方式让你的分布式系统做些愚蠢的事情。“猴子”在笼子里使劲扑腾着，很快你会发现在很多场景下都会导致出现不期望的情况，比如系统卡住了，或者甚至更糟糕的情况：系统出现不一致的状态，而这在分布式系统中是永远也不应该发生的事情。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">构建一个“猴子”是很棒的主意，而且它确实能减少遇到那些你从未在这个领域内碰到过的怪事的几率。因为你相信，修改一个bug必须和发现这个bug 的测试用例联系起来，现在需要回归测试这个用例，以证明bug的消除。你现在只需要再构建一次这个测试用例就可以了。可是现在的问题在于，如果说并非不可 能的话，要重现这个错误的场景起码是很困难的。你向上帝祈祷，得到的启示是：当心存疑虑时，就使用暴力法吧。因此，你构建一个测试用例，然后让它跑上无数 次，以此来弥补这极小的失败概率。这会使你解决bug的过程变得缓慢，而且你的测试套件会变得笨重。通过对你的测试集做分而治之的处理，你不得不再次做一 些补偿。无论如何，经过在时间和精力上的大量投入之后，你终于设法得到了一个较为稳定的系统。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">你在第2级已经到顶了，如果没有新的启示，你将永远卡在这一级。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">第3</strong><strong style="margin:0px;padding:0px;">级：分布式算法 + </strong><strong style="margin:0px;padding:0px;">异步消息传递 +  </strong><strong style="margin:0px;padding:0px;">纯函数式</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我们需要花点时间才能意识到：长时间运行“猴子”以此发现系统中的缺陷然后再结合暴力法来重现它们，这种做法并不可取。使用暴力法重现只会显示出你 的无知。你需要的关键性的启示之一是，如果你可以只将等式中的不确定性拿掉的话，你就可以完美的对每一种场景做重现了。第2级分布式编程的一个重大的缺点 是：你的并发模型往往会成为你代码库中的病毒。你希望有细粒度的并发控制，好吧，你得到了，代码里到处都是。因此是并发导致了不确定性，而不确定性造成了 麻烦。因此必须得把并发给踢出去。可是你又不能抛弃并发，你需要它。那么，你一定要禁止把并发和你的分布式状态机结合在一起。换句话说，你的分布式状态机 必须成为纯函数式的。没有IO操作，没有并发，什么都没有。你的状态机特征看起来应该是这样的：</p>
<div style="margin:0px;padding:0px;">
<div style="padding:0px;width:100%;margin:1em 0px;position:relative;overflow:auto;font-size:1em;background-color:rgb(255, 255, 255);">
<table border="0" cellpadding="0" cellspacing="0" style="overflow:visible;overflow-x:scroll;display:block;font-variant:inherit;word-break:break-word;border-collapse:collapse;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;font-weight:normal;padding:0px;position:static;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:100%;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;background:none;border-radius:0px;font-style:normal;font-size:12px;">
<tbody style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<tr style="position:static;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<td style="right:auto;white-space:nowrap;border-collapse:collapse;top:auto;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;text-align:left;float:none;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(175, 175, 175);width:35px;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">1</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">2</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">3</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">4</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;border-right:2px solid rgb(108, 226, 108);background-color:rgb(244, 244, 244);text-align:right;padding:0px 0.5em;">5</div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;font-style:normal;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);border-right:2px solid rgb(108, 226, 108);text-align:right;padding:0px 0.5em;">6</div>
</td>
<td style="right:auto;white-space:nowrap;border-collapse:collapse;text-align:left;bottom:auto;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;float:none;top:auto;vertical-align:baseline;border:0px;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;width:auto;">
<div style="position:relative;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;line-height:1.1em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;">
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">module</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">type </code><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 102, 204);">SM</code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">= sig</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">type state</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">type action</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">type msg</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(244, 244, 244);padding:0px 1em;"><code style="position:static;white-space:pre-wrap;right:auto;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;background:none;bottom:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;">    </code> <code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;font-size:12px;min-height:auto;border-radius:0px;color:rgb(0, 0, 0);">val step: msg -&gt; state -&gt; action * state</code></div>
<div style="right:auto;border-radius:0px;border:0px;bottom:auto;float:none;height:auto;left:auto;min-height:auto;margin:0px;outline:0px;overflow:visible;font-size:12px;position:static;background:none;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;font-weight:normal;font-style:normal;line-height:1.8em;white-space:normal;background-color:rgb(255, 255, 255);padding:0px 1em;"><code style="right:auto;white-space:pre-wrap;text-align:left;border:0px;float:none;height:auto;left:auto;line-height:1.8em;margin:0px;outline:0px;overflow:visible;padding:0px;position:static;background:none;bottom:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-family:Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;min-height:auto;font-style:normal;font-size:12px;border-radius:0px;font-weight:normal;color:rgb(0, 0, 255);">end</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">你传入一个消息和一个状态，你得到一个操作和一个结果状态。操作基本上就是任何试着改变外部世界的东西，需要一定的时间来完成，尝试的过程中可能会失败。典型的操作有：</p>
<ol style="margin:0px;padding:0px;padding-left:40px;">
<li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;">发送一个消息</li>
<li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;">安排一次超时</li>
<li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;">将数据存储在持久性的存储介质内</li>
<li style="margin:0px;padding:0px;list-style:none;margin-bottom:1em;list-style-type:decimal;">…</li>
</ol>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">这里要意识到的重要部分是：你只能通过一个新的消息来得到新的状态，再无其他。在这种严格的规定下所得到的好处是很多的。完美的控制，完美的重现能力以及完美的可追踪性。为此而得到的开销也同样存在，你将被迫使所有的操作都变得<a href="http://en.wikipedia.org/wiki/Reification_%28computer_science%29" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">具体化</a>。而这些基本上就是为了减少程序复杂性而附加的一层间接。你还需要将每一个你关心的外部世界变化都建模为一个消息。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">相比第2级的分布式编程，另一个改变在于控制流。在第2级中，客户端会尝试强制更新并动态设置状态。而在这里，分布式状态机假定有完全的控制力，并且只有当它准备就绪，可以做些有用的事情时才会考虑客户端的请求。因此这些必须分离开来。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">如果你把这些道理解释给一个2级的分布式系统架构师听，他可能或多或少的会把这个当成一种替代方案。然而，你需要经历足够多的痛苦之后才会意识到这是唯一可行的选择，我们姑且把这些痛苦称为经验吧。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">第4</strong><strong style="margin:0px;padding:0px;">级  </strong><strong style="margin:0px;padding:0px;">对分布式系统领域的深刻理解：快乐，好心态，好好睡一觉</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">老实说，我现在只是第3级水平，我也不知道在这一级里有什么新鲜玩意。我深信，函数式编程和异步消息传递是分布式系统谜题的一部分，但这些还不够。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">请允许我重申我所反对的东西。首先，我希望我的分布式算法实现能够涵盖到所有的可能情况。这对我而言是个大问题，我已经在系统部署的问题上牺牲掉了很多睡眠时间。大部分问题都是<a href="http://en.wikipedia.org/wiki/User_error" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">PEBKAC</a>类的（Problem Exists Between Keyboard And Chair意指用户引起的错误），但有一些确是真正的问题，这给我造成了一些挫败感。知道自己实现的健壮性程度是很好的。我应该试试证明一下那些定理吗？我应该做更详尽的测试吗？我不知道。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">附带提一下，<span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://blog.jobbole.com/6492/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank" title="GitHub如何运作：时间并不决定一切">GitHub</a></span>上有一个称为<a href="https://github.com/Incubaid/baardskeerder" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">baardskeerder</a>的仅用于插入操作的B-树库，我们知道可以通过详尽的生成插入/删除排列并断言它们的正确性之后，我们就可以涵盖到所有的情况。但这里，并没有那么简单，而且我对于要对整个代码库做Coqify处理（<a href="http://coq.inria.fr/" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Coq</a>是一个正式的证明管理系统，它在一种半交互式的环境下提供了一个正式的语言用来编写数学定义、可执行的算法和定理，用计算机来做检查证明，这里作者生造出了Coqify这个词）还有些犹豫。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">第二，为了保持清晰和简单，我决定不去碰其它一些正交性的需求。比如，<a href="http://en.wikipedia.org/wiki/Service_discovery" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">服务发现</a>、认证、授权、私密性以及性能。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">说到性能，我们也许是幸运的，至少异步消息传递似乎与性能方面并不产生矛盾。安全性则完全是一个XX（作者真的爆粗口了…），因为它几乎切断了所有 你所做的事情。有些人把安全性看成是一种调味酱汁，你只要把它倒在你的应用程序上就可以保证安全了。哎，在这方面我从未取得过成功，而且现在我也认为这个 问题需要在设计的最初阶段从宏观的角度策略性的去分析解决。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">结语</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">开发出健壮的分布式系统是个颇为棘手的问题，实际上根本没有完美的解决方案，或者说至少没有让我觉得完全满意的解决方案。我敢肯定分布式系统的重要性将随着处理器和其它一切事物之间的延迟增加而显著提高。这一结果使得这种类型的应用程序开发变得愈发繁荣。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">至于分布式编程的第4级，也许我该去问问<a href="http://www.info.ucl.ac.be/~pvr/cvvanroy.html" rel="nofollow" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Peter Van Roy</a>。这么些年来，我阅读了很多他写的论文，这些论文对于我自己的一些错误认识给了很多启示。关于这些启示的缺点嘛，你常常在大部分时间里看到别人在重复自己的错误，但我无法说服他们应该换种方式去做。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">也许，这是因为我无法提供他们想要的那种灵丹妙药。他们就想要RPC，而且他们希望这样能搞定问题。这是固执的…就像宗教信仰一样。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">原文：http://www.oschina.net/news/29711/distribute-system-programmer</p></div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;margin-top:20px;">
<div style="margin:0px;padding:0px;margin-bottom:10px;">分类: <a href="http://www.cnblogs.com/jevo/category/536562.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">distribution</a></div>
<div style="margin:0px;padding:0px;font-size:9pt;color:rgb(102, 102, 102);margin-top:0px;"></div>
<div style="margin:0px;padding:0px;"><div style="margin:0px;padding:10px 0px;margin-bottom:10px;margin-top:10px;border:1px dashed silver;font-size:12px;width:320px;text-align:center;">
        <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(45, 174, 191);color:rgb(255, 255, 255);border:none;">好文要顶</a>
            <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(227, 49, 0);color:rgb(255, 255, 255);border:none;">关注我</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(255, 181, 21);color:rgb(255, 255, 255);border:none;">收藏该文</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至新浪微博"><img src="分布式系统编程，你到哪一级了？ - Jevo - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" alt="" height="24" style="margin:0px;padding:0px;height:auto;border:none;vertical-align:middle;margin-left:5px;box-shadow:none;max-width:300px;" width="24"/></a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至微信"><img src="分布式系统编程，你到哪一级了？ - Jevo - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" alt="" height="24" style="margin:0px;padding:0px;border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;max-width:300px;" width="24"/></a>
</div>
<div style="margin:0px;padding:0px;float:left;width:280px;margin-top:0px;margin-bottom:10px;color:rgb(0, 0, 0);margin-left:0px;font-size:12px;">
    <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jevo/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank"><img src="分布式系统编程，你到哪一级了？ - Jevo - 博客园_files/sample_face.gif" type="image/gif" data-filename="sample_face.gif" alt="" height="46" style="margin:0px;padding:0px;height:auto;border:0px;vertical-align:top;float:left;margin-right:5px;padding-top:5px;padding-left:2px;max-width:300px;" width="47"/></a>
        <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jevo/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">Jevo</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jevo/followees" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">关注 - 0</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jevo/followers" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">粉丝 - 21</a>
        </div>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;"></div>
    <div style="margin:0px;padding:0px;">
                <a href="#" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">+加关注</a>
    </div>
</div>
<div style="margin:0px;padding:0px;float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:125px;text-align:center;margin-top:10px;">
    <div style="margin:0px;padding:0px;float:left;width:46px;height:52px;background:url(&quot;http://static.cnblogs.com/images/upup.gif&quot;) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="text-align:center;padding:0px;margin:0px;height:52px;background:url(&quot;http://static.cnblogs.com/images/downdown.gif&quot;) no-repeat;margin-left:20px;cursor:pointer;margin-top:2px;padding-top:5px;width:46px;float:right;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;margin-top:5px;margin-left:0px;font-size:12px;color:gray;">
    </div>
</div>
</div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;line-height:1.8;font-size:12px;"><a href="http://www.cnblogs.com/jevo/p/3408522.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">« </a> 上一篇：<a href="http://www.cnblogs.com/jevo/p/3408522.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2013-11-05 20:56">领域驱动架构学习总结</a><br style="margin:0px;padding:0px;"/></div>
</div>


		</div>
		<div style="margin:0px;padding:0px;clear:both;font-size:12px;float:right;width:100%;text-align:right;padding-right:5px;color:rgb(102, 102, 102);margin-top:5px;">posted @ <span style="margin:0px;padding:0px;">2013-11-27 11:02</span> <a href="http://www.cnblogs.com/jevo/" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">Jevo</a> 阅读(<span style="margin:0px;padding:0px;">46</span>) 评论(<span style="margin:0px;padding:0px;">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=3445175" rel="nofollow" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">编辑</a> <a href="http://www.cnblogs.com/jevo/p/3445175.html#" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">收藏</a></div>
	</div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 