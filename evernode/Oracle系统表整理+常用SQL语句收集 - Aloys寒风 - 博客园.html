<html>
<head>
  <title>Oracle系统表整理+常用SQL语句收集 - Aloys寒风 - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3196"/>
<h1>Oracle系统表整理+常用SQL语句收集 - Aloys寒风 - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/7/27 10:04</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.cnblogs.com/jiangxinnju/p/5840420.html"><i>https://www.cnblogs.com/jiangxinnju/p/5840420.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color:rgb(0, 0, 0);background:rgb(210, 216, 222);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.5;font-size:14px;"><div><div><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div><div><div style="background:rgb(255, 255, 255);border-radius:7px;box-shadow:rgb(167, 168, 173) 1px 1px 2px;text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div>
		<h1 style="margin:0px;padding:0px;font-size:1.5em;font-weight:bold;line-height:1.5em;clear:both;width:100%;text-align:center;">
			<a href="https://www.cnblogs.com/jiangxinnju/p/5840420.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(46, 177, 232);font-size:27px;font-weight:bold;text-shadow:rgb(167, 168, 173) 0px 0px 1px;line-height:1.5em;">Oracle系统表整理+常用SQL语句收集</a>
		</h1>
		<div style="margin:0px;padding:0px;clear:both;"></div>
		<div style="margin:0px;padding:5px;line-height:1.5;color:rgb(68, 68, 68);">
			<div style="margin:0px;padding:0px;margin-bottom:20px;word-break:break-word;"><p style="padding:0px;margin:10px auto;text-indent:0px;line-height:1.5;">欢迎和大家交流技术相关问题：<br style="margin:0px;padding:0px;"/>
邮箱: <a href="https://www.cnblogs.com/jiangxinnju/p/5840420.htmlmailto:jiangxinnju@163.com" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">jiangxinnju@163.com</a><br style="margin:0px;padding:0px;"/>
博客园地址: <a href="http://www.cnblogs.com/jiangxinnju" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">http://www.cnblogs.com/jiangxinnju</a><br style="margin:0px;padding:0px;"/>
GitHub地址: <a href="https://github.com/jiangxincode" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">https://github.com/jiangxincode</a><br style="margin:0px;padding:0px;"/>
知乎地址: <a href="https://www.zhihu.com/people/jiangxinnju" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">https://www.zhihu.com/people/jiangxinnju</a></p>
<pre style="margin:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;margin-top:10px;margin-bottom:10px;"><code style="vertical-align:middle;height:auto;margin:auto;font-family:&quot;Courier New&quot;, sans-serif;background:rgb(255, 255, 255);color:rgb(0, 0, 0);overflow-x:auto;display:block;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);border-radius:3px;padding:5px;line-height:1.5;font-size:12px;"><span style="margin:0px;padding:0px;color:green;">-- DBA/ALL/USER/V_$/GV_$/SESSION/INDEX开头的绝大部分都是视图</span>
<span style="margin:0px;padding:0px;color:green;">-- DBA_TABLES意为DBA拥有的或可以访问的所有的关系表。</span>
<span style="margin:0px;padding:0px;color:green;">-- ALL_TABLES意为某一用户拥有的或可以访问的所有的关系表。</span>
<span style="margin:0px;padding:0px;color:green;">-- USER_TABLES意为某一用户所拥有的所有的关系表。</span>
<span style="margin:0px;padding:0px;color:green;">-- 当某一用户本身就为数据库DBA时，DBA_TABLES与ALL_TABLES等价。</span>
<span style="margin:0px;padding:0px;color:green;">-- DBA_TABLES &gt;= ALL_TABLES &gt;= USER_TABLES</span>
<span style="margin:0px;padding:0px;color:green;">-- 需要注意的是在ORACLE数据库中大小写是敏感的，而此三表中数据默认都是大写的，所以在进行查询的时候注意小写的数据可能会造成数据无法查到。</span>

SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'DBA%'</span>;
SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'ALL%'</span>;
SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'USER%'</span>;
SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'V_$%'</span>; <span style="margin:0px;padding:0px;color:green;">-- 针对某个实例的视图</span>
SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'GV_$%'</span>; <span style="margin:0px;padding:0px;color:green;">-- 全局视图，针对多个实例环境</span>
SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SESSION%'</span>;
SELECT * FROM dba_views WHERE view_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'INDEX%'</span>;

SELECT count(<span style="margin:0px;padding:0px;">1</span>) FROM dba_tables;
SELECT count(<span style="margin:0px;padding:0px;">1</span>) FROM all_tables;
SELECT count(<span style="margin:0px;padding:0px;">1</span>) FROM user_tables;

<span style="margin:0px;padding:0px;color:green;">-- V$/GV$开头的绝大部分都是V_$/GV_$表的别名</span>
SELECT * FROM dba_synonyms WHERE synonym_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'V$%'</span>;
SELECT * FROM dba_synonyms WHERE synonym_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'GV$%'</span>;

<span style="margin:0px;padding:0px;color:green;">-- X$没有对应的X_$</span>
SELECT * FROM dba_synonyms WHERE synonym_name LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'X$%'</span>;


<span style="margin:0px;padding:0px;color:green;">-- 比较常用的DBA开头的视图有</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_users; <span style="margin:0px;padding:0px;color:green;">--数据库用户信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_roles; <span style="margin:0px;padding:0px;color:green;">--角色信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_segments; <span style="margin:0px;padding:0px;color:green;">--表段信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_extents; <span style="margin:0px;padding:0px;color:green;">--数据区信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_objects; <span style="margin:0px;padding:0px;color:green;">--数据库对象信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_lobs; <span style="margin:0px;padding:0px;color:green;">--lob数据信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_tablespaces; <span style="margin:0px;padding:0px;color:green;">--数据库表空间信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_data_files; <span style="margin:0px;padding:0px;color:green;">--数据文件设置信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_temp_files; <span style="margin:0px;padding:0px;color:green;">--临时数据文件信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_rollback_segs; <span style="margin:0px;padding:0px;color:green;">--回滚段信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_ts_quotas; <span style="margin:0px;padding:0px;color:green;">--用户表空间配额信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_free_space; <span style="margin:0px;padding:0px;color:green;">--数据库空闲空间信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_profiles; <span style="margin:0px;padding:0px;color:green;">--数据库用户资源限制信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_sys_privs; <span style="margin:0px;padding:0px;color:green;">--用户的系统权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_tab_privs; <span style="margin:0px;padding:0px;color:green;">--用户具有的对象权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_col_privs; <span style="margin:0px;padding:0px;color:green;">--用户具有的列对象权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_role_privs; <span style="margin:0px;padding:0px;color:green;">--用户具有的角色信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_audit_trail; <span style="margin:0px;padding:0px;color:green;">--审计跟踪记录信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_stmt_audit_opts; <span style="margin:0px;padding:0px;color:green;">--审计设置信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_audit_object; <span style="margin:0px;padding:0px;color:green;">--对象审计结果信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_audit_session; <span style="margin:0px;padding:0px;color:green;">--会话审计结果信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_indexes; <span style="margin:0px;padding:0px;color:green;">--用户模式的索引信息</span>


<span style="margin:0px;padding:0px;color:green;">-- 比较常用的ALL开头的视图有</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_users; <span style="margin:0px;padding:0px;color:green;">--数据库所有用户的信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_objects; <span style="margin:0px;padding:0px;color:green;">--数据库所有的对象的信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_def_audit_opts; <span style="margin:0px;padding:0px;color:green;">--所有默认的审计设置信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_tables; <span style="margin:0px;padding:0px;color:green;">--所有的表对象信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_indexes; <span style="margin:0px;padding:0px;color:green;">--所有的数据库对象索引的信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_tab_comments; <span style="margin:0px;padding:0px;color:green;">--查询所有用户的表,视图等</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_col_comments; <span style="margin:0px;padding:0px;color:green;">--查询所有用户的表的列名和注释.</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from all_tab_columns; <span style="margin:0px;padding:0px;color:green;">--查询所有用户的表的列名等信息(详细但是没有备注)</span>


<span style="margin:0px;padding:0px;color:green;">-- 比较常用的ALL开头的视图有</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_objects; <span style="margin:0px;padding:0px;color:green;">--用户对象信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_source; <span style="margin:0px;padding:0px;color:green;">--数据库用户的所有资源对象信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_segments; <span style="margin:0px;padding:0px;color:green;">--用户的表段信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_tables; <span style="margin:0px;padding:0px;color:green;">--用户的表对象信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_tab_columns; <span style="margin:0px;padding:0px;color:green;">--用户的表列信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_constraints; <span style="margin:0px;padding:0px;color:green;">--用户的对象约束信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_sys_privs; <span style="margin:0px;padding:0px;color:green;">--当前用户的系统权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_tab_privs; <span style="margin:0px;padding:0px;color:green;">--当前用户的对象权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_col_privs; <span style="margin:0px;padding:0px;color:green;">--当前用户的表列权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_col_comments; <span style="margin:0px;padding:0px;color:green;">-- 查询本用户的表的列名和注释</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_role_privs; <span style="margin:0px;padding:0px;color:green;">--当前用户的角色权限信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_indexes; <span style="margin:0px;padding:0px;color:green;">--用户的索引信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_ind_columns; <span style="margin:0px;padding:0px;color:green;">--用户的索引对应的表列信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_cons_columns; <span style="margin:0px;padding:0px;color:green;">--用户的约束对应的表列信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_clusters; <span style="margin:0px;padding:0px;color:green;">--用户的所有簇信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_clu_columns; <span style="margin:0px;padding:0px;color:green;">--用户的簇所包含的内容信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_cluster_hash_expressions; <span style="margin:0px;padding:0px;color:green;">--散列簇的信息</span>


<span style="margin:0px;padding:0px;color:green;">-- 比较常用的V$开头的别名有</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$database; <span style="margin:0px;padding:0px;color:green;">--数据库信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$datafile; <span style="margin:0px;padding:0px;color:green;">--数据文件信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$controlfile; <span style="margin:0px;padding:0px;color:green;">--控制文件信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$logfile; <span style="margin:0px;padding:0px;color:green;">--重做日志信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$instance; <span style="margin:0px;padding:0px;color:green;">--数据库实例信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$log; <span style="margin:0px;padding:0px;color:green;">--日志组信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$loghist; <span style="margin:0px;padding:0px;color:green;">--日志历史信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$sga; <span style="margin:0px;padding:0px;color:green;">--数据库SGA信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$parameter; <span style="margin:0px;padding:0px;color:green;">--初始化参数信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$process; <span style="margin:0px;padding:0px;color:green;">--数据库服务器进程信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$bgprocess; <span style="margin:0px;padding:0px;color:green;">--数据库后台进程信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$controlfile_record_section; <span style="margin:0px;padding:0px;color:green;">--控制文件记载的各部分信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$thread; <span style="margin:0px;padding:0px;color:green;">--线程信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$datafile_header; <span style="margin:0px;padding:0px;color:green;">--数据文件头所记载的信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$archived_log; <span style="margin:0px;padding:0px;color:green;">--归档日志信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$archive_dest; <span style="margin:0px;padding:0px;color:green;">--归档日志的设置信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$logmnr_contents; <span style="margin:0px;padding:0px;color:green;">--归档日志分析的DML DDL结果信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$logmnr_dictionary; <span style="margin:0px;padding:0px;color:green;">--日志分析的字典文件信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$logmnr_logs; <span style="margin:0px;padding:0px;color:green;">--日志分析的日志列表信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$tablespace; <span style="margin:0px;padding:0px;color:green;">--表空间信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$tempfile; <span style="margin:0px;padding:0px;color:green;">--临时文件信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$filestat; <span style="margin:0px;padding:0px;color:green;">--数据文件的I/O统计信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$undostat; <span style="margin:0px;padding:0px;color:green;">--Undo数据信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$rollname; <span style="margin:0px;padding:0px;color:green;">--在线回滚段信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$session; <span style="margin:0px;padding:0px;color:green;">--会话信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$transaction; <span style="margin:0px;padding:0px;color:green;">--事务信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$rollstat; <span style="margin:0px;padding:0px;color:green;">--回滚段统计信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$pwfile_users; <span style="margin:0px;padding:0px;color:green;">--特权用户信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$sqlarea; <span style="margin:0px;padding:0px;color:green;">--当前查询过的sql语句访问过的资源及相关的信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$sql; <span style="margin:0px;padding:0px;color:green;">--与v$sqlarea基本相同的相关信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$sysstat; <span style="margin:0px;padding:0px;color:green;">--数据库系统状态信息</span>

<span style="margin:0px;padding:0px;color:green;">-- 比较常用的SESSION开头的视图有</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from session_roles; <span style="margin:0px;padding:0px;color:green;">--会话的角色信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from session_privs; <span style="margin:0px;padding:0px;color:green;">--会话的权限信息</span>

<span style="margin:0px;padding:0px;color:green;">-- 比较常用的INDEX开头的视图有</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from index_stats; <span style="margin:0px;padding:0px;color:green;">--索引的设置和存储信息</span>

<span style="margin:0px;padding:0px;color:green;">-- 伪表，参考oracle 中 dual 详解：http://blog.csdn.net/ozhouhui/article/details/7935196</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dual; <span style="margin:0px;padding:0px;color:green;">--系统伪列表信息</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> sysdate from dual; <span style="margin:0px;padding:0px;color:green;">--可将Sysdate视为一个其结果为当前日期和时间的函数，在任何可以使用Oracle函数的地方都可以使用Sysdate。也可以将它视为每个表的一个隐藏的列或伪列。</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> current_date from dual; <span style="margin:0px;padding:0px;color:green;">--报告会话的时区中的系统日期。注：可以设置自己的时区，以区别于数据库的时区。</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> SYSTIMESTAMP from dual; <span style="margin:0px;padding:0px;color:green;">--报告TIMESTAMP数据类型格式的系统日期。</span>


<span style="margin:0px;padding:0px;color:green;">-- 系统权限</span>
<span style="margin:0px;padding:0px;color:green;">-- GRANTEE 接受该权限的用户名 </span>
<span style="margin:0px;padding:0px;color:green;">-- OWNER 对象的拥有者 </span>
<span style="margin:0px;padding:0px;color:green;">-- GRANTOR 赋予权限的用户</span>
SELECT * FROM dba_sys_privs WHERE grantee = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SYS'</span>;
SELECT * FROM dba_sys_privs WHERE grantee = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'CONNECT'</span>;
SELECT * FROM dba_sys_privs WHERE grantee = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'RESOURCE'</span>;

<span style="margin:0px;padding:0px;color:green;">-- 角色权限</span>
<span style="margin:0px;padding:0px;color:green;">-- 查看某个用户有哪些角色</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_role_privs where grantee=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SYS'</span>;
<span style="margin:0px;padding:0px;color:green;">-- 查看某个角色被赋予了哪些用户</span>
SELECT * FROM dba_role_privs WHERE granted_role = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'DBA'</span>;

<span style="margin:0px;padding:0px;color:green;">-- 对象权限</span>
SELECT * FROM dba_tab_privs;

<span style="margin:0px;padding:0px;color:green;">-- 授予某个用户某些角色</span>
GRANT connect,resource TO <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'USER'</span>;
GRANT dba to <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'USER'</span>; <span style="margin:0px;padding:0px;color:green;">--给普通用户授予dba角色时，要重新连接才能生效</span>
REVOKE dba to <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'USER'</span>;
<span style="margin:0px;padding:0px;color:green;">-- 直接授予某个用户某些权限</span>
GRANT CREATE VIEW TO <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'USER'</span>;

<span style="margin:0px;padding:0px;color:green;">-- 查看某个系统用户是否有SYSDBA或者SYSOPER权限</span>
<span style="margin:0px;padding:0px;color:green;">-- oracle:DBA,SYSDBA,SYSOPER三者的区别：http://blog.chinaunix.net/uid-22457844-id-3045741.html</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from V$PWFILE_USERS;

<span style="margin:0px;padding:0px;color:green;">-- 锁定、解锁用户</span>
SELECT * FROM dba_users WHERE username = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SCOTT'</span>;
ALTER USER SCOTT account LOCK; <span style="margin:0px;padding:0px;color:green;">--锁定用户</span>
ALTER USER SCOTT account UNLOCK; <span style="margin:0px;padding:0px;color:green;">--解锁用户</span>
COMMIT;

<span style="margin:0px;padding:0px;color:green;">-- oracle10g 修改用户密码: http://blog.163.com/benbenfafa_88/blog/static/64930162200972594612972/</span>
<span style="margin:0px;padding:0px;color:green;">-- User Default Password Check in Oracle 11g: http://www.dbform.com/html/2009/673.html</span>
SELECT password FROM dba_users WHERE username = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SCOTT'</span>;
alter user SCOTT identified by new_password; <span style="margin:0px;padding:0px;color:green;">--修改用户密码</span>


<span style="margin:0px;padding:0px;color:green;">-- SERVICE_NAMES: http://docs.oracle.com/database/121/REFRN/GUID-AC956707-D568-4F8A-BF2E-99BA41E0A64F.htm#REFRN10194</span>
SELECT * FROM global_name; <span style="margin:0px;padding:0px;color:green;">-- 查看oracle的全局数据库名</span>
SELECT * FROM v$database; <span style="margin:0px;padding:0px;color:green;">-- 查看数据库名 show parameter db_name;</span>

<span style="margin:0px;padding:0px;color:green;">-- 数据库实例名对应着SID</span>
<span style="margin:0px;padding:0px;color:green;">-- SID: http://docs.oracle.com/database/121/LADBI/glossary.htm#LADBI8021</span>
<span style="margin:0px;padding:0px;color:green;">-- linux下在配置oracle环境变量的情况可以使用 echo $ORACLE_SID,如果没有可以使用ps -ef |grep oracle 来查询，结果中的xxxx就是对应的SID。</span>
<span style="margin:0px;padding:0px;color:green;">-- oracle    2548     1  0 Aug17 ?        00:00:00 ora_pmon_xxxx</span>
<span style="margin:0px;padding:0px;color:green;">-- 在windows环境下,oracle是以后台服务的方式被管理的,所以看&quot;控制面板-&gt;管理工具-&gt;服务 里面的名称:&quot;OracleServiceORCL&quot;,则ORCL就是sid;</span>
SELECT * FROM v$instance; <span style="margin:0px;padding:0px;color:green;">--查看数据库实例名 show parameter instance_name;</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> instance from v$thread;

<span style="margin:0px;padding:0px;color:green;">-- show parameter是oracle的命令，不是标准SQL语句</span>
<span style="margin:0px;padding:0px;color:green;">-- 可以在sqlplus或者pl/sql dev的命令窗口执行</span>
<span style="margin:0px;padding:0px;color:green;">-- show parameter aaaa;等价于SELECT * FROM v$parameter WHERE name like '%aaaa%';</span>
SELECT * FROM v$parameter WHERE name like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%name%'</span>; <span style="margin:0px;padding:0px;color:green;">--等价于show parameter name;</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$parameter where name like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%db_domain%'</span>; <span style="margin:0px;padding:0px;color:green;">--查询数据库域名</span>


<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> username from all_users where username like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%SCOTT%'</span>;
drop user SCOTT cascade;
commit;

<span style="margin:0px;padding:0px;color:green;">-- ERROR at line 1:</span>
<span style="margin:0px;padding:0px;color:green;">-- ORA-01940: cannot drop a user that is currently connected</span>

<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'ALTER SYSTEM KILL SESSION '</span>||<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">''</span><span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">''</span>||SID||<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">','</span>||SERIAL#||<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">''</span><span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">''</span>||<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">';'</span> as KILLER from v$session where username=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SCOTT'</span>;
<span style="margin:0px;padding:0px;color:green;">-- KILLER</span>
<span style="margin:0px;padding:0px;color:green;">-- ALTER SYSTEM KILL SESSION '363,35';</span>
<span style="margin:0px;padding:0px;color:green;">-- ALTER SYSTEM KILL SESSION '364,51';</span>
commit;

<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_roles where role like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%CONNECT%'</span>;
drop role CONNECT;
commit;

<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from dba_tablespaces where tablespace_name like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'EXAMPLE'</span>;
drop tablespace EXAMPLE including contents <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> datafiles cascade constraints ;
<span style="margin:0px;padding:0px;color:green;">-- including contents 删除表空间中的内容，如果删除表空间之前表空间中有内容，而未加此参数，表空间删不掉，所以习惯性的加此参数。</span>
<span style="margin:0px;padding:0px;color:green;">-- including datafiles 删除表空间中的数据文件。</span>
<span style="margin:0px;padding:0px;color:green;">-- cascade constraints 同时删除 tablespace 中表的外键参照。</span>


<span style="margin:0px;padding:0px;color:green;">-- 如何创建dblink和视图</span>
<span style="margin:0px;padding:0px;color:green;">-- http://docs.oracle.com/database/121/SQLRF/statements_5006.htm#i2061505</span>
<span style="margin:0px;padding:0px;color:green;">-- 如果需要创建全局 DBLink，则需要先确定用户有创建 dblink 的权限：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_sys_privs where privilege like upper(<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%DATABASE LINK%'</span>);

<span style="margin:0px;padding:0px;color:green;">-- 如果没有，则需要使用 sysdba 角色给用户赋权：</span>
grant create public database link to dbusername;

<span style="margin:0px;padding:0px;color:green;">-- 如果创建全局 dblink，必须使用 systm 或 sys 用户，在 database 前加 public。</span>
create /* public */ database link dblink1
connect to dbusername identified by dbpassword
using <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'(DESCRIPTION =(ADDRESS_LIST =(ADDRESS =(PROTOCOL = TCP)(HOST = 192.168.0.1)(PORT = 1521)))(CONNECT_DATA =(SERVICE_NAME = orcl)))'</span>;

<span style="margin:0px;padding:0px;color:green;">-- 创建dblink后，就可以直接在dblink上创建视图</span>
create <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">or</span> replace view cptp as (<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> SJDH from dbusername.cptp@dblink1); drop view cptp;


<span style="margin:0px;padding:0px;color:green;">-- 锁表查询SQL</span>
SELECT object_name, machine, s.sid, s.serial#
FROM gv$locked_object l, dba_objects o, gv$session s
WHERE l.object_id　= o.object_id
AND l.session_id = s.sid;

<span style="margin:0px;padding:0px;color:green;">-- 解除锁表</span>
alter system kill session <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'sid, serial#'</span>;


<span style="margin:0px;padding:0px;color:green;">-- 备份某个表</span>
create <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> new_table as <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from old_table;


<span style="margin:0px;padding:0px;color:green;">-- 查看数据库是否在rac环境的集群中的</span>
show parameter cluster_database;
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$parameter where name = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'cluster_database'</span>;


<span style="margin:0px;padding:0px;color:green;">-- 列操作</span>
<span style="margin:0px;padding:0px;color:green;">-- 增加和修改列不需要加关键字COLUMN</span>
<span style="margin:0px;padding:0px;color:green;">-- 删除单列的话，一定要加COLUMN，删除多列的时候，不能加COLUMN关键字</span>

<span style="margin:0px;padding:0px;color:green;">-- 增加一列</span>
alter <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp4 add test varchar2(<span style="margin:0px;padding:0px;">10</span>);
<span style="margin:0px;padding:0px;color:green;">-- 修改一列</span>
alter <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp4 modify test varchar2(<span style="margin:0px;padding:0px;">20</span>);
<span style="margin:0px;padding:0px;color:green;">-- 删除一列</span>
alter <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp4 drop column test;
<span style="margin:0px;padding:0px;color:green;">-- 增加多列</span>
alter <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp4 add (test varchar2(<span style="margin:0px;padding:0px;">10</span>),test2 number);
<span style="margin:0px;padding:0px;color:green;">-- 修改多列</span>
alter <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp4 modify (test varchar2(<span style="margin:0px;padding:0px;">20</span>),test2 varchar2(<span style="margin:0px;padding:0px;">20</span>));
<span style="margin:0px;padding:0px;color:green;">-- 删除多列</span>
alter <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp4 drop (test,test2);


<span style="margin:0px;padding:0px;color:green;">-- Windows下以管理员身份启动数据库</span>
net start oracleserviceorcl <span style="margin:0px;padding:0px;color:green;">-- 后面的orcl是你安装的数据库实例名</span>
net start oracleoradb11g_home1tnslistener <span style="margin:0px;padding:0px;color:green;">--非必须</span>

<span style="margin:0px;padding:0px;color:green;">-- linux下以sysdba用户登录，然后启动数据库</span>
sqlplus / as sysdba
startup

<span style="margin:0px;padding:0px;color:green;">-- sqlplus登陆方式</span>
sqlplus / as sysdba <span style="margin:0px;padding:0px;color:green;">--以操作系统权限认证的oracle sys管理员登陆</span>

sqlplus /nolog
conn / as sysdba <span style="margin:0px;padding:0px;color:green;">--以操作系统权限认证的oracle sys管理员登陆</span>


sqlplus sys/password@orcl as sysdba <span style="margin:0px;padding:0px;color:green;">--以sys用户登陆必须使用as sysdba</span>

sqlplus /nolog <span style="margin:0px;padding:0px;color:green;">--不在cmd或者teminal当中暴露密码的登陆方式</span>
conn sys/password as sysdba


sqlplus <span style="margin:0px;padding:0px;color:green;">--不显露密码的方式登陆</span>
Enter user-name：sys
Enter password：password as sysdba <span style="margin:0px;padding:0px;color:green;">--以sys用户登陆的话 必须要加上as sysdba子句</span>

sqlplus scott/tiger@orcl <span style="margin:0px;padding:0px;color:green;">--非管理员用户登陆</span>


desc v$database; <span style="margin:0px;padding:0px;color:green;">--查询v$database数据库的表结构</span>



<span style="margin:0px;padding:0px;color:green;">--在sqlplus中执行sql脚本，下面两种方式都可以</span>
START file_name
@file_name


<span style="margin:0px;padding:0px;color:green;">--判断表是否存在，如果存在则删除</span>
declare
      num   number;
begin
      <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> count(<span style="margin:0px;padding:0px;">1</span>) into num from all_tables where TABLE_NAME = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'EMP'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> OWNER=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SCOTT'</span>;
      <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">if</span>   num=<span style="margin:0px;padding:0px;">1</span>   <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">then</span>
          execute immediate <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'drop table EMP'</span>;
      <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">end</span>   <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">if</span>;
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">end</span>;
/
<span style="margin:0px;padding:0px;color:green;">--创建表</span>
CREATE TABLE EMP
       (EMPNO NUMBER(<span style="margin:0px;padding:0px;">4</span>) NOT NULL,
        ENAME VARCHAR2(<span style="margin:0px;padding:0px;">10</span>),
        JOB VARCHAR2(<span style="margin:0px;padding:0px;">9</span>),
        MGR NUMBER(<span style="margin:0px;padding:0px;">4</span>),
        HIREDATE DATE,
        SAL NUMBER(<span style="margin:0px;padding:0px;">7</span>, <span style="margin:0px;padding:0px;">2</span>),
        COMM NUMBER(<span style="margin:0px;padding:0px;">7</span>, <span style="margin:0px;padding:0px;">2</span>),
        DEPTNO NUMBER(<span style="margin:0px;padding:0px;">2</span>));
可以将上述存储过程加载到每一个create <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span>前面。

<span style="margin:0px;padding:0px;color:green;">--ORACLE 判断序列是否存在,如果存在就删除</span>

declare
 V_NUM number;

BEGIN
  <span style="margin:0px;padding:0px;color:green;">----多次删除时，每次都将v_num设置成为0</span>
    V_NUM := <span style="margin:0px;padding:0px;">0</span>;
    <span style="margin:0px;padding:0px;color:green;">----判断序列 seq_name_1 是否存在（区分大小写）</span>
    <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> count(<span style="margin:0px;padding:0px;">0</span>) into V_NUM from user_sequences where sequence_name = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'SEQ_BUSINESS_PROCESS_INDEX_ID'</span>;
    <span style="margin:0px;padding:0px;color:green;">----如果存在立即删除</span>
    <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">if</span> V_NUM &gt; <span style="margin:0px;padding:0px;">0</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">then</span>
    execute immediate <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'DROP SEQUENCE  SEQ_BUSINESS_PROCESS_INDEX_ID'</span>;
    <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">end</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">if</span>;
END;


<span style="margin:0px;padding:0px;color:green;">-- 设置sqlplus模式显示总行数</span>
show pagesize; <span style="margin:0px;padding:0px;color:green;">--查看当前的pagesize</span>
set pagesize <span style="margin:0px;padding:0px;">300</span>;

<span style="margin:0px;padding:0px;color:green;">-- 设置sqlplus模式显示行宽度</span>
show linesize; <span style="margin:0px;padding:0px;color:green;">--查看当前的linesize</span>
set linesize <span style="margin:0px;padding:0px;">300</span>;

<span style="margin:0px;padding:0px;color:green;">-- 修改安装目录glogin.sql文件才能保证之前的设置永久生效</span>
set pagesize <span style="margin:0px;padding:0px;">300</span>;
set linesize <span style="margin:0px;padding:0px;">300</span>;




<span style="margin:0px;padding:0px;color:green;">-- 删除表对象</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'drop table '</span>||segment_name from dba_segments where owner=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'VPMUSER'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> segment_type=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'TABLE'</span>;
<span style="margin:0px;padding:0px;color:green;">-- 创建表对象</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span>
<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'create table '</span>||segment_name || <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">' as select * from '</span>||segment_name ||<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'@DBLINK'</span>
from dba_segments where owner=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'VPMUSER'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> segment_type=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'TABLE'</span>;

<span style="margin:0px;padding:0px;color:green;">-- 检查表是否完整导入</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> segment_name from dba_segments@aaa where owner=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'VPMUSER'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> segment_type=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'TABLE'</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> (segment_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">not</span> like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'BIN$%'</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> segment_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">not</span> like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%201%'</span>)
minus
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> segment_name from dba_segments where owner=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'VPMUSER'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> segment_type=<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'TABLE'</span>  <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> segment_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">not</span> like <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'BIN$%'</span>


<span style="margin:0px;padding:0px;color:green;">--查询用户所有表的语句1</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> t.table_name,t.comments from user_tab_comments t

<span style="margin:0px;padding:0px;color:green;">--查询用户所有表的语句2:</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> r1, r2, r3, r5
from (<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> a.table_name r1, a.column_name r2, a.comments r3
          from user_col_comments a),
       (<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> t.table_name r4, t.comments r5 from user_tab_comments t)
where r4 = r1


<span style="margin:0px;padding:0px;color:green;">-- 查找表的所有索引（包括索引名，类型，构成列）：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> t.*,i.index_type from user_ind_columns t,user_indexes i where t.index_name = i.index_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> t.table_name = i.table_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> t.table_name = 要查询的表
<span style="margin:0px;padding:0px;color:green;">-- 查找表的主键（包括名称，构成列）：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> cu.* from user_cons_columns cu, user_constraints au where cu.constraint_name = au.constraint_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> au.constraint_type = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'P'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> au.table_name = 要查询的表

<span style="margin:0px;padding:0px;color:green;">-- 查找表的唯一性约束（包括名称，构成列）：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> column_name from user_cons_columns cu, user_constraints au where cu.constraint_name = au.constraint_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> au.constraint_type = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'U'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> au.table_name = 要查询的表

<span style="margin:0px;padding:0px;color:green;">-- 查找表的外键（包括名称，引用表的表名和对应的键名，下面是分成多步查询）：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_constraints c where c.constraint_type = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'R'</span> <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> c.table_name = 要查询的表

<span style="margin:0px;padding:0px;color:green;">-- 查询外键约束的列名：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_cons_columns cl where cl.constraint_name = 外键名称

<span style="margin:0px;padding:0px;color:green;">-- 查询引用表的键的列名：</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from user_cons_columns cl where cl.constraint_name = 外键引用表的键名

<span style="margin:0px;padding:0px;color:green;">-- 查询表的所有列及其属性</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> t.*,c.COMMENTS from user_tab_columns t,user_col_comments c where t.table_name = c.table_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> t.column_name = c.column_name <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">and</span> t.table_name = 要查询的表

    
<span style="margin:0px;padding:0px;color:green;">--备份表数据</span>
create <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">table</span> emp as <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from scott.emp

<span style="margin:0px;padding:0px;color:green;">--还原表数据</span>
insert into emp <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from scott.emp
    
<span style="margin:0px;padding:0px;color:green;">--查看已经执行过的sql这些是存在共享池中的，用户名需要大写，必须具有DBA 的权限</span>
<span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">select</span> * from v$sqlarea t where t.PARSING_SCHEMA_NAME <span style="margin:0px;padding:0px;color:rgb(0, 0, 255);">in</span> (<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'用户名'</span>) order by t.LAST_ACTIVE_TIME desc
    
    
<span style="margin:0px;padding:0px;color:green;">--ORACLE11G 字符集更改（这里更改为AL32UTF8）</span>
sqlplus sys as sysdba

<span style="margin:0px;padding:0px;color:green;">--执行下面命令，有可能造成数据库中已有数据混乱的情况，所以在进行操作前，要进行数据库的备份操作</span>
shutdown immediate;
STARTUP MOUNT;
ALTER SESSION SET SQL_TRACE=TRUE;
ALTER SYSTEM ENABLE RESTRICTED SESSION;
ALTER SYSTEM SET JOB_QUEUE_PROCESSES=<span style="margin:0px;padding:0px;">0</span>;
ALTER SYSTEM SET AQ_TM_PROCESSES=<span style="margin:0px;padding:0px;">0</span>;
ALTER DATABASE OPEN;
ALTER DATABASE character set INTERNAL_USE AL32UTF8;
ALTER SESSION SET SQL_TRACE=FALSE;
shutdown immediate;
startup;

<span style="margin:0px;padding:0px;color:green;">--察看 NLS_LANG 信息：</span>
SELECT parameter, value FROM v$nls_parameters WHERE parameter LIKE <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'%CHARACTERSET'</span>;


UPDATE STAFF
SET MODIFY_TIME = TO_DATE(<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'2016/04/22 00:01:00'</span>, <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'yyyy/MM/dd hh24:mi:ss'</span>)
WHERE MODIFY_TIME &lt; TO_DATE(<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'2016/04/22 00:01:00'</span>, <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'yyyy/MM/dd hh24:mi:ss'</span>);

UPDATE STAFF
SET MODIFY_TIME = TO_TIMESTAMP(<span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'19-03-2008 02:36:00.360000'</span>, <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'dd-MM-yyyy hh24:mi:ss.ff'</span>)
WHERE STAFF_ID = <span style="margin:0px;padding:0px;color:rgb(163, 21, 21);">'01'</span>;
</code></pre>
</div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;margin-top:20px;">
<div style="margin:0px;padding:0px;margin-bottom:10px;"></div>
<div style="margin:0px;padding:0px;font-size:9pt;color:gray;margin-top:0px;">标签: <a href="http://www.cnblogs.com/jiangxinnju/tag/oracle/" style="margin:0px;padding:0px;text-decoration:underline;margin-left:5px;color:rgb(102, 102, 102);">oracle</a>, <a href="http://www.cnblogs.com/jiangxinnju/tag/%E7%B3%BB%E7%BB%9F%E8%A1%A8/" style="margin:0px;padding:0px;text-decoration:underline;margin-left:5px;color:rgb(102, 102, 102);">系统表</a></div>
<div style="margin:0px;padding:0px;"><div style="margin:0px;padding:10px 0px;margin-bottom:10px;margin-top:10px;border:1px dashed silver;font-size:12px;width:320px;text-align:center;">
        <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D) repeat-x;background-color:rgb(45, 174, 191);color:rgb(255, 255, 255);border:none;">好文要顶</a>
            <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D) repeat-x;background-color:rgb(227, 49, 0);color:rgb(255, 255, 255);border:none;">关注我</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D) repeat-x;background-color:rgb(255, 181, 21);color:rgb(255, 255, 255);border:none;">收藏该文</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至新浪微博"><img src="Oracle系统表整理+常用SQL语句收集 - Aloys寒风 - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" height="24" style="margin:0px;padding:0px;height:auto;border:none;vertical-align:middle;margin-left:5px;box-shadow:none;max-width:300px;" width="24"/></a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至微信"><img src="Oracle系统表整理+常用SQL语句收集 - Aloys寒风 - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" height="24" style="margin:0px;padding:0px;border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;max-width:300px;" width="24"/></a>
</div>
<div style="margin:0px;padding:0px;float:left;width:280px;margin-top:0px;margin-bottom:10px;color:rgb(0, 0, 0);margin-left:0px;font-size:12px;">
    <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jiangxinnju/" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;" target="_blank"><img src="Oracle系统表整理+常用SQL语句收集 - Aloys寒风 - 博客园_files/20141125131554.png" type="image/png" data-filename="20141125131554.png" height="48" style="margin:0px;padding:0px;height:auto;border:0px;vertical-align:top;float:left;margin-right:5px;padding-top:5px;padding-left:2px;max-width:300px;" width="48"/></a>
        <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jiangxinnju/" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">Aloys寒风</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jiangxinnju/followees" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">关注 - 2</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jiangxinnju/followers" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">粉丝 - 15</a>
        </div>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;"></div>
    <div style="margin:0px;padding:0px;">
                <a href="#" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;">+加关注</a>
    </div>
</div>
<div style="margin:0px;padding:0px;float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:125px;text-align:center;margin-top:10px;">
    <div style="margin:0px;padding:0px;float:left;width:46px;height:52px;background:url(//static.cnblogs.com/images/upup.gif) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">1</span>
    </div>
    <div style="text-align:center;padding:0px;margin:0px;height:52px;background:url(//static.cnblogs.com/images/downdown.gif) no-repeat;margin-left:20px;cursor:pointer;margin-top:2px;padding-top:5px;width:46px;float:right;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;margin-top:5px;margin-left:0px;font-size:12px;color:gray;">
    </div>
</div>
</div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;line-height:1.8;font-size:12px;"><a href="http://www.cnblogs.com/jiangxinnju/p/5839679.html" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:none;">« </a> 上一篇：<a href="http://www.cnblogs.com/jiangxinnju/p/5839679.html" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;" title="发布于2016-09-04 16:42">oracle表空间不足相关问题解决办法</a><br style="margin:0px;padding:0px;"/><a href="http://www.cnblogs.com/jiangxinnju/p/5851158.html" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:none;">» </a> 下一篇：<a href="http://www.cnblogs.com/jiangxinnju/p/5851158.html" style="margin:0px;padding:0px;color:rgb(68, 68, 68);text-decoration:underline;" title="发布于2016-09-07 21:29">Java远程调试代码不一致问题汇总</a><br style="margin:0px;padding:0px;"/></div>
</div>


		</div>
		<div style="margin:0px;padding:0px;float:right;clear:both;color:rgb(168, 177, 186);width:100%;text-align:right;padding-right:5px;margin-top:5px;">posted @ <span style="margin:0px;padding:0px;">2016-09-04 21:37</span> <a href="http://www.cnblogs.com/jiangxinnju/" style="margin:0px;padding:0px;text-decoration:none;color:rgb(102, 102, 102);">Aloys寒风</a> 阅读(<span style="margin:0px;padding:0px;">5865</span>) 评论(<span style="margin:0px;padding:0px;">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=5840420" rel="nofollow" style="margin:0px;padding:0px;text-decoration:none;color:rgb(102, 102, 102);">编辑</a> <a href="https://www.cnblogs.com/jiangxinnju/p/5840420.html#" style="margin:0px;padding:0px;text-decoration:none;color:rgb(102, 102, 102);">收藏</a></div>
	</div></div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 