<html>
<head>
  <title>用Nodejs连接MySQL | 粉丝日志</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="11660"/>
<h1>用Nodejs连接MySQL | 粉丝日志</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2016/8/22 11:50</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.fens.me/nodejs-mysql-intro/"><i>http://blog.fens.me/nodejs-mysql-intro/</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px"><div><div style="font-family:Arial, Helvetica, sans-serif;font-size:12px;line-height:18px;background-color:rgb(255, 255, 255);"><div><div style="text-align:left;"><div><div><div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:16649px;">
            <h2 style="transition:color 0.2s linear;color:rgb(67, 67, 67);padding:0pt;font-size:20px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:26px;font-weight:bold;margin:0px;border:0px none rgb(67, 67, 67);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;">用Nodejs连接MySQL</h2>
            <div style="margin-bottom:10px;color:rgb(77, 77, 79);margin:0pt;padding:0pt;line-height:20px;margin-top:20px;font-size:13px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:11520px;">
                            <p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:80px;"><a href="http://blog.fens.me/series-nodejs/" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank" title="从零开始nodejs系列文章">从零开始nodejs系列文章</a>，将介绍如何利Javascript做为服务端脚本，通过Nodejs框架web开发。Nodejs框架是基于V8的引擎，是目前速度最快的Javascript引擎。chrome浏览器就基于V8，同时打开20-30个网页都很流畅。Nodejs标准的web开发框架Express，可以帮助我们迅速建立web站点，比起PHP的开发效率更高，而且学习曲线更低。非常适合小型网站，个性化网站，我们自己的Geek网站！！</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">关于作者</strong></p>
<ul style="text-indent:0px;margin:0pt;list-style-type:none;margin-left:0px;list-style:none;padding-left:0px;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:107px;">
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">张丹(Conan), 程序员Java,R,PHP,Javascript</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">weibo：@Conan_Z</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">blog: <a href="http://blog.fens.me/" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank" title="粉丝日志|跨界的IT博客">http://blog.fens.me</a></li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">email: bsspirit@gmail.com</li>
</ul>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">转载请注明出处：</strong><br style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<a href="http://blog.fens.me/nodejs-mysql-intro/" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank" title="用Nodejs连接MySQL">http://blog.fens.me/nodejs-mysql-intro/</a></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:406px;"><a href="http://blog.fens.me/wp-content/uploads/2013/09/nodejs-mysql.png" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><img src="用Nodejs连接MySQL  粉丝日志_files/Image.png" type="image/png" data-filename="Image.png" alt="nodejs-mysql" height="400" style="margin:0pt;padding:0pt;border:0px none rgb(14, 115, 184);max-width:620px;height:400px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;" width="600"/></a></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">前言</strong></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;">MySQL是一款常用的开源数据库产品，通常也是免费数据库的首选。查了一下NPM列表，发现Nodejs有13库可以访问MySQL，felixge/node-mysql似乎是最受关注项目，我也决定尝试用一下。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">要注意名字，”felixge/node-mysql”非”node-mysql”，安装部分会介绍这个小插曲！</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">目录</strong></p>
<ol style="margin:0px;padding:0px 0px 0px 35px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:585px;height:107px;">
<li style="padding-left:0px;margin:0px;list-style-type:none;width:585px;box-shadow:none;background-image:none;padding:0px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-bottom:3px;margin-bottom:5px;list-style:decimal outside none;height:20px;">node-mysql介绍</li>
<li style="padding-left:0px;margin:0px;list-style-type:none;width:585px;box-shadow:none;background-image:none;padding:0px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-bottom:3px;margin-bottom:5px;list-style:decimal outside none;height:20px;">建立MySQL测试库</li>
<li style="padding-left:0px;margin:0px;list-style-type:none;width:585px;box-shadow:none;background-image:none;padding:0px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-bottom:3px;margin-bottom:5px;list-style:decimal outside none;height:20px;">node-mysql安装</li>
<li style="padding-left:0px;margin:0px;list-style-type:none;width:585px;box-shadow:none;background-image:none;padding:0px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-bottom:3px;margin-bottom:5px;list-style:decimal outside none;height:20px;">node-mysql使用</li>
</ol>
<h2 style="padding-bottom:5px;color:rgb(67, 67, 67);padding:0pt;font-size:20px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:26px;font-weight:bold;margin:25px 0px 10px;transition:color 0.2s linear;border:0px none rgb(67, 67, 67);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;">1. node-mysql介绍</h2>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;">felixge/node-mysql是一个纯nodejs的用javascript实现的一个MySQL客户端程序。felixge/node-mysql封装了Nodejs对MySQL的基本操作，100% MIT公共许可证。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">项目地址：https://github.com/felixge/node-mysql</p>
<h2 style="padding-bottom:5px;color:rgb(67, 67, 67);padding:0pt;font-size:20px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:26px;font-weight:bold;margin:25px 0px 10px;transition:color 0.2s linear;border:0px none rgb(67, 67, 67);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;">2. 建立MySQL测试库</h2>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">本地创建MySQL测试库：nodejs</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:320px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">
~ mysql -uroot -p
mysql&gt; CREATE DATABASE nodejs;
mysql&gt; SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| nodejs             |
| performance_schema |
+--------------------+
4 rows in set (0.00 sec)

mysql&gt; GRANT ALL ON nodejs.* to nodejs@'%' IDENTIFIED BY 'nodejs';
mysql&gt; GRANT ALL ON nodejs.* to nodejs@localhost IDENTIFIED BY 'nodejs';
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">重新登陆MySQL</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:320px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">
C:\Users\Administrator&gt;mysql -unodejs -p
Enter password: ******

mysql&gt; SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| nodejs             |
| test               |
+--------------------+
3 rows in set (0.00 sec)

mysql&gt; USE nodejs
Database changed
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">新建一个user表</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:300px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">
CREATE TABLE t_user(
id INT PRIMARY KEY AUTO_INCREMENT,
name VARCHAR(16) NOT NULL ,
create_date TIMESTAMP NULL DEFAULT now()
)ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE UNIQUE INDEX t_quiz_IDX_0 on t_user(name);

mysql&gt; SHOW TABLES;
+------------------+
| Tables_in_nodejs |
+------------------+
| t_user           |
+------------------+
1 row in set (0.04 sec)
</code></pre>
<h2 style="padding-bottom:5px;color:rgb(67, 67, 67);padding:0pt;font-size:20px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:26px;font-weight:bold;margin:25px 0px 10px;transition:color 0.2s linear;border:0px none rgb(67, 67, 67);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;">3. node-mysql安装</h2>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">我的系统环境</strong></p>
<ul style="text-indent:0px;margin:0pt;list-style-type:none;margin-left:0px;list-style:none;padding-left:0px;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:107px;">
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">win7 64bit</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">Nodejs:v0.10.5</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">Npm:1.2.19</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">MySQL:Server version: 5.6.11 MySQL Community Server (GPL)</li>
</ul>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">创建工程:nodejs-node-mysql</strong></p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:160px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ D:\workspace\javascript&gt;mkdir nodejs-node-mysql
~ D:\workspace\javascript&gt;cd nodejs-node-mysql
~ D:\workspace\javascript\nodejs-node-mysql&gt;npm install node-mysql
node-mysql@0.2.0 node_modules\node-mysql
├── better-js-class@0.1.2
├── cps@0.1.7
├── underscore@1.5.2
└── mysql@2.0.0-alpha9 (require-all@0.0.3, bignumber.js@1.0.1)
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">这里有一个小插曲</strong></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">安装“node-mysql”后，打开package.json文件发现，这个项目地址是</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:20px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">https://github.com/redblaze/node-mysql.git</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">从依赖关系可以看到，它依赖于mysql库，是对felixge/node-mysql的封装。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:138px;"><a href="http://blog.fens.me/wp-content/uploads/2013/09/node-mysql1.png" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><img src="用Nodejs连接MySQL  粉丝日志_files/Image [1].png" type="image/png" data-filename="Image.png" alt="node-mysql1" height="213" style="margin:0pt;padding:0pt;border:0px none rgb(14, 115, 184);max-width:620px;height:132px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;" width="999"/></a></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">由于这个项目star是0，fork也是0. 所以，我也不准备花时间测试了，重新安装felixge/node-mysql的包。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">重新安装node-mysql</strong></p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:260px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ D:\workspace\javascript\nodejs-node-mysql&gt;rm -rf node_modules
~ D:\workspace\javascript\nodejs-node-mysql&gt;npm install mysql@2.0.0-alpha9
npm http GET https://registry.npmjs.org/mysql/2.0.0-alpha9
npm http 200 https://registry.npmjs.org/mysql/2.0.0-alpha9
npm http GET https://registry.npmjs.org/mysql/-/mysql-2.0.0-alpha9.tgz
npm http 200 https://registry.npmjs.org/mysql/-/mysql-2.0.0-alpha9.tgz
npm http GET https://registry.npmjs.org/require-all/0.0.3
npm http GET https://registry.npmjs.org/bignumber.js/1.0.1
npm http 304 https://registry.npmjs.org/require-all/0.0.3
npm http 304 https://registry.npmjs.org/bignumber.js/1.0.1
mysql@2.0.0-alpha9 node_modules\mysql
├── require-all@0.0.3
└── bignumber.js@1.0.1
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">这回就对了，继续下面的开发！</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">创建node程序启动文件：app.js</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">第一个测试</strong></p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:320px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ vi app.js

var mysql = require('mysql');
var conn = mysql.createConnection({
    host: 'localhost',
    user: 'nodejs',
    password: 'nodejs',
    database:'nodejs',
    port: 3306
});
conn.connect();
conn.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
    if (err) throw err;
    console.log('The solution is: ', rows[0].solution);
});
conn.end();
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">运行node</strong></p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:40px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ D:\workspace\javascript\nodejs-node-mysql&gt;node app.js
The solution is:  2
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">这样我们就让Nodejs连接上了MySQL。</p>
<h2 style="padding-bottom:5px;color:rgb(67, 67, 67);padding:0pt;font-size:20px;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:26px;font-weight:bold;margin:25px 0px 10px;transition:color 0.2s linear;border:0px none rgb(67, 67, 67);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;">4. node-mysql使用</h2>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">下面我们要对node-mysql的API进行常用的测试。</p>
<ul style="text-indent:0px;margin:0pt;list-style-type:none;margin-left:0px;list-style:none;padding-left:0px;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:107px;">
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">表新删改查</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;"><span style="margin:0pt;padding:0pt;font-size:13px;line-height:19px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">连接池配置</span></li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">MySQL断线重连</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">连接池超时测试</li>
</ul>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1). 表新删改查</strong><br style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
修改app.js</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:1200px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">
~ vi app.js

var mysql = require('mysql');
var conn = mysql.createConnection({
    host: 'localhost',
    user: 'nodejs',
    password: 'nodejs',
    database: 'nodejs',
    port: 3306
});
conn.connect();

var insertSQL = 'insert into t_user(name) values(&quot;conan&quot;),(&quot;fens.me&quot;)';
var selectSQL = 'select * from t_user limit 10';
var deleteSQL = 'delete from t_user';
var updateSQL = 'update t_user set name=&quot;conan update&quot;  where name=&quot;conan&quot;';

//delete
conn.query(deleteSQL, function (err0, res0) {
    if (err0) console.log(err0);
    console.log(&quot;DELETE Return ==&gt; &quot;);
    console.log(res0);

    //insert
    conn.query(insertSQL, function (err1, res1) {
        if (err1) console.log(err1);
        console.log(&quot;INSERT Return ==&gt; &quot;);
        console.log(res1);

        //query
        conn.query(selectSQL, function (err2, rows) {
            if (err2) console.log(err2);

            console.log(&quot;SELECT ==&gt; &quot;);
            for (var i in rows) {
                console.log(rows[i]);
            }

            //update
            conn.query(updateSQL, function (err3, res3) {
                if (err3) console.log(err3);
                console.log(&quot;UPDATE Return ==&gt; &quot;);
                console.log(res3);

                //query
                conn.query(selectSQL, function (err4, rows2) {
                    if (err4) console.log(err4);

                    console.log(&quot;SELECT ==&gt; &quot;);
                    for (var i in rows2) {
                        console.log(rows2[i]);
                    }
                });
            });
        });
    });
});

//conn.end();
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">控制台输出：</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:840px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">D:\workspace\javascript\nodejs-node-mysql&gt;node app.js
DELETE Return ==&gt;
{ fieldCount: 0,
  affectedRows: 2,
  insertId: 0,
  serverStatus: 34,
  warningCount: 0,
  message: '',
  protocol41: true,
  changedRows: 0 }
INSERT Return ==&gt;
{ fieldCount: 0,
  affectedRows: 2,
  insertId: 33,
  serverStatus: 2,
  warningCount: 0,
  message: '&amp;Records: 2  Duplicates: 0  Warnings: 0',
  protocol41: true,
  changedRows: 0 }
SELECT ==&gt;
{ id: 33,
  name: 'conan',
  create_date: Wed Sep 11 2013 12:09:15 GMT+0800 (中国标准时间) }
{ id: 34,
  name: 'fens.me',
  create_date: Wed Sep 11 2013 12:09:15 GMT+0800 (中国标准时间) }
UPDATE Return ==&gt;
{ fieldCount: 0,
  affectedRows: 1,
  insertId: 0,
  serverStatus: 2,
  warningCount: 0,
  message: '(Rows matched: 1  Changed: 1  Warnings: 0',
  protocol41: true,
  changedRows: 1 }
SELECT ==&gt;
{ id: 33,
  name: 'conan update',
  create_date: Wed Sep 11 2013 12:09:15 GMT+0800 (中国标准时间) }
{ id: 34,
  name: 'fens.me',
  create_date: Wed Sep 11 2013 12:09:15 GMT+0800 (中国标准时间) }
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;">由于node的异步的，上面是一个连续的操作，代码会被写的支离破碎。我们可以通过async库对上面代码进行封装，请参考文章：<a href="http://blog.fens.me/nodejs-async/" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank" title="Nodejs异步流程控制Async">Nodejs异步流程控制Async</a></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">2). 连接池配置</strong></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">增加文件：app-pooling.js</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:500px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ vi app-pooling.js

var mysql = require('mysql');
var pool = mysql.createPool({
    host: 'localhost',
    user: 'nodejs',
    password: 'nodejs',
    database: 'nodejs',
    port: 3306
});

var selectSQL = 'select * from t_user limit 10';

pool.getConnection(function (err, conn) {
    if (err) console.log(&quot;POOL ==&gt; &quot; + err);

    conn.query(selectSQL,function(err,rows){
        if (err) console.log(err);
        console.log(&quot;SELECT ==&gt; &quot;);
        for (var i in rows) {
            console.log(rows[i]);
        }
        conn.release();
    });
});
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">控制台输出：</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:160px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">D:\workspace\javascript\nodejs-node-mysql&gt;node app-pooling.js
SELECT ==&gt;
{ id: 39,
  name: 'conan update',
  create_date: Wed Sep 11 2013 13:41:18 GMT+0800 (中国标准时间) }
{ id: 40,
  name: 'fens.me',
  create_date: Wed Sep 11 2013 13:41:18 GMT+0800 (中国标准时间) }
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">3). MySQL断线重连</strong></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">分别模拟3种错误</p>
<ul style="text-indent:0px;margin:0pt;list-style-type:none;margin-left:0px;list-style:none;padding-left:0px;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:79px;">
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">登陆密码错误</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">数据库宕机</li>
<li style="background:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif) 0px 5px no-repeat;margin:0pt;list-style-type:none;list-style:none outside none;width:598px;box-shadow:none;background-image:url(http://blog.fens.me/wp-content/themes/silesia/images/bullets/5.gif);padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);padding-left:22px;padding-bottom:3px;margin-bottom:5px;height:20px;">数据库连接超时</li>
</ul>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">新增文件：app-reconnect.js</strong></p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:640px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ vi app-reconnect.js

var mysql = require('mysql');
var conn;
function handleError () {
    conn = mysql.createConnection({
        host: 'localhost',
        user: 'nodejs',
        password: 'nodejs',
        database: 'nodejs',
        port: 3306
    });

    //连接错误，2秒重试
    conn.connect(function (err) {
        if (err) {
            console.log('error when connecting to db:', err);
            setTimeout(handleError , 2000);
        }
    });

    conn.on('error', function (err) {
        console.log('db error', err);
        // 如果是连接断开，自动重新连接
        if (err.code === 'PROTOCOL_CONNECTION_LOST') {
            handleError();
        } else {
            throw err;
        }
    });
}
handleError();
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">a. 模拟密码错误</strong></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">修改password: ‘nodejs11’</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">控制台输出。</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:260px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">D:\workspace\javascript\nodejs-node-mysql&gt;node app-reconnect.js
error when connecting to db: { [Error: ER_ACCESS_DENIED_ERROR: Access denied for user 'nodejs'@'localhost' (using pass
rd: YES)]
  code: 'ER_ACCESS_DENIED_ERROR',
  errno: 1045,
  sqlState: '28000',
  fatal: true }
error when connecting to db: { [Error: ER_ACCESS_DENIED_ERROR: Access denied for user 'nodejs'@'localhost' (using pass
rd: YES)]
  code: 'ER_ACCESS_DENIED_ERROR',
  errno: 1045,
  sqlState: '28000',
  fatal: true }
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">b. 模拟数据库宕机</strong><br style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
正常启动node，然后杀掉mysqld的进程。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">控制台输出。</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:220px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">
D:\workspace\javascript\nodejs-node-mysql&gt;node app-reconnect.js
db error { [Error: read ECONNRESET]
  code: 'ECONNRESET',
  errno: 'ECONNRESET',
  syscall: 'read',
  fatal: true }

Error: read ECONNRESET
    at errnoException (net.js:884:11)
    at TCP.onread (net.js:539:19)
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">这个异常，直接导致node程序被杀死！</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">c. 模拟连接超时，PROTOCOL_CONNECTION_LOST</strong><br style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
切换到root账户, 修改MySQL的wait_timeout参数，设置为10毫秒超时。</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:380px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ mysql -uroot -p
mysql&gt; show variables like 'wait_timeout';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| wait_timeout  | 28800 |
+---------------+-------+
1 row in set (0.00 sec)

mysql&gt; set global wait_timeout=10;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; show variables like 'wait_timeout';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| wait_timeout  | 10    |
+---------------+-------+
1 row in set (0.00 sec)
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">修改文件：app-reconnection.js，在最后增加代码</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:240px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">~ vi app-reconnection.js

function query(){
    console.log(new Date());
    var sql = &quot;show variables like 'wait_timeout'&quot;;
    conn.query(sql, function (err, res) {
        console.log(res);
    });
}

query();
setInterval(query, 15*1000);
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">程序会每融15秒，做一次查询。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">控制台输出</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:180px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">D:\workspace\javascript\nodejs-node-mysql&gt;node app-reconnect.js
Wed Sep 11 2013 15:21:14 GMT+0800 (中国标准时间)
[ { Variable_name: 'wait_timeout', Value: '10' } ]
db error { [Error: Connection lost: The server closed the connection.] fatal: true, code: 'PROTOCOL_CONNECTION_LOST' }
Wed Sep 11 2013 15:21:28 GMT+0800 (中国标准时间)
[ { Variable_name: 'wait_timeout', Value: '10' } ]
db error { [Error: Connection lost: The server closed the connection.] fatal: true, code: 'PROTOCOL_CONNECTION_LOST' }
Wed Sep 11 2013 15:21:43 GMT+0800 (中国标准时间)
[ { Variable_name: 'wait_timeout', Value: '10' } ]
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">我们自己的程序捕获了“PROTOCOL_CONNECTION_LOST”异常，并自动的实现了数据库重连。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">4). MySQL连接池的超时测试</strong></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">针对wait_timeout问题，我们再对连接做一下测试。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">修改app-pooling.js文件</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:500px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">
var mysql = require('mysql');
var pool = mysql.createPool({
    host: 'localhost',
    user: 'nodejs',
    password: 'nodejs',
    database: 'nodejs',
    port: 3306
});

var selectSQL =&quot;show variables like 'wait_timeout'&quot;;

pool.getConnection(function (err, conn) {
    if (err) console.log(&quot;POOL ==&gt; &quot; + err);

    function query(){
        conn.query(selectSQL, function (err, res) {
            console.log(new Date());
            console.log(res);
            conn.release();
        });
    }
    query();
    setInterval(query, 5000);
});
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">控制台输出：</p>
<pre style="border:0px none rgb(77, 77, 79);margin:0pt;overflow:auto;margin-bottom:15px;background:none 0% 0% repeat scroll rgb(249, 249, 212);padding:10px;background-color:rgb(249, 249, 212);background-image:none;box-shadow:none;width:600px;height:140px;"><code style="line-height:normal;margin:0pt;font-family:Monaco, monospace;font-style:normal;font-variant:normal;font-weight:normal;font-size:11px;padding:1px 3px;font-stretch:normal;background:none 0% 0% repeat scroll rgb(255, 255, 225);border:0px none rgb(77, 77, 79);background-color:rgb(255, 255, 225);background-image:none;box-shadow:none;">D:\workspace\javascript\nodejs-node-mysql&gt;node app-pooling.js
Wed Sep 11 2013 15:32:25 GMT+0800 (中国标准时间)
[ { Variable_name: 'wait_timeout', Value: '10' } ]
Wed Sep 11 2013 15:32:30 GMT+0800 (中国标准时间)
[ { Variable_name: 'wait_timeout', Value: '10' } ]
Wed Sep 11 2013 15:32:35 GMT+0800 (中国标准时间)
[ { Variable_name: 'wait_timeout', Value: '10' } ]
</code></pre>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:20px;">连接池，已经解决了自动重连的问题了，后面我们的开发，可以尽量使用pooling的方式。</p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:40px;"><strong style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">转载请注明出处：</strong><br style="margin:0pt;padding:0pt;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<a href="http://blog.fens.me/nodejs-mysql-intro/" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank" title="用Nodejs连接MySQL">http://blog.fens.me/nodejs-mysql-intro/</a></p>
<p style="margin:0pt;padding:0pt;margin-bottom:15px;margin-top:10px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:406px;"><img src="用Nodejs连接MySQL  粉丝日志_files/Image [2].png" type="image/png" data-filename="Image.png" alt="打赏作者" height="400" style="margin:0pt;padding:0pt;max-width:620px;height:400px;border:0px none rgb(77, 77, 79);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;" width="600"/></p>
              <div style="border:0px none rgb(77, 77, 79);margin:0pt;display:block;clear:both;visibility:hidden;padding:0pt;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:0px;"></div>
                            <p style="border:0px none rgb(77, 77, 79);margin:0pt;margin-bottom:15px;width:620px;font-family:Georgia, 'Times New Roman', Times, serif;font-style:italic;padding:0pt;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;margin-top:15px;height:20px;">This entry was posted in <a href="http://blog.fens.me/category/javascript%e8%af%ad%e8%a8%80%e5%ae%9e%e8%b7%b5/" rel="category tag" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Javascript语言实践</a>, <a href="http://blog.fens.me/category/%e6%95%b0%e6%8d%ae%e5%ba%93/" rel="category tag" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">数据库</a></p>              
            </div>
            
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:0px;"></div>        
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:5068px;">              
                
<div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:5068px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:5068px;">


            <ul style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:5068px;">
                    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
        <p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">Pingback: <a href="http://blog.fens.me/nodejs-async/" rel="external nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Nodejs异步流程控制Async | 粉丝日志</a>()</p>
    </li>
    
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:92px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sky™</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">很nice</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">过奖</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:766px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Bunm Jyo</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">我的ubuntu xampp集成环境 命令行下连接mysql登录操作都正常，可是nodejs里面执行connect()方法就是报1045 28000的错误，求解</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:712px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:692px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">似乎是权限的问题。你把对应账号的权限，允许远程访问，再试一下。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:656px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:110px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Bunm Jyo</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">权限是没问题的，我另外一台电脑的windows都能正常使用root访问；是否会是xampp集成环境还是my.cnf的文件权限？my.cnf的默认文件权限是多少呢？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">我不清楚xampp</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:546px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Bunm Jyo</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:108px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:108px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">Express server listening on port 3000</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">{ [Error: ER_ACCESS_DENIED_ERROR: Access denied for user ‘root’@’localhost’ (using password: YES)]<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
  code: ‘ER_ACCESS_DENIED_ERROR’,</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">  errno: 1045,</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">  sqlState: ‘28000’,</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">  fatal: true }</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:420px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:400px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">很明显的权限问题，允许远程访问就行了，虽然root这么做很不安全。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">类似下面的语句<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
GRANT ALL PRIVILEGES ON *.* TO root@%*%</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:328px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Bunm Jyo</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">已经可以通过另外一台电脑局域网远程访问了，但是就node无法连接；蛋都疼裂了～～ =。=<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
休息吧，感谢</p>
</div>
        </div>

    </li>
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:54px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Bunm Jyo</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:36px;">在windows下调试ok了,<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
貌似不是数据库的配置问题,应该是linux的哪个权限出了问题;我再找找原因,搞定后给结贴</p>
</div>
        </div>

    </li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:72px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Bunm Jyo</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;">问题,在linux下的nodejs 代码,访问mysql建立连接,若密码为空,则能正常连接,若有密码,就一定提示上面的密码错误 1045.确认密码是正确的,linux 命令行下相同密码都能正常连接访问.问题出在哪里呢?是nodejs代码还是linux系统?应该排除mysql库的配置问题,因为在windows平台下相同的库,都是正常的说</p>
</div>
        </div>

    </li>
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:108px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:90px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:90px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:18px;">没看明白，你说的。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:72px;">1. MySQL运行在什么系统？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
2. Node运行在什么系统？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
3. MySQL和Node是不是同一台机器？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
4. MySQL的访问账号的密码是空还是非空？访问账号是否已支持远程访问？</p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:400px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">liuwu</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">代码有上传吗</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:364px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:344px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">核心代码都在文章里写了，没有单独上传。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:308px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:308px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">liuwu</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:162px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:162px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">你好，我按照文章操作<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
 连接池配置</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">增加文件：app-pooling.js<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
老是提示没有mysql.createPool方法。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">我的系统环境</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">win7 64bit</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">Nodejs:v0.10.26<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
Npm:1.4.13</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">MySQL:5.6.16</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:128px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:108px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:90px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:90px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">两个可能的问题：</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">没有安装mysql库<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
npm install mysql@2.0.0-alpha9</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">没有增加mysql引用<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
var mysql = require(‘mysql’);</p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">skyweaver</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">think you very much</p>
</div>
        </div>

    </li>
    <li style="margin:0px;padding:10px;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">skyweaver</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">thank you very much</p>
</div>
        </div>

    </li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:92px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">mikan</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">想问下lz，mysql的事务怎么控制</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">我还没有考虑过用node控制事务！</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:146px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">zhumingpeng</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">悲剧  什么都安装了。。还是不行。。。搞了好久了。。上图 大神帮我看看</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:110px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:90px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:72px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:72px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">你的执行目录不对吧</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">1. Desktoptoptempnodedata.js 这是执行文件，但你的安装的MySQL库在E:programnodejs下面。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">2. 每个node项目，都需要下载对应的库，如同Java，而不是像Python,PHP统一安装Node软件中。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">3. 你可以在Desktoptoptempnode，目录再重新安装mysql库，应该就可以运行了。</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:92px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Yumiao Yan</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">well,nice</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><img alt="🙂" height="12" src="" style="margin:0px 0.07em;display:inline;box-shadow:none;height:12px;width:12px;border:0px none rgb(0, 0, 0);vertical-align:-0.1em;padding:0px;background:none;background-color:rgba(0, 0, 0, 0);background-image:none;" width="12"></img></p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:182px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">aballam</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:72px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:72px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:54px;">我可以同时创建多个连接吗？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
 var testCon = connectMysql(“test”);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
 var prodCon = connectMysql(“prod”);</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">例如这样我需要同时更新测试服务器和生产环境的数据库，不知道是怎么同时创建多个连接实例的呢</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:92px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:72px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:54px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:54px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">可以创建多个连接，和创建一个是一样的。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">var pool1 = mysql.createPool({});<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
var pool2 = mysql.createPool({});</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:110px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Sylar</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">请问 连接池的自动重连的问题 我们不用关注吗？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
也就是说所有它自己会有重链的机制？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">是的，会自动重连，我们不用管他。</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:724px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Sylar</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">另外 如果我从连接池里面拿的链接 超时了应该怎么处理？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
我看了下 貌似没有可以配置链接池里面链接的超时时间的选项</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:670px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:650px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">怎么会没有配置呢？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
你以“超时”为关键字搜索文章内容，我在文章中已经明确测试了超时的情况。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:596px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:596px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Sylar</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:486px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:486px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:180px;">谢谢您的回答！！<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
是这样的<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
				resourcePool.getConnection(function(err, connection) {<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
		if (err){<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
			if(err.code==’ETIMEDOUT’){<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
				//connection timeout<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
				//if failed will crash<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
				console.log(‘sorry this connection is timeout!’);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
				throw err;<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
			}</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:216px;">		}<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    connection.query(sql, function(err, result) {<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        if (err) throw err;<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        connection.release();<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        resolve(result);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    });<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
});<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
我想在sorry this connection is timeout这里捕获链接超时。 我在pool中设置了<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            waitForConnections : true,<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            connectionLimit : 10,<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            queueLimit : 100,<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            connectTimeout : 1</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:72px;">但是确实能捕获一种超时，但是这种错误会导致程序直接被杀掉<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
我是想问  这种连接池中的链接的超时问题我们怎么捕获和解决呢？<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
我看了下github的issue 有一个https://github.com/felixge/node-mysql/pull/726<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
这个貌似增加了connecTimeout的属性</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">但是我得到的错误是error: uncaughtExceptionError: Can’t set headers after they are sent.</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:92px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:72px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">你可以自己处理 uncaughtException 这个错误，但要用另一处方式。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">参考文章：<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<a href="http://blog.fens.me/nodejs-core-domain/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://blog.fens.me/nodejs-core-domain/</a> ‎</p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
        <p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">Pingback: <a href="http://blog.fens.me/nodejs-roadmap/" rel="external nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Nodejs学习路线图 | 粉丝日志</a>()</p>
    </li>
    
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:146px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">kevinleeleelily</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">您好，请问，我直接从数据库里取出数据用render传值到页面不可以吗？怎么传过去的是都是Object对象呢？不用Ajax的话得怎么做呢？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:92px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:72px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:54px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:54px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:54px;">1. 可以用render直接到页面<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
2. sql取出来的，都是Array类型的 [{},{},{}]<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
3. 和Ajax没啥关系吧。</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:622px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">rookie</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:72px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:72px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:72px;">你好，我用了你的重连方法，后来提示Cannot enqueue Query after fatal error.是出错后不能访问数据库了，可是按道理我重新建立连接了啊，后来我查看日志，db error { [Error: Connection lost: The server closed the connection.] fatal: true, code: ‘PROTOCOL_CONNECTION_LOST’ }<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
Error: Connection lost: The server closed the connection.这是什么情况？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:532px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:90px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">rookie</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">诡异，看样子连接是重新建立了，我随便修改了一行代码，就可以了<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
这是什么诡异问题,跟缓存有关？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">rookie</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">应该是这样的，我开发环境用的supervior，随便改了代码，相当重启了服务器，感觉问题还在。</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:292px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">这个错误看起来是MySQL数据库端的问题，服务器关闭的连接，不是客户端的问题。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:256px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:256px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">rookie</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">我每天晚上走好好的，第二天早上来就连不上了，而且提示PROTOCOL_CONNECTION_LOST，按道理，我有捕获error然后重新建立连接啊，我打算今天用连接池试一试</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:202px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:182px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">连接池可以解决自动重连的问题，自己手动重连，有很多细节要注意。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:146px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:54px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">fei</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">error处理之前,用conn发起了访问,PROTOCOL_ENQUEUE_AFTER_FATAL_ERROR,之后就不再报error了,没机会重连</p>
</div>
        </div>

    </li>
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:72px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:54px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:54px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:18px;">我好像没有遇到过，你说的问题。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:560px;height:36px;">node-mysql对于这个问题，已经Closed了。<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<a href="https://github.com/felixge/node-mysql/issues/900" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">https://github.com/felixge/node-mysql/issues/900</a></p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:110px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">XChen</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">这可能是因为你将mysql 部分封装了，exports了connection，便重新连接之后，connection并没有更新，其实是一个js的理解问题。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">应该是这么回事。</p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:528px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">damon</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:180px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:180px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:126px;">function query(){<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    console.log(new Date());<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    var sql = “show variables like ‘wait_timeout'”;<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    conn.query(sql, function (err, res) {<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        console.log(res);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    });<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:54px;">query();<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
setInterval(query, 15*1000);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
你没有报  Connection already released  的错误吗？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:330px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:310px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">你的代码似乎有点问题，conn变量，如果是全局变量，很有可能会出现你这样的错误。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:274px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:274px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Xiangxuan Qu</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">丹哥您好，复制您的代码之后，我也是这个问题</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:238px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:162px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:108px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:108px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:108px;">多做一步检查<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
var pool = null;<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
if(pool ==null){<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
   pool = mysql.createPool({<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
让mysql.createPool()只执行一次，变成单例的方法。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Xiangxuan Qu</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">多谢丹哥</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">让mysql.createPool()只执行一次，变成单例的方法。</p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:92px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">赵继宗</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">正在使用node-mysql，就看到了博主的文章，赞赞赞赞</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><img alt="🙂" height="12" src="" style="margin:0px 0.07em;display:inline;box-shadow:none;height:12px;width:12px;border:0px none rgb(0, 0, 0);vertical-align:-0.1em;padding:0px;background:none;background-color:rgba(0, 0, 0, 0);background-image:none;" width="12"></img></p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://www.xuanfengge.com/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">ivan</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">mark 好好学习下</p>
</div>
        </div>

    </li>
    <li style="margin:0px;padding:10px;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:146px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">小xixi</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">你好，为什么明明我已经在nodejs目录下，npm install mysql@2.0.0-alpha9，可为什么还是报can not find module mysql的错误呢？？急切希望得到指导和帮助</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:92px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">npm install mysql</p>
</div>
        </div>

    </li>
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">风……清</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:580px;height:18px;">在node-demo下npm install mysql</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:620px;height:92px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">hbedw</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">文章不错哈 攒一个</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:56px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><img alt="🙂" height="12" src="" style="margin:0px 0.07em;display:inline;box-shadow:none;height:12px;width:12px;border:0px none rgb(0, 0, 0);vertical-align:-0.1em;padding:0px;background:none;background-color:rgba(0, 0, 0, 0);background-image:none;" width="12"></img></p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0pt;padding:0pt;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:470px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">xiaolin</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:36px;">楼主，我有个问题想请教你，就是如果我在多个地方加载了这个app-pooling.js文件，那么会不会创建多个连接池出来呢？这个连接池是单例的吗？</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:620px;height:416px;">
    <li style="margin:0px;padding:10px;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:396px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">会创建多个池。</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">所以，pool这个变量最好全局变量，第二次创建是判断变量是否有值，要自己做单例。</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:342px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:342px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">xiaolin</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:324px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:324px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:126px;">感谢楼主~<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
但是现在我的疑惑更多了<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
baseDao.js，代码如下：<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
var pool = mysql.createPool(options);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
module.exports = {<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
获取连接，执行响应查询<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:180px;">template.js，代码如下：<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
var pool = mysql.createPool(options);<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
module.exports = {<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
获取连接，执行响应查询<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
问题一：<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
只创建一次的时候，数据库是不是应该有10个连接呢？我看代码里面默认是10条，我没有做限制。<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
问题二：<br style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
我在一个路由中调用了这两个文件中的方法，但是我看数据库连接也不是更多了，跟创建一次连接池是一样的，这是为什么呢？</p>
<p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">ps：我每次查询后释放了连接</p>
</div>
        </div>

    </li>
</ul>
</li>
</ul>
</li>
    <li style="margin:0px;padding:10px;list-style-type:none;background-color:rgb(255, 255, 255);border:0px none rgb(0, 0, 0);border-left-width:0px;background-image:none;box-shadow:none;width:600px;height:90px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">ll</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">请问,在a.js中module.exports.a = function(){conn.query的操作}, b.js调用a(),如何才能拿到conn.query里面的数据..这个操作是异步的, 怎么写回调呢?</p>
</div>
        </div>

    <ul style="margin:0pt;padding:0px;list-style-type:none;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
    <li style="margin:0pt;padding:0pt;list-style-type:none;border-left-width:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <a href="http://blog.fens.me/" rel="nofollow" style="margin:0pt;padding:0pt;color:rgb(14, 115, 184);outline-style:none;outline-width:medium;text-decoration:none;border:0px none rgb(14, 115, 184);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank">Conan Zhang</a>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">pool，是全局变量</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li style="margin:0px;padding:10px;list-style-type:none;border:0px none rgb(0, 0, 0);border-left-width:0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:54px;">
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:18px;">
            <cite style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
                <span style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Albee_na</span>
            </cite>
        </div>
        <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">
            <div style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;"><p style="margin:0pt;padding:0pt;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:600px;height:36px;">您好，我最近刚学的node.js，然后要用node.js连接MySQL，将数据库中的内容显示出来。我已经安装了node，也安了MySQL，刚刚看了一下您上面的代码，觉得有点困惑，我是要重新安装node和MySQL吗？</p>
</div>
        </div>

    </li>
            </ul>


        </div>

    </div>



            </div>
          </div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 