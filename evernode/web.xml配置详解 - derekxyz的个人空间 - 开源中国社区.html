<html>
<head>
  <title>web.xml配置详解 - derekxyz的个人空间 - 开源中国社区</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="9827"/>
<h1>web.xml配置详解 - derekxyz的个人空间 - 开源中国社区</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2016/4/23 12:29</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://my.oschina.net/u/1383439/blog/224448"><i>http://my.oschina.net/u/1383439/blog/224448</i></a></td></tr>
</table>
</div>
<br/>

<div><span><br/><div style="font-size: 16px"><div><div style="text-align:center;font-size:10pt;background:rgb(249, 249, 249);font-family:'Microsoft YaHei', Verdana, sans-serif, 宋体;"><div style="text-align:left;"><div><div style="word-wrap:break-word;background:rgb(255, 255, 255);"><div>
      <div style="padding:5px 70px 5px 0px;margin:0px 0px 10px;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:rgb(92, 194, 111);position:relative;">
        <h1 style="padding:0px;margin:0px 0px 10px;font-size:22px;color:rgb(0, 0, 0);font-weight:normal;">									<span style="display:inline-block;padding:0px;margin:0px;height:20px;vertical-align:middle;width:20px;font-size:14px;text-align:center;color:rgb(255, 255, 255);font-weight:bold;background:#799acc;" title="转帖博客">转</span>						web.xml配置详解</h1>
        <div style="padding:0px;margin:0px;font-size:12px;line-height:20px;color:rgb(102, 102, 102);">
    		    		发表于2年前(2014-04-21 11:08)  
    		阅读（<span style="padding:0px;margin:0px;color:rgb(64, 170, 83);">5875</span>） | 评论（<a href="http://my.oschina.net/u/1383439/blog/224448#comments" style="padding:0px;margin:0px;outline:0px;color:rgb(170, 0, 0);text-decoration:none;"><span style="padding:0px;margin:0px;color:rgb(64, 170, 83);">0</span></a>）
    					    	    <span style="padding:0px;margin:0px;">
				

<em style="padding:0px;margin:0px 2px;font-style:normal;font-weight:bold;color:rgb(170, 0, 0);">28</em>人收藏此文章,
<span style="padding:0px;margin:0px;">
	<a href="#" style="padding:0px;margin:0px;outline:0px;color:rgb(170, 0, 0);text-decoration:none;" title="添加到收藏夹">我要收藏</a>
</span>
			</span>
			    	</div>
		<div style="padding:0px;margin:0px;height:55px;width:50px;display:inline-block;position:absolute;right:0px;bottom:5px;" title="都有1个人赞过了，你也来赞一下吧！不会扣积分哦！"><em style="color:rgb(255, 255, 255);padding:0px;margin:0px;width:50px;text-align:center;font-style:normal;display:inline-block;cursor:pointer;background:rgb(92, 194, 111);height:35px;line-height:35px;font-size:20px;">赞</em><em style="color:rgb(255, 255, 255);padding:0px;margin:0px;width:50px;text-align:center;font-style:normal;display:inline-block;cursor:pointer;background:rgb(92, 194, 111);height:20px;line-height:20px;font-size:12px;">1</em></div>
      </div>
	  	  <p style="padding:0px;margin:0 0 10px 0;"><a href="http://city.oschina.net/wuhan/event/2160100" style="padding:0px;margin:0px;color:#A00;outline:0px;font-weight:bold;" target="_blank">4月23日，武汉源创会火热报名中，期待您的参与&gt;&gt;&gt;&gt;&gt; </a>  <img src="web.xml配置详解 - derekxyz的个人空间 - 开源中国社区_files/Image.png" type="image/png" data-filename="Image.png" align="absmiddle" height="32" style="padding:0px;margin:0px;border:0px;" width="32"/></p>
	  
	  	  <a name="ueditor" style="padding:0px;margin:0px;color:rgb(68, 102, 187);outline:0px;"></a>
	            <div style="margin:0px;padding:10px;font-size:12px;background:rgb(244, 247, 249);line-height:180%;">
						<em style="margin:0px;padding:1px 8px;font-size:13px;font-weight:normal;color:rgb(255, 255, 255);display:inline-block;line-height:20px;font-style:normal;margin-right:10px;background:rgb(92, 194, 111);">摘要</em>
            <span style="padding:0px;margin:0px;font-size:12.5px;letter-spacing:0.7px;">看到的很详细的解释，转</span>
								  </div><br style="padding:0px;margin:0px;"/>
	          	  	  	  	          <div style="margin:0px;padding:10px;font-size:12.5px;overflow:hidden;color:rgb(51, 51, 51);line-height:180%;"><p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">1、启动一个WEB项目的时候，WEB容器会去读取它的配置文件web.xml，读取&lt;listener&gt;和&lt;context-param&gt;两个结点。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">2、紧急着，容创建一个ServletContext（servlet上下文），这个web项目的所有部分都将共享这个上下文。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">3、容器将&lt;context-param&gt;转换为键值对，并交给servletContext。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">4、容器创建&lt;listener&gt;中的类实例，创建监听器。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><strong style="padding:0px;margin:0px;">二  Load-on-startup</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">Load-on-startup 元素在web应用启动的时候指定了servlet被加载的顺序，它的值必须是一个整数。如果它的值是一个负整数或是这个元素不存在，那么容器会在该servlet被调用的时候，加载这个servlet 。如果值是正整数或零，容器在配置的时候就加载并初始化这个servlet，容器必须保证值小的先被加载。如果值相等，容器可以自动选择先加载谁。  </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">在servlet的配置当中，&lt;load-on-startup&gt;5&lt;/load-on-startup&gt;的含义是： </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">标记容器是否在启动的时候就加载这个servlet。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">当值为0或者大于0时，表示容器在应用启动时就加载这个servlet； </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">当是一个负数时或者没有指定时，则指示容器在该servlet被选择时才加载。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">正数的值越小，启动该servlet的优先级越高。 </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><strong style="padding:0px;margin:0px;">三  加载顺序</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">首先可以肯定的是，加载顺序与它们在 web.xml 文件中的先后顺序无关。即不会因为 filter 写在 listener 的前面而会先加载 filter。最终得出的结论是：ServletContext -&gt; listener -&gt; filter -&gt; servlet</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">        同时还存在着这样一种配置节：context-param，它用于向 ServletContext 提供键值对，即应用程序上下文信息。我们的 listener, filter 等在初始化时会用到这些上下文中的信息，那么 context-param 配置节是不是应该写在 listener 配置节前呢？实际上 context-param 配置节可写在任意位置，因此真正的加载顺序为：context-param -&gt; listener -&gt; filter -&gt; servlet</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">        对于某类配置节而言，与它们出现的顺序是有关的。以 filter 为例，web.xml 中当然可以定义多个 filter，与 filter 相关的一个配置节是 filter-mapping，这里一定要注意，对于拥有相同 filter-name 的 filter 和 filter-mapping 配置节而言，filter-mapping 必须出现在 filter 之后，否则当解析到 filter-mapping 时，它所对应的 filter-name 还未定义。web 容器启动时初始化每个 filter 时，是按照 filter 配置节出现的顺序来初始化的，当请求资源匹配多个 filter-mapping 时，filter 拦截资源是按照 filter-mapping 配置节出现的顺序来依次调用 doFilter() 方法的。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">        servlet 同 filter 类似，此处不再赘述。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">       由此，可以看出，web.xml 的加载顺序是：ServletContext -&gt; context-param -&gt; listener -&gt; filter -&gt; servlet ，而同个类型之间的实际程序调用的时候的顺序是根据对应的 mapping 的顺序进行调用的。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"> </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><strong style="padding:0px;margin:0px;">四  web.xml文件详解 </strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"> </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">我将自己知道的web.xml的元素整理了一下：</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">web.xml首先是肯定要包含它的schema.</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">&lt;web-app xmlns=&quot;<a href="http://java.sun.com/xml/ns/j2ee" rel="nofollow" style="padding:0px;margin:0px;outline:0px;color:rgb(255, 131, 115);font-size:12px;">http://java.sun.com/xml/ns/j2ee</a>&quot;<br style="padding:0px;margin:0px;"/>    xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" style="padding:0px;margin:0px;outline:0px;color:rgb(255, 131, 115);font-size:12px;">http://www.w3.org/2001/XMLSchema-instance</a>&quot;<br style="padding:0px;margin:0px;"/>    xsi:schemaLocation=&quot;<a href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" rel="nofollow" style="padding:0px;margin:0px;outline:0px;color:rgb(255, 131, 115);font-size:12px;">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</a>&quot;<br style="padding:0px;margin:0px;"/>    version=&quot;2.4&quot;&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">&lt;/web-app&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">其它的元素都放在&lt;web-app&gt;&lt;/web-app&gt;之中。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">&lt;discription&gt;&lt;/discription&gt; 是对站台的描述<br style="padding:0px;margin:0px;"/>&lt;display-name&gt;&lt;/display-name&gt; 定义站台的名称<br style="padding:0px;margin:0px;"/>&lt;distributable/&gt; 是指定该站台是否可分布式处理</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/><strong style="padding:0px;margin:0px;">&lt;context-param&gt;&lt;/context-param&gt; 用来设定web站台的环境参数，它包含两个子元素：<br style="padding:0px;margin:0px;"/>    &lt;param-name&gt;&lt;/param-name&gt; 用来指定参数的名称<br style="padding:0px;margin:0px;"/>    &lt;param-value&gt;&lt;/param-value&gt; 用来设定参数值</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;context-param&gt;<br style="padding:0px;margin:0px;"/>    &lt;param-name&gt;my_param&lt;/param-name&gt;<br style="padding:0px;margin:0px;"/>    &lt;param-value&gt;hello&lt;/param-value&gt;<br style="padding:0px;margin:0px;"/>&lt;/context-param&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><strong style="padding:0px;margin:0px;">在此设定的参数，可以在servlet中用 getServletContext().getInitParameter(&quot;my_param&quot;) 来取得</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/><strong style="padding:0px;margin:0px;">&lt;filter&gt;&lt;/filter&gt; 是用来声明filter的相关设定，它包含以下子元素：<br style="padding:0px;margin:0px;"/>    &lt;filter-name&gt;&lt;/filter-name&gt; 这当然就是指定filter的名字<br style="padding:0px;margin:0px;"/>    &lt;filter-class&gt;&lt;/filter-class&gt; 这是用来定义filter的类的名称<br style="padding:0px;margin:0px;"/>    &lt;init-param&gt;&lt;/init-param&gt; 用来定义参数，它有两个子元素：<br style="padding:0px;margin:0px;"/>        &lt;param-name&gt;&lt;/param-name&gt; 用来指定参数的名称<br style="padding:0px;margin:0px;"/>        &lt;param-value&gt;&lt;/param-value&gt; 用来设定参数值</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;filter&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;setCharacterEncoding&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-class&gt;com.myTest.setCharacterEncodingFilter&lt;/filter-class&gt;<br style="padding:0px;margin:0px;"/>        &lt;init-param&gt;<br style="padding:0px;margin:0px;"/>            &lt;param-name&gt;encoding&lt;/param-name&gt;<br style="padding:0px;margin:0px;"/>            &lt;param-value&gt;GB2312&lt;/param-value&gt;<br style="padding:0px;margin:0px;"/>        &lt;/init-param&gt;<br style="padding:0px;margin:0px;"/>&lt;/filter&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><strong style="padding:0px;margin:0px;">与&lt;filter&gt;&lt;/filter&gt;同时使用的是&lt;filter-mapping&gt;&lt;/filter-mapping&gt; 用来定义filter所对应的URL，它有两个子元素：<br style="padding:0px;margin:0px;"/>    &lt;filter-name&gt;&lt;/filter-name&gt; 指定filter的名字<br style="padding:0px;margin:0px;"/>    &lt;url-pattern&gt;&lt;/url-pattern&gt; 指定filter所对应的URL</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;setCharacterEncoding&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>&lt;/filter-mapping&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/><strong style="padding:0px;margin:0px;">&lt;listener&gt;&lt;/listener&gt; 用来设定Listener接口，它的主要子元素为<br style="padding:0px;margin:0px;"/>    &lt;listener-class&gt;&lt;/listener-class&gt; 定义Listener的类名称</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><strong style="padding:0px;margin:0px;">比如：<br style="padding:0px;margin:0px;"/>&lt;listener&gt;<br style="padding:0px;margin:0px;"/>    &lt;listener-class&gt;com.myTest.ContextListener&lt;/listener-class&gt; <br style="padding:0px;margin:0px;"/>&lt;/listener&gt;</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/><strong style="padding:0px;margin:0px;">&lt;servlet&gt;&lt;/servlet&gt; 用来声明一个servlet的数据，主要有以下子元素：<br style="padding:0px;margin:0px;"/>    &lt;servlet-name&gt;&lt;/servlet-name&gt; 指定servlet的名称<br style="padding:0px;margin:0px;"/>    &lt;servlet-class&gt;&lt;/servlet-class&gt; 指定servlet的类名称</strong><br style="padding:0px;margin:0px;"/>    &lt;jsp-file&gt;&lt;/jsp-file&gt; 指定web站台中的某个JSP网页的完整路径<br style="padding:0px;margin:0px;"/>    &lt;init-param&gt;&lt;/init-param&gt; 用来定义参数，和前面的&lt;init-param&gt;差不多</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">同样，<strong style="padding:0px;margin:0px;">与&lt;servlet&gt;&lt;/servlet&gt;一起使用的是&lt;servlet-mapping&gt;&lt;/servlet-mapping&gt; 用来定义servlet所对应的URL，包含两个子元素：<br style="padding:0px;margin:0px;"/>    &lt;servlet-name&gt;&lt;/servlet-name&gt; 指定servlet的名称<br style="padding:0px;margin:0px;"/>    &lt;url-pattern&gt;&lt;/url-pattern&gt; 指定servlet所对应的URL</strong></p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;servlet&gt;<br style="padding:0px;margin:0px;"/>        &lt;servlet-name&gt;ShoppingServlet&lt;/servlet-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;servlet-class&gt;com.myTest.ShoppingServlet&lt;/servlet-class&gt;<br style="padding:0px;margin:0px;"/>&lt;/servlet&gt;<br style="padding:0px;margin:0px;"/>    <br style="padding:0px;margin:0px;"/>&lt;servlet-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;servlet-name&gt;ShoppingServlet&lt;/servlet-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;/shop/ShoppingServlet&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>&lt;/servlet-mapping&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;session-config&gt;&lt;/session-config&gt; 用来定义web站台中的session参数，包含一个子元素：<br style="padding:0px;margin:0px;"/>    &lt;session-timeout&gt;&lt;/session-timeout&gt; 用来定义这个web站台所有session的有效期限，单位为                                                              分钟</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;mime-mapping&gt;&lt;/mime-mapping&gt; 定义某一个扩展名和某一个MIME Type做对映，包含两个                                                        子元素：<br style="padding:0px;margin:0px;"/>    &lt;extension&gt;&lt;/extension&gt; 扩展名的名称<br style="padding:0px;margin:0px;"/>    &lt;mime-type&gt;&lt;/mime-type&gt; MIME格式</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;mime-mapping&gt;<br style="padding:0px;margin:0px;"/>    &lt;extension&gt;doc&lt;/extension&gt;<br style="padding:0px;margin:0px;"/>    &lt;mime-type&gt;application/vnd.ms-word&lt;/mime-type&gt;<br style="padding:0px;margin:0px;"/>&lt;/mime-mapping&gt; <br style="padding:0px;margin:0px;"/>&lt;mime-mapping&gt;<br style="padding:0px;margin:0px;"/>    &lt;extension&gt;xls&lt;/extension&gt;<br style="padding:0px;margin:0px;"/>    &lt;mime-type&gt;application/vnd.ms-excel&lt;/mime-type&gt;<br style="padding:0px;margin:0px;"/>&lt;/mime-mapping&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;welcome-file-list&gt;&lt;/welcom-file-list&gt; 用来定义首页的列单，包含一个子元素：<br style="padding:0px;margin:0px;"/>    &lt;welcome-file&gt;&lt;/welcome-file&gt; 指定首页的文件名称</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;welcome-file-list&gt;<br style="padding:0px;margin:0px;"/>    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br style="padding:0px;margin:0px;"/>    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;<br style="padding:0px;margin:0px;"/>&lt;/welcom-file-list&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;error-page&gt;&lt;/error-page&gt; 用来处理错误代码或异常的页面，有三个子元素：<br style="padding:0px;margin:0px;"/>    &lt;error-code&gt;&lt;/error-code&gt; 指定错误代码<br style="padding:0px;margin:0px;"/>    &lt;exception-type&gt;&lt;/exception-type&gt; 指定一个JAVA异常类型<br style="padding:0px;margin:0px;"/>    &lt;location&gt;&lt;/location&gt; 指定在web站台内的相关资源路径</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;error-page&gt;<br style="padding:0px;margin:0px;"/>    &lt;error-code&gt;404&lt;/error-code&gt;<br style="padding:0px;margin:0px;"/>    &lt;location&gt;/error404.jsp&lt;/location&gt;<br style="padding:0px;margin:0px;"/>&lt;/error-page&gt;<br style="padding:0px;margin:0px;"/>&lt;error-page&gt;<br style="padding:0px;margin:0px;"/>    &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;<br style="padding:0px;margin:0px;"/>    &lt;location&gt;/exception.jsp&lt;/location&gt;<br style="padding:0px;margin:0px;"/>&lt;/error-page&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;taglib&gt;&lt;/taglib&gt; 用来设定JSP网页所用到的Tag Library路径，有两个子元素：<br style="padding:0px;margin:0px;"/>    &lt;taglib-uri&gt;&lt;/taglib-uri&gt; 定义TLD文件的URI，在JSP网页中用taglib指令便可取得该URI的                                              TLD文件<br style="padding:0px;margin:0px;"/>    &lt;taglib-location&gt;&lt;/taglib-location&gt; 指定TLD文件相对于web站台的存放位置</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如：<br style="padding:0px;margin:0px;"/>&lt;taglib&gt;<br style="padding:0px;margin:0px;"/>      &lt;taglib-uri&gt;myTaglib&lt;/taglib-uri&gt;<br style="padding:0px;margin:0px;"/>      &lt;taglib-location&gt;/WEB-INF/tlds/MyTaglib.tld&lt;/taglib-location&gt;<br style="padding:0px;margin:0px;"/>&lt;/taglib&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;resource-ref&gt;&lt;/resource-ref&gt; 定义利用JNDI取得站台可利用的资源，有五个子元素：<br style="padding:0px;margin:0px;"/>    &lt;description&gt;&lt;/description&gt; 资源说明<br style="padding:0px;margin:0px;"/>    &lt;rec-ref-name&gt;&lt;/rec-ref-name&gt; 资源名称<br style="padding:0px;margin:0px;"/>    &lt;res-type&gt;&lt;/res-type&gt; 资源种类<br style="padding:0px;margin:0px;"/>    &lt;res-auth&gt;&lt;/res-auth&gt; 资源经由Application或Container来许可<br style="padding:0px;margin:0px;"/>    &lt;res-sharing-scope&gt;&lt;/res-sharing-scope&gt; 资源是否可以共享，有Shareable和Unshareable两个                                                                     值，默认为Shareable</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">比如，配置数据库连接池就可在此配置：<br style="padding:0px;margin:0px;"/>&lt;resource-ref&gt;<br style="padding:0px;margin:0px;"/>        &lt;description&gt;JNDI JDBC DataSource of shop&lt;/description&gt;<br style="padding:0px;margin:0px;"/>        &lt;res-ref-name&gt;jdbc/sample_db&lt;/res-ref-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;<br style="padding:0px;margin:0px;"/>        &lt;res-auth&gt;Container&lt;/res-auth&gt;<br style="padding:0px;margin:0px;"/>&lt;/resource-ref&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>&lt;jsp-config&gt; 包括&lt;taglib&gt; 和&lt;jsp-property-group&gt; 两个子元素。<br style="padding:0px;margin:0px;"/>    <br style="padding:0px;margin:0px;"/>    其中&lt;taglib&gt;元素在JSP 1.2时就已经存在；而&lt;jsp-property-group&gt;是JSP 2.0 新增的元素。<br style="padding:0px;margin:0px;"/>    &lt;jsp-property-group&gt;元素主要有八个子元素，它们分别为：<br style="padding:0px;margin:0px;"/>    <br style="padding:0px;margin:0px;"/>    1.&lt;description&gt;：设定的说明；<br style="padding:0px;margin:0px;"/>    2.&lt;display-name&gt;：设定名称；<br style="padding:0px;margin:0px;"/>    3.&lt;url-pattern&gt;：设定值所影响的范围，如：/CH2 或 /*.jsp；<br style="padding:0px;margin:0px;"/>    4.&lt;el-ignored&gt;：若为true，表示不支持EL 语法；<br style="padding:0px;margin:0px;"/>    5.&lt;scripting-invalid&gt;：若为true，表示不支持&lt;% scripting %&gt;语法；<br style="padding:0px;margin:0px;"/>    6.&lt;page-encoding&gt;：设定JSP 网页的编码；<br style="padding:0px;margin:0px;"/>    7.&lt;include-prelude&gt;：设置JSP 网页的抬头，扩展名为.jspf；<br style="padding:0px;margin:0px;"/>    8.&lt;include-coda&gt;：设置JSP 网页的结尾，扩展名为.jspf。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>一个简单的&lt;jsp-config&gt;元素完整配置：</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">&lt;jsp-config&gt;<br style="padding:0px;margin:0px;"/>    &lt;taglib&gt;<br style="padding:0px;margin:0px;"/>        &lt;taglib-uri&gt;Taglib&lt;/taglib-uri&gt;<br style="padding:0px;margin:0px;"/>        &lt;taglib-location&gt;/WEB-INF/tlds/MyTaglib.tld&lt;/taglib-location&gt;<br style="padding:0px;margin:0px;"/>    &lt;/taglib&gt;<br style="padding:0px;margin:0px;"/>    &lt;jsp-property-group&gt;<br style="padding:0px;margin:0px;"/>        &lt;description&gt;Special property group for JSP Configuration JSP example.&lt;/description&gt;<br style="padding:0px;margin:0px;"/>        &lt;display-name&gt;JSPConfiguration&lt;/display-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;/jsp/* &lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>        &lt;el-ignored&gt;true&lt;/el-ignored&gt;<br style="padding:0px;margin:0px;"/>        &lt;page-encoding&gt;GB2312&lt;/page-encoding&gt;<br style="padding:0px;margin:0px;"/>        &lt;scripting-invalid&gt;true&lt;/scripting-invalid&gt;<br style="padding:0px;margin:0px;"/>        &lt;include-prelude&gt;/include/prelude.jspf&lt;/include-prelude&gt;<br style="padding:0px;margin:0px;"/>        &lt;include-coda&gt;/include/coda.jspf&lt;/include-coda&gt;<br style="padding:0px;margin:0px;"/>    &lt;/jsp-property-group&gt;<br style="padding:0px;margin:0px;"/>&lt;/jsp-config&gt;  </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>配置web.xml来限制对某些servlet的请求</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">有时我们只希望通过认证的用户才能请求某些servlet的话，就可以在web.xml中来进行相应的配置，来达到此目的。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">这就要用到&lt;security-constraint&gt;&lt;/security-constraint&gt;元素。<br style="padding:0px;margin:0px;"/>对于tomcat，中web.xml使用security-constraint元素需要在位于&lt;Tomcat-installation-directory&gt;/conf/tomcat-users.xml的XML文件中创建用户名和密码。比如下面的这个tomcat-users.xml文件：</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">&lt;?xml version='1.0' encoding='utf-8'?&gt;<br style="padding:0px;margin:0px;"/>&lt;tomcat-users&gt;<br style="padding:0px;margin:0px;"/>  &lt;role rolename=&quot;tomcat&quot;/&gt;<br style="padding:0px;margin:0px;"/>  &lt;role rolename=&quot;manager&quot;/&gt;<br style="padding:0px;margin:0px;"/>  &lt;role rolename=&quot;admin&quot;/&gt;<br style="padding:0px;margin:0px;"/>  &lt;user username=&quot;tomcat&quot; password=&quot;tomcat&quot; roles=&quot;tomcat&quot;/&gt;<br style="padding:0px;margin:0px;"/>  &lt;user username=&quot;both&quot; password=&quot;tomcat&quot; roles=&quot;tomcat,manager&quot;/&gt;<br style="padding:0px;margin:0px;"/>  &lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;admin&quot;/&gt;<br style="padding:0px;margin:0px;"/>&lt;/tomcat-users&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">此XML片段包括一个tomcat-users根元素，它包含一个或多个role和user元素。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/>然后在Web应用程序的web.xml中创建security-constraint、login-config和security-role元素。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">&lt;security-constraint&gt;<br style="padding:0px;margin:0px;"/>      &lt;web-resource-collection&gt;<br style="padding:0px;margin:0px;"/>          &lt;web-resource-name&gt;HelloServlet&lt;/web-resource-name&gt;<br style="padding:0px;margin:0px;"/>          &lt;url-pattern&gt;/HelloServlet&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>          &lt;http-method&gt;GET&lt;/http-method&gt;<br style="padding:0px;margin:0px;"/>          &lt;http-method&gt;POST&lt;/http-method&gt;<br style="padding:0px;margin:0px;"/>      &lt;/web-resource-collection&gt;<br style="padding:0px;margin:0px;"/>      &lt;auth-constraint&gt;<br style="padding:0px;margin:0px;"/>          &lt;description&gt;This applies only to the &quot;tomcat&quot; security role&lt;/description&gt;<br style="padding:0px;margin:0px;"/>          &lt;role-name&gt;admin&lt;/role-name&gt;<br style="padding:0px;margin:0px;"/>      &lt;/auth-constraint&gt;<br style="padding:0px;margin:0px;"/>      &lt;user-data-constraint&gt;<br style="padding:0px;margin:0px;"/>          &lt;transport-guarantee&gt;NONE&lt;/transport-guarantee&gt;<br style="padding:0px;margin:0px;"/>      &lt;/user-data-constraint&gt;<br style="padding:0px;margin:0px;"/>  &lt;/security-constraint&gt;<br style="padding:0px;margin:0px;"/>  <br style="padding:0px;margin:0px;"/>  &lt;login-config&gt;<br style="padding:0px;margin:0px;"/>      &lt;auth-method&gt;BASIC&lt;/auth-method&gt;<br style="padding:0px;margin:0px;"/>  &lt;/login-config&gt;<br style="padding:0px;margin:0px;"/>  &lt;security-role&gt;<br style="padding:0px;margin:0px;"/>      &lt;role-name&gt;admin&lt;/role-name&gt;<br style="padding:0px;margin:0px;"/>  &lt;/security-role&gt;</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">其中security-constraint元素包含一个或多个web-resource-collection元素，它是描述Web应用程序中的哪些web资源受到指定安全限制的保护。http-method元素指定安全限制覆盖的HTTP方法。上面的例子中，当我们对/HelloServlet的GET或POST请求时将触发配置的安全机制。<br style="padding:0px;margin:0px;"/>auth-constraint元素用于描述允许访问Web组件的安全角色。此例中安全角色的例子有tomcat、manager、admin。而只有当作为admin角色的用户才可以访问HelloServlet。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">Web应用程序通过login-config元素来认证用户，并确认该用户是否为正确的角色。<br style="padding:0px;margin:0px;"/>longin-config包含的transport-guarantee子元素用来指定认证方法，BASIC是一种常见的Web认证方式，浏览器给用户提示一个对话框，要求输入用户名和密码，随后Tomcat将给出的用户名和密码与tomcat-users.xml中的用户名和密码进行比较，然后使用前面的security-constraint配置来确定用户是否可访问受保护的servlet。</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">（除BASIC外，还可以是FORM、CLIENT-CERT、DIGEST等）</p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">其实这种认证方法实际上有两个步骤：<br style="padding:0px;margin:0px;"/>1、检查提供的用户名和密码是否正确。<br style="padding:0px;margin:0px;"/>2、判断用户是否映射到特定的安全角色。例如，用户可能提供了正确的用户名和密码，但没有映射到特定的安全角色，也将被禁止访问特定的Web资源。</p> 
<p style="padding:0px;margin:8px 0px;line-height:180%;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/><strong style="padding:0px;margin:0px;">五 相应元素配置    </strong><br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>1、Web应用图标：指出IDE和GUI工具用来表示Web应用的大图标和小图标    <br style="padding:0px;margin:0px;"/>&lt;icon&gt;    <br style="padding:0px;margin:0px;"/>&lt;small-icon&gt;/images/app_small.gif&lt;/small-icon&gt;    <br style="padding:0px;margin:0px;"/>&lt;large-icon&gt;/images/app_large.gif&lt;/large-icon&gt;    <br style="padding:0px;margin:0px;"/>&lt;/icon&gt;    <br style="padding:0px;margin:0px;"/>2、Web 应用名称：提供GUI工具可能会用来标记这个特定的Web应用的一个名称    <br style="padding:0px;margin:0px;"/>&lt;display-name&gt;Tomcat Example&lt;/display-name&gt;    <br style="padding:0px;margin:0px;"/>3、Web 应用描述： 给出于此相关的说明性文本    <br style="padding:0px;margin:0px;"/>&lt;disciption&gt;Tomcat Example servlets and JSP pages.&lt;/disciption&gt;    <br style="padding:0px;margin:0px;"/>4、上下文参数：声明应用范围内的初始化参数。    <br style="padding:0px;margin:0px;"/>&lt;context-param&gt;    <br style="padding:0px;margin:0px;"/>    &lt;param-name&gt;ContextParameter&lt;/para-name&gt;    <br style="padding:0px;margin:0px;"/>    &lt;param-value&gt;test&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>    &lt;description&gt;It is a test parameter.&lt;/description&gt;    <br style="padding:0px;margin:0px;"/>&lt;/context-param&gt;    <br style="padding:0px;margin:0px;"/>在servlet里面可以通过getServletContext().getInitParameter(&quot;context/param&quot;)得到    <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>5、过滤器配置：将一个名字与一个实现javaxs.servlet.Filter接口的类相关联。    <br style="padding:0px;margin:0px;"/>&lt;filter&gt;    <br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;setCharacterEncoding&lt;/filter-name&gt;    <br style="padding:0px;margin:0px;"/>        &lt;filter-class&gt;com.myTest.setCharacterEncodingFilter&lt;/filter-class&gt;    <br style="padding:0px;margin:0px;"/>        &lt;init-param&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-name&gt;encoding&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-value&gt;GB2312&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>        &lt;/init-param&gt;    <br style="padding:0px;margin:0px;"/>&lt;/filter&gt;    <br style="padding:0px;margin:0px;"/>&lt;filter-mapping&gt;    <br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;setCharacterEncoding&lt;/filter-name&gt;    <br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    <br style="padding:0px;margin:0px;"/>&lt;/filter-mapping&gt;    <br style="padding:0px;margin:0px;"/>6、监听器配置    <br style="padding:0px;margin:0px;"/>&lt;listener&gt;    <br style="padding:0px;margin:0px;"/>      &lt;listerner-class&gt;listener.SessionListener&lt;/listener-class&gt;    <br style="padding:0px;margin:0px;"/>&lt;/listener&gt;    <br style="padding:0px;margin:0px;"/>7、Servlet配置    <br style="padding:0px;margin:0px;"/>   基本配置    <br style="padding:0px;margin:0px;"/>   &lt;servlet&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-name&gt;snoop&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-class&gt;SnoopServlet&lt;/servlet-class&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/servlet&gt;    <br style="padding:0px;margin:0px;"/>   &lt;servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-name&gt;snoop&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;url-pattern&gt;/snoop&lt;/url-pattern&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>   高级配置    <br style="padding:0px;margin:0px;"/>   &lt;servlet&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-name&gt;snoop&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-class&gt;SnoopServlet&lt;/servlet-class&gt;    <br style="padding:0px;margin:0px;"/>      &lt;init-param&gt;    <br style="padding:0px;margin:0px;"/>         &lt;param-name&gt;foo&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>         &lt;param-value&gt;bar&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>      &lt;/init-param&gt;    <br style="padding:0px;margin:0px;"/>      &lt;run-as&gt;    <br style="padding:0px;margin:0px;"/>         &lt;description&gt;Security role for anonymous access&lt;/description&gt;    <br style="padding:0px;margin:0px;"/>         &lt;role-name&gt;tomcat&lt;/role-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;/run-as&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/servlet&gt;    <br style="padding:0px;margin:0px;"/>   &lt;servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-name&gt;snoop&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;url-pattern&gt;/snoop&lt;/url-pattern&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>   元素说明    <br style="padding:0px;margin:0px;"/>     &lt;servlet&gt;&lt;/servlet&gt; 用来声明一个servlet的数据，主要有以下子元素：    <br style="padding:0px;margin:0px;"/>     &lt;servlet-name&gt;&lt;/servlet-name&gt; 指定servlet的名称    <br style="padding:0px;margin:0px;"/>     &lt;servlet-class&gt;&lt;/servlet-class&gt; 指定servlet的类名称    <br style="padding:0px;margin:0px;"/>     &lt;jsp-file&gt;&lt;/jsp-file&gt; 指定web站台中的某个JSP网页的完整路径    <br style="padding:0px;margin:0px;"/>     &lt;init-param&gt;&lt;/init-param&gt; 用来定义参数，可有多个init-param。在servlet类中通过getInitParamenter(String name)方法访问初始化参数    <br style="padding:0px;margin:0px;"/>     &lt;load-on-startup&gt;&lt;/load-on-startup&gt;指定当Web应用启动时，装载Servlet的次序。    <br style="padding:0px;margin:0px;"/>                                 当值为正数或零时：Servlet容器先加载数值小的servlet，再依次加载其他数值大的servlet.    <br style="padding:0px;margin:0px;"/>                                 当值为负或未定义：Servlet容器将在Web客户首次访问这个servlet时加载它    <br style="padding:0px;margin:0px;"/>     &lt;servlet-mapping&gt;&lt;/servlet-mapping&gt; 用来定义servlet所对应的URL，包含两个子元素    <br style="padding:0px;margin:0px;"/>       &lt;servlet-name&gt;&lt;/servlet-name&gt; 指定servlet的名称    <br style="padding:0px;margin:0px;"/>       &lt;url-pattern&gt;&lt;/url-pattern&gt; 指定servlet所对应的URL    <br style="padding:0px;margin:0px;"/>8、会话超时配置（单位为分钟）    <br style="padding:0px;margin:0px;"/>   &lt;session-config&gt;    <br style="padding:0px;margin:0px;"/>      &lt;session-timeout&gt;120&lt;/session-timeout&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/session-config&gt;    <br style="padding:0px;margin:0px;"/>9、MIME类型配置    <br style="padding:0px;margin:0px;"/>   &lt;mime-mapping&gt;    <br style="padding:0px;margin:0px;"/>      &lt;extension&gt;htm&lt;/extension&gt;    <br style="padding:0px;margin:0px;"/>      &lt;mime-type&gt;text/html&lt;/mime-type&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/mime-mapping&gt;    <br style="padding:0px;margin:0px;"/>10、指定欢迎文件页配置    <br style="padding:0px;margin:0px;"/>   &lt;welcome-file-list&gt;    <br style="padding:0px;margin:0px;"/>      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;    <br style="padding:0px;margin:0px;"/>      &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;    <br style="padding:0px;margin:0px;"/>      &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/welcome-file-list&gt;    <br style="padding:0px;margin:0px;"/>11、配置错误页面    <br style="padding:0px;margin:0px;"/>一、 通过错误码来配置error-page    <br style="padding:0px;margin:0px;"/>   &lt;error-page&gt;    <br style="padding:0px;margin:0px;"/>      &lt;error-code&gt;404&lt;/error-code&gt;    <br style="padding:0px;margin:0px;"/>      &lt;location&gt;/NotFound.jsp&lt;/location&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/error-page&gt;    <br style="padding:0px;margin:0px;"/>上面配置了当系统发生404错误时，跳转到错误处理页面NotFound.jsp。    <br style="padding:0px;margin:0px;"/>二、通过异常的类型配置error-page    <br style="padding:0px;margin:0px;"/>   &lt;error-page&gt;    <br style="padding:0px;margin:0px;"/>       &lt;exception-type&gt;java.lang.NullException&lt;/exception-type&gt;    <br style="padding:0px;margin:0px;"/>       &lt;location&gt;/error.jsp&lt;/location&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/error-page&gt;    <br style="padding:0px;margin:0px;"/>上面配置了当系统发生java.lang.NullException（即空指针异常）时，跳转到错误处理页面error.jsp    <br style="padding:0px;margin:0px;"/>12、TLD配置    <br style="padding:0px;margin:0px;"/>   &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>       &lt;taglib-uri&gt;http://jakarta.apache.org/tomcat/debug-taglib&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>       &lt;taglib-location&gt;/WEB-INF/jsp/debug-taglib.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>   如果MyEclipse一直在报错,应该把&lt;taglib&gt; 放到 &lt;jsp-config&gt;中    <br style="padding:0px;margin:0px;"/>   &lt;jsp-config&gt;    <br style="padding:0px;margin:0px;"/>      &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>          &lt;taglib-uri&gt;http://jakarta.apache.org/tomcat/debug-taglib&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>          &lt;taglib-location&gt;/WEB-INF/pager-taglib.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>      &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/jsp-config&gt;    <br style="padding:0px;margin:0px;"/>13、资源管理对象配置    <br style="padding:0px;margin:0px;"/>   &lt;resource-env-ref&gt;    <br style="padding:0px;margin:0px;"/>       &lt;resource-env-ref-name&gt;jms/StockQueue&lt;/resource-env-ref-name&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/resource-env-ref&gt;    <br style="padding:0px;margin:0px;"/>14、资源工厂配置    <br style="padding:0px;margin:0px;"/>   &lt;resource-ref&gt;    <br style="padding:0px;margin:0px;"/>       &lt;res-ref-name&gt;mail/Session&lt;/res-ref-name&gt;    <br style="padding:0px;margin:0px;"/>       &lt;res-type&gt;javax.mail.Session&lt;/res-type&gt;    <br style="padding:0px;margin:0px;"/>       &lt;res-auth&gt;Container&lt;/res-auth&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/resource-ref&gt;    <br style="padding:0px;margin:0px;"/>   配置数据库连接池就可在此配置：    <br style="padding:0px;margin:0px;"/>   &lt;resource-ref&gt;    <br style="padding:0px;margin:0px;"/>       &lt;description&gt;JNDI JDBC DataSource of shop&lt;/description&gt;    <br style="padding:0px;margin:0px;"/>       &lt;res-ref-name&gt;jdbc/sample_db&lt;/res-ref-name&gt;    <br style="padding:0px;margin:0px;"/>       &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;    <br style="padding:0px;margin:0px;"/>       &lt;res-auth&gt;Container&lt;/res-auth&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/resource-ref&gt;    <br style="padding:0px;margin:0px;"/>15、安全限制配置    <br style="padding:0px;margin:0px;"/>   &lt;security-constraint&gt;    <br style="padding:0px;margin:0px;"/>      &lt;display-name&gt;Example Security Constraint&lt;/display-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;web-resource-collection&gt;    <br style="padding:0px;margin:0px;"/>         &lt;web-resource-name&gt;Protected Area&lt;/web-resource-name&gt;    <br style="padding:0px;margin:0px;"/>         &lt;url-pattern&gt;/jsp/security/protected/*&lt;/url-pattern&gt;    <br style="padding:0px;margin:0px;"/>         &lt;http-method&gt;DELETE&lt;/http-method&gt;    <br style="padding:0px;margin:0px;"/>         &lt;http-method&gt;GET&lt;/http-method&gt;    <br style="padding:0px;margin:0px;"/>         &lt;http-method&gt;POST&lt;/http-method&gt;    <br style="padding:0px;margin:0px;"/>         &lt;http-method&gt;PUT&lt;/http-method&gt;    <br style="padding:0px;margin:0px;"/>      &lt;/web-resource-collection&gt;    <br style="padding:0px;margin:0px;"/>      &lt;auth-constraint&gt;    <br style="padding:0px;margin:0px;"/>        &lt;role-name&gt;tomcat&lt;/role-name&gt;    <br style="padding:0px;margin:0px;"/>        &lt;role-name&gt;role1&lt;/role-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;/auth-constraint&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/security-constraint&gt;    <br style="padding:0px;margin:0px;"/>16、登陆验证配置    <br style="padding:0px;margin:0px;"/>   &lt;login-config&gt;    <br style="padding:0px;margin:0px;"/>     &lt;auth-method&gt;FORM&lt;/auth-method&gt;    <br style="padding:0px;margin:0px;"/>     &lt;realm-name&gt;Example-Based Authentiation Area&lt;/realm-name&gt;    <br style="padding:0px;margin:0px;"/>     &lt;form-login-config&gt;    <br style="padding:0px;margin:0px;"/>        &lt;form-login-page&gt;/jsp/security/protected/login.jsp&lt;/form-login-page&gt;    <br style="padding:0px;margin:0px;"/>        &lt;form-error-page&gt;/jsp/security/protected/error.jsp&lt;/form-error-page&gt;    <br style="padding:0px;margin:0px;"/>     &lt;/form-login-config&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/login-config&gt;    <br style="padding:0px;margin:0px;"/>17、安全角色：security-role元素给出安全角色的一个列表，这些角色将出现在servlet元素内的security-role-ref元素的role-name子元素中。    <br style="padding:0px;margin:0px;"/>    分别地声明角色可使高级IDE处理安全信息更为容易。    <br style="padding:0px;margin:0px;"/>&lt;security-role&gt;    <br style="padding:0px;margin:0px;"/>     &lt;role-name&gt;tomcat&lt;/role-name&gt;    <br style="padding:0px;margin:0px;"/>&lt;/security-role&gt;    <br style="padding:0px;margin:0px;"/>18、Web环境参数：env-entry元素声明Web应用的环境项    <br style="padding:0px;margin:0px;"/>&lt;env-entry&gt;    <br style="padding:0px;margin:0px;"/>     &lt;env-entry-name&gt;minExemptions&lt;/env-entry-name&gt;    <br style="padding:0px;margin:0px;"/>     &lt;env-entry-value&gt;1&lt;/env-entry-value&gt;    <br style="padding:0px;margin:0px;"/>     &lt;env-entry-type&gt;java.lang.Integer&lt;/env-entry-type&gt;    <br style="padding:0px;margin:0px;"/>&lt;/env-entry&gt;    <br style="padding:0px;margin:0px;"/>19、EJB 声明    <br style="padding:0px;margin:0px;"/>&lt;ejb-ref&gt;    <br style="padding:0px;margin:0px;"/>     &lt;description&gt;Example EJB reference&lt;/decription&gt;    <br style="padding:0px;margin:0px;"/>     &lt;ejb-ref-name&gt;ejb/Account&lt;/ejb-ref-name&gt;    <br style="padding:0px;margin:0px;"/>     &lt;ejb-ref-type&gt;Entity&lt;/ejb-ref-type&gt;    <br style="padding:0px;margin:0px;"/>     &lt;home&gt;com.mycompany.mypackage.AccountHome&lt;/home&gt;    <br style="padding:0px;margin:0px;"/>     &lt;remote&gt;com.mycompany.mypackage.Account&lt;/remote&gt;    <br style="padding:0px;margin:0px;"/>&lt;/ejb-ref&gt;    <br style="padding:0px;margin:0px;"/>20、本地EJB声明    <br style="padding:0px;margin:0px;"/>&lt;ejb-local-ref&gt;    <br style="padding:0px;margin:0px;"/>     &lt;description&gt;Example Loacal EJB reference&lt;/decription&gt;    <br style="padding:0px;margin:0px;"/>     &lt;ejb-ref-name&gt;ejb/ProcessOrder&lt;/ejb-ref-name&gt;    <br style="padding:0px;margin:0px;"/>     &lt;ejb-ref-type&gt;Session&lt;/ejb-ref-type&gt;    <br style="padding:0px;margin:0px;"/>     &lt;local-home&gt;com.mycompany.mypackage.ProcessOrderHome&lt;/local-home&gt;    <br style="padding:0px;margin:0px;"/>     &lt;local&gt;com.mycompany.mypackage.ProcessOrder&lt;/local&gt;    <br style="padding:0px;margin:0px;"/>&lt;/ejb-local-ref&gt;    <br style="padding:0px;margin:0px;"/>21、配置DWR    <br style="padding:0px;margin:0px;"/>&lt;servlet&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-name&gt;dwr-invoker&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-class&gt;uk.ltd.getahead.dwr.DWRServlet&lt;/servlet-class&gt;    <br style="padding:0px;margin:0px;"/>&lt;/servlet&gt;    <br style="padding:0px;margin:0px;"/>&lt;servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>      &lt;servlet-name&gt;dwr-invoker&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;url-pattern&gt;/dwr/*&lt;/url-pattern&gt;    <br style="padding:0px;margin:0px;"/>&lt;/servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>22、配置Struts    <br style="padding:0px;margin:0px;"/>    &lt;display-name&gt;Struts Blank Application&lt;/display-name&gt;    <br style="padding:0px;margin:0px;"/>    &lt;servlet&gt;    <br style="padding:0px;margin:0px;"/>        &lt;servlet-name&gt;action&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>        &lt;servlet-class&gt;    <br style="padding:0px;margin:0px;"/>            org.apache.struts.action.ActionServlet    <br style="padding:0px;margin:0px;"/>        &lt;/servlet-class&gt;    <br style="padding:0px;margin:0px;"/>        &lt;init-param&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-name&gt;detail&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-value&gt;2&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>        &lt;/init-param&gt;    <br style="padding:0px;margin:0px;"/>        &lt;init-param&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-name&gt;debug&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-value&gt;2&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>        &lt;/init-param&gt;    <br style="padding:0px;margin:0px;"/>        &lt;init-param&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-name&gt;config&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>        &lt;/init-param&gt;    <br style="padding:0px;margin:0px;"/>        &lt;init-param&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-name&gt;application&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>            &lt;param-value&gt;ApplicationResources&lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>        &lt;/init-param&gt;    <br style="padding:0px;margin:0px;"/>        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/servlet&gt;    <br style="padding:0px;margin:0px;"/>    &lt;servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>        &lt;servlet-name&gt;action&lt;/servlet-name&gt;    <br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/servlet-mapping&gt;    <br style="padding:0px;margin:0px;"/>    &lt;welcome-file-list&gt;    <br style="padding:0px;margin:0px;"/>        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/welcome-file-list&gt;    <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>    &lt;!-- Struts Tag Library Descriptors --&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-uri&gt;struts-bean&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-location&gt;/WEB-INF/tld/struts-bean.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-uri&gt;struts-html&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-location&gt;/WEB-INF/tld/struts-html.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib-uri&gt;struts-nested&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib-location&gt;/WEB-INF/tld/struts-nested.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-uri&gt;struts-logic&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-location&gt;/WEB-INF/tld/struts-logic.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>    &lt;taglib&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-uri&gt;struts-tiles&lt;/taglib-uri&gt;    <br style="padding:0px;margin:0px;"/>        &lt;taglib-location&gt;/WEB-INF/tld/struts-tiles.tld&lt;/taglib-location&gt;    <br style="padding:0px;margin:0px;"/>    &lt;/taglib&gt;    <br style="padding:0px;margin:0px;"/>23、配置Spring（基本上都是在Struts中配置的）    <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>   &lt;!-- 指定spring配置文件位置 --&gt;    <br style="padding:0px;margin:0px;"/>   &lt;context-param&gt;    <br style="padding:0px;margin:0px;"/>      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;    <br style="padding:0px;margin:0px;"/>      &lt;param-value&gt;    <br style="padding:0px;margin:0px;"/>       &lt;!--加载多个spring配置文件 --&gt;    <br style="padding:0px;margin:0px;"/>        /WEB-INF/applicationContext.xml, /WEB-INF/action-servlet.xml    <br style="padding:0px;margin:0px;"/>      &lt;/param-value&gt;    <br style="padding:0px;margin:0px;"/>   &lt;/context-param&gt;    <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>   &lt;!-- 定义SPRING监听器，加载spring --&gt;    <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>&lt;listener&gt;    <br style="padding:0px;margin:0px;"/>     &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;    <br style="padding:0px;margin:0px;"/>&lt;/listener&gt;    <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>&lt;listener&gt;    <br style="padding:0px;margin:0px;"/>     &lt;listener-class&gt;    <br style="padding:0px;margin:0px;"/>       org.springframework.web.context.request.RequestContextListener    <br style="padding:0px;margin:0px;"/>     &lt;/listener-class&gt;    <br style="padding:0px;margin:0px;"/>&lt;/listener&gt; </p> 
<p style="padding:0px;margin:1em 0px 0.5em;line-height:21px;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"> </p> 
<p style="padding:0px;margin:8px 0px;line-height:180%;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;"><br style="padding:0px;margin:0px;"/></p> 
<p style="padding:0px;margin:8px 0px;line-height:180%;letter-spacing:0.5px;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;">其他说明：</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">web.xml 文件中一般包括 servlet, spring, filter, listenr的配置。那么他们是按照一个什么顺序加载呢？</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">加载顺序会影响对spring bean 的调用。</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">    比如filter 需要用到 bean ，但是加载顺序是 先加载filter 后加载spring，则filter中初始化操作中的bean为null；</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">首先可以肯定 加载顺序与他们在web.xml 文件中的先后顺序无关。</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">web.xml 中 listener 和 serverlet 的加载顺序为 先 listener 后serverlet</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">最终得出结果：先 listener &gt;&gt; filter &gt;&gt; servlet &gt;&gt;  spring</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;"> 所以，如果过滤器中要使用到 bean，可以将spring 的加载 改成 Listener的方式</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">&lt;listener&gt;<br style="padding:0px;margin:0px;"/>        &lt;listener-class&gt;<br style="padding:0px;margin:0px;"/>            org.springframework.web.context.ContextLoaderListener<br style="padding:0px;margin:0px;"/>        &lt;/listener-class&gt;<br style="padding:0px;margin:0px;"/>    &lt;/listener&gt;</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;"><br style="padding:0px;margin:0px;"/> 搞定！</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;"> 关于他们的内部执行顺序，也需要注意，如下面文章中遇到的问题</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">web.xml的filter执行顺序导致的乱码，切记！<br style="padding:0px;margin:0px;"/>2008-05-02 01:38</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">发现引起bug的原因是web.xml的下面几行：<br style="padding:0px;margin:0px;"/>    &lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;SecurityFilter&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>    &lt;/filter-mapping&gt;</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">    &lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;CharacterEncoding&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>    &lt;/filter-mapping&gt;</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">    &lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;CharacterEncoding&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>    &lt;/filter-mapping&gt;</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">根据servlet2.3规范filter执行是按照web.xml配置的filter-mapping先后顺序进行执行，所以上面的配置会导致遇见*.do的url请求，先进行SecurityFilter的过滤器处理，这时候没有做编码处理，已经是乱码，到下面的filter处理时已经时乱码，再做编码处理已经没有用处。</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">修正方式，调整filter-mapping顺序，如下：</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">    &lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;CharacterEncoding&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>    &lt;/filter-mapping&gt;</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">    &lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;CharacterEncoding&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>    &lt;/filter-mapping&gt;</p> 
<p style="text-align:left;padding:0px;line-height:180%;letter-spacing:normal;font-size:12.5px;white-space:normal;word-wrap:break-word;word-break:break-all;font:14px/21px Helvetica, Tahoma, Arial, sans-serif;margin:0px 0px 5px;color:rgb(0, 0, 0);text-transform:none;text-indent:0px;word-spacing:0px;font-size-adjust:none;font-stretch:normal;background-color:rgb(255, 255, 255);-webkit-text-stroke-width:0px;">    &lt;filter-mapping&gt;<br style="padding:0px;margin:0px;"/>        &lt;filter-name&gt;SecurityFilter&lt;/filter-name&gt;<br style="padding:0px;margin:0px;"/>        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;<br style="padding:0px;margin:0px;"/>    &lt;/filter-mapping&gt;</p></div>
      	        	      	<div style="padding:8px 0px;margin:20px 0px;border:1px solid rgb(221, 221, 221);line-height:30px;">
    	
		<strong style="padding:0px;margin:0px;margin-left:15px;line-height:30px;vertical-align:middle;">分享到：</strong>
		<a href="#" style="padding:0px;margin:0px;color:rgb(68, 102, 187);outline:0px;text-decoration:none;" title="分享到新浪微博">
			<img src="web.xml配置详解 - derekxyz的个人空间 - 开源中国社区_files/Image [1].png" type="image/png" data-filename="Image.png" height="29" style="padding:0px;border:0px;margin:3px 8px;vertical-align:middle;" width="97"/>
		</a>
		<a href="#" style="padding:0px;margin:0px;color:rgb(68, 102, 187);outline:0px;text-decoration:none;" title="分享到腾讯微博">
			<img src="web.xml配置详解 - derekxyz的个人空间 - 开源中国社区_files/Image [2].png" type="image/png" data-filename="Image.png" height="30" style="padding:0px;border:0px;margin:3px 8px;vertical-align:middle;" width="100"/>
		</a>
    	<span style="margin:0px;padding:3px 8px;height:30px;display:inline-block;float:right;line-height:30px;color:rgb(255, 255, 255);margin-right:5px;background:rgb(92, 194, 111);" title="都有1个人赞过了，你也来赞一下吧！不会扣积分哦！">
			<span style="margin:0px;padding:0px 3px;cursor:pointer;font-size:12px;">1</span><span style="margin:0px;padding:0px 3px;font-size:18px;cursor:pointer;">赞</span>
		</span>
	</div>

      <div style="padding:5px 15px;margin:20px 0px;color:rgb(102, 102, 102);border:1px solid rgb(221, 221, 221);font-size:12px;background:rgb(255, 255, 238);">
	  		原文地址：<a href="http://mianhuaman.iteye.com/blog/1105522" style="padding:0px;margin:0px;outline:0px;color:rgb(102, 102, 102);text-decoration:none;" target="_blank">http://mianhuaman.iteye.com/blog/1105522</a>
	  	  </div>
	  
      <div style="padding:0px;margin:10px 0px 20px;">
    	<ul style="padding:0px;margin:0px;list-style-type:none;font-weight:bold;height:24px;">
                <li style="padding:0px;margin:0px;float:left;width:48%;"><a href="http://my.oschina.net/u/1383439/blog/220904" style="padding:0px;margin:0px;color:rgb(68, 102, 187);outline:0px;" title="上一篇：SVN无法连接问题">« 上一篇</a></li>        <li style="padding:0px;margin:0px;float:right;width:48%;text-align:right;"><a href="http://my.oschina.net/u/1383439/blog/226057" style="padding:0px;margin:0px;color:rgb(68, 102, 187);outline:0px;" title="下一篇：Fastjson和Jackson序列化和读取json的性能实测">下一篇 »</a></li>    	</ul>
      </div>
	</div></div></div></div></div></div></div><br/></span>
</div></body></html> 