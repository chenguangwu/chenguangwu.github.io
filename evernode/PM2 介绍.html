<html>
<head>
  <title>PM2 介绍</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="10794"/>
<h1>PM2 介绍</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/2/15 16:05</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.douban.com/note/314200231/"><i>https://www.douban.com/note/314200231/</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="color:rgb(17, 17, 17);background:rgb(255, 255, 255);"><div style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:Helvetica, Arial, sans-serif;line-height:1.62;"><div><div><div style="zoom:1;"><div><div>

    
    
    
        <div style="margin:0px;padding:0px;">
        <h1 style="margin:0px;font-size:25px;font-weight:bold;word-wrap:break-word;display:block;padding:0px 0px 20px;color:rgb(17, 17, 17);line-height:1.4;">PM2 介绍</h1>

    
    <div style="margin:0px;padding:0px;">
        <a href="https://www.douban.com/people/guoguofish/" style="cursor:pointer;color:rgb(51, 119, 170);text-decoration:none;"><img src="PM2 介绍_files/u41545271-6.jpg" type="image/jpeg" data-filename="u41545271-6.jpg" alt="油手好咸" height="24" style="border:0px;border-width:0px;vertical-align:middle;" width="24"/></a>
        <a href="https://www.douban.com/people/guoguofish/" style="cursor:pointer;color:rgb(51, 119, 170);text-decoration:none;margin:0px 10px 0px 7px;">油手好咸</a>
        <span style="color:rgb(153, 153, 153);font-size:12px;">2013-11-04 11:11:59</span>
    </div>
    
    </div>


    
    
    <div style="margin:0px;padding:0px;">
            
            <div style="white-space:pre-wrap;margin:0px;padding:0px;line-height:1.62;font-family:Arial, Helvetica, sans-serif;word-wrap:break-word;font-size:13px;width:100%;overflow:hidden;margin-top:30px;margin-bottom:13px;position:relative;">[源引]<a href="https://github.com/Unitech/pm2" rel="nofollow" style="cursor:pointer;color:rgb(51, 119, 170);text-decoration:none;" target="_blank">https://github.com/Unitech/pm2</a><br/><br/>pm2 是一个带有负载均衡功能的Node应用的进程管理器.<br/>当你要把你的独立代码利用全部的服务器上的所有CPU，并保证进程永远都活着，0秒的重载， PM2是完美的。它非常适合IaaS结构，但不要把它用于PaaS方案（随后将开发Paas的解决方案）.<br/><br/>备注：SaaS、PaaS和IaaS是云服务模式。<br/>        SaaS 软件即服务，例如Google的 Gmail 邮箱服务.面向应用型用户.<br/>        PaaS 平台即服务.例如Google的GAE,面向开发型用户<br/>        IaaS  基础架构即服务,例如亚马逊的AWS，IaaS对于不知道新推出的应用程序/网站会有多成功的创业公司来说非常有用<br/>      请参考 <a href="http://cloud.51cto.com/art/201107/278903.htm" rel="nofollow" style="cursor:pointer;color:rgb(51, 119, 170);text-decoration:none;" target="_blank">云服务模式：SaaS、PaaS和IaaS，哪一种适合你？</a><br/><br/><br/>主要特性：<br/><br/>内建负载均衡（使用Node cluster 集群模块）<br/>后台运行<br/>0秒停机重载，我理解大概意思是维护升级的时候不需要停机.<br/>具有Ubuntu和CentOS 的启动脚本<br/>停止不稳定的进程（避免无限循环）<br/>控制台检测<br/>提供 HTTP API<br/>远程控制和实时的接口API ( Nodejs 模块,允许和PM2进程管理器交互 )<br/><br/>测试过Nodejs v0.11 v0.10 v0.8版本，兼容CoffeeScript,基于Linux 和MacOS.<br/><br/>安装<br/>npm install -g pm2<br/><br/>用法<br/>$ npm install pm2 -g     # 命令行安装 pm2 <br/>$ pm2 start app.js -i 4 #后台运行pm2，启动4个app.js <br/>                                # 也可以把'max' 参数传递给 start<br/>                                # 正确的进程数目依赖于Cpu的核心数目<br/>$ pm2 start app.js --name my-api # 命名进程<br/>$ pm2 list               # 显示所有进程状态<br/>$ pm2 monit              # 监视所有进程<br/>$ pm2 logs               #  显示所有进程日志<br/>$ pm2 stop all           # 停止所有进程<br/>$ pm2 restart all        # 重启所有进程<br/>$ pm2 reload all         # 0秒停机重载进程 (用于 NETWORKED 进程)<br/>$ pm2 stop 0             # 停止指定的进程<br/>$ pm2 restart 0          # 重启指定的进程<br/>$ pm2 startup            # 产生 init 脚本 保持进程活着<br/>$ pm2 web                # 运行健壮的 computer API endpoint (<a href="http://localhost:9615/" rel="nofollow" style="cursor:pointer;color:rgb(51, 119, 170);text-decoration:none;" target="_blank">http://localhost:9615</a>)<br/>$ pm2 delete 0           # 杀死指定的进程<br/>$ pm2 delete all         # 杀死全部进程<br/><br/>运行进程的不同方式：<br/>$ pm2 start app.js -i max  # 根据有效CPU数目启动最大进程数目<br/>$ pm2 start app.js -i 3      # 启动3个进程<br/>$ pm2 start app.js -x        #用fork模式启动 app.js 而不是使用 cluster<br/>$ pm2 start app.js -x -- -a 23   # 用fork模式启动 app.js 并且传递参数 (-a 23)<br/>$ pm2 start app.js --name serverone  # 启动一个进程并把它命名为 serverone<br/>$ pm2 stop serverone       # 停止 serverone 进程<br/>$ pm2 start app.json        # 启动进程, 在 app.json里设置选项<br/>$ pm2 start app.js -i max -- -a 23                   #在--之后给 app.js 传递参数<br/>$ pm2 start app.js -i max -e err.log -o out.log  # 启动 并 生成一个配置文件<br/>你也可以执行用其他语言编写的app  ( fork 模式):<br/>$ pm2 start my-bash-script.sh    -x --interpreter bash<br/>$ pm2 start my-python-script.py -x --interpreter python<br/><br/>0秒停机重载:<br/>这项功能允许你重新载入代码而不用失去请求连接。<br/>注意：<br/>仅能用于web应用<br/>运行于Node 0.11.x版本<br/>运行于 cluster 模式（默认模式）<br/>$ pm2 reload all<br/><br/>CoffeeScript:<br/>$ pm2 start my_app.coffee  #这就是全部<br/><br/>PM2准备好为产品级服务了吗？<br/>只需在你的服务器上测试<br/>$ git clone <a href="https://github.com/Unitech/pm2.git" rel="nofollow" style="cursor:pointer;color:rgb(51, 119, 170);text-decoration:none;" target="_blank">https://github.com/Unitech/pm2.git</a><br/>$ cd pm2<br/>$ npm install  # 或者 npm install --dev ，如果devDependencies 没有安装<br/>$ npm test<br/><br/>pm2 list<br/>列出由pm2管理的所有进程信息，还会显示一个进程会被启动多少次，因为没处理的异常。<br/><div style="margin:0px;padding:0pt 0pt 15px;text-align:center;display:block;clear:both;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;border:none;padding:0px;margin:0px auto;width:1px;"><tbody><tr><td style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:Helvetica, Arial, sans-serif;line-height:1.62;"><img src="PM2 介绍_files/p10127862.jpg" type="image/jpeg" data-filename="p10127862.jpg" alt="" height="166" style="border:0px;max-width:590px;" width="590"/></td></tr><tr><td align="center" style="line-height:150%;font-style:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-variant:normal;color:rgb(102, 102, 102);table-layout:fixed;word-wrap:break-word;width:100%;overflow:hidden;"></td></tr></tbody></table></div><br/><br/>pm2 monit<br/>监视每个node进程的CPU和内存的使用情况。<br/><div style="margin:0px;padding:0pt 0pt 15px;text-align:center;display:block;clear:both;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;border:none;padding:0px;margin:0px auto;width:1px;"><tbody><tr><td style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:Helvetica, Arial, sans-serif;line-height:1.62;"><img src="PM2 介绍_files/p10140518.jpg" type="image/jpeg" data-filename="p10140518.jpg" alt="" height="300" style="border:0px;max-width:590px;" width="590"/></td></tr><tr><td align="center" style="line-height:150%;font-style:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-variant:normal;color:rgb(102, 102, 102);table-layout:fixed;word-wrap:break-word;width:100%;overflow:hidden;"></td></tr></tbody></table></div></div>
            
    
        <div style="margin:0px;padding:0px;">
                <a href="https://www.douban.com/note/tags/Nodejs?people=guoguofish" style="padding:3px 13px;cursor:pointer;line-height:1.62;text-decoration:none;white-space:nowrap;margin-right:10px;color:rgb(51, 119, 170);display:inline-block;font-size:12px;letter-spacing:normal;word-spacing:normal;vertical-align:top;background-color:rgb(245, 245, 245);">Nodejs</a>
                <a href="https://www.douban.com/note/tags/PM2?people=guoguofish" style="padding:3px 13px;cursor:pointer;line-height:1.62;text-decoration:none;white-space:nowrap;margin-right:10px;color:rgb(51, 119, 170);display:inline-block;font-size:12px;letter-spacing:normal;word-spacing:normal;vertical-align:top;background-color:rgb(245, 245, 245);">PM2</a>
        </div>

            

    </div>


            
    
    <div style="margin:0px;padding:0px;"></div>
    <div style="margin:0px;padding:0px;">
        
        
        <div style="margin:0px;padding:0px;margin-top:20px;color:rgb(187, 187, 187);">
          <div style="margin:0px;padding:0px;float:right;">
          </div>

          <span style="margin:0px 5px;">
          </span>
        </div>

        
        <div style="margin:0px;padding:0px;clear:both;overflow:visible;margin-bottom:20px;padding-top:20px;color:rgb(102, 102, 102);"><span style="color:rgb(102, 102, 102);display:table;"></span>
            <div style="margin:0px;padding:0px;float:right;">
                <div style="margin:0px;padding:0px;float:none;display:inline-block;">
                    
    
        <a href="https://www.douban.com/accounts/register?reason=like" style="height:12px;cursor:pointer;line-height:1;text-decoration:none;zoom:1;margin-left:4px;vertical-align:middle;overflow:hidden;display:inline-block;padding:6px 9px 4px;border-radius:2px;color:rgb(202, 100, 69);border:1px solid rgb(250, 213, 181);background:rgb(251, 233, 217);" title="标为喜欢？">喜欢</a>

    

    

                </div>
                    
    
    
    
    <div style="margin:0px;padding:0px;position:relative;font-size:12px;display:inline-block;margin-left:10px;">
        <div style="margin:0px;padding:0px;border:1px solid rgb(227, 241, 237);border-radius:2px;color:rgb(79, 148, 110);cursor:pointer;font-size:0px;background-color:rgb(242, 248, 242);">
            <div style="margin:0px;padding:0px;font-size:12px;display:inline-block;">
                

    


        <div style="margin:0px;padding:0px;text-align:right;color:rgb(153, 153, 153);clear:both;float:none;display:inline-block;zoom:1;">

    <span>
        
            <a href="https://www.douban.com/accounts/register?reason=collect" style="vertical-align:middle;cursor:pointer;height:12px;text-decoration:none;zoom:1;border-radius:3px;overflow:hidden;display:inline-block;line-height:1;color:rgb(79, 148, 110);border:0px;padding:6px 10px 4px 9px;background-color:transparent;">
                    
                            推荐 <span style="margin:0px 0px 0px 2px;">5</span>
                    
            </a>
    </span>
            </div>

            </div>
            <span style="font-size:12px;display:inline-block;padding:0px 8px;position:relative;"><span style="font-size:12px;display:inline-block;vertical-align:middle;border-left-width:1px;border-left-style:solid;border-left-color:rgb(219, 238, 233);position:absolute;left:0px;top:3px;bottom:3px;"></span><span style="font-size:12px;display:inline-block;vertical-align:middle;border-width:4px;border-style:solid;border-color:rgb(79, 148, 110) transparent transparent;margin-bottom:-5px;"></span></span>
        </div>
        
    <span style="font-size:12px;display:block;width:100%;height:5px;"></span></div>
    

            </div>
            
            
        <span style="color:rgb(102, 102, 102);display:table;clear:both;"></span></div>
    </div>


    </div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 