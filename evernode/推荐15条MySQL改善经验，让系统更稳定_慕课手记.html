<html>
<head>
  <title>推荐15条MySQL改善经验，让系统更稳定_慕课手记</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1642"/>
<h1>推荐15条MySQL改善经验，让系统更稳定_慕课手记</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/12/17 10:44</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.imooc.com/article/43386"><i>http://www.imooc.com/article/43386</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;"><div style="font:14px/1.5 &quot;PingFang SC&quot;, 微软雅黑, &quot;Microsoft YaHei&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;color:rgb(28, 31, 33);"><div style="background:rgb(255, 255, 255);color:rgb(28, 31, 33);font:14px/1.5 &quot;PingFang SC&quot;, 微软雅黑, &quot;Microsoft YaHei&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;transition:transform 0.3s ease;overflow-x:hidden;background-color:rgb(248, 250, 252);"><div><div><div><div style="background:rgb(255, 255, 255);box-shadow:rgba(7, 17, 27, 0.05) 0px 8px 16px 0px;border-radius:12px;box-sizing:border-box;">
						
			<div style="margin:0px;padding:0px;font-size:12px;color:rgb(145, 153, 161);line-height:24px;">
				<a href="http://www.imooc.com/" style="outline:0px;text-decoration:none;color:rgb(145, 153, 161);position:relative;z-index:2;cursor:pointer;" target="_blank"><i style="speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;line-height:16px;font-size:20px;vertical-align:text-bottom;font-family:imv2;"><span style="font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:16px;font-family:imv2;font-size:20px;"></span></i></a>
				<a href="http://www.imooc.com/article" style="outline:0px;text-decoration:none;color:rgb(145, 153, 161);" target="_blank">手记</a>  /<a href="http://www.imooc.com/article/be" style="outline:0px;text-decoration:none;color:rgb(145, 153, 161);" target="_blank">后端开发</a>
			</div>
			       
			<div style="margin:0px;padding:0px;">
				<h1 style="padding:0px;font-weight:400;margin:8px 0px;font-size:32px;color:rgb(28, 31, 33);line-height:40px;word-wrap:break-word;word-break:break-all;">
					<span style="font-weight:700;">推荐15条MySQL改善经验，让系统更稳定</span>
				</h1>
				<div style="margin:0px;padding:0px;font-size:12px;color:rgb(145, 153, 161);line-height:24px;">
					<div style="float:left;margin:0px;padding:0px;">
						<span style="vertical-align:middle;margin-right:24px;">2018.07.11 14:40</span>
						<span style="vertical-align:middle;margin-right:24px;">831浏览</span>
					</div>
					<div style="float:right;margin:0px;padding:0px;">
						<div style="float:left;margin:0px;padding:0px;">
																					
							
						</div> 
					</div>	
				<span style="font-size:12px;color:rgb(145, 153, 161);line-height:24px;display:block;height:0px;clear:both;visibility:hidden;"> </span></div>
			</div> 

			 
			<div style="margin:0px;padding:0px;overflow:hidden;padding-top:24px;">  
				<div style="margin:0px;padding:0px;font-size:16px;word-wrap:break-word;color:rgb(28, 31, 33);font-family:&quot;PingFang SC&quot;, 微软雅黑, &quot;Microsoft YaHei&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;line-height:36px;">
					
					<div style="margin:0px;padding:0px;"><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;"><a href="http://s1.51cto.com/oss/201807/11/327a0c8bd3b325af0e256bb08a84b50d.jpg-wh_651x-s_4264130937.jpg" style="outline:0px;text-decoration:none;color:rgb(0, 136, 204);"><img src="推荐15条MySQL改善经验，让系统更稳定_慕课手记_files/5b45a6170001cba206220332.jpg" type="image/jpeg" data-filename="5b45a6170001cba206220332.jpg" height="auto" style="border:0px;margin:auto;max-width:80%;position:static;cursor:pointer;display:block;transform:none;box-sizing:inherit;border-style:none;height:auto;" width="auto"/></a></p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">1、 为查询缓存优化查询</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">像 NOW() 和 RAND() 或是其它的诸如此类的SQL函数都不会开启查询缓存，谨慎使用</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">2、EXPLAIN 我们的SELECT查询(可以查看执行的行数)</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">可以让我们找到潜在的性能问题</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">3、当只要一行数据时使用LIMIT 1</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">MySQL数据库引擎会在查找到一条数据后停止搜索，而不是继续往后查询下一条符合条件的数据记录。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">4、为搜索字段建立索引</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">在识别度高的列上建立正确的索引，以提升性能</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">5、在Join表的时候使用相当类型的列，并将其索引</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">关联表的关键字段，类型一致，字符集一致，才能提高性能，否则无法使用它们的索引</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">6、千万不要 ORDER BY RAND ()</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">执行RAND()函数（很耗CPU时间），会让你的数据库的性能呈指数级的下降</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">7、 避免SELECT *</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">从数据库里读出越多的数据，那么查询就会变得越慢。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">8、永远为每张表设置一个ID</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">我们应该为数据库里的每张表都设置一个ID做为其主键，而且最好的是一个INT型的（推荐使用UNSIGNED），并设置上自动增加的 AUTO_INCREMENT标志。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">9、可以使用ENUM 而不要VARCHAR</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">ENUM 类型是非常快和紧凑的。在实际上，其保存的是 TINYINT，但其外表上显示为字符串。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">10、尽可能的使用NOT NULL</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">如果不是特殊情况，尽可能的不要使用NULL。在MYSQL中对于INT类型而言，EMPTY是0，而NULL是空值。而在Oracle中 NULL和EMPTY的字符串是一样的。NULL也需要占用存储空间，并且会使我们的程序判断时更加复杂。现实情况是很复杂的，依然会有些情况下，我们需要使用NULL值。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">11、固定长度的表会更快</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">表中没有如下类型的字段： VARCHAR，TEXT，BLOB。只要我们包括了其中一个这些字段，那么这个表就不是“固定长度静态表”了，这样，MySQL 引擎会用另一种方法来处理。 固定长度的表会提高性能，因为MySQL搜寻得会更快一些，因为这些固定的长度是很容易计算下一个数据的偏移量的，所以读取的自然也会很快。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">12、垂直分割</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">“垂直分割”是一种把数据库中的表按列变成几张表的方法，这样可以降低表的复杂度和字段的数目，从而达到优化的目的。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">13、拆分打的DELETE或INSERT语句</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">这两个操作是会锁表的</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">14、越小的列会越快</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">对于大多数的数据库引擎来说，硬盘操作可能是最重大的瓶颈。越小的列消耗的io资源越少</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">15、选择正确的存储引擎</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">MyISAM是MYSQL5.5版本以前默认的存储引擎，基于传统的ISAM类型，支持B-Tree，全文检索，但是不是事务安全的，而且不支持外键。不具有原子性。支持锁表。</p><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">InnoDB是事务型引擎，支持ACID事务(实现4种事务隔离机制)、回滚、崩溃恢复能力、行锁。以及提供与Oracle一致的不加锁的读取方式。InnoDB存储它的表和索引在一个表空间中，表空间可以包含多个文件。</p><table border="0" cellpadding="0" cellspacing="0" style="left:auto;font-size:13px;font-style:normal;font-variant:inherit;border-collapse:separate;border-spacing:0px;margin:0.3em 0px;max-width:100%;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;border-radius:4px;background:none;border:1px solid rgb(204, 204, 204);bottom:auto;float:none;font-weight:normal;line-height:1.6em;outline:0px;overflow:auto;padding:0px;position:relative;right:auto;text-align:left;top:auto;vertical-align:baseline;width:100%;box-sizing:content-box;min-height:auto;background-color:rgb(245, 245, 245);"><tbody style="padding:0px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;position:static;background:none;bottom:auto;float:none;left:auto;line-height:1.6em;margin:0px;outline:0px;overflow:visible;border-radius:0px;border:0px;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-weight:normal;font-style:normal;min-height:auto;font-size:13px;"><tr style="padding:0px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;position:static;background:none;bottom:auto;float:none;left:auto;line-height:1.6em;margin:0px;outline:0px;overflow:visible;border-radius:0px;border:0px;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-weight:normal;font-style:normal;min-height:auto;font-size:13px;"><td style="text-align:left;margin:0px;word-break:normal;font-size:13px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;border-radius:0px;background:none;bottom:auto;float:none;left:auto;line-height:1.6em;outline:0px;overflow:visible;position:static;right:auto;min-height:auto;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-weight:normal;font-style:normal;color:rgb(175, 175, 175);background-color:rgb(247, 247, 249);border-right:1px solid rgb(225, 225, 232);border-top-left-radius:4px;border-bottom-left-radius:4px;user-select:none;padding:5px 8px;border:1px solid rgb(230, 230, 230);"><div style="position:static;margin:0px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;border-radius:0px;background:none;border:0px;bottom:auto;float:none;left:auto;line-height:1.6em;outline:0px;overflow:visible;word-wrap:normal;right:auto;font-size:13px;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-weight:normal;font-style:normal;min-height:auto;white-space:pre;text-align:right;padding:0px 0.5em 0px 1em;">1</div></td><td style="overflow:visible;margin:0px;word-break:normal;min-height:auto;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;border-radius:0px;background:none;bottom:auto;float:none;left:auto;line-height:1.6em;outline:0px;font-style:normal;position:static;right:auto;text-align:left;top:auto;vertical-align:baseline;font-weight:normal;box-sizing:content-box;font-size:13px;width:100%;padding:5px 8px;border:1px solid rgb(230, 230, 230);"><div style="outline:0px;margin:0px;width:auto;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;border-radius:0px;background:none;border:0px;bottom:auto;float:none;left:auto;line-height:1.6em;padding:0px;overflow:visible;min-height:auto;right:auto;text-align:left;top:auto;vertical-align:baseline;box-sizing:content-box;font-weight:normal;font-style:normal;font-size:13px;position:relative;"><div style="overflow:visible;margin:0px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;border-radius:0px;background:none;border:0px;bottom:auto;float:none;left:auto;line-height:1.6em;outline:0px;min-height:auto;position:static;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;font-weight:normal;font-style:normal;font-size:13px;padding:0px 1em;"><code style="float:none;background-color:rgb(243, 243, 243);word-break:break-all;text-indent:0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;outline:0px;font-size:13px;border-radius:0px;font-weight:normal;font-style:normal;background:none;border:0px;bottom:auto;padding:0px;left:auto;line-height:1.6em;min-height:auto;overflow:visible;position:static;right:auto;text-align:left;top:auto;vertical-align:baseline;width:auto;box-sizing:content-box;margin:0px;color:black;">&lt;br&gt;</code></div></div></td></tr></tbody></table><p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;"><br/></p></div>
					<div style="margin:0px;padding:0px;">
						<div style="margin:0px;padding:0px;"></div>
						
					</div>
				</div>
				
												<div style="margin:0px;padding:0px;margin-top:24px;width:100%;text-align:center;">
					<div style="margin:0px;padding:0px;display:inline-block;">
																		<a href="http://www.imooc.com/article/tag/3" style="margin-right:12px;text-decoration:none;float:left;outline:0px;display:inline-block;color:rgb(84, 92, 99);padding:4px 12px;background:rgba(84, 92, 99, 0.1);border-radius:12px;font-size:12px;line-height:16px;" target="_blank">JAVA</a>
																		<a href="http://www.imooc.com/article/tag/11" style="margin-right:12px;text-decoration:none;float:left;outline:0px;display:inline-block;color:rgb(84, 92, 99);padding:4px 12px;background:rgba(84, 92, 99, 0.1);border-radius:12px;font-size:12px;line-height:16px;" target="_blank">MySQL</a>
																		<a href="http://www.imooc.com/article/tag/76" style="margin-right:12px;text-decoration:none;float:left;outline:0px;display:inline-block;color:rgb(84, 92, 99);padding:4px 12px;background:rgba(84, 92, 99, 0.1);border-radius:12px;font-size:12px;line-height:16px;" target="_blank">架构</a>
											<span style="display:block;height:0px;clear:both;visibility:hidden;"> </span></div>
					                    				</div>
								 
				<div style="padding:0px;margin:48px 0px 0px;position:relative;width:100%;text-align:center;">
										
										<div style="margin:0px;padding:0px;margin-top:4px;font-size:14px;color:rgb(84, 92, 99);line-height:22px;cursor:pointer;"><em style="font-style:normal;font-weight:400;">9</em>人点赞</div>
					
				</div>
				
			</div>

			
		</div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 