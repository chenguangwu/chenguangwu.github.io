<html>
<head>
  <title>分布式之缓存击穿</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="10446"/>
<h1>分布式之缓存击穿</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/4/29 23:06</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&mid=2247484695&idx=1&sn=20ac8f56df5ef323c4264ac579b2b159&chksm=fbb28ce9ccc505ff735ff1f8a06ae6ef30e1c9efc79b251c1d7d8a71ecd7a8c736e938964519&mpshare=1&scene=1&srcid=04298QnBPujrhfavdGm1TwpJ#rd"><i>http://mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&amp;mid=2247484695&amp;idx=1&amp;sn=20ac8f56df5ef323c4264ac579b2b159&amp;chksm=fbb28ce9ccc505ff735ff1f8a06ae6ef30e1c9efc79b251c1d7d8a71ecd7a8c736e938964519&amp;mpshare=1&amp;scene=1&amp;srcid=04298QnBPujrhfavdGm1TwpJ#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="margin:0;position:relative;padding:20px 15px 15px;background-color:#fff"><div style="margin:0;padding:0"><h2 style="margin:0;padding:0;margin-bottom:10px;line-height:1.4;font-weight:400;font-size:24px"> 分布式之缓存击穿 </h2><div style="margin:0;padding:0;margin-bottom:18px;line-height:20px;font-size:0"><em style="margin:0;padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;color:#8c8c8c">2018-04-29</em><em style="margin:0;padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;color:#8c8c8c">孤独烟</em><a href="http://mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&amp;mid=2247484695&amp;idx=1&amp;sn=20ac8f56df5ef323c4264ac579b2b159&amp;chksm=fbb28ce9ccc505ff735ff1f8a06ae6ef30e1c9efc79b251c1d7d8a71ecd7a8c736e938964519&amp;mpshare=1&amp;scene=1&amp;srcid=04298QnBPujrhfavdGm1TwpJ##" style="margin:0;padding:0;color:#607fa6;text-decoration:none;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px">架构师小秘圈</a></div><div style="margin:0;padding:0;overflow:hidden;color:#3e3e3e"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;line-height:25.6px;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;min-width:0;line-height:25.6px;border-width:0;border-style:initial;border-color:initial;clear:both;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;padding:8px;border-left:6px solid rgb(253,208,0);border-top-color:rgb(253,208,0);border-right-color:rgb(253,208,0);border-bottom-color:rgb(253,208,0);line-height:1.4;text-align:inherit;font-family:inherit;text-decoration:inherit;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(102,102,102);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13px;widows:2;box-sizing:border-box !important;word-wrap:break-word !important">作者：孤独烟 来自</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(102,102,102);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13px;widows:2;box-sizing:border-box !important;word-wrap:break-word !important">： http://rjzheng.cnblogs.com/</span></p></div></div></div></div></div></div><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:5px;padding:10px;border-style:none none none solid;font-size:14px;line-height:25px;font-family:arial,helvetica,sans-serif;text-shadow:rgb(34,95,135) 0 1px 0;color:rgb(255,255,255);border-radius:4px;box-shadow:rgb(153,153,153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253,208,0);background-color:rgb(55,57,57);box-sizing:border-box !important;word-wrap:break-word !important">题记 什么是缓存击穿</div></div><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">在谈论缓存击穿之前，我们先来回忆下从缓存中加载数据的逻辑，如下图所示<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640.png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;white-space:normal;widows:1;line-height:25.6px;border-width:initial;border-style:none;border-color:initial;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">因此，如果黑客每次故意查询一个在缓存内必然不存在的数据，导致每次请求都要去存储层去查询，这样缓存就失去了意义。如果在大流量下数据库可能挂掉。这就是<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:red;font-weight:bold;box-sizing:border-box !important;word-wrap:break-word !important">缓存击穿</span>。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>场景如下图所示:<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;border-width:initial;border-style:none;border-color:initial;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">我们正常人在登录首页的时候，都是根据userID来命中数据，然而黑客的目的是破坏你的系统，黑客可以随机生成一堆userID,然后将这些请求怼到你的服务器上，这些请求在缓存中不存在，就会穿过缓存，直接怼到数据库上,从而造成数据库连接异常。</p><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:5px;padding:10px;border-style:none none none solid;font-size:14px;line-height:25px;font-family:arial,helvetica,sans-serif;text-shadow:rgb(34,95,135) 0 1px 0;color:rgb(255,255,255);border-radius:4px;box-shadow:rgb(153,153,153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253,208,0);background-color:rgb(55,57,57);box-sizing:border-box !important;word-wrap:break-word !important">0 解决方案</div></div><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">在这里我们给出三套解决方案，大家根据项目中的实际情况，选择使用.</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">讲下述三种方案前，我们先回忆下redis的setnx方法</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">SETNX</strong> <strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">key</strong> <strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">value</strong></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">将 key 的值设为 value ，当且仅当 key 不存在。</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">若给定的 key 已经存在，则 <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:red;box-sizing:border-box !important;word-wrap:break-word !important">SETNX</span> 不做任何动作。</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">SETNX 是『SET if Not eXists』(如果不存在，则 SET)的简写。</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">可用版本</strong>：&gt;= 1.0.0</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">时间复杂度：</strong> O(1)</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">返回值：</strong> 设置成功，返回 1。设置失败，返回 0 。</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">效果如下</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important">redis&gt; EXISTS job                <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"># job 不存在</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">integer</span>) 0<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>redis&gt; SETNX job <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;programmer&quot;</span>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"># job 设置成功</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">integer</span>) 1<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>redis&gt; SETNX job <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;code-farmer&quot;</span>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"># 尝试覆盖 job ，失败</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">integer</span>) 0<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>redis&gt; GET job                   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"># 没有被覆盖</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;programmer&quot;</span></code></pre><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:5px;padding:10px;border-style:none none none solid;font-size:14px;line-height:25px;font-family:arial,helvetica,sans-serif;text-shadow:rgb(34,95,135) 0 1px 0;color:rgb(255,255,255);border-radius:4px;box-shadow:rgb(153,153,153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253,208,0);background-color:rgb(55,57,57);box-sizing:border-box !important;word-wrap:break-word !important">1、使用互斥锁</div></div><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">该方法是比较普遍的做法，即，在根据key获得的value值为空时，先锁上，再从数据库加载，加载完毕，释放锁。若其他线程发现获取锁失败，则睡眠50ms后重试。</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">至于锁的类型，单机环境用并发包的Lock类型就行，集群环境则使用分布式锁( redis的setnx)</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">集群环境的redis的代码如下所示:</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">String <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(255,152,35);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">String key</span>) </span>{  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>   String <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span> = redis.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span>  == <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">null</span>) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (redis.setnx(key_mutex, <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;1&quot;</span>)) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">// 3 min timeout to avoid mutex holder crash  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        redis.expire(key_mutex, <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">3</span> * <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">60</span>)  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span> = db.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        redis.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">set</span>(key, <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        redis.delete(key_mutex);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">else</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">//其他线程休息50毫秒后重试  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">50</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>  }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>}  </code></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">优点:</strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">思路简单</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">保证一致性</p></li></ol><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">缺点</strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">代码复杂度增大</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">存在死锁的风险</p></li></ol><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:5px;padding:10px;border-style:none none none solid;font-size:14px;line-height:25px;font-family:arial,helvetica,sans-serif;text-shadow:rgb(34,95,135) 0 1px 0;color:rgb(255,255,255);border-radius:4px;box-shadow:rgb(153,153,153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253,208,0);background-color:rgb(55,57,57);box-sizing:border-box !important;word-wrap:break-word !important">2、异步构建缓存</div></div><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">在这种方案下，构建缓存采取异步策略，会从线程池中取线程来异步构建缓存，从而不会让所有的请求直接怼到数据库上。该方案redis自己维护一个timeout，当timeout小于System.currentTimeMillis()时，则进行缓存更新，否则直接返回value值。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>集群环境的redis代码如下所示:</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">String <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(255,152,35);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">final String key</span>) </span>{  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        V v = redis.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        String <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span> = v.getValue();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">long</span> timeout = v.getTimeout();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (v.timeout &lt;= System.currentTimeMillis()) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">// 异步更新后台异常执行  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            threadPool.execute(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">new</span> Runnable() {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">run</span>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(255,152,35);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"></span>) </span>{  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                    String keyMutex = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;mutex:&quot;</span> + key;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (redis.setnx(keyMutex, <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;1&quot;</span>)) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">// 3 min timeout to avoid mutex holder crash  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                        redis.expire(keyMutex, <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">3</span> * <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">60</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                        String dbValue = db.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                        redis.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">set</span>(key, dbValue);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                        redis.delete(keyMutex);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                    }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            });  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">return</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    } </code></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">优点:</strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">性价最佳，用户无需等待</p></li></ol><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">缺点</strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">无法保证缓存一致性</p></li></ol><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:5px;padding:10px;border-style:none none none solid;font-size:14px;line-height:25px;font-family:arial,helvetica,sans-serif;text-shadow:rgb(34,95,135) 0 1px 0;color:rgb(255,255,255);border-radius:4px;box-shadow:rgb(153,153,153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253,208,0);background-color:rgb(55,57,57);box-sizing:border-box !important;word-wrap:break-word !important">3、布隆过滤器</div></div><h4 style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;font-weight:bold;font-size:14px;color:rgb(62,62,62);font-variant-numeric:normal;font-variant-east-asian:normal;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">1、原理</h4><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">布隆过滤器的<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:red;font-weight:bold;box-sizing:border-box !important;word-wrap:break-word !important">巨大用处</span>就是，能够迅速判断一个元素是否在一个集合中。因此他有如下三个使用场景:</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">网页爬虫对URL的去重，避免爬取相同的URL地址</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">反垃圾邮件，从数十亿个垃圾邮件列表中判断某邮箱是否垃圾邮箱（同理，垃圾短信）</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">缓存击穿，将已存在的缓存放到布隆过滤器中，当黑客访问不存在的缓存时迅速返回避免缓存及DB挂掉。</p></li></ol><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">OK，接下来我们来谈谈布隆过滤器的原理<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>其内部维护一个全为0的bit数组，需要说明的是，布隆过滤器有一个误判率的概念，误判率越低，则数组越长，所占空间越大。误判率越高则数组越小，所占的空间越小。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><img src="分布式之缓存击穿_files/640 [1].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><img src="分布式之缓存击穿_files/640 [2].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><h4 style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;font-weight:bold;font-size:14px;color:rgb(62,62,62);font-variant-numeric:normal;font-variant-east-asian:normal;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">2、性能测试</h4><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">代码如下:</p><h5 style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;font-weight:bold;font-size:12px;color:rgb(62,62,62);font-variant-numeric:normal;font-variant-east-asian:normal;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">(1)新建一个maven工程，引入guava包</h5><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">dependencies</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">dependency</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">groupId</span>&gt;</span>com.google.guava<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">groupId</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">artifactId</span>&gt;</span>guava<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">artifactId</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">version</span>&gt;</span>22.0<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">version</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">dependency</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">dependencies</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;white-space:normal;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:12px;font-weight:bold;line-height:inherit;box-sizing:border-box !important;word-wrap:break-word !important">(2)测试一个元素是否属于一个百万元素集合所需耗时</span></p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">package</span> bloomfilter;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> com.google.common.hash.BloomFilter;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> com.google.common.hash.Funnels;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> java.nio.charset.Charset;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">Test</span></span>{<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">int</span> size = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">1000000</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span> BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">main</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(255,152,35);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">(String[] args)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; size; i++) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            bloomFilter.put(i);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">long</span> startTime = System.nanoTime(); <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">// 获取开始时间</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">//判断这一百万个数中是否包含29999这个数</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (bloomFilter.mightContain(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">29999</span>)) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;命中了&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">long</span> endTime = System.nanoTime();   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">// 获取结束时间</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;程序运行时间： &quot;</span> + (endTime - startTime) + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;纳秒&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>}</code></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">输出如下所示</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;widows:1;white-space:pre-wrap;box-sizing:border-box !important;word-wrap:break-word !important">命中了<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>程序运行时间： 219386纳秒<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">也就是说，判断一个数是否属于一个百万级别的集合，只要0.219ms就可以完成，性能极佳。</p><h5 style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;font-weight:bold;font-size:12px;color:rgb(62,62,62);font-variant-numeric:normal;font-variant-east-asian:normal;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">(3)误判率的一些概念</h5><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">首先，我们先不对误判率做显示的设置，进行一个测试，代码如下所示</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important">package bloomfilter;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.ArrayList;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.List;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> com.google.common.hash.BloomFilter;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">import</span> com.google.common.hash.Funnels;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">Test</span> {</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">int</span> size = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">1000000</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span> BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">main</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(255,152,35);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">(String[] args)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; size; i++) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            bloomFilter.put(i);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        List&lt;Integer&gt; <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">list</span> = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">new</span> ArrayList&lt;Integer&gt;(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">1000</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">//故意取10000个不在过滤器里的值，看看有多少个会被认为在过滤器里</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">int</span> i = size + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">10000</span>; i &lt; size + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">20000</span>; i++) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (bloomFilter.mightContain(i)) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">list</span>.add(i);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">&quot;误判的数量：&quot;</span> + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">list</span>.size()); <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>}</code></pre><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;widows:1;white-space:pre-wrap;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">输出结果如下</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></pre><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;widows:1;white-space:pre-wrap;box-sizing:border-box !important;word-wrap:break-word !important">误判对数量：330<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">如果上述代码所示，我们故意取10000个不在过滤器里的值，却还有330个被认为在过滤器里，这说明了误判率为0.03.即，在不做任何设置的情况下，默认的误判率为0.03。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>下面上源码来证明：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640 [3].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;border-width:initial;border-style:none;border-color:initial;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">接下来我们来看一下，误判率为0.03时，底层维护的bit数组的长度如下图所示<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640 [4].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;border-width:initial;border-style:none;border-color:initial;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">将bloomfilter的构造方法改为</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;widows:1;white-space:pre-wrap;box-sizing:border-box !important;word-wrap:break-word !important">private static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size,0.01);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">即，此时误判率为0.01。在这种情况下，底层维护的bit数组的长度如下图所示</p><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640 [5].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;border-width:initial;border-style:none;border-color:initial;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>由此可见，误判率越低，则底层维护的数组越长，占用空间越大。因此，<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:red;font-weight:bold;box-sizing:border-box !important;word-wrap:break-word !important">误判率实际取值，根据服务器所能够承受的负载来决定，不是拍脑袋瞎想的。</span></p><h4 style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:10px;margin-bottom:10px;font-weight:bold;font-size:14px;color:rgb(62,62,62);font-variant-numeric:normal;font-variant-east-asian:normal;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">3、实际使用</h4><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">redis伪代码如下所示</p><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:inherit;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;background:rgb(40,43,46);box-sizing:border-box !important;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">String <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(255,152,35);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">String key</span>) </span>{  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>   String <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span> = redis.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span>  == <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">null</span>) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">if</span>(!bloomfilter.mightContain(key)){<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">return</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">null</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">else</span>{<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span> = db.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">get</span>(key);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>           redis.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">set</span>(key, <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    } <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">return</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">value</span>；<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important"/>} </code></pre><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">优点:</strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">思路简单</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">保证一致性</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">性能强</p></li></ol><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">缺点</strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;margin-left:40px"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">代码复杂度增大</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">需要另外维护一个集合来存放缓存的Key</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">布隆过滤器不支持删值操作</p></li></ol><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:5px;padding:10px;border-style:none none none solid;font-size:14px;line-height:25px;font-family:arial,helvetica,sans-serif;text-shadow:rgb(34,95,135) 0 1px 0;color:rgb(255,255,255);border-radius:4px;box-shadow:rgb(153,153,153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253,208,0);background-color:rgb(55,57,57);box-sizing:border-box !important;word-wrap:break-word !important">4 总结</div></div><p style="padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin:10px auto;min-height:1em;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;box-sizing:border-box !important;word-wrap:break-word !important">在总结部分，来个漫画把。希望对大家找工作有帮助<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><img src="分布式之缓存击穿_files/640 [6].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(62,62,62);font-size:16px;font-variant-numeric:normal;font-variant-east-asian:normal;line-height:25.6px;white-space:normal;widows:1;border-width:initial;border-style:none;border-color:initial;background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;font-size:16px;white-space:normal;min-height:1em;color:rgb(62,62,62);background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640.gif" type="image/gif" data-filename="640.gif" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;color:rgb(79,79,79);letter-spacing:0.5px;vertical-align:top;box-sizing:border-box !important;word-wrap:break-word !important;width:558px !important;visibility:visible !important" width="558px"/></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;font-size:16px;white-space:normal;min-height:1em;color:rgb(62,62,62);background-color:rgb(255,255,255);line-height:25.6px;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:14px;color:rgb(84,141,212);box-sizing:border-box !important;word-wrap:break-word !important">推荐阅读：</span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;font-size:16px;white-space:normal;min-height:1em;background-color:rgb(255,255,255);line-height:25.6px;color:rgb(51,51,51);box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important">技术：</span><a href="http://mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&amp;mid=2247484184&amp;idx=1&amp;sn=e0aed5908e4cd83fdb883e5c6f8d04a5&amp;chksm=fbb28ae6ccc503f0c565cb95a8bcb37de85c7760cb8059828af7913e4b4bb6b0317dd8651460&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#607fa6;max-width:100% !important;-webkit-box-sizing:border-box !important;text-decoration:underline;font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">分布式唯一ID极简教程</a></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;font-size:16px;white-space:normal;min-height:1em;background-color:rgb(255,255,255);line-height:25.6px;color:rgb(51,51,51);box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(62,62,62);font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important">职场：</span><a href="http://mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&amp;mid=2247484334&amp;idx=1&amp;sn=c001364f30ebab9e3edab66f465a756c&amp;chksm=fbb28a50ccc50346ed0ccf35899fcd54fc4bd6168cb726cb643998afc6117f7bec1d1face1b8&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#607fa6;max-width:100% !important;-webkit-box-sizing:border-box !important;text-decoration:underline;font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">程序员职业规划</a></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin-bottom:8px;font-size:16px;white-space:normal;min-height:1em;color:rgb(62,62,62);background-color:rgb(255,255,255);line-height:25.6px;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important">分享：</span><a href="http://mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&amp;mid=2247483707&amp;idx=1&amp;sn=168c163e852e826d52c07b887977ff2f&amp;chksm=fbb288c5ccc501d3b0e43d8aca0cffcadfd0dd859f6840ca76fb8593d4593ef48134b22bb368&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#607fa6;max-width:100% !important;-webkit-box-sizing:border-box !important;text-decoration:underline;font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">2T架构师学习资料干货分享</a></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;font-size:16px;white-space:normal;min-height:1em;color:rgb(62,62,62);background-color:rgb(255,255,255);line-height:25.6px;text-align:center;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:15px;text-indent:32px;color:rgb(84,141,212);box-sizing:border-box !important;word-wrap:break-word !important">觉得有帮助？请转发给更多人！</span></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:auto;margin-left:auto;font-size:16px;white-space:normal;color:rgb(62,62,62);background-color:rgb(255,255,255);line-height:25.6px;border-width:initial;border-style:none;border-color:initial;width:20em;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;width:320px;height:auto;overflow:hidden;box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;padding-right:0.5em;width:128px;display:inline-block;vertical-align:top;text-align:center;word-wrap:break-word !important"><img src="分布式之缓存击穿_files/640 [7].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:120px !important;visibility:visible !important" title="http://7xo6kd.com1.z0.glb.clouddn.com/upload-ueditor-image-20170810-1502363196469045824.png" width="120px"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;padding-left:0.5em;width:192px;display:inline-block;border-left:1px solid rgb(173,173,173);font-size:0.875em;line-height:1.5em;vertical-align:top;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">架构师小秘圈，聚集10万架构师的小圈子！不定期分享技术干货，行业秘闻！汇集各类奇妙好玩的话题和流行动向！长按左侧图片，扫码加入架构师微信群！</p></div></div></div></div></div><ul style="margin:0;padding:0"></ul></div></div></span>
</div></body></html> 