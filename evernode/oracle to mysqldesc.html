<html>
<head>
  <title>oracle to mysql/desc</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7318"/>
<h1>oracle to mysql/desc</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/8/8 8:46</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2018/8/8 8:47</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="color: #808080;">-- oracle to desc</span></div><div><span style="color: #cc7832; font-weight: bold;">SELECT</span></div><div>T1.COLUMN_NAME Field_Name<span style="color: #cc7832;">,</span></div><div><a href="http://t2.comments/">T2.COMMENTS</a> Meaning<span style="color: #cc7832;">,</span></div><div>T1.DATA_TYPE || <span style="color: #6a8759;">'('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span> <span style="color: #cc7832; font-weight: bold;">Type</span><span style="color: #cc7832;">,</span></div><div>T1.NULLABLE</div><div><span style="color: #cc7832; font-weight: bold;">FROM</span> USER_TAB_COLS T1<span style="color: #cc7832;">,</span> USER_COL_COMMENTS T2</div><div><span style="color: #cc7832; font-weight: bold;">WHERE</span> T1.TABLE_NAME = T2.TABLE_NAME</div><div><span style="color: #cc7832; font-weight: bold;">AND</span> T1.COLUMN_NAME = T2.COLUMN_NAME</div><div><span style="color: #cc7832; font-weight: bold;">AND</span> T1.TABLE_NAME =<span style="color: #6a8759;">'BD_CITY'</span> <span style="color: #cc7832;">;</span></div><div><span style="color: #808080;">-- oracle to mysql table</span></div><div><span style="color: #cc7832; font-weight: bold;">SELECT</span></div><div>T1.COLUMN_NAME Field_Name<span style="color: #cc7832;">,</span></div><div>DECODE(T1.DATA_TYPE<span style="color: #cc7832;">,</span><span style="color: #6a8759;">'VARCHAR2'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'varchar('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span><span style="color: #cc7832;">,</span></div><div><span style="color: #6a8759;">'DATE'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'datetime'</span><span style="color: #cc7832;">,</span></div><div><span style="color: #6a8759;">'NUMBER'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'bigint('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span><span style="color: #cc7832;">,</span></div><div>T1.DATA_TYPE || <span style="color: #6a8759;">'('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span> )<span style="color: #cc7832; font-weight: bold;">Type</span><span style="color: #cc7832;">,</span></div><div>DECODE(T1.NULLABLE<span style="color: #cc7832;">,</span><span style="color: #6a8759;">'Y'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'DEFAULT NULL'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'NOT NULL'</span>) <span style="color: #cc7832; font-weight: bold;">NULLABLE</span><span style="color: #cc7832;">,</span></div><div>DECODE( <a href="http://t2.comments/">T2.COMMENTS</a><span style="color: #cc7832;">,</span><span style="color: #6a8759;">''</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">','</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'COMMENT</span> ''<span style="color: #6a8759;">'</span> || <a href="http://t2.comments/">T2.COMMENTS</a>||<span style="color: #6a8759;">'</span>''<span style="color: #6a8759;">,'</span> )Meaning</div><div><span style="color: #cc7832; font-weight: bold;">FROM</span> USER_TAB_COLS T1<span style="color: #cc7832;">,</span> USER_COL_COMMENTS T2</div><div><span style="color: #cc7832; font-weight: bold;">WHERE</span> T1.TABLE_NAME = T2.TABLE_NAME</div><div><span style="color: #cc7832; font-weight: bold;">AND</span> T1.COLUMN_NAME = T2.COLUMN_NAME</div><div><span style="color: #cc7832; font-weight: bold;">AND</span> T1.TABLE_NAME =<span style="color: #6a8759;">'S_USER'</span></div><div><span style="color: #cc7832; font-weight: bold;">order by</span> T1.COLUMN_Id<span style="color: #cc7832;">;</span></div><div><span style="color: #808080;">-- to mysql PRIMARY KEY AUTO_INCREMENT</span></div><div><span style="color: #cc7832; font-weight: bold;">select</span> <span style="color: #6a8759;">'ALTER TABLE '</span> || substr(t1.sequence_name<span style="color: #cc7832;">,</span><span style="color: #6897bb;">5</span><span style="color: #cc7832;">,</span><span style="color: #6897bb;">100</span>) ||<span style="color: #6a8759;">' CHANGE '</span> || t2.COLUMN_NAME || <span style="color: #6a8759;">' '</span>|| t2.COLUMN_NAME|| <span style="color: #6a8759;">' '</span>||</div><div>DECODE(T2.DATA_TYPE<span style="color: #cc7832;">,</span><span style="color: #6a8759;">'VARCHAR2'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'varchar('</span> || T2.DATA_LENGTH || <span style="color: #6a8759;">')'</span><span style="color: #cc7832;">,</span></div><div><span style="color: #6a8759;">'DATE'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'datetime'</span><span style="color: #cc7832;">,</span></div><div><span style="color: #6a8759;">'NUMBER'</span><span style="color: #cc7832;">,</span><span style="color: #6a8759;">'bigint('</span> || T2.DATA_LENGTH || <span style="color: #6a8759;">')'</span><span style="color: #cc7832;">,</span></div><div>T2.DATA_TYPE || <span style="color: #6a8759;">'('</span> || T2.DATA_LENGTH || <span style="color: #6a8759;">')'</span> )||<span style="color: #6a8759;">' NOT NULL AUTO_INCREMENT, ADD PRIMARY KEY ('</span>||t2.COLUMN_NAME||<span style="color: #6a8759;">');'</span> pk</div><div><span style="color: #cc7832; font-weight: bold;">from</span> user_sequences t1 <span style="color: #cc7832; font-weight: bold;">inner join</span> USER_TAB_COLS t2 <span style="color: #cc7832; font-weight: bold;">on</span> (t2.TABLE_NAME=substr(t1.sequence_name<span style="color: #cc7832;">,</span><span style="color: #6897bb;">5</span><span style="color: #cc7832;">,</span><span style="color: #6897bb;">100</span>) <span style="color: #cc7832; font-weight: bold;">and</span> t2.COLUMN_Id=<span style="color: #6897bb;">1</span>)</div><div><span style="color: #cc7832; font-weight: bold;">where</span> t1.sequence_name <span style="color: #cc7832; font-weight: bold;">like</span> <span style="color: #6a8759;">'SEQ_BD_%'</span> <span style="color: #cc7832; font-weight: bold;">or</span> t1.sequence_name <span style="color: #cc7832; font-weight: bold;">like</span> <span style="color: #6a8759;">'SEQ_S_%'</span><span style="color: #cc7832;">;</span></div><div><br/></div><div><span style="color: #808080;">-- oracle --&gt; mysql</span></div><div><span style="color: #cc7832; font-weight: bold;">select</span> <span style="color: #6a8759;">'CREATE TABLE '</span> || <span style="color: #cc7832; font-weight: bold;">TABLE_NAME</span> || <span style="color: #6a8759;">' ('</span> || <span style="color: #ffc66d; font-style: italic;">max</span>(r) ||<span style="color: #6a8759;">' , PRIMARY KEY ('</span>||<span style="color: #ffc66d; font-style: italic;">max</span>(pk)||<span style="color: #6a8759;">')) ENGINE=InnoDB DEFAULT CHARSET=utf8'</span> create_table</div><div><span style="color: #cc7832; font-weight: bold;">from</span> (</div><div><span style="color: #cc7832; font-weight: bold;">select TABLE_NAME</span><span style="color: #cc7832;">,</span> wm_concat(cols) over (partition <span style="color: #cc7832; font-weight: bold;">by TABLE_NAME order by</span> COLUMN_Id) r<span style="color: #cc7832;">,</span>pk</div><div><span style="color: #cc7832; font-weight: bold;">from</span>(</div><div><span style="color: #cc7832; font-weight: bold;">SELECT</span> T1.TABLE_NAME<span style="color: #cc7832;">,</span>T1.COLUMN_Id<span style="color: #cc7832;">,</span></div><div>(T1.COLUMN_NAME || <span style="color: #6a8759;">' '</span> ||</div><div>DECODE(T1.DATA_TYPE<span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'VARCHAR2'</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'varchar('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span><span style="color: #cc7832;">,</span></div><div><span style="color: #6a8759;">'DATE'</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'datetime'</span><span style="color: #cc7832;">,</span></div><div><span style="color: #6a8759;">'NUMBER'</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'bigint('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span><span style="color: #cc7832;">,</span></div><div>T1.DATA_TYPE || <span style="color: #6a8759;">'('</span> || T1.DATA_LENGTH || <span style="color: #6a8759;">')'</span>) || <span style="color: #6a8759;">' '</span> ||</div><div>DECODE(T1.NULLABLE<span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'Y'</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'DEFAULT NULL'</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'NOT NULL'</span>) || <span style="color: #6a8759;">' '</span> ||</div><div>DECODE(T1.COLUMN_Id<span style="color: #cc7832;">,</span> <span style="color: #6897bb;">1</span><span style="color: #cc7832;">,</span> DECODE(T3.sequence_name<span style="color: #cc7832;">,</span> <span style="color: #cc7832; font-weight: bold;">null</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">''</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'AUTO_INCREMENT'</span>)<span style="color: #cc7832;">,</span> <span style="color: #6a8759;">''</span>) || <span style="color: #6a8759;">' '</span> ||</div><div>DECODE(<a href="http://t2.comments/">T2.COMMENTS</a><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">''</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">''</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">'COMMENT</span> ''<span style="color: #6a8759;">'</span> || <a href="http://t2.comments/">T2.COMMENTS</a> || <span style="color: #6a8759;">'</span>''<span style="color: #6a8759;">'</span>)</div><div>) cols<span style="color: #cc7832;">,</span></div><div>DECODE(T1.COLUMN_Id<span style="color: #cc7832;">,</span> <span style="color: #6897bb;">1</span><span style="color: #cc7832;">,</span> DECODE(T3.sequence_name<span style="color: #cc7832;">,</span> <span style="color: #cc7832; font-weight: bold;">null</span><span style="color: #cc7832;">,</span> <span style="color: #6a8759;">''</span><span style="color: #cc7832;">,</span> T1.COLUMN_NAME)<span style="color: #cc7832;">,</span> <span style="color: #6a8759;">''</span>)pk</div><div><span style="color: #cc7832; font-weight: bold;">FROM</span> USER_TAB_COLS T1 <span style="color: #cc7832; font-weight: bold;">inner join</span> USER_COL_COMMENTS T2</div><div><span style="color: #cc7832; font-weight: bold;">on</span> (T1.TABLE_NAME = T2.TABLE_NAME <span style="color: #cc7832; font-weight: bold;">AND</span> T1.COLUMN_NAME = T2.COLUMN_NAME)</div><div><span style="color: #cc7832; font-weight: bold;">left join</span> user_sequences T3 <span style="color: #cc7832; font-weight: bold;">on</span> (T1.TABLE_NAME = substr(T3.sequence_name<span style="color: #cc7832;">,</span> <span style="color: #6897bb;">5</span><span style="color: #cc7832;">,</span> <span style="color: #6897bb;">100</span>))</div><div>)</div><div>)</div><div><span style="color: #cc7832; font-weight: bold;">WHERE</span></div><div><span style="color: #cc7832; font-weight: bold;">TABLE_NAME</span> = <span style="color: #6a8759;">'S_RESOURCE'</span></div><div><span style="color: #cc7832; font-weight: bold;">group by TABLE_NAME</span> <span style="color: #cc7832;">;</span></div><div><br/></div></span>
</div></body></html> 