<html>
<head>
  <title>JSP过滤器Filter配置过滤类型汇总 - IT徐胖子的专栏 - 博客频道 - CSDN.NET</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8763"/>
<h1>JSP过滤器Filter配置过滤类型汇总 - IT徐胖子的专栏 - 博客频道 - CSDN.NET</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2015/8/16 22:04</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/woshixuye/article/details/19344459"><i>http://blog.csdn.net/woshixuye/article/details/19344459</i></a></td></tr>
</table>
</div>
<br/>

<div><span><br/><div><div><div><div><h1> JSP过滤器Filter配置过滤类型汇总 </h1><div><div></div></div></div>

   

    <div>
        
    <span>2014-02-17 17:42</span>
    
    <span><a href="http://blog.csdn.net/woshixuye/article/details/19344459#comments" target="_blank">评论</a>(2)</span>
    
    <span><a href="http://blog.csdn.net/woshixuye/article/details/19344459#report" target="_blank" title="举报">举报</a></span>
    
</div>


  

  
  
     



<strong>一、配置方法</strong><br/>
1 映射过滤应用程序中所有资源<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt; //访问当前主机，当前应用程序根下的所有文件包括多级子目录下的所有文件，注意这里*前有“/”<br/>
&lt;/filter-mapping&gt;<br/><br/>2 过滤指定的类型文件资源<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
   &lt;url-pattern&gt;*.html&lt;/url-pattern&gt; //访问当前主机，当前应用程序根目录下的所有html文件，注意：*.html前没有“/”,否则错误<br/>
&lt;/filter-mapping&gt;<br/>
其中*.html要过滤jsp那么就改*.html为*.jsp，但是注意没有“/”斜杠。如果要同时过滤多种类型资源：<br/>
方法1 url-pattern 分开写<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;<br/>
&lt;/filter-mapping&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;//访问当前主机，当前应用程序根目录以所有及子目录下的所有jsp文件<br/>
&lt;/filter-mapping&gt;<br/><br/>方法2 将url-pattern合并<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;*.html;*.jsp&lt;/url-pattern&gt;<br/>
&lt;/filter-mapping&gt;//*.html;*.jsp两类型之间用分号;间隔<br/><br/>3 过滤指定的目录下的所有文件<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;/folder_name/*&lt;/url-pattern&gt;//访问当前主机，当前应用程序根目录下的folder_name子目录（可是多级子目录）下所有文件<br/>
&lt;/filter-mapping&gt;<br/><br/>4 过滤指定的servlet<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;servlet-name&gt;loggerservlet&lt;/servlet-name&gt;<br/>
&lt;/filter-mapping&gt;<br/>
&lt;servlet&gt;<br/>
    &lt;servlet-name&gt;loggerservlet&lt;/servlet-name&gt;<br/>
    &lt;servlet-class&gt;myfilter.LoggerServlet&lt;/servlet-class&gt;<br/>
&lt;/servlet&gt;<br/><br/><br/>
5 过滤指定文件（即单一文件）<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;/simplefilter.html&lt;/url-pattern&gt;<br/>
&lt;/filter-mapping&gt;<br/><br/>6  过滤指定目录下的指定类型的所有文件<br/>
这种情况下在web.xml中无法一次性配置完成，需要结合filter的实现类<br/>
首先在web.xml中配置过滤指定目录下的所有文件<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;/dir_name/*&lt;/url-pattern&gt;<br/>
&lt;/filter-mapping&gt;<br/>
然后在filter的实现类中的doFilter方法中获取请求的uri或者url，判断uri或者url中是否包含指定文件类型的字符串，决定是否过滤<br/>
//获得用户请求的uri<br/>
String uri = request.getRequestURI();<br/>
if(uri.contains(&quot;.jsp&quot;)||uri.contains(&quot;.html&quot;))<br/>
System.out.println(&quot;开始过滤&quot;+url);<br/><br/>7  过滤指定目录下指定类型的单一文件<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;myfilter.LoggerFilter&lt;/filter-class&gt;<br/>
&lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;loggerfilter&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;/dir_name/index.jsp&lt;/url-pattern&gt;<br/>
&lt;/filter-mapping&gt;<br/>
以上都要注意是否有斜杠“/”<br/><br/><br/>
不缓存文件<br/>
&lt;filter&gt;<br/>
    &lt;filter-name&gt;NoCache&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;com.sys.common.Filters.ResponseHeaderFilter<br/>
        &lt;/filter-class&gt;<br/>
    &lt;init-param&gt;<br/>
      &lt;param-name&gt;Cache-Control&lt;/param-name&gt;<br/>
      &lt;param-value&gt;no-cache, must-revalidate&lt;/param-value&gt;<br/>
    &lt;/init-param&gt;<br/>
  &lt;/filter&gt;<br/><br/>缓存文件一周<br/>
  &lt;filter&gt;<br/>
    &lt;filter-name&gt;CacheForWeek&lt;/filter-name&gt;<br/>
    &lt;filter-class&gt;com.sys.common.Filters.ResponseHeaderFilter<br/>
        &lt;/filter-class&gt;<br/>
    &lt;init-param&gt;<br/>
      &lt;param-name&gt;Cache-Control&lt;/param-name&gt;<br/>
      &lt;param-value&gt;max-age=604800, public&lt;/param-value&gt;<br/>
    &lt;/init-param&gt;<br/>
  &lt;/filter&gt;<br/>
&lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;CacheForWeek&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;/images/*&lt;/url-pattern&gt;<br/>
  &lt;/filter-mapping&gt;<br/>
  &lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;CacheForWeek&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;<br/>
  &lt;/filter-mapping&gt;<br/>
  &lt;filter-mapping&gt;<br/>
    &lt;filter-name&gt;CacheForWeek&lt;/filter-name&gt;<br/>
    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;<br/>
  &lt;/filter-mapping&gt;<br/><br/>自定义的filter：<br/>
public class ResponseHeaderFilter implements Filter {<br/>
    FilterConfig fc;<br/>
    public void doFilter(ServletRequest req, ServletResponse res,FilterChain chain) throws IOException, ServletException {<br/>
        HttpServletResponse response = (HttpServletResponse) res;<br/>
        for (Enumeration e = fc.getInitParameterNames(); e.hasMoreElements();) {<br/>
            String headerName = (String) e.nextElement();<br/>
            response.addHeader(headerName, fc.getInitParameter(headerName));<br/>
        }<br/>
        chain.doFilter(req, response);<br/>
    }<br/><br/>public void init(FilterConfig filterConfig) {<br/>
        this.fc = filterConfig;<br/>
    }<br/><br/>public void destroy() {<br/>
        this.fc = null;<br/>
    }<p>原帖地址：http://blog.sina.com.cn/s/blog_7ffb8dd501013hqc.html</p>
    
</div></div></div><br/></span>
</div></body></html> 