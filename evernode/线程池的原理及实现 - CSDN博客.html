<html>
<head>
  <title>线程池的原理及实现 - CSDN博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6090"/>
<h1>线程池的原理及实现 - CSDN博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/11/1 15:39</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/hsuxu/article/details/8985931"><i>http://blog.csdn.net/hsuxu/article/details/8985931</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:62.5%;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div style="box-sizing:border-box;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:16px;line-height:24px;color:rgb(51, 51, 51);background-color:rgb(244, 244, 244);font-weight:normal;"><div style="box-sizing:border-box;font-weight:normal;"><span style="box-sizing:border-box;"><div style="box-sizing:border-box;background-color:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.0470588) 0px 2px 4px 0px;">
            <h1 style="margin:0px;box-sizing:border-box;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:24px;font-weight:bold;line-height:38px;color:rgb(44, 48, 51);padding:0px 29px;">线程池的原理及实现</h1>
            <div style="box-sizing:border-box;margin:0px;font-weight:normal;display:block;padding:0px 29px 8px;color:rgb(136, 136, 136);border-bottom:1px solid rgb(229, 229, 229);font-size:14px;line-height:38px;margin-top:5px;"><span style="font-weight:normal;color:rgb(136, 136, 136);font-size:14px;line-height:38px;display:table;"> </span>
                <div style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;float:left;">
                    <span style="box-sizing:border-box;margin:0px;font-weight:normal;padding:2px 6px;border:1px solid rgb(228, 235, 244);font-size:14px;color:rgb(120, 144, 156);margin-right:20px;">转载</span>
                    <span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;display:inline-block;color:rgb(187, 187, 187);font-size:14px;">2013年05月28日 17:50:44</span>
                </div>
				
                <ul style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;list-style:none;float:right;margin-top:5px;">
                    <li style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;list-style:none;float:left;margin-left:30px;line-height:28px;"></li>
                    

                    
                    
                </ul>
            <span style="font-weight:normal;color:rgb(136, 136, 136);font-size:14px;line-height:38px;display:block;clear:both;height:0px;visibility:hidden;">.</span></div>
            <div style="box-sizing:border-box;margin:0px;font-weight:normal;padding:20px 30px 0px;margin-bottom:30px;color:rgb(69, 69, 69);overflow:hidden;">
                
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;color:#ff0000;"><strong style="box-sizing:border-box;font-weight:bold;">1、线程池简介：</strong></span><br style="box-sizing:border-box;"/>
    多线程技术主要解决处理器单元内多个线程执行的问题，它可以显著减少处理器单元的闲置时间，增加处理器单元的吞吐能力。    <br style="box-sizing:border-box;"/>
    假设一个服务器完成一项任务所需时间为：T1 创建线程时间，T2 在线程中执行任务的时间，T3 销毁线程时间。<br style="box-sizing:border-box;"/>
<br style="box-sizing:border-box;"/>
    如果：T1 + T3 远大于 T2，则可以采用线程池，以提高服务器性能。<br style="box-sizing:border-box;"/>
                一个线程池包括以下四个基本组成部分：<br style="box-sizing:border-box;"/>
                1、线程池管理器（ThreadPool）：用于创建并管理线程池，包括 创建线程池，销毁线程池，添加新任务；<br style="box-sizing:border-box;"/>
                2、工作线程（PoolWorker）：线程池中线程，在没有任务时处于等待状态，可以循环的执行任务；<br style="box-sizing:border-box;"/>
                3、任务接口（Task）：每个任务必须实现的接口，以供工作线程调度任务的执行，它主要规定了任务的入口，任务执行完后的收尾工作，任务的执行状态等；<br style="box-sizing:border-box;"/>
                4、任务队列（taskQueue）：用于存放没有处理的任务。提供一种缓冲机制。<br style="box-sizing:border-box;"/>
                <br style="box-sizing:border-box;"/>
    线程池技术正是关注如何缩短或调整T1,T3时间的技术，从而提高服务器程序性能的。它把T1，T3分别安排在服务器程序的启动和结束的时间段或者一些空闲的时间段，这样在服务器程序处理客户请求时，不会有T1，T3的开销了。<br style="box-sizing:border-box;"/>
    线程池不仅调整T1,T3产生的时间段，而且它还显著减少了创建线程的数目，看一个例子：<br style="box-sizing:border-box;"/>
    假设一个服务器一天要处理50000个请求，并且每个请求需要一个单独的线程完成。在线程池中，线程数一般是固定的，所以产生线程总数不会超过线程池中线程的数目，而如果服务器不利用线程池来处理这些请求则线程总数为50000。一般线程池大小是远小于50000。所以利用线程池的服务器程序不会为了创建50000而在处理请求时浪费时间，从而提高效率。<br style="box-sizing:border-box;"/>
</span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;">    代码实现中并没有实现任务接口，而是把Runnable对象加入到线程池管理器（ThreadPool），然后剩下的事情就由线程池管理器（ThreadPool）来完成了</span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"></span> </p>
<span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"></span>
<div style="text-align:left;box-sizing:border-box;font-weight:normal;padding:0px;width:99%;overflow:auto;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;background-color:rgb(231, 229, 220);font-size:12px;position:relative;overflow-y:hidden;overflow-x:auto;margin:18px 0px;">
<div style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;padding-left:45px;">
<div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;margin:0px;font-weight:normal;font-stretch:normal;font-size:9px;padding:3px 8px 10px 10px;font-variant:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);font-style:normal;"><strong style="box-sizing:border-box;font-weight:bold;">[java]</strong> <a href="http://blog.csdn.net/touch_2011/article/details/6914468#" style="margin-right:10px;outline:none;font-weight:normal;box-sizing:border-box;background-position:left top;border:none;margin:0px;width:16px;background:none;text-decoration:none;background-repeat:no-repeat;padding:1px;display:inline-block;background-color:inherit;height:16px;text-indent:-2000px;color:rgb(160, 160, 160);font-size:9px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);" target="_blank" title="view plain">
view plain</a><a href="http://blog.csdn.net/touch_2011/article/details/6914468#" style="margin-right:10px;outline:none;font-weight:normal;box-sizing:border-box;background-position:left top;border:none;margin:0px;width:16px;background:none;text-decoration:none;background-repeat:no-repeat;padding:1px;display:inline-block;background-color:inherit;height:16px;text-indent:-2000px;color:rgb(160, 160, 160);font-size:9px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);" target="_blank" title="copy">copy</a><div style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;position:absolute;left:456px;top:783px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;background-color:rgb(255, 255, 255);"></div></div></div>
</div>
<ol start="1" style="box-sizing:border-box;font-weight:normal;padding:0px;border:none;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);list-style:decimal;margin:0px 0px 1px 45px;">
<li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">package</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> mine.util.thread;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">import</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> java.util.LinkedList;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">import</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> java.util.List;  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">/**</span> </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> * 线程池类，线程管理器：创建线程，执行任务，销毁线程，获取线程基本信息</span> </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> */</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">final</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">class</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 线程池中默认线程的个数为5</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> worker_num = </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">5</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 工作线程</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> WorkThread[] workThrads;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 未处理的任务</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">volatile</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> finished_task = </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 任务队列，作为一个缓冲,List线程不安全</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> List&lt;Runnable&gt; taskQueue = </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> LinkedList&lt;Runnable&gt;();  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool threadPool;  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 创建具有默认线程个数的线程池</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool() {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">this</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">(</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">5</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">);  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 创建线程池,worker_num为线程池中工作线程的个数</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool(</span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> worker_num) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        ThreadPool.worker_num = worker_num;  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        workThrads = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> WorkThread[worker_num];  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">for</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (</span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> i = </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">; i &lt; worker_num; i++) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            workThrads[i] = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> WorkThread();  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            workThrads[i].start();<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 开启线程池中的线程</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 单态模式，获得一个默认线程个数的线程池</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool getThreadPool() {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">return</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> getThreadPool(ThreadPool.worker_num);  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 单态模式，获得一个指定线程个数的线程池,worker_num(&gt;0)为线程池中工作线程的个数</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// worker_num&lt;=0创建默认的工作线程个数</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool getThreadPool(</span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> worker_num1) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">if</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (worker_num1 &lt;= </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">)  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            worker_num1 = ThreadPool.worker_num;  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">if</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (threadPool == </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">)  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            threadPool = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> ThreadPool(worker_num1);  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">return</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> threadPool;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 执行任务,其实只是把任务加入任务队列，什么时候执行有线程池管理器觉定</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> execute(Runnable task) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">synchronized</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (taskQueue) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            taskQueue.add(task);  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            taskQueue.notify();  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 批量执行任务,其实只是把任务加入任务队列，什么时候执行有线程池管理器觉定</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> execute(Runnable[] task) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">synchronized</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (taskQueue) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">for</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (Runnable t : task)  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                taskQueue.add(t);  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            taskQueue.notify();  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 批量执行任务,其实只是把任务加入任务队列，什么时候执行有线程池管理器觉定</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> execute(List&lt;Runnable&gt; task) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">synchronized</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (taskQueue) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">for</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (Runnable t : task)  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                taskQueue.add(t);  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            taskQueue.notify();  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 销毁线程池,该方法保证在所有任务都完成的情况下才销毁所有线程，否则等待任务完成才销毁</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> destroy() {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">while</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (!taskQueue.isEmpty()) {</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 如果还有任务没执行完成，就先睡会吧</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">try</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                Thread.sleep(<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">10</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">);  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            } <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">catch</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (InterruptedException e) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                e.printStackTrace();  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 工作线程停止工作，且置为null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">for</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (</span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> i = </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">; i &lt; worker_num; i++) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            workThrads[i].stopWorker();  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            workThrads[i] = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        threadPool=<span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        taskQueue.clear();<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 清空任务队列</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 返回工作线程的个数</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> getWorkThreadNumber() {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">return</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> worker_num;  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 返回已完成任务的个数,这里的已完成是只出了任务队列的任务个数，可能该任务并没有实际执行完成</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> getFinishedTasknumber() {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">return</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> finished_task;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 返回任务队列的长度，即还没处理的任务个数</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> getWaitTasknumber() {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">return</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> taskQueue.size();  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 覆盖toString方法，返回线程池信息：工作线程个数和已完成任务个数</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(100, 100, 100);">@Override</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> String toString() {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">return</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">&quot;WorkThread number:&quot;</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> + worker_num + </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">&quot;  finished task number:&quot;</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                + finished_task + <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">&quot;  wait task number:&quot;</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> + getWaitTasknumber();  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">/**</span> </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">     * 内部类，工作线程</span> </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">     */</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">class</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> WorkThread </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">extends</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Thread {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 该工作线程是否有效，用于结束该工作线程</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">boolean</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> isRunning = </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">true</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">/*</span> </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">         * 关键所在啊，如果任务队列不空，则取出任务执行，若任务队列空，则等待</span> </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">         */</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(100, 100, 100);">@Override</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> run() {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            Runnable r = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">while</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (isRunning) {</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 注意，若线程无效则自然结束run方法，该线程就没用了</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">synchronized</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (taskQueue) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">while</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (isRunning &amp;&amp; taskQueue.isEmpty()) {</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 队列为空</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">try</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                            taskQueue.wait(<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">20</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                        } <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">catch</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (InterruptedException e) {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                            e.printStackTrace();  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                        }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">if</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (!taskQueue.isEmpty())  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                        r = taskQueue.remove(<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">);</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 取出任务</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">if</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> (r != </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                    r.run();<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 执行任务</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                finished_task++;  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">                r = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">null</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 停止工作，让该线程自然执行完run方法，自然结束</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> stopWorker() {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            isRunning = <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">false</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">}  </span></li></ol>
</div>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"> </p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;">测试代码：</p>
<div style="text-align:left;box-sizing:border-box;font-weight:normal;padding:0px;width:99%;overflow:auto;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;background-color:rgb(231, 229, 220);font-size:12px;position:relative;overflow-y:hidden;overflow-x:auto;margin:18px 0px;">
<div style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;padding-left:45px;">
<div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;margin:0px;font-weight:normal;font-stretch:normal;font-size:9px;padding:3px 8px 10px 10px;font-variant:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);font-style:normal;"><strong style="box-sizing:border-box;font-weight:bold;">[java]</strong> <a href="http://blog.csdn.net/touch_2011/article/details/6914468#" style="margin-right:10px;outline:none;font-weight:normal;box-sizing:border-box;background-position:left top;border:none;margin:0px;width:16px;background:none;text-decoration:none;background-repeat:no-repeat;padding:1px;display:inline-block;background-color:inherit;height:16px;text-indent:-2000px;color:rgb(160, 160, 160);font-size:9px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);" target="_blank" title="view plain">
view plain</a><a href="http://blog.csdn.net/touch_2011/article/details/6914468#" style="margin-right:10px;outline:none;font-weight:normal;box-sizing:border-box;background-position:left top;border:none;margin:0px;width:16px;background:none;text-decoration:none;background-repeat:no-repeat;padding:1px;display:inline-block;background-color:inherit;height:16px;text-indent:-2000px;color:rgb(160, 160, 160);font-size:9px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);" target="_blank" title="copy">copy</a><div style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;position:absolute;left:456px;top:4624px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;background-color:rgb(255, 255, 255);"></div></div></div>
</div>
<ol start="1" style="box-sizing:border-box;font-weight:normal;padding:0px;border:none;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);list-style:decimal;margin:0px 0px 1px 45px;">
<li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">package</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> mine.util.thread;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//测试线程池</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">class</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> TestThreadPool {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> main(String[] args) {  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 创建3个线程的线程池</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        ThreadPool t = ThreadPool.getThreadPool(<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">3</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        t.execute(<span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Runnable[] { </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task(), </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task(), </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task() });  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        t.execute(<span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Runnable[] { </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task(), </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task(), </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">new</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task() });  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        System.out.println(t);  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        t.destroy();<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 所有线程都执行完成才destory</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        System.out.println(t);  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 任务类</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">class</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Task </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">implements</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> Runnable {  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">private</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">static</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">volatile</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">int</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> i = </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">1</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(100, 100, 100);">@Override</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        <span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">public</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> </span><span style="background-color:inherit;box-sizing:border-box;background:rgb(0, 102, 170);font-size:14px;border-radius:2px;word-wrap:normal;padding:0px;border:none;margin:0px;color:rgb(0, 102, 153);font-weight:bold;">void</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> run() {</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 执行任务</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">            System.out.println(<span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">&quot;任务 &quot;</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;"> + (i++) + </span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">&quot; 完成&quot;</span><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">        }  </span></li><li style="background-color:rgb(255, 255, 255);box-sizing:border-box;font-weight:normal;color:inherit;border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);box-sizing:border-box;font-weight:normal;color:rgb(92, 92, 92);border:none;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);line-height:150%;list-style-type:decimal-leading-zero;list-style:decimal;display:list-item;margin:0px;list-style-position:outside;padding:0px 3px 0px 10px;"><span style="box-sizing:border-box;font-weight:normal;margin:0px;padding:0px;border:none;color:black;background-color:inherit;">}  </span></li></ol>
</div>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><br style="box-sizing:border-box;"/>
 </p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;">运行结果：</span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;">WorkThread number:3  finished task number:0  wait task number:6<br style="box-sizing:border-box;"/>
任务 1 完成<br style="box-sizing:border-box;"/>
任务 2 完成<br style="box-sizing:border-box;"/>
任务 3 完成<br style="box-sizing:border-box;"/>
任务 4 完成<br style="box-sizing:border-box;"/>
任务 5 完成<br style="box-sizing:border-box;"/>
任务 6 完成<br style="box-sizing:border-box;"/>
WorkThread number:3  finished task number:6  wait task number:0<br style="box-sizing:border-box;"/>
</span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;">分析：由于并没有任务接口，传入的可以是自定义的任何任务，所以线程池并不能准确的判断该任务是否真正的已经完成（真正完成该任务是这个任务的run方法执行完毕），只能知道该任务已经出了任务队列，正在执行或者已经完成。</span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"></span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;color:#ff0000;font-size:16px;"><strong style="box-sizing:border-box;font-weight:bold;">2、java类库中提供的线程池简介：</strong></span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;color:#000000;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"><strong style="box-sizing:border-box;font-weight:bold;">     java提供的线程池更加强大，相信理解线程池的工作原理，看类库中的线程池就不会感到陌生了。</strong><br style="box-sizing:border-box;"/>
</span></span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"><img src="线程池的原理及实现 - CSDN博客_files/0_1319784225fRSR.gif.jpg" type="image/jpeg" data-filename="0_1319784225fRSR.gif.jpg" alt="" height="453" style="box-sizing:border-box;border:0px;vertical-align:middle;outline:none;max-width:100%;" width="860"/></span></p>
<p style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-weight:normal;font-size:16px;"><img src="线程池的原理及实现 - CSDN博客_files/0_1319784243mu5f.gif.jpg" type="image/jpeg" data-filename="0_1319784243mu5f.gif.jpg" alt="" height="398" style="box-sizing:border-box;border:0px;vertical-align:middle;outline:none;max-width:100%;" width="860"/></span></p>

            </div>
        </div></span></div></div></div></div><br/></div></span>
</div></body></html> 