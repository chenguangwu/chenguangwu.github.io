<html>
<head>
  <title>（转）HttpClient基础 - 攀升·Uranus - C++博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5648"/>
<h1>（转）HttpClient基础 - 攀升·Uranus - C++博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/27 11:42</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.cppblog.com/iuranus/archive/2010/07/04/119311.html"><i>http://www.cppblog.com/iuranus/archive/2010/07/04/119311.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-size:14px;font-family:Arial;background-color:rgb(217, 214, 203);word-wrap:break-word;"><div><table style="background-color:rgb(238, 238, 238);"><tbody><tr><td style="font-family:Arial;font-size:12px;background-color:white;vertical-align:top;"><div><div style="border-image:initial;font-family:Arial;font-size:14px;line-height:150%;"><div>
		<h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951362" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:14.5pt;color:black;line-height:32px;"><span><span style="font-family:黑体;">1.1</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">      </span></span></span></span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">执行请求</span></span></a><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的最重要的功能是执行</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法。一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法的执行涉及到一个或多个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求或</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">响应的交流，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">通常是在内部处理的。<span style="line-height:24px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;background-position:initial initial;background-repeat:initial initial;">用户将提供一个执行请求对象，</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;background-position:initial initial;background-repeat:initial initial;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;font-family:宋体;background-position:initial initial;background-repeat:initial initial;">发送请求到目标服务器返回一个相应的响应对象，如果执行失败则抛出一个异常。</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">所以，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient API</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的主要切入点是</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的接口，它定义了上述约定。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">下面是一个请求执行过程中的最简单形式的例子：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpClient httpclient = new DefaultHttpClient();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://localhost/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = httpclient.execute(httpget);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>InputStream instream = entity.getContent();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>int l;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>byte[] tmp = new byte[2048];</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>while ((l = instream.read(tmp)) != -1) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951363" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.1.1</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span style="font-family:宋体;">HTTP</span></span></span></a><span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">请求</span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">所有的</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求包含一个由请求行组成的一个方法名，一个请求的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">URI</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议的版本。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的支持在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP/1.1</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">规范中定义的所有的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">GET, HEAD, POST, PUT, DELETE, TRACE </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> OPTIONS</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。每有一个方法都有一个对应的类：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpGet</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpHead</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpPost</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpPut</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpDelete</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpTrace</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpOptions</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span><span style="line-height:24px;font-size:12pt;font-family:宋体;">所有的这些类均实现了</span><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpUriRequest</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口，故可以作为</span><span lang="EN-US" style="line-height:24px;font-size:12pt;">execute</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">的执行参数使用。<span style="line-height:24px;">请求</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">URI</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">是能够应用请求的统一资源标识符。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">URI</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">包含一个协议计划</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">protocol scheme</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，主机名</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">host name,</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，可选的端口</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">optional port</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，资源的路径</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">resource path</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，可选的查询</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">optional query</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和可选的片段</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">optional fragment</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;"> </span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">     </span>&quot;http://www.google.com/search?hl=en&amp;q=httpclient&amp;btnG=Google+Search&amp;aq=f&amp;oq=&quot;);</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">提供了一系列实用的方法来简化创建和修改请求</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">URI</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">URI</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">可以组装编程：</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">URI uri = URIUtils.createURI(&quot;http&quot;, &quot;www.google.com&quot;, -1, &quot;/search&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;q=httpclient&amp;btnG=Google+Search&amp;aq=f&amp;oq=&quot;, null);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(uri);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(httpget.getURI());</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">http://www.google.com/search?q=httpclient&amp;btnG=Google+Search&amp;aq=f&amp;oq=</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">查询字符串也可以通过添加参数列表来生成</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">:</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">List&lt;NameValuePair&gt; qparams = new ArrayList&lt;NameValuePair&gt;();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">qparams.add(new BasicNameValuePair(&quot;q&quot;, &quot;httpclient&quot;));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">qparams.add(new BasicNameValuePair(&quot;btnG&quot;, &quot;Google Search&quot;));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">qparams.add(new BasicNameValuePair(&quot;aq&quot;, &quot;f&quot;));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">qparams.add(new BasicNameValuePair(&quot;oq&quot;, null));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">URI uri = URIUtils.createURI(&quot;http&quot;, &quot;www.google.com&quot;, -1, &quot;/search&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>URLEncodedUtils.format(qparams, &quot;UTF-8&quot;), null);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(uri);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(httpget.getURI());</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">http://www.google.com/search?q=httpclient&amp;btnG=Google+Search&amp;aq=f&amp;oq=</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951364" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.1.2</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span style="font-family:宋体;">HTTP</span></span></span></a><span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">响应</span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">响应是由服务器收到和解释一个请求消息后返回给客户端的消息。该消息的第一行包含遵循的协议版本</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">,</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">他由一个数字状态代码及其相关的文本来表示。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpStatus.SC_OK, &quot;OK&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(response.getProtocolVersion());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(response.getStatusLine().getStatusCode());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(response.getStatusLine().getReasonPhrase());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(response.getStatusLine().toString());</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HTTP/1.1</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">200</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">OK</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HTTP/1.1 200 OK</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951365" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.1.3</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span lang="EN-US"><span style="font-size:large;font-family:宋体;">Headers</span></span></a><span style="font-size:large;"><span><span style="font-family:宋体;">处理</span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">一个</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">消息可以包含一系列</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">headers</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">参数描述信息，例如内容长度，内容类型等。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的提供方法来检索，添加，删除和枚举</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">headers</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1, </span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;"><span>    </span>HttpStatus.SC_OK, &quot;OK&quot;);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">response.addHeader(&quot;Set-Cookie&quot;, &quot;c1=a; path=/; domain=localhost&quot;);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">response.addHeader(&quot;Set-Cookie&quot;,&quot;c2=b; path=\&quot;/\&quot;, c3=c; domain=\&quot;localhost\&quot;&quot;);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">Header h1 = response.getFirstHeader(&quot;Set-Cookie&quot;);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">System.out.println(h1);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">Header h2 = response.getLastHeader(&quot;Set-Cookie&quot;);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">System.out.println(h2);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">Header[] hs = response.getHeaders(&quot;Set-Cookie&quot;);</span></span></pre><pre style="margin:0px 0px 0px 22px;font-size:1em;"><span lang="EN" style="font-size:12pt;"><span style="font-family:宋体;">System.out.println(hs.length);</span></span></pre></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">Set-Cookie: c1=a; path=/; domain=localhost</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">Set-Cookie: c2=b; path=&quot;/&quot;, c3=c; domain=&quot;localhost&quot;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">2</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">最有效获取所有的给定类型的</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">headers</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方式是使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HeaderIterator</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HttpStatus.SC_OK, &quot;OK&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">response.addHeader(&quot;Set-Cookie&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;c1=a; path=/; domain=localhost&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">response.addHeader(&quot;Set-Cookie&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;c2=b; path=\&quot;/\&quot;, c3=c; domain=\&quot;localhost\&quot;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HeaderIterator it = response.headerIterator(&quot;Set-Cookie&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">while (it.hasNext()) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>System.out.println(it.next());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">Set-Cookie: c1=a; path=/; domain=localhost</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">Set-Cookie: c2=b; path=&quot;/&quot;, c3=c; domain=&quot;localhost&quot;</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">它还提供了方便的方法来解析</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">消息的单个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">header</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">元素</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HttpStatus.SC_OK, &quot;OK&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">response.addHeader(&quot;Set-Cookie&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;c1=a; path=/; domain=localhost&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">response.addHeader(&quot;Set-Cookie&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;c2=b; path=\&quot;/\&quot;, c3=c; domain=\&quot;localhost\&quot;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HeaderElementIterator it = new BasicHeaderElementIterator(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>response.headerIterator(&quot;Set-Cookie&quot;));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">while (it.hasNext()) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HeaderElement elem = it.nextElement();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>System.out.println(elem.getName() + &quot; = &quot; + elem.getValue());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>NameValuePair[] params = elem.getParameters();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>for (int i = 0; i &lt; params.length; i++) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>System.out.println(&quot; &quot; + params[i]);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">c1 = a</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">path=/</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">domain=localhost</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">c2 = b</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">path=/</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">c3 = c</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">domain=localhost</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951366" style="color:rgb(111, 188, 76);text-decoration:none;"><span lang="EN-US"><span><span style="font-size:large;font-family:宋体;">1.1.4</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">   </span></span></span><span lang="EN-US"><span style="font-size:large;font-family:宋体;">HTTP </span></span></a><span><span style="font-family:宋体;"><span style="font-size:large;">实体</span></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">消息的可以进行内容实体和请求或响应关联。可以在一些要求和一些回应中找到实体，因为它们是可选的。实体内附与请求之中。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">规范定义了两个实体内附方法：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">POST</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">PUT</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。响应通常将会附上一个内容实体。但是响应</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HEAD</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法和</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"> <span lang="EN-US" style="line-height:24px;">204 No Content, 304 Not Modified, 205 Reset Content responses </span></span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">除外。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的区分三种不同实体的地方在于内容来源于：</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"><span lang="EN-US" style="line-height:24px;"></span></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24.1pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><strong><span lang="EN-US" style="line-height:24px;font-size:12pt;">streamed</span></strong></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">流媒体：内容是从收到的流，或在运行中产生的。特别是包括被从</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">响应收到的实体。流媒体的实体一般不可重复。</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"><span lang="EN-US" style="line-height:24px;"></span></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24.1pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><strong><span lang="EN-US" style="line-height:24px;font-size:12pt;">self-contained</span></strong></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">独立的：内容是在内存或以从一个连接或其他实体的独立获得的。独立的的实体，一般可重复的。这种类型的实体将主要用于内附在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求中。</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"><span lang="EN-US" style="line-height:24px;"></span></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24.1pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><strong><span lang="EN-US" style="line-height:24px;font-size:12pt;">wrapping</span></strong></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">包装：实体内容是从另一个实体获得。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">当得到一个</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">响应流的内容的时候，这种区分对于连接管理是很重要的。对于请求实体，通过应用程序来创建和只通过使用的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">发送，流和自载之间差别很小。在这种情况下，建议考虑非重复的流实体，以及那些重复的自载实体。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h4 style="margin-right:0cm;font-family:verdana, sans-serif;line-height:21px;font-weight:normal;padding-left:0px;margin-left:43.2pt;font-size:14px;margin-top:14pt;margin-bottom:14.5pt;padding-top:0px;padding-right:0px;padding-bottom:0px;"><span lang="EN-US"><span><span style="font-size:large;font-family:黑体;">1.1.4.1</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">             </span></span></span><span style="font-family:黑体;"><span style="font-size:large;">重复实体</span></span></h4><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">一个实体可以是可重复的，这意味着它的内容可以被读取一次以上。唯一有可能是的独立的实体（如</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ByteArrayEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">或</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">StringEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（））</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h4 style="margin-right:0cm;font-family:verdana, sans-serif;line-height:21px;font-weight:normal;padding-left:0px;margin-left:43.2pt;font-size:14px;margin-top:14pt;margin-bottom:14.5pt;padding-top:0px;padding-right:0px;padding-bottom:0px;"><span lang="EN-US"><span><span style="font-size:large;font-family:黑体;">1.1.4.2</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">             </span></span></span><span style="font-size:large;"><span style="font-family:黑体;">使用</span><span lang="EN-US"><span style="font-family:黑体;">HTTP</span></span><span style="font-family:黑体;">实体</span></span></h4><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">由于一个实体能够表示二进制和字符的内容，它可以提供编码的支持（支持文字、</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">IE</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和字符内容）。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">这个实体在执行封闭内容的请求的时候或者在请求成功和响应返回成功的时候被创建。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">若要读取从实体内容，一可以通过检索</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">getContent</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）方法，它返回一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.io.InputStream</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，或一个可以提供一个输出流的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">writeTo</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">OutputStream</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">中）方法的输入流，这将返回已被写入给定的流的所有内容。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">当通过传入的消息收到实体，方法</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">getContentType</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">getContentLength</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）方法可用于阅读通用元数据</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">metadata</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Content-Type</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Content-Length headers</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（如果可用）。由于</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Content-Type header</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">可以包含一个像</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">text/plain</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">或者</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">text/html</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的文本</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">mime-types</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">character encoding</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">getContentEncoding</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）方法用来读取此信息。如果</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">headers</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">是不可用，返回的长度是</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">-1</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">content type</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">并为</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">NUL</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。如果</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Content – Type header</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">可用，将返回一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">header</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">对象。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">当创建了一个即将卸任的消息实体，该</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">meta data</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">必须提供由该实体的创造者。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">StringEntity myEntity = new StringEntity(&quot;important message&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;UTF-8&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(myEntity.getContentType());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(myEntity.getContentLength());</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(EntityUtils.getContentCharSet(myEntity));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(EntityUtils.toString(myEntity));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(EntityUtils.toByteArray(myEntity).length);</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">stdout &gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">Content-Type: text/plain; charset=UTF-8</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">17</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">UTF-8</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">important message</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">17</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951367" style="color:rgb(111, 188, 76);text-decoration:none;"><span lang="EN-US"><span><span style="font-size:large;font-family:宋体;">1.1.5</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">   </span></span></span><span style="font-family:宋体;"><span style="font-size:large;">确保资源释放</span></span></a></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">当响应实体完成之后，重要的是要确保所有的实体内容已被完全消耗，使该连接可以安全地返回到连接池，重新由连接管理器提供给后续请求使用。最简单的方法是调用</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">consumeContent</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）方法来消耗流上的所有可用的内容。当检测到内容已经达到流末尾的时候，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">会自动释放底层连接返回到连接管理器。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">consumeContent</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）方法多次调用也是安全的。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">当只有小部分实体响应内容需要被检索和消费。其余内容，使用可重复的连接性能损失太大，可以简单地调用</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpUriRequest</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">abort()</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法来终止请求。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://localhost/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = httpclient.execute(httpget);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>InputStream instream = entity.getContent();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>int byteOne = instream.read();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>int byteTwo = instream.read();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>// Do not need the rest</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>httpget.abort();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">该连接将不可重用，但是所有资源会被释放。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951368" style="color:rgb(111, 188, 76);text-decoration:none;"><span lang="EN-US"><span><span style="font-size:large;font-family:宋体;">1.1.6</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">   </span></span></span><span style="font-family:宋体;"><span style="font-size:large;">获取实体内容</span></span></a></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">获取实体内容推荐的方法是通过使用</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">getContent</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）或</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">writeTo</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">OutputStream</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">中）方法。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的还配备了</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">EntityUtils</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类，它暴露了一些静态方法，以更轻松地阅读一个实体的内容或资料。使用这个类的方法和直接使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.io.InputStream</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法不同的是，他可以检索字符串中的全部内容机构</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">/</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">字节数组。强烈建议不要使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">EntityUtils</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，除非响应实体来自一个可信赖的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">服务器和已知的有限长度。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://localhost/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = httpclient.execute(httpget);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>long len = entity.getContentLength();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>if (len != -1 &amp;&amp; len &lt; 2048) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>System.out.println(EntityUtils.toString(entity));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>} else {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>// Stream content out</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">在某些情况下，实体内容可能需要能够读被多次读取。在这种情况下实体的内容必须以某种方式被缓冲在内存或磁盘上。最简单的方法是通过</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">BufferedHttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类来封装原始实体。原始实体内容可以从内存中的缓冲区来读取。其他方式封装实体都包含原始实体。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://localhost/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = httpclient.execute(httpget);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>entity = new BufferedHttpEntity(entity);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951369" style="color:rgb(111, 188, 76);text-decoration:none;"><span lang="EN-US"><span><span style="font-size:large;font-family:宋体;">1.1.7</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">   </span></span></span><span style="font-family:宋体;"><span style="font-size:large;">生产实体内容</span></span></a></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">提供了一些类可以从</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">连接内容中获得效地流。这些类的实例可以与实体内附如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">POST</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">PUT</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求，以便为即将离任的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求附上实体内容。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的为最常见的数据容器几类，如串，字节数组输入流和文件：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">StringEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ByteArrayEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">InputStreamEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">FileEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">File file = new File(&quot;somefile.txt&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">FileEntity entity = new FileEntity(file, &quot;text/plain; charset=\&quot;UTF-8\&quot;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpPost httppost = new HttpPost(&quot;http://localhost/action.do&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httppost.setEntity(entity);</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请注意</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">InputStreamEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">是不可重复的，因为它只能从底层数据流中读取一次。一般来说，建议实现自定义</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类是自载的，而不是使用通用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">InputStreamEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> FileEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">可以是一个很好的起点。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h4 style="margin-right:0cm;font-family:verdana, sans-serif;line-height:21px;font-weight:normal;padding-left:0px;margin-left:43.2pt;font-size:14px;margin-top:14pt;margin-bottom:14.5pt;padding-top:0px;padding-right:0px;padding-bottom:0px;"><span lang="EN-US"><span><span style="font-size:large;font-family:黑体;">1.1.7.1</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">             </span></span></span><span style="font-family:黑体;"><span style="font-size:large;">动态内容实体</span></span></h4><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">通常的</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实体需要在执行上下文的时候动态生成的。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的提供使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">EntityTemplate</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实体类和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ContentProducer</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口支持动态实体。内容制作是通过写需求的内容到一个输出流，每次请求的时候都会产生。因此，通过</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">EntityTemplate</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">创建实体通常是独立的，重复性好。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><pre style="margin:0px 0px 0px 22px;font-size:1em;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);text-align:justify;background-position:initial initial;background-repeat:initial initial;"><span style="font-family:宋体;"><span lang="EN"><span style="font-size:medium;">C</span></span><span lang="EN" style="font-size:12pt;">ontentProducer cp = new ContentProducer() {</span></span></pre><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>public void writeTo(OutputStream outstream) throws IOException {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>Writer writer = new OutputStreamWriter(outstream, &quot;UTF-8&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>writer.write(&quot;&lt;response&gt;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>writer.write(&quot;<span style="line-height:19px;">  </span>&lt;content&gt;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>writer.write(&quot;<span style="line-height:19px;">    </span>important stuff&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>writer.write(&quot;<span style="line-height:19px;">  </span>&lt;/content&gt;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>writer.write(&quot;&lt;/response&gt;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>writer.flush();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">};</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpEntity entity = new EntityTemplate(cp);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpPost httppost = new HttpPost(&quot;http://localhost/handler.do&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httppost.setEntity(entity);</span></span></span></p></div><h4 style="margin-right:0cm;font-family:verdana, sans-serif;line-height:21px;font-weight:normal;padding-left:0px;margin-left:43.2pt;font-size:14px;margin-top:14pt;margin-bottom:14.5pt;padding-top:0px;padding-right:0px;padding-bottom:0px;"><span lang="EN-US"><span><span style="font-size:large;font-family:黑体;">1.1.7.2</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">             </span></span></span><span lang="EN-US"><span style="font-size:large;font-family:黑体;">HTML forms</span></span></h4><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">许多应用程序经常需要模拟一个</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTML</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">表单提交的过程，例如，以登录到</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Web</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">应用程序或提交的输入数据。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的实体类</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">UrlEncodedFormEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">可以帮助实现这一步。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">List&lt;NameValuePair&gt; formparams = new ArrayList&lt;NameValuePair&gt;();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">formparams.add(new BasicNameValuePair(&quot;param1&quot;, &quot;value1&quot;));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">formparams.add(new BasicNameValuePair(&quot;param2&quot;, &quot;value2&quot;));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formparams, &quot;UTF-8&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpPost httppost = new HttpPost(&quot;http://localhost/handler.do&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httppost.setEntity(entity);</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">这</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">UrlEncodedFormEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实例将使用</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"> <span lang="EN-US" style="line-height:24px;">URL</span></span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">编码的编码参数，并出示下列内容：</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">param1=value1&amp;param2=value2</span></span></span></p></div><h4 style="margin-right:0cm;font-family:verdana, sans-serif;line-height:21px;font-weight:normal;padding-left:0px;margin-left:43.2pt;font-size:14px;margin-top:14pt;margin-bottom:14.5pt;padding-top:0px;padding-right:0px;padding-bottom:0px;"><span lang="EN-US"><span><span style="font-size:large;font-family:黑体;">1.1.7.3</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">             </span></span></span><span style="font-family:黑体;"><span style="font-size:large;">内容组块</span></span></h4><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">一般来说，建议当</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">消息的发送的时候让</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的选择最合适的传输编码。这是可能的，但是，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">首选通过设置</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpEntity</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">setChunked</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）为</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">true</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">设置编码。请注意的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">将使用这个标志作为提示。当使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议的版本不支持时候该值将被忽略时，如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP/1.0</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的块编码。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">StringEntity entity = new StringEntity(&quot;important message&quot;,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;text/plain; charset=\&quot;UTF-8\&quot;&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">entity.setChunked(true);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpPost httppost = new HttpPost(&quot;http://localhost/acrtion.do&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httppost.setEntity(entity);</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951370" style="color:rgb(111, 188, 76);text-decoration:none;"><span lang="EN-US"><span><span style="font-size:large;font-family:宋体;">1.1.8</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">   </span></span></span><span style="font-family:宋体;"><span style="font-size:large;">响应处理程序</span></span></a></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">最简单和最方便的处理响应方式是通过使用</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ResponseHandler</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口。这种方法完全免除了用户去担心连接管理。无论执行请求是否成功或导致异常，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ResponseHandler</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">会确保自动释放该连接回连接管理器。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpClient httpclient = new DefaultHttpClient();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://localhost/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">ResponseHandler&lt;byte[]&gt; handler = new ResponseHandler&lt;byte[]&gt;() {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>public byte[] handleResponse(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>HttpResponse response) throws ClientProtocolException, IOException {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>return EntityUtils.toByteArray(entity);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>} else {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>return null;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">};</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">byte[] response = httpclient.execute(httpget, handler);</span></span></span></p></div><h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951371" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:14.5pt;color:black;line-height:32px;"><span><span style="font-family:黑体;">1.2</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">      </span></span></span></span><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"><span style="font-family:黑体;">HTTP</span></span></span></a><span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">的执行上下文</span></span></span><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">最初的</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">被设计成一个无状态，响应，要求面向协议。然而，现实世界应用程序通常需要能够坚持通过几个逻辑上相关的请求响应交换状态信息。为了使应用程序能够保持状态，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">允许</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求在一个特定的上下文中执行，被称为</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的上下文。如果一个逻辑同样的情况下连续请求之间重用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">,</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">多个逻辑相关的要求可以参加到会话中，。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">上下文功能类似于</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.util.Map</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">&lt;String, Object&gt;</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。它只是一个任意命名的值的集合。可以在请求执行或者执行完毕之后校验下文的时候在添加属性参数到应用程序。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">在</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求执行的过程中</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">添加属性到执行上下文：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.connection'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpConnection</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实例代表实际连接到目标服务器。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.target_host'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpHost</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实例代表连接的目标。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.proxy_host'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpHost</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实例代表连接代理，如果使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.request'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpRequest</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实例代表实际的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.response'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpResponse</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">实例代表了实际的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">响应。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.request_sent'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.lang.Boolean</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的对象，表示该标志指示是否实际的要求已完全传输到连接的目标。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;"> </span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">例如，想确定最后的重定向目标，一种方法可以在要求执行之后交验该</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">http.target_host</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">属性值：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;"> </span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">DefaultHttpClient httpclient = new DefaultHttpClient();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpContext localContext = new BasicHttpContext();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://www.google.com/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpResponse response = httpclient.execute(httpget, localContext);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpHost target = (HttpHost) localContext.getAttribute(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>ExecutionContext.HTTP_TARGET_HOST);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(&quot;Final target: &quot; + target);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">entity.consumeContent();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">Final target: http://www.google.ch</span></span></span></p></div><h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951372" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:14.5pt;color:black;line-height:32px;"><span><span style="font-family:黑体;">1.3</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">      </span></span></span></span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">异常处理</span></span></a><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的可以抛出两种例外情况：在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">I/O</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">错误的时候</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.io.IOException</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">socket timeout</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">或者</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">socket reset</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpException </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">如违反了</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">错误故障。通常的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">I/O</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">错误被视为非致命性和可恢复的，而</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议错误被认为是致命的错误，不能自动收回。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951373" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.3.1</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span style="font-family:宋体;">HTTP</span></span></span></a><span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">传输安全</span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议并没有适用所有应用。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">是一个简单的请求</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">/</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">响应协议，最初旨在支持静态或动态生成的内容检索。它从未打算支持事务操作。例如，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">服务器将考虑其对履行合同的一部分，如果它在接收和处理请求成功，产生了反应，发出了一个状态代码返回给客户端。该服务器将不作任何尝试回滚事务，如果客户端无法接收的全部原因是读超时，要求取消或系统崩溃的反应。如果客户决定重试相同的请求，服务器将不可避免地最终执行相同的交易超过一次。在某些情况下，这可能导致应用数据损坏或不一致的应用现状。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">虽然</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">从来没有被设计成支持事务处理，它仍然可以作为传输协议为应用程序用执行关键任务。为了确保</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">传输层安全，系统必须确保幂等的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法在应用层。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951374" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.3.2</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">幂等方法</span></span></a><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP/1.1</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">规范定义幂等方法，</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法含有幂等属性</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"> </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">指的是（除了错误或过期问题），</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">N&gt;0</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的相同请求和一个单独的请求是一样的。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">换句话说，应用程序应该确保它准备处理的多个执行相同的方法的影响。这可以实现的，例如，通过提供一个独特的交易</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ID</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和避免同一逻辑操作执行的其他方式。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请注意，此问题不是特定的</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。基于浏览器应用程序是完全符合相关的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法非幂等同样的问题。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的假设非实体内附如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">GET</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HEAD</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">是幂等与实体内附</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"> </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">POST</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">PUT</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">方法不是。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951375" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.3.3</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">异常自动恢复</span></span></a><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">默认情况下的</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">尝试自动恢复从</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">I / O</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">异常。默认的自动恢复机制是限于一个已知是安全的少数例外。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的将不作任何尝试从任何逻辑或</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议错误（从</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpException</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类派生的）的恢复。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">会自动重试那些被假定为幂等的方法。</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;"></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">会自动重试的方法，传输失败异常的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求仍然被传输到目标服务器</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">会自动重试那些已经完全传输到服务器的方法，但服务器没有响应的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">状态代码（服务器只是丢弃不发送任何东西连接）。在这种情况下，假设该请求没有被服务器和应用程序状态的处理并没有改变。如果这种假设可能不适用于您的应用程序的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Web</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">服务器是真正的目标，强烈建议提供一个自定义的异常处理程序。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951376" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.3.4</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">请求重试处理程序</span></span></a><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">为了使自定义的异常恢复机制应该提供一个</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpRequestRetryHandler</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口的实现。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">DefaultHttpClient httpclient = new DefaultHttpClient();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpRequestRetryHandler myRetryHandler = new HttpRequestRetryHandler() {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>public boolean retryRequest(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>IOException exception,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>int executionCount,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>HttpContext context) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>if (executionCount &gt;= 5) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>// Do not retry if over max retry count</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>return false;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>if (exception instanceof NoHttpResponseException) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>// Retry if the server dropped connection on us</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>return true;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>if (exception instanceof SSLHandshakeException) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>// Do not retry on SSL handshake exception</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>return false;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>HttpRequest request = (HttpRequest) context.getAttribute(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">                </span>ExecutionContext.HTTP_REQUEST);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>boolean idempotent = !(request instanceof HttpEntityEnclosingRequest);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>if (idempotent) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>// Retry if the request is considered idempotent</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>return true;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>return false;</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">};</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpclient.setHttpRequestRetryHandler(myRetryHandler);</span></span></span></p></div><h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951377" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:14.5pt;color:black;line-height:32px;"><span><span style="font-family:黑体;">1.4</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">      </span></span></span></span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">中止请求</span></span></a><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">在某些情况下执行</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求未能完成预期的时间范围内由于对目标服务器或客户端发出太多的并发请求的高负荷。在这种情况下，可能有必要提前终止和解除封锁的要求执行的线程在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">I / O</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">操作阻塞。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求被处决的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">可以在任何援引</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpUriRequest</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">＃</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">abort</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">（）方法执行阶段中止。此方法是线程安全的，可以从任何线程调用。当一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求被中止它的执行线程阻塞在一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">I / O</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">操作是保证解锁通过抛出一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">InterruptedIOException</span></span></span></p><h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951378" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:14.5pt;color:black;line-height:32px;"><span><span style="font-family:黑体;">1.5</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">      </span></span></span></span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">拦截</span></span></a><span style="font-family:黑体;"><span><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;">HTTP</span></span></span><span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">协议</span></span></span></span><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议的拦截器是一个例程，实现了</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议的具体内容。通常协议拦截行动后，预计一个特定标题或传入的消息头相关团体或填充一个特定的头或一组相关的头传出的消息。议定书拦截器还可以操纵的消息封闭的实体内容，透明的内容压缩</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">/</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">解压是一个很好的例子。通常这是通过使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">装饰</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的模式，其中一个包装实体类是用来装饰的原始实体。几个协议拦截器可以组合成一个逻辑单元。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">拦截器可以通过合作协议共享信息</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> - </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">如处理状态</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> - </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">通过</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的执行上下文。拦截器可以使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议中的要求来存储一个或多个连续的请求处理状态。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;"> </span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">通常在这种拦截器都执行不应该的问题，只要他们不依赖于特定国家的执行上下文秩序。如果协议拦截器有相互依存，因此必须在一个特定的顺序执行的，他们应该被添加到了他们的预期的执行顺序相同的顺序协议处理器。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">议定书拦截器必须实现为线程安全的。同样到</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Servlet</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，协议拦截器不应使用实例变量，除非获得这些变量的同步。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">这个例子说明本地上下文可用于保存请求的处理之间的连续状态：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">DefaultHttpClient httpclient = new DefaultHttpClient();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpContext localContext = new BasicHttpContext();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">AtomicInteger count = new AtomicInteger(1);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">localContext.setAttribute(&quot;count&quot;, count);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpclient.addRequestInterceptor(new HttpRequestInterceptor() {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>public void process(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>final HttpRequest request,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span><span style="line-height:19px;">        </span>final HttpContext context) throws HttpException, IOException {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>AtomicInteger count = (AtomicInteger) context.getAttribute(&quot;count&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>request.addHeader(&quot;Count&quot;, Integer.toString(count.getAndIncrement()));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">   </span></span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">});</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://localhost/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">for (int i = 0; i &lt; 10; i++) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HttpResponse response = httpclient.execute(httpget, localContext);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">   </span></span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HttpEntity entity = response.getEntity();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>if (entity != null) {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>entity.consumeContent();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">}</span></span></span></p></div><h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951379" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:14.5pt;color:black;line-height:32px;"><span><span style="font-family:黑体;">1.6</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">      </span></span></span></span><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"><span style="font-family:黑体;">HTTP parameters</span></span></span></a><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口代表一个不可改变的值的集合，定义一个组件在运行时行为。在许多方面是相似的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpContext HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。两者的主要区别是他们在运行时使用。代表了两个接口是作为一个组织的键映射对象值对象的集合，而是为不同的目的：</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">是为了包含简单的对象：整数，双打，字符串，集合和对象在运行时保持不变。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">预计将用在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">写一次</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> - </span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">准备许多</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">模式。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"> HttpContext</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的目的是包含很可能发生变异的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">消息处理过程中的复杂对象。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">该</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">目的是确定了其他组件的行为。一般每个复杂的组件都有它自己的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">对象。对</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpContext</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的目的，是代表了一个</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">进程的执行状态。通常是相同的执行上下文之间共享许多合作对象。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951380" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.6.1</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span style="font-size:12pt;line-height:27px;font-family:宋体;">参数层次</span></span></a><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">在</span></span><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpRequest</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">对象执行</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">当然是联系在一起的用于执行请求的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的实例</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">。这使得在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求参数水平接管</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">优先在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">客户端的水平。建议的做法是通过设置在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">客户端级别的共同所有的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求参数和选择性覆盖在</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求级别的具体参数。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">DefaultHttpClient httpclient = new DefaultHttpClient();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HttpVersion.HTTP_1_0);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpclient.getParams().setParameter(CoreProtocolPNames.HTTP_CONTENT_CHARSET,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>&quot;UTF-8&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpGet httpget = new HttpGet(&quot;http://www.google.com/&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpget.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>HttpVersion.HTTP_1_1);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpget.getParams().setParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>Boolean.FALSE);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">httpclient.addRequestInterceptor(new HttpRequestInterceptor() {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>public void process(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>final HttpRequest request,</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">            </span>final HttpContext context) throws HttpException, IOException {</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>System.out.println(request.getParams().getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">                </span>CoreProtocolPNames.PROTOCOL_VERSION));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>System.out.println(request.getParams().getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">                </span>CoreProtocolPNames.HTTP_CONTENT_CHARSET));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>System.out.println(request.getParams().getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span><span style="line-height:19px;">        </span>CoreProtocolPNames.USE_EXPECT_CONTINUE));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">        </span>System.out.println(request.getParams().getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">                </span>CoreProtocolPNames.STRICT_TRANSFER_ENCODING));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>}</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">   </span></span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">});</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HTTP/1.1</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">UTF-8</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">false</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">null</span></span></span></p></div><h3 style="margin-top:13pt;font-family:verdana, sans-serif;padding-left:0px;margin-left:36pt;margin-right:0cm;border-bottom:1px solid rgb(170, 170, 170);font-size:14px;margin-bottom:13pt;padding-top:0px;padding-right:0px;padding-bottom:0px;line-height:21px;"><a name="_Toc263951381" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:宋体;">1.6.2</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span style="font-family:宋体;">HTTP parameters beans</span></span></span></a><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h3><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">接口为灵活性的实现在处理组件的配置。最重要的是，新的参数可以引进，而不会影响与旧版本的二进制兼容性。然而，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">也具有一定的缺点相比，常规的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Java bean</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">不能直接投资框架组装使用。为了缓解这种限制，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的包括</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">bean class</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">，可以使用，以初始化</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpParams</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">对象使用标准的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">Java bean</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">约定的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">class</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">数目。</span></span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpParams params = new BasicHttpParams();</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HttpProtocolParamBean paramsBean = new HttpProtocolParamBean(params);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">paramsBean.setVersion(HttpVersion.HTTP_1_1);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">paramsBean.setContentCharset(&quot;UTF-8&quot;);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">paramsBean.setUseExpectContinue(true);</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;font-family:宋体;"> </span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(params.getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>CoreProtocolPNames.PROTOCOL_VERSION));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(params.getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>CoreProtocolPNames.HTTP_CONTENT_CHARSET));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(params.getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>CoreProtocolPNames.USE_EXPECT_CONTINUE));</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">System.out.println(params.getParameter(</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;"><span style="line-height:19px;">    </span>CoreProtocolPNames.USER_AGENT));</span></span></span></p></div><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">输出</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;">&gt;</span></span></span></p><div style="padding-top:4pt;background-image:initial;background-origin:initial;background-clip:initial;background-color:rgb(243, 245, 233);border-left-color:rgb(204, 204, 204);background-attachment:initial;padding-right:4pt;padding-bottom:4pt;padding-left:4pt;font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">HTTP/1.1</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">UTF-8</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">false</span></span></span></p><p style="margin:0px 0px 14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm;color:rgb(68, 68, 68);"><span lang="EN" style="line-height:21px;"><span style="line-height:19px;font-size:small;"><span style="line-height:19px;font-family:宋体;">null</span></span></span></p></div><h2 style="padding-top:0px;font-size:14px;margin-top:13pt;margin-right:0cm;margin-bottom:13pt;margin-left:28.8pt;margin:0px 0px 4px;padding-right:0px;padding-bottom:0px;padding-left:0px;font-family:verdana, sans-serif;line-height:21px;"><a name="_Toc263951382" style="color:rgb(111, 188, 76);text-decoration:none;"><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"><span><span style="font-family:黑体;">1.7</span><span style="font:normal normal normal 7pt/normal 'Times New Roman';">        </span></span></span></span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">执行</span></span></a><span style="font-family:黑体;"><span><span><span lang="EN-US" style="font-size:14.5pt;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:white;color:black;line-height:32px;background-position:initial initial;background-repeat:initial initial;">HTTP</span></span></span><span><span><span style="background-color:white;font-size:14.5pt;background-attachment:initial;background-origin:initial;background-clip:initial;background-image:initial;color:black;line-height:32px;font-family:黑体;background-position:initial initial;background-repeat:initial initial;">请求参数</span></span></span></span><span><span lang="EN-US" style="font-size:12pt;line-height:27px;"></span></span></h2><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">这些参数可以影响到执行请求的过程：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"><span style="line-height:24px;font-family:宋体;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.protocol.version'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：定义使用</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议的版本，如果没有就请求对象明确。预计此参数类型</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ProtocolVersion</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">价值。如果该参数没有设置</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP/1.1</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">中会被使用。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.protocol.element-charset'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：定义用于编码字符集是</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议分子利用。此参数预计</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.lang.String</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类型的值。如果此参数设置不美的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ASCII</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">将被使用。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.protocol.content-charset'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：定义为每默认用于内容主体编码字符集。此参数预计</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.lang.String</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类型的值。如果该参数没有设置的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">ISO - 8859 - 1</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">将被使用。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.useragent'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：定义了用户代理头的内容。此参数预计</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.lang.String</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">类型的值。如果此参数未设置，</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的将自动生成一个值。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.protocol.strict-transfer-encoding'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：定义是否以无效传输编码头的反应，应予以拒绝。预计此参数类型</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.lang.Boolean</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的价值。如果该参数没有设置无效的传输编码值将被忽略。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p align="left" style="margin-bottom:0pt;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0cm;margin-right:0cm;padding-top:0px;margin-left:0cm;color:rgb(68, 68, 68);text-indent:24pt;line-height:22pt;text-align:left;font-family:verdana, sans-serif;font-size:14px;"><span style="line-height:21px;font-family:宋体;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">'http.protocol.expect-continue'</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">：激活期望：为封闭的方法，实体</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">100</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">继续握手。作者期望的目的：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">100</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">继续握手，是让客户端发送一个请求主体请求消息，以确定是否愿意到原始服务器之前接受客户端发送请求的请求（根据请求头）机构。作者期望使用：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">100</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">继续握手会导致一个附有如</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">POST</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">和</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">PUT</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">请求（实体显着的性能改进），要求在目标服务器的身份验证。预计：</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">100</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">继续握手应谨慎使用，因为它可能会导致与</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">代理服务器的问题和不支持</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HTTP/1.1</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">协议。预计此参数类型</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">java.lang.Boolean</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">的价值。如果该参数没有设置的</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;">HttpClient</span></span><span style="line-height:21px;"><span style="line-height:24px;font-size:12pt;font-family:宋体;">将尝试使用握手。</span></span><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;"></span></span></span></p><p style="margin-right:0px;margin:0px 0px 14px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:1em;padding-top:0px;margin-bottom:0.5em;margin-left:0px;color:rgb(68, 68, 68);font-family:verdana, sans-serif;font-size:14px;line-height:21px;"><span style="line-height:21px;"><span lang="EN-US" style="line-height:24px;font-size:12pt;font-family:'Times New Roman';">'http.protocol.wait-for-continue'</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">：定义了以毫秒为单位的时间最长的客户应该花费</span><span lang="EN-US" style="line-height:24px;font-size:12pt;font-family:'Times New Roman';">100</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">继续等待响应。预计此参数类型</span><span lang="EN-US" style="line-height:24px;font-size:12pt;font-family:'Times New Roman';">java.lang.Integer</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">价值。如果该参数没有设置的</span><span lang="EN-US" style="line-height:24px;font-size:12pt;font-family:'Times New Roman';">HttpClient</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">将等待一段时间才能恢复请求的身体传送确认</span><span lang="EN-US" style="line-height:24px;font-size:12pt;font-family:'Times New Roman';">3</span><span style="line-height:24px;font-size:12pt;font-family:宋体;">秒。</span></span></p>

		</div></div></div></td></tr></tbody></table></div></div></div></div><br/></div></span>
</div></body></html> 