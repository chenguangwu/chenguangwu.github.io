<html>
<head>
  <title>MySQL常用SQL语句 - Jevo - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6525"/>
<h1>MySQL常用SQL语句 - Jevo - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/29 17:01</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.cnblogs.com/jevo/p/3257222.html"><i>http://www.cnblogs.com/jevo/p/3257222.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color:rgb(0, 0, 0);background:url(&quot;/Skins/coffee/images/bg_body.gif&quot;) left top;line-height:1.5;font-size:14px;"><div style="min-width:auto;"><div style="min-width:auto;text-align:left;"><div style="background:transparent;text-align:left;overflow-x:hidden;"><div style="background:url(&quot;/Skins/coffee/images/bg_left.gif&quot;) left top repeat-x rgb(254, 254, 242);"><div><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div>
		<h1 style="margin:0px;padding:0px;width:100%;clear:both;font-weight:bold;float:left;line-height:1.5;font-size:14px;padding-left:5px;">
			<a href="http://www.cnblogs.com/jevo/p/3257222.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">MySQL常用SQL语句</a>
		</h1>
		<div style="margin:0px;padding:0px;clear:both;"></div>
		<div style="margin:0px;padding:5px 2px 5px 5px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin-top:5px;">
			<div style="margin:0px;padding:0px;margin-bottom:20px;word-break:break-word;"><h2 style="padding:0px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">一、数据库操作</h2>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1．创建数据库：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql&gt; CREATE DATABASE databaseName;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql数据库的数据文件默认存放在/usr/local/mysql/var/目录下，每个数据库对应一个子目录，用于存储数据表文件；</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">新建的空数据库在/usr/local/mysql/var/目录下会自动生成一个与新建的库名相同的空文件夹。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例：mysql&gt; create database testdb;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create database if not exists testdb;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create schema if not exists student characterset 'gbk' collate 'gbk_chinese_ci';</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">2．删除数据库</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql&gt;DROP DATABASE databseName;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例： mysql&gt; drop database testdb;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">3．更改表名<br style="margin:0px;padding:0px;"/>命令：alter table 原表名rename to 新表名;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">          mysql&gt;alter table tb1 rename to tb11;数据库进行改名。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">4．改变数据表引擎 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">          mysql&gt;alter table tb1 engine=&quot;MyISAM&quot;;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">5．坏库扫描修复<br style="margin:0px;padding:0px;"/>cd /var/lib/mysql/xxx &amp;&amp; myisamchk playlist_block<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<h2 style="padding:0px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">二、数据表操作</h2>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1．创建数据表</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql&gt;CREATE TABLE [if not exists] tableName (字段1名称 类型，字段2名称 类型，… ，PRIMARY kEY (主键名))</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">mysql&gt; create table table_name(column_name datatype {identity |null|not null},f_time TIMESTAMP(8),…) ENGINE=MyISAM AUTO_INCREMENT=3811 DEFAULT CHARSET=utf8;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create table tb (id int unsigned not null auto_increment primary key, Name char(20) not null, Age tinyint not null); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create table tb (id int unsigned not null auto_increment, Name char(20) not null, Age tinyint not null, primary key(id)); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create database mydb; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; use mydb; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create table students(name char(20) not null, age tinyint unsigned, gender char(1) not null); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create table courses(ID tinyint unsigned not null auto_increment primary key, Couse varchar(50) not null);  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create table courses(name char(20) not null, age tinyint unsigned, gender char(1) not null); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">复制数据表</strong>：从一张表中查出需要的数据并创建为一个新表：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        create [temporary] table 新表名 select * from 旧表名; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> 例：       mysql&gt; create table testcourses select * from courses where CID &lt;=2;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">如果很多字段的属性没有存在，则需要自己重新定义：select组合成需要的语句。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例：create table teststu(id int not null auto_increment, primary key(id) ) select name, age from students;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">复制数据表</strong>：以其它表为模板，创建一个新表,字段的属性还会存在 ，复制数据库结构，创建一个结构完全相同的表：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         create [temporary] table [if not exists] 表名like 已存在的表名;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例：        mysql&gt; create table test like courses; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">mysql&gt; SHOW CREATE TABLE tableName    #显示创建tableName表的语句<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">2．删除表</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql&gt;DROP TABLE databaseName.tableName;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">等同于：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql&gt;user databaseName;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Mysql&gt;DROP TABLE tableName;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; drop table testcourses; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">3．修改表</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        ALTER TABLE tableName; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">增加字段</strong>，例：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;alter table students add course varchar(100); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; alter table tb1 add sex enum('M','F') default 'M' not null after id;#新增sex字段为enum类型，放在id的后面.</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">修改字段属性</strong>： </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         mysql&gt;alter table tb1 modify name char(30) not null; #改变vip的username为char(30); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">改变字段，并设置在最前面字段：如：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">          mysql&gt;alter table tb1 modify name mediumtext first; #改变name,并将它设在最前面字段，还有一个是after 字段，是指放在某字段后，</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">修改字段，并移动字段到第一个字段后：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;alter table students change course Course varchar(100) after name; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">修改表结构中的数据类型</strong>，例：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;alter table courses modify id smallint default 1;   #更改数据记录为1. 或default NULL;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">设置自动增长列</strong>，例：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt; create table tb1 (id int unsigned not null, Name char(20) not null, Age tinyint not null);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;#alter table tb1 modify id smallint auto_increment;#执行一下这句会提示错误，因为mysql中要求自动增长的列设为主键 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         mysql&gt;alter table tb1 add primary key (id);#设主键id,执行这条语句后再执行上面语句就没问题了。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">对已有字段改名</strong>，如：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         mysql&gt;alter table tb1 change sex usersex tinyint default 0 not null after Age; #改名字段sex为usersex并改变类型和位置。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">注：仅alter中modify, change很相似，但是modify不能改名只能改结构，但change即可以改名，也可以改类型。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">删除字段</strong> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;alter table tb1 drop usersex;#删除 usersex字段，警告，所有的该字段数据都会丢失。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">注意，修改数据结构是一个很危险的事，最好做好备份，以防不侧。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">小结：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  查看列：desc 表名;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  修改表名：alter table t_book rename to bbb; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  添加列：alter table 表名 add column 列名 varchar(30); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  删除列：alter table 表名 drop column 列名; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  修改列名MySQL： alter table bbb change nnnnn hh int; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  修改列名SQLServer：exec sp_rename't_student.name','nn','column'; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  修改列名Oracle：lter table bbb rename column nnnnn to hh int; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    •  修改列属性：alter table t_book modify name varchar(22); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">4．创建索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">MYSQL常用的索引类型主要有以下几种：普通索引、唯一索引、主键索引、组合索引。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">可以在建表的时候加入index indexname (列名)创建索引，也可以手工用命令生成：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1）CREATE INDEX可对表增加普通索引或UNIQUE索引。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       CREATE INDEX index_name ON table_name (col_name[(length)],… )</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">如果索引字段是CHAR，varchar类型，length可以指定小于字段实际长度；如果是BLOB和TEXT类型，必须指定length。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">在表上创建一个唯一的索引。唯一的索引意味着两个行不能拥有相同的索引值、但允许有空值。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       CREATE UNIQUE INDEX index_name  ON table_name (column_name)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例：mysql&gt; CREATE INDEX age_index ON tb (Age(10));</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">如果您希望以降序索引某个列中的值，您可以在列名称之后添加保留字 DESC：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       CREATE INDEX age_index   ON tb (Age DESC) <br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">组合索引：假如您希望索引不止一个列，您可以在括号中列出这些列的名称，用逗号隔开：  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">                CREATE INDEX idx_name ON table_name(table_col_1,table_col_2,...,table_col_n);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  它允许使用多个列作为索引列。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">例：        CREATE INDEX age_index ON tb (Age, name)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">2）ALTER TABLE也可用来创建普通索引、UNIQUE索引或PRIMARY KEY索引。<br style="margin:0px;padding:0px;"/>         ALTER TABLE table_name ADD INDEX index_name (column_list)<br style="margin:0px;padding:0px;"/>         ALTER TABLE table_name ADD UNIQUE (column_list)<br style="margin:0px;padding:0px;"/>         ALTER TABLE table_name ADD PRIMARY KEY (column_list)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">注：在创建索引时，可以规定索引能否包含重复值。如果不包含，则索引应该创建为PRIMARY KEY或UNIQUE索引。对于单列惟一性索引，这保证单列不包含重复的值。对于多列惟一性索引，保证多个值的组合不重复。<br style="margin:0px;padding:0px;"/>PRIMARY KEY索引和UNIQUE索引非常类似。事实上，PRIMARY KEY索引仅是一个具有名称PRIMARY的UNIQUE索引，即一种特殊的唯一索引，且不允许有空值。这表示一个表只能包含一个PRIMARY KEY，因为一个表中不可能具有两个同名的索引，即一个表只能有一个主键索引。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">5．显示现有索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SHOW INDEX FROM tbname [FROM db_name] #显示现有索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SHOW KEYS FROM tbname</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">· Table　　            表的名称。<br style="margin:0px;padding:0px;"/>· Non_unique　　 如果索引不能包括重复词，则为0。如果可以，则为1。<br style="margin:0px;padding:0px;"/>· Key_name　　    索引的名称。<br style="margin:0px;padding:0px;"/>· Seq_in_index　　索引中的列序列号，从1开始。<br style="margin:0px;padding:0px;"/>· Column_name　  列名称。<br style="margin:0px;padding:0px;"/>· Collation　　       列以什么方式存储在索引中。在MySQL中，有值‘A’(升序)或NULL(无分类)。<br style="margin:0px;padding:0px;"/>· Cardinality　　    索引中唯一值的数目的估计值。通过运行ANALYZE TABLE或myisamchk -a可以更新。基数根据被存储为整数的统计数据来计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL使用该索引的机会就越大。<br style="margin:0px;padding:0px;"/>· Sub_part　　       如果列只是被部分地编入索引，则为被编入索引的字符的数目。如果整列被编入索引，则为NULL。<br style="margin:0px;padding:0px;"/>· Packed　　         指示关键字如何被压缩。如果没有被压缩，则为NULL。<br style="margin:0px;padding:0px;"/>· Null　　              如果列含有NULL，则含有YES。如果没有，则该列含有NO。<br style="margin:0px;padding:0px;"/>· Index_type　　    用过的索引方法（BTREE, FULLTEXT, HASH, RTREE）。<br style="margin:0px;padding:0px;"/>· Comment　　      更多评注。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         例：    mysql&gt;SHOW INDEX FROM tb;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>mysql&gt; repair TABLE date QUICK; #索引列相关变量变化后自动重建索引<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">6．删除索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">可利用ALTER TABLE或DROP INDEX语句来删除索引。类似于CREATE INDEX语句，DROP INDEX可以在ALTER TABLE内部作为一条语句处理，语法如下。<br style="margin:0px;padding:0px;"/>        DROP INDEX index_name ON talbe_name<br style="margin:0px;padding:0px;"/>        ALTER TABLE table_name DROP INDEX index_name<br style="margin:0px;padding:0px;"/>        ALTER TABLE table_name DROP PRIMARY KEY<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>其中，前两条语句是等价的，删除掉table_name中的索引index_name。<br style="margin:0px;padding:0px;"/>第3条语句只在删除PRIMARY KEY索引时使用，因为一个表只可能有一个PRIMARY KEY索引，因此不需要指定索引名。如果没有创建PRIMARY KEY索引，但表具有一个或多个UNIQUE索引，则MySQL将删除第一个UNIQUE索引。<br style="margin:0px;padding:0px;"/>如果从表中删除了某列，则索引会受到影响。对于多列组合的索引，如果删除其中的某列，则该列也会从索引中删除。如果删除组成索引的所有列，则整个索引将被删除。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">使用索引的注意事项</strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1)、索引不会包含有NULL值的列</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   只要列中包含有NULL值都将不会被包含在索引中，复合索引中只要有一列含有NULL值，那么这一列对于此复合索引就是无效的。所以在数据库设计时尽量不要让字段的默认值为NULL。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">2)、使用短索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    对列进行索引，如果可能应该指定一个前缀长度。例如，如果有一个CHAR(255)的列，如果在前10个或20个字符内，多数值是惟一的，那么就不要对整个列进行索引。短索引不仅可以提高查询速度而且可以节省磁盘空间和I/O操作。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">3)、不要在列上进行运算</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   在列上进行运算，将导致索引失效而进行全表扫描。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">4)、不使用NOT和&lt;&gt;操作</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">5)、索引列排序</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   MySQL查询只使用一个索引，因此如果where子句中已经使用了索引的话，那么order by中的列是不会使用索引的。因此数据库默认排序可以符合要求的情况下不要使用排序操作；尽量不要包含多个列的排序，如果需要最好给这些列创建复合索引。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">7．约束条件</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">可以在创建表的时候同时创建约束，如：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        create table person<br style="margin:0px;padding:0px;"/>         (<br style="margin:0px;padding:0px;"/>           id           smallint      not null    auto_increment,<br style="margin:0px;padding:0px;"/>           name         varchar(10)   not null,<br style="margin:0px;padding:0px;"/>           company_id   smallint,</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">           //主键约束<br style="margin:0px;padding:0px;"/>           primary key(id),      </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">           //唯一约束,也可以指定约束的名称： unique  key constraint_name (name),     <br style="margin:0px;padding:0px;"/>           unique  key(name),    </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">           //外键约束,也可以指定约束的名称：constraint constraint_name foreign key(company_id) references company(company_id) <br style="margin:0px;padding:0px;"/>           foreign key(company_id) references company(company_id)  <br style="margin:0px;padding:0px;"/>        )</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">也可创建表以后，再创建约束<br style="margin:0px;padding:0px;"/>        create table person<br style="margin:0px;padding:0px;"/>         (<br style="margin:0px;padding:0px;"/>           id           smallint      not null,<br style="margin:0px;padding:0px;"/>           name         varchar(10)   not null,<br style="margin:0px;padding:0px;"/>           company_id   smallint<br style="margin:0px;padding:0px;"/>        )<br style="margin:0px;padding:0px;"/>//<strong style="margin:0px;padding:0px;">创建主键约束</strong><br style="margin:0px;padding:0px;"/>         alter table person  add  primary  key(id);<br style="margin:0px;padding:0px;"/>         或alter table person  add  constraint  primary_k  primary key(id);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">//再将主键列设为auto_increment:<br style="margin:0px;padding:0px;"/>        alter table person modify id smallint auto_increment;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">//<strong style="margin:0px;padding:0px;">删除主键约束</strong><br style="margin:0px;padding:0px;"/>         alter table person drop primary key;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">删除主键约束的时候，如果主键已经是auto_increment型，则无法删除，因为只有键才能是auto_increment型的</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">外键关系(Foreign Key relationships)讨论的是父表(categories)与子表(articles)的关系，通过引入外键(Foreign Key)这个概念来保证参照完整性(Referential integrity)。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">//</strong><strong style="margin:0px;padding:0px;">创建外键约束</strong> <br style="margin:0px;padding:0px;"/>      alter table person add foreign key(company_id) references company(company_id);<br style="margin:0px;padding:0px;"/>      alter table person add constraint foreing_k foreign key(company_id) references company(company_id);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">创建外键约束以后，系统自动为外键列创建了一个key，用下面的方式删除外键约束后，这个key仍然存在。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">如果不能在“被reference的表”里找到包含“被reference字段”的索引，或者是两个关联字段类型不匹配，则会出现ERROR 1005 (HY000): Can't create table … (errno: 150)错误<br style="margin:0px;padding:0px;"/>//<strong style="margin:0px;padding:0px;">删除外键约束</strong><br style="margin:0px;padding:0px;"/>      alter table person  drop  foreign key  foreign_k;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;"> </strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">//</strong><strong style="margin:0px;padding:0px;">创建唯一约束</strong><br style="margin:0px;padding:0px;"/>        alter table person add  unique key(name);<br style="margin:0px;padding:0px;"/>        alter table person add  constraint  unique_k   unique  key(name);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>//<strong style="margin:0px;padding:0px;">删除唯一约束</strong><br style="margin:0px;padding:0px;"/>  因为创建unique约束后，系统会自动给此列创建索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">           alter table person drop index name;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">约束名称可以用 show create table tablename 命令查看</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">小结</strong>：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">添加主键约束：alter table 表名 add constraint 主键 （形如：PK_表名） primary key 表名(主键字段); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">添加外键约束：alter table 从表 add constraint 外键（形如：FK_从表_主表） foreign key 从表(外键字段) references 主表(主键字段); </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">删除主键约束：alter table 表名 drop primary key; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">删除外键约束：alter table 表名 drop foreign key 外键（区分大小写）; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>查看约束，可以从information_schema架构下的系统表查看：<br style="margin:0px;padding:0px;"/>             SELECT * FROM information_schema.`TABLE_CONSTRAINTS`;<br style="margin:0px;padding:0px;"/> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">查看触发器<br style="margin:0px;padding:0px;"/>SELECT * FROM information_schema.`TRIGGERS`;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<h2 style="padding:0px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">三．数据操作</h2>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1．插入数据： INSERT INTO 表名（字段1，字段2，…） VALUES（字段1的值，字段2的值，…）</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        insert into tb_name （col，col2，....) values (val1,val2,....）; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        insert into tutors （Tname，Gender，Age） values ('jerry','M',24); -----批量插入方式</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        insert into tutors set Tname='Tom',Genser='F',Age=30; -----只能实现单个字段插入 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        insert into tutors （Tname,Gender,Age) selectName,Genser,Age from students where Age &gt;=20 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">2．修改数据记录：UPDATE表名SET字段名1=字段值1[，字段名2=字段值2]WHERE 条件表达式</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;update students set Course='wg'whereName='j'; -----更改j的课程为wg </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">3．删除数据：mysql&gt; DELETE FROM 表名 WHERE 条件表达式</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        mysql&gt;deletefrom students where Course='wg'; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">4．查询：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        select * from tutors orderby TID desc limit 1; -----查看降序的第一行 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        select last_insert_ID（）; -----查询插入的最后一个序列号 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        * 查询及常用函数<br style="margin:0px;padding:0px;"/>mysql&gt; select t1.name, t2.salary from employee AS t1, info AS t2 where t1.name = t2.name;<br style="margin:0px;padding:0px;"/>mysql&gt; select college, region, seed from tournament ORDER BY region, seed;<br style="margin:0px;padding:0px;"/>mysql&gt; select col_name from tbl_name WHERE col_name &gt; 0;<br style="margin:0px;padding:0px;"/>mysql&gt; select DISTINCT …… [DISTINCT关键字可以除去重复的记录]<br style="margin:0px;padding:0px;"/>mysql&gt; select DATE_FORMAT(NOW(),’%m/%d/%Y’) as DATE, DATE_FORMAT(NOW(),’%H:%m:%s’) AS TIME;<br style="margin:0px;padding:0px;"/>mysql&gt; select CURDATE(),CURTIME(),YEAR(NOW()),MONTH(NOW()),DAYOFMONTH(NOW()),HOUR(NOW()),MINUTE(NOW());<br style="margin:0px;padding:0px;"/>mysql&gt; select UNIX_TIMESTAMP(),UNIX_TIMESTAMP(20080808),FROM_UNIXTIME(UNIX_TIMESTAMP()); mysql&gt; select PASSWORD(”secret”),MD5(”secret”); #加密密码用<br style="margin:0px;padding:0px;"/>mysql&gt; select count(*) from tab_name order by id [DESC|ASC]; #DESC倒序/ASC正序<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">      * 函数count, AVG, SUM, MIN, MAX, LENGTH字符长度, LTRIM去除开头的空头, RTRIM去尾部空格, TRIM(str)去除首部尾部空格, LETF/RIGHT(str,x)返回字符串str的左边/右边x个字符, SUBSTRING(str,x,y)返回str中的x位置起至位置y的字符</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">mysql&gt; select BINARY ‘ross’ IN (’Chandler’,’Joey’, ‘Ross’); #BINARY严格检查大小写<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>      * 比较运算符IN, BETWEEN, IS NULL, IS NOT NULL, LIKE, REGEXP/RLIKE<br style="margin:0px;padding:0px;"/>mysql&gt; select count(*),AVG(number_xx),Host,user from mysql.user GROUP by user [DESC|ASC] HAVING user=root; #分组并统计次数/平均值<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>      * 将wp_posts表中post_content字段中文字”old”替换为”new”<br style="margin:0px;padding:0px;"/>mysql&gt; update wp_posts set post_content=replace(post_content,’old’,’new’)<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">5．表锁定相关<br style="margin:0px;padding:0px;"/>mysql&gt; LOCK TABLE users READ; # 对user表进行只读锁定<br style="margin:0px;padding:0px;"/>mysql&gt; LOCK TABLES user READ, pfolios WRITE #多表锁控制<br style="margin:0px;padding:0px;"/>mysql&gt; UNLOCK TABLES; #不需要指定锁定表名字, MySQL会自动解除所有表锁定<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">6．事务操作<br style="margin:0px;padding:0px;"/>新表:create TABLE table-name (field-definitions) TYPE=INNODB;  --- innodb支持事务<br style="margin:0px;padding:0px;"/>旧表: alter TABLE table-name TYPE=INNODB;<br style="margin:0px;padding:0px;"/>mysql&gt; start transaction #标记一个事务的开始<br style="margin:0px;padding:0px;"/>mysql&gt; insert into….. #数据变更<br style="margin:0px;padding:0px;"/>mysql&gt; ROLLBACK或commit #回滚或提交<br style="margin:0px;padding:0px;"/>mysql&gt; SET AUTOCOMMIT=1; #设置自动提交<br style="margin:0px;padding:0px;"/>mysql&gt; select @@autocommit; #查看当前是否自动提交<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">7．删除表后，让新增ID自动承接存在的最大ID。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        删除自动ID(auto_increment)表下的内容，会出现ID空档。<br style="margin:0px;padding:0px;"/>        例如删除ID=6 ID=7<br style="margin:0px;padding:0px;"/>        1 2 3 4 5  8....<br style="margin:0px;padding:0px;"/>        这样ID就从8开始记录.<br style="margin:0px;padding:0px;"/>        这样需要1个方法让他从6来继续<br style="margin:0px;padding:0px;"/>        执行sql语句.<br style="margin:0px;padding:0px;"/>         ALTER TABLE `表` AUTO_INCREMENT = 6</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">8．union可以对同一个表的两次查询联合起来。UNION在进行表链接后会筛选掉重复的记录，所以在表链接后会对所产生的结果集进行排序运算，删除重复的记录再返回结果。如果表数据量大的话可能会导致用磁盘进行排序。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">实际大部分应用中是不会产生重复的记录，最常见的是过程表与历史表UNION。比如在blog应用中，可以利用一条sql语句实现置顶blog和普通blog的分页显示。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       （ SELECT * FROM `blog` WHERE top=1 ORDER BY created DESC )    </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">UNION (  SELECT * FROM `blog` WHERE top = 0  ORDER BY created DESC ) LIMIT 2 , 3   </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> 注：union要求联合的两个表所要查找的数据列要一样多，如果一个表中没有另一个表的字段，可以用NULL代替。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        UNION ALL只是简单的将两个结果合并后就返回。这样，如果返回的两个结果集中有重复的数据，那么返回的结果集就会包含重复的数据了。从效率上说，UNION ALL 要比UNION快很多</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">9．SHELL提示符下运行SQL命令<br style="margin:0px;padding:0px;"/>        $ mysql -e “show slave status\G ”<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>见：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#data-definition" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1. 数据定义语句</a></span></p>
<dl style="margin:0px;padding:0px;"><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#alter-database" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.1. ALTER DATABASE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#alter-table" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.2. ALTER TABLE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#create-database" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.3. CREATE DATABASE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#create-index" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.4. CREATE INDEX语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#create-table" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.5. CREATE TABLE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#drop-database" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.6. DROP DATABASE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#drop-index" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.7. DROP INDEX语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#drop-table" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.8. DROP TABLE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#rename-table" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.1.9. RENAME TABLE语法</a></span></dt></dl>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#data-manipulation" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2. 数据操作语句</a></span></p>
<dl style="margin:0px;padding:0px;"><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#delete" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.1. DELETE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#do" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.2. DO语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#handler" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.3. HANDLER语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#insert" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.4. INSERT语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#load-data" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.5. LOAD DATA INFILE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#replace" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.6. REPLACE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#select" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.7. SELECT语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#subqueries" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.8. Subquery语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#truncate" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.9. TRUNCATE语法</a></span></dt><dt style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;line-height:1.5;"><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#update" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">13.2.10. UPDATE语法</a></span></dt></dl></div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;margin-top:20px;">
<div style="margin:0px;padding:0px;margin-bottom:10px;">分类: <a href="http://www.cnblogs.com/jevo/category/489112.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">Mysql</a>,<a href="http://www.cnblogs.com/jevo/category/508868.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">database</a></div>
<div style="margin:0px;padding:0px;font-size:9pt;color:rgb(102, 102, 102);margin-top:0px;"></div>
<div style="margin:0px;padding:0px;"><div style="margin:0px;padding:10px 0px;margin-bottom:10px;margin-top:10px;border:1px dashed silver;font-size:12px;width:320px;text-align:center;">
        <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(45, 174, 191);color:rgb(255, 255, 255);border:none;">好文要顶</a>
            <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(227, 49, 0);color:rgb(255, 255, 255);border:none;">关注我</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(255, 181, 21);color:rgb(255, 255, 255);border:none;">收藏该文</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至新浪微博"><img src="MySQL常用SQL语句 - Jevo - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" alt="" height="24" style="margin:0px;padding:0px;height:auto;border:none;vertical-align:middle;margin-left:5px;box-shadow:none;max-width:300px;" width="24"/></a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至微信"><img src="MySQL常用SQL语句 - Jevo - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" alt="" height="24" style="margin:0px;padding:0px;border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;max-width:300px;" width="24"/></a>
</div>
<div style="margin:0px;padding:0px;float:left;width:280px;margin-top:0px;margin-bottom:10px;color:rgb(0, 0, 0);margin-left:0px;font-size:12px;">
    <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jevo/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank"><img src="MySQL常用SQL语句 - Jevo - 博客园_files/sample_face.gif" type="image/gif" data-filename="sample_face.gif" alt="" height="46" style="margin:0px;padding:0px;height:auto;border:0px;vertical-align:top;float:left;margin-right:5px;padding-top:5px;padding-left:2px;max-width:300px;" width="47"/></a>
        <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jevo/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">Jevo</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jevo/followees" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">关注 - 0</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jevo/followers" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">粉丝 - 21</a>
        </div>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;"></div>
    <div style="margin:0px;padding:0px;">
                <a href="#" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">+加关注</a>
    </div>
</div>
<div style="margin:0px;padding:0px;float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:125px;text-align:center;margin-top:10px;">
    <div style="margin:0px;padding:0px;float:left;width:46px;height:52px;background:url(&quot;http://static.cnblogs.com/images/upup.gif&quot;) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">1</span>
    </div>
    <div style="text-align:center;padding:0px;margin:0px;height:52px;background:url(&quot;http://static.cnblogs.com/images/downdown.gif&quot;) no-repeat;margin-left:20px;cursor:pointer;margin-top:2px;padding-top:5px;width:46px;float:right;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;margin-top:5px;margin-left:0px;font-size:12px;color:gray;">
    </div>
</div>
</div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;line-height:1.8;font-size:12px;"><a href="http://www.cnblogs.com/jevo/p/3262448.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">« </a> 上一篇：<a href="http://www.cnblogs.com/jevo/p/3262448.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2013-08-19 12:06">MySQL预处理语句</a><br style="margin:0px;padding:0px;"/><a href="http://www.cnblogs.com/jevo/p/3271359.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">» </a> 下一篇：<a href="http://www.cnblogs.com/jevo/p/3271359.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2013-08-20 21:25">MySQL存储过程</a><br style="margin:0px;padding:0px;"/></div>
</div>


		</div>
		<div style="margin:0px;padding:0px;clear:both;font-size:12px;float:right;width:100%;text-align:right;padding-right:5px;color:rgb(102, 102, 102);margin-top:5px;">posted @ <span style="margin:0px;padding:0px;">2013-08-20 09:01</span> <a href="http://www.cnblogs.com/jevo/" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">Jevo</a> 阅读(<span style="margin:0px;padding:0px;">1509</span>) 评论(<span style="margin:0px;padding:0px;">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=3257222" rel="nofollow" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">编辑</a> <a href="http://www.cnblogs.com/jevo/p/3257222.html#" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">收藏</a></div>
	</div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 