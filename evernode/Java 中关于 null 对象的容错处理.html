<html>
<head>
  <title>Java 中关于 null 对象的容错处理</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2823"/>
<h1>Java 中关于 null 对象的容错处理</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/12/13 10:13</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://mp.weixin.qq.com/s/06dki3CDQOgO2Nhx1_Fy5Q"><i>https://mp.weixin.qq.com/s/06dki3CDQOgO2Nhx1_Fy5Q</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;"><div style="text-size-adjust:100%;line-height:1.6;"><div style="font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(51, 51, 51);letter-spacing:0.034em;background-color:rgb(255, 255, 255);"><div><div style="word-wrap:break-word;"><div style="background-color:rgb(255, 255, 255);"><div><div><div style="overflow:hidden;color:rgb(51, 51, 51);font-size:17px;word-wrap:break-word;text-align:justify;"><div style="box-sizing:border-box;word-wrap:break-word;"><blockquote style="padding:0px;margin:0px;padding-left:10px;border-left:3px solid rgb(219, 219, 219);max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;">在 Thinking in Java 看到这样一段话：<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p></blockquote><blockquote style="font-size:0.9em;margin:0px;overflow:auto;background:rgb(242, 247, 251);border-left-color:rgb(220, 230, 240);padding-left:10px;border-left:3px solid rgb(219, 219, 219);line-height:inherit;padding:15px 15px 15px 1rem;margin-top:1em;margin-bottom:1em;color:rgb(129, 145, 152);border-left-width:6px;word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow-wrap:normal;"><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">Primitives that are fields in a class are automatically initialized to zero, as noted in the Everything Is an Object chapter. But the object references are initialized to null, and if you try to call methods for any of them, you’ll get an exception-a runtime error. Conveniently, you can still print a null reference without throwing an exception.</p></blockquote><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">大意是：原生类型会被自动初始化为 0，但是对象引用会被初始化为 null，如果你尝试调用该对象的方法，就会抛出空指针异常。通常，你可以打印一个 null 对象而不会抛出异常。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">第一句相信大家都会容易理解，这是类型初始化的基础知识，但是第二句就让我很疑惑：为什么打印一个 null 对象不会抛出异常？带着这个疑问，我开始了解惑之旅。下面我将详细阐述我解决这个问题的思路，并且深入 JDK 源码找到问题的答案。</p><h1 style="box-sizing:border-box;font-weight:bold;margin:0px;padding:0px;max-width:100%;font-size:1.6em;word-wrap:break-word;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">解决问题的过程</span></h1><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">可以发现，其实这个问题有几种情况，所以我们分类讨论各种情况，看最后能不能得到答案。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">首先，我们把这个问题分解为三个小问题，逐一解决。</p><h2 style="box-sizing:border-box;font-weight:bold;margin:0px;padding:0px;max-width:100%;font-size:1.4em;word-wrap:break-word;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">第一个问题</span></h2><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">直接打印 null 的 String 对象，会得到什么结果？</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span> s = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>System.out.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">print</span>(s);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">运行的结果是</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">果然如书上说的没有抛出异常，而是打印了null。显然问题的线索在于print函数的源码中。我们找到print的源码：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">public</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">void</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);overflow-wrap:inherit !important;word-break:inherit !important;">print</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(255, 152, 35);overflow-wrap:inherit !important;word-break:inherit !important;">String s</span>) </span>{<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">if</span> (s == <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>) {<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>        s = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;null&quot;</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    }<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    write(s);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">看到源码才发现原来就只是加了一句判断而已，简单粗暴，可能你对 JDK 的简单实现有点失望了。放心，第一个问题只是开胃菜而已，大餐还在后面。</p><h2 style="box-sizing:border-box;font-weight:bold;margin:0px;padding:0px;max-width:100%;font-size:1.4em;word-wrap:break-word;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">第二个问题</span></h2><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">打印一个 null 的非 String 对象，例如说 Integer：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;">Integer i = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>System.out.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">print</span>(i);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">运行的结果不出意料：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">我们再去看看print的源码：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;">public <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">void</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">print</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">Object</span> obj) {<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    write(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span>.valueOf(obj));<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">有点不一样的了，看来秘密藏在valueOf里面。</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">public</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">static</span> String <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);overflow-wrap:inherit !important;word-break:inherit !important;">valueOf</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(255, 152, 35);overflow-wrap:inherit !important;word-break:inherit !important;">Object obj</span>) </span>{<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">return</span> (obj == <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>) ? <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;null&quot;</span> : obj.toString();<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">看到这里，我们终于发现了打印 null 对象不会抛出异常的秘密。print方法对 String 对象和非 String 对象分开进行处理。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">String 对象：直接判断是否为 null，如果为 null 给 null 对象赋值为”null”。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">非 String 对象：通过调用String.valueOf方法，如果是 null 对象，就返回”null”，否则调用对象的toString方法。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">通过上面的处理，可以保证打印 null 对象不会出错。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">到这里，本文就应该结束了。<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>什么？说好的大餐呢？上面还不够塞牙缝呢。<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>开玩笑啦。下面我们来探讨第三个问题。</p><h2 style="box-sizing:border-box;font-weight:bold;margin:0px;padding:0px;max-width:100%;font-size:1.4em;word-wrap:break-word;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">第三个问题（隐藏的大餐）</span></h2><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">null 对象与字符串拼接会得到什么结果？</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;">String s = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>s = s + <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;!&quot;</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>System.out.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">print</span>(s);<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">'<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></span></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">结果可能你也猜到了：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>!<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">为什么呢？跟踪代码运行可以发现，这回跟print没有什么关系。但是上面的代码就调用了print函数，不是它会是谁呢？+的嫌疑最大，但是+又不是函数，我们怎么看到它的源代码？这种情况，唯一的解释就是编译器动了手脚，天网恢恢，疏而不漏，找不到源代码，我们可以去看看编译器生成的字节码。</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;">L0<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> LINENUMBER <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">27</span> L0<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> ACONST_NULL<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> ASTORE <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">1</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>L1<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> LINENUMBER <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">28</span> L1<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> NEW java/lang/StringBuilder<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> DUP<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> ALOAD <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">1</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span>;)Ljava/lang/StringBuilder;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> LDC <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;!&quot;</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span>;)Ljava/lang/StringBuilder;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> ASTORE <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">1</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>L2<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> LINENUMBER <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">29</span> L2<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> GETSTATIC java/lang/System.out : Ljava/io/PrintStream;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> ALOAD <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">1</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/> INVOKEVIRTUAL java/io/PrintStream.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">print</span> (Ljava/lang/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span>;)V<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">看了上面的字节码是不是一头雾水？这里我们就要扯开话题，来侃侃+字符串拼接的原理了。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">编译器对字符串相加会进行优化，首先实例化一个StringBuilder，然后把相加的字符串按顺序append，最后调用toString返回一个String对象。不信你们看看上面的字节码是不是出现了StringBuilder。详细的解释参考这篇文章 Java细节：字符串的拼接。</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span> s = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;a&quot;</span> + <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;b&quot;</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);overflow-wrap:inherit !important;word-break:inherit !important;">//等价于</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>StringBuilder sb = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">new</span> StringBuilder();<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>sb.append(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;a&quot;</span>);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>sb.append(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">&quot;b&quot;</span>);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">String</span> s = sb.toString();<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">再回到我们的问题，现在我们知道秘密在StringBuilder.append函数的源码中。</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;margin-top:0px;margin-bottom:0px;"><code style="font-size:14px;margin:0px;overflow-wrap:normal !important;display:block !important;background:rgb(40, 43, 46);margin-right:2px;margin-left:2px;line-height:18px;padding:0.5em;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);word-wrap:break-word;box-sizing:border-box;max-width:100%;overflow:auto !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);overflow-wrap:inherit !important;word-break:inherit !important;">//针对 String 对象</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">public</span> AbstractStringBuilder <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);overflow-wrap:inherit !important;word-break:inherit !important;">append</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(255, 152, 35);overflow-wrap:inherit !important;word-break:inherit !important;">String str</span>) </span>{<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">if</span> (str == <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">null</span>)<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>        <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">return</span> appendNull();<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">int</span> len = str.length();<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    ensureCapacityInternal(count + len);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    str.getChars(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">0</span>, len, <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span>, count);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    count += len;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">return</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">this</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);overflow-wrap:inherit !important;word-break:inherit !important;">//针对非 String 对象</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">public</span> AbstractStringBuilder <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);overflow-wrap:inherit !important;word-break:inherit !important;">append</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(255, 152, 35);overflow-wrap:inherit !important;word-break:inherit !important;">Object obj</span>) </span>{<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">return</span> append(String.valueOf(obj));<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;overflow-wrap:inherit !important;word-break:inherit !important;">private</span> AbstractStringBuilder <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);overflow-wrap:inherit !important;word-break:inherit !important;">appendNull</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(255, 152, 35);overflow-wrap:inherit !important;word-break:inherit !important;"></span>) </span>{<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">int</span> c = count;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    ensureCapacityInternal(c + <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);overflow-wrap:inherit !important;word-break:inherit !important;">4</span>);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    final <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">char</span>[] <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span> = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">this</span>.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span>[c++] = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">'n'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span>[c++] = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">'u'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span>[c++] = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">'l'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">value</span>[c++] = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);overflow-wrap:inherit !important;word-break:inherit !important;">'l'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    count = c;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">return</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);overflow-wrap:inherit !important;word-break:inherit !important;">this</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></code></pre><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;">现在我们恍然大悟，append函数如果判断对象为 null，就会调用appendNull，填充”null”。</p><p style="min-height:1em;margin:0px;margin-top:1.5em;line-height:inherit;color:inherit;font-size:inherit;padding:0px;clear:both;word-wrap:break-word;box-sizing:border-box;max-width:100%;margin-bottom:1.5em;"><em style="margin:0px;padding:0px;font-style:italic;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(129, 145, 152);font-size:14.4px;background-color:rgb(242, 247, 251);">来源：http://blog.xiaohansong.com/2016/03/13/null-in-java-string/</span></em></p></div></div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 