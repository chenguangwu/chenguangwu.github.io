<html>
<head>
  <title>利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8730"/>
<h1>利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/3/2 14:46</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/anla_/article/details/50199815"><i>http://blog.csdn.net/anla_/article/details/50199815</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:&quot;microsoft yahei&quot;;background:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/bg-yellow.png&quot;) repeat;"><div><div style="min-width:980px;font-size:12px;"><div style="box-sizing:border-box;"><div style="overflow:hidden;"><div style="overflow:hidden;"><div style="background:rgb(255, 255, 255);border-image:initial;">
        <div style="margin-bottom:21px;">
            <span style="display:inline-block;vertical-align:middle;width:19px;height:19px;margin-right:10px;background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png&quot;);background-repeat:no-repeat;background-position:0px 0px;"></span>
            <h1 style="margin:0px;padding:0px;display:inline-block;vertical-align:middle;font-size:18px;">
                <span>
                    <a href="http://blog.csdn.net/anLA_/article/details/50199815" style="text-decoration:none;color:rgb(0, 0, 0);">
                        
                                                利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js)                    </a>
                </span>
            </h1>
        </div>
        <div style="line-height:22px;border-bottom:1px solid rgb(237, 237, 237);font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:12px;overflow:hidden;font-family:Arial;padding:0px 20px 5px;margin:0px -20px;text-align:right;color:rgb(153, 153, 153);margin-bottom:10px;"><span style="color:rgb(153, 153, 153);font-style:normal;font-variant:normal;font-weight:400;font-size:12px;line-height:22px;font-family:Arial;text-align:right;display:table;"> </span>
        <div style="width:100%;float:left;">
        <span style="margin:0px 5px;float:left;margin-right:0px;">
        标签：
                            <a href="http://so.csdn.net/so/search/s.do?q=eclipse&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">eclipse</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=javascript&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">javascript</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">网络爬虫</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=javaweb&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">javaweb</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=java&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">java</a>
                        </span>
    </div>
        <div>
        <span style="margin:0px 5px 0px 0px;margin-right:16px;">2015年12月06日 23:41:50</span>
        <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/css/../../../images/ico_view.png&quot;) left center no-repeat;margin-right:16px;display:inline-block;background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png&quot;);background-repeat:no-repeat;background-position:0px -25px;padding-left:24px;" title="阅读次数">18281人阅读</span>
        <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/css/../../../images/ico_comm.png&quot;) left center no-repeat;margin-right:16px;display:inline-block;background-repeat:no-repeat;background-position:0px -43px;padding-left:17px;background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon-yellow.png&quot;);" title="评论次数"> <a href="#" style="text-decoration:none;color:rgb(200, 131, 38);">评论</a>(2)</span>
        <span style="margin:0px 5px;margin-right:16px;display:inline-block;background-repeat:no-repeat;background-position:0px -62px;padding-left:17px;background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon-yellow.png&quot;);">
            <a href="#" style="text-decoration:none;color:rgb(200, 131, 38);" target="_blank" title="收藏">收藏</a>
        </span>
                <span style="margin:0px 5px;margin-right:16px;display:inline-block;background-repeat:no-repeat;background-position:0px -81px;padding-left:17px;background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon-yellow.png&quot;);">
            <a href="#" style="text-decoration:none;color:rgb(200, 131, 38);" title="举报">举报</a>
        </span>
                    </div>
<span style="color:rgb(153, 153, 153);font-style:normal;font-variant:normal;font-weight:400;font-size:12px;line-height:22px;font-family:Arial;text-align:right;height:0px;visibility:hidden;display:block;clear:both;">.</span></div>

                <div style="border-bottom:1px solid rgb(237, 237, 237);margin:0px -20px;padding:5px 20px;"><span style="display:table;"> </span>
            <div style="font-size:14px;float:left;display:inline-block;color:rgb(51, 51, 51);width:70px;line-height:28px;">
                <img src="利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客_files/category_icon.jpg" type="image/jpeg" data-filename="category_icon.jpg" height="13" style="border:none;vertical-align:middle;" width="15"/>
                <span style="vertical-align:middle;display:inline-block;">分类：</span>
            </div>
            <div style="font-size:14px;float:left;display:inline-block;color:rgb(223, 52, 52);width:90%;">
                                            <span style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">
                    <span>
                       网络爬虫学习<em style="font-style:normal;">（6）</em>
                    </span>
                    <img src="利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客_files/arrow_triangle _down.jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:none;display:inline;" width="10"/>
                    
                    
                </span>
                                        </div>
        <span style="height:0px;visibility:hidden;display:block;clear:both;">.</span></div>
                <div style="padding:20px 0px;">
                        <p style="margin:0px;padding:0px;height:14px;line-height:14px;border-left:3px solid rgb(228, 28, 30);padding-left:10px;color:rgb(102, 102, 102);font-size:14px;">版权声明：本博客所有的原创文章，转载请注明出处，作者皆保留版权。</p>
                    </div>
        <div style="margin:35px 0px;font-size:15px;color:rgb(85, 85, 85);line-height:35px;word-break:break-all;overflow:hidden;">
                    
            
            
            <div style="font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;">
                
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">更新，这就尴尬了，这篇文章博客阅读文章最多，但是被踩得也最多。</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">爬取思路：</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">所谓动态，就是通过请求后台，可以动态的改变相应的html页面，页面并不是一开始就全部展现出来的。</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">大部分操作都是通过请求完成的，一次请求，一次返回。而在大多数网页中请求往往都被开发者隐藏在了js代码中。</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">所以爬取动态网页的思路就转化为找出相应的js代码，并且执行相应的js代码，从而能够通过java代码动态的改变页面。</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">而当页面能够正确显示出来，我们也就可以类似于爬取静态网页般去爬取数据啦！</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:18px;">首先，可以利用htmlunit来模拟鼠标点击事件，这个容易实现：</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p>
<div style="width:99%;position:relative;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;overflow-y:hidden;background-color:rgb(231, 229, 220);box-sizing:border-box;font-size:12px;text-align:left;overflow-x:auto;border-color:rgb(204, 204, 204);margin:18px 0px;"><div style="box-sizing:border-box;padding-left:45px;"><div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-variant:normal;font-stretch:normal;font-size:9px;font-style:normal;font-weight:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);padding:3px 8px 10px 10px;"><b style="box-sizing:border-box;">[java]</b> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="view plain">view plain</a><span style="box-sizing:border-box;"> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="copy">copy</a><div style="box-sizing:border-box;position:absolute;left:483px;top:879px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;visibility:hidden;background-color:rgb(255, 255, 255);"></div></div></span><span style="box-sizing:border-box;"> </span></div></div><ol start="1" style="box-sizing:border-box;padding:0px;border:none;list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);margin:0px 0px 1px 45px;"><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">/**</span> </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> * 通过htmlunit来获得一些搜狗的网址。</span> </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> * 通过模拟鼠标点击事件来实现</span> </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> * @param key</span> </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> * @return</span> </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> * @throws Exception</span> </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;"> */</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> String getNextUrl(String key){  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    String page = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> String();  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">try</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        WebClient webClient = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> WebClient();  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        webClient.getOptions().setCssEnabled(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">false</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        webClient.getOptions().setJavaScriptEnabled(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">false</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//去拿网页</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        HtmlPage htmlPage = webClient.getPage(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;http://pic.sogou.com/&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//得到表单</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        HtmlForm form = htmlPage.getFormByName(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;searchForm&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//得到提交按钮</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        HtmlSubmitInput button = form.getInputByValue(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;搜狗搜索&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//得到输入框</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        HtmlTextInput textField = form.getInputByName(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;query&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//输入内容</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        textField.setValueAttribute(key);  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//点一下按钮</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        HtmlPage nextPage = button.click();  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        String str = nextPage.toString();  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        page = cutString(str);  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        webClient.close();  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    } <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">catch</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> (Exception e) {  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        e.printStackTrace();  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }   </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">return</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> page;  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">}  </span></li></ol></div>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:18px;">如上图所示，我就是通过java代码，向搜索矿中填入关键字，然后在通过getInputByValue方法获得button控件，最后直接button.click()，</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:18px;">即可以模拟点击，并且把点击后的返回的http请求解析到htmlpage中。</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><img src="利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客_files/Center.png" type="image/png" data-filename="Center.png" alt="" height="99" style="border:none;box-sizing:border-box;margin:0px;max-height:100%;max-width:602px;height:auto;" width="602"/><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
这个功能其实很强大，比如你可以通过这个功能去模拟抢票，或者利用点击事件，加上搜索相关知识，将某一整个系统离线下来，并且以html的形式保存。
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">接下来就是利用强大的htmlunit来执行js代码的过程了。</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">首先写一个简单的jsp页面：</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p><div style="width:99%;position:relative;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;overflow-y:hidden;background-color:rgb(231, 229, 220);box-sizing:border-box;font-size:12px;text-align:left;overflow-x:auto;border-color:rgb(204, 204, 204);margin:18px 0px;"><div style="box-sizing:border-box;padding-left:45px;"><div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-variant:normal;font-stretch:normal;font-size:9px;font-style:normal;font-weight:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);padding:3px 8px 10px 10px;"><b style="box-sizing:border-box;">[html]</b> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="view plain">view plain</a><span style="box-sizing:border-box;"> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="copy">copy</a><div style="box-sizing:border-box;position:absolute;left:485px;top:2113px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;visibility:hidden;background-color:rgb(255, 255, 255);"></div></div></span><span style="box-sizing:border-box;"> </span></div></div><ol start="1" style="box-sizing:border-box;padding:0px;border:none;list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);margin:0px 0px 1px 45px;"><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">%@ page </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">language</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;java&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">contentType</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;text/html; charset=UTF-8&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">pageEncoding</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;UTF-8&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">%</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">html</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">head</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">meta</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">http-equiv</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;Content-Type&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">content</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;text/html; charset=UTF-8&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">title</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">Insert title here</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">title</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">head</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">body</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">id</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;body&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">label</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">id</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;test&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">原数字</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">label</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">body</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">script</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">type</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">&quot;text/javascript&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    function change(value) {  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        document.getElementById(&quot;test&quot;)<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:red;">.innerHTML</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(0, 0, 255);">value</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        return &quot;hello htmlUnit&quot;;  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">script</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&lt;/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">html</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(153, 51, 0);font-weight:700;">&gt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li></ol></div><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">由上可知，jsp页面很简单，就一个函数change，用于给htmlUnit调用。</span></strong>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">再下来就是一个使用htmlunit的类。该类通过支持JavaScript解释器，</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">然后在页面中嵌入自己写的JavaScript代码从而执行，并且获得执行后的返回结果以及返回页面。</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p><div style="width:99%;position:relative;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;overflow-y:hidden;background-color:rgb(231, 229, 220);box-sizing:border-box;font-size:12px;text-align:left;overflow-x:auto;border-color:rgb(204, 204, 204);margin:18px 0px;"><div style="box-sizing:border-box;padding-left:45px;"><div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-variant:normal;font-stretch:normal;font-size:9px;font-style:normal;font-weight:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);padding:3px 8px 10px 10px;"><b style="box-sizing:border-box;">[java]</b> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="view plain">view plain</a><span style="box-sizing:border-box;"> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="copy">copy</a><div style="box-sizing:border-box;position:absolute;left:483px;top:2703px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;visibility:hidden;background-color:rgb(255, 255, 255);"></div></div></span><span style="box-sizing:border-box;"> </span></div></div><ol start="1" style="box-sizing:border-box;padding:0px;border:none;list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);margin:0px 0px 1px 45px;"><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">package</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> com.blog.anla;  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">import</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> com.gargoylesoftware.htmlunit.ScriptResult;  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">import</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> com.gargoylesoftware.htmlunit.WebClient;  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">import</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> com.gargoylesoftware.htmlunit.html.HtmlPage;  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">class</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> TestMyOwnPage {  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">void</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> action() {  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        WebClient webClient = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> WebClient();  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">try</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            webClient.getOptions().setCssEnabled(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">false</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            webClient.getOptions().setJavaScriptEnabled(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">); </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 设置支持JavaScript。</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 去拿网页</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            HtmlPage htmlPage = webClient  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                    .getPage(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;http://localhost:8989/testHtmlScrop/index.jsp&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            String s = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;更改后的数字&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            ScriptResult t = htmlPage.executeJavaScript(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;change(\&quot;&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> + s  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                    + <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;\&quot;);&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">, </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;injected script&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">, </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">500</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 这里是在500行插入这一小行JavaScript代码段，因为如果在默认的1行，那不会有结果</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 因为js是顺序执行的，当你执行第一行js代码时，可能还没有渲染body里面的标签。</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            HtmlPage myPage = (HtmlPage) t.getNewPage();  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            String nextPage = myPage.asXml().toString();  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            String nextPage2 = myPage.asText().toString();  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        } <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">catch</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> (Exception e) {  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            e.printStackTrace();  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        } <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">finally</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            webClient.close();  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">static</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">void</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> main(String[] args) {  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        TestMyOwnPage tmop = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> TestMyOwnPage();  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        tmop.action();  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">}  </span></li></ol></div>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
在t.getNewPage()中有两个属性，一个是<br style="box-sizing:border-box;"/><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">javaScriptResult：执行该段代码后返回的结果，如果有（如上我写的，就返回hello htmlunit），如果没有（返回Undefined）。</span></strong>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">newPage_:执行该段代码后返回的整个页面。</span></strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;">结果如图：</strong></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><img src="利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客_files/Center [1].png" type="image/png" data-filename="Center.png" alt="" height="230" style="border:none;box-sizing:border-box;margin:0px;max-height:100%;max-width:602px;height:auto;" width="602"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">最终这段代码执行的结果如下：</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">asXml():将整个页面的html代码返回给我们：</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><img src="利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客_files/Center [2].png" type="image/png" data-filename="Center.png" alt="" height="432" style="border:none;box-sizing:border-box;margin:0px;max-height:100%;max-width:602px;height:auto;" width="602"/><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">而asText()则仅仅返回页面上能显示的值，即head和label标签：</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><img src="利用htmlunit和jsoup来实现爬取js的动态网页实践(执行js) - CSDN博客_files/Center [3].png" type="image/png" data-filename="Center.png" alt="" height="286" style="border:none;box-sizing:border-box;margin:0px;max-height:100%;max-width:602px;height:auto;" width="594"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">这样的执行思路也就能够去动态的执行相应的js代码，从而爬取到需要的数据了。<br style="box-sizing:border-box;"/><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">----------------------------------------------------------------------------------------2017年7月更新--------------------------------------------------------------------------------------------------------</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">这两天在做一个有关于网络爬虫的系统</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">但是呢，一开始爬的时候就发现问题，js的动态页面的爬不下来</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">网上找了好多方法，google也问了，主要还是提到htmlunit，以下是核心代码，</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">使用htmlunit主要就是为了模拟浏览器操作，因为有些链接点击无法直接通过src来获得url，而通常使用JavaScript</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">进行简单拼接后的网址，所以这样一来，使用htmlunit直接来模拟浏览器点击，相比来说就更加的简单了。<br style="box-sizing:border-box;"/></p>
<div style="width:99%;position:relative;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;overflow-y:hidden;background-color:rgb(231, 229, 220);box-sizing:border-box;font-size:12px;text-align:left;overflow-x:auto;border-color:rgb(204, 204, 204);margin:18px 0px;"><div style="box-sizing:border-box;padding-left:45px;"><div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-variant:normal;font-stretch:normal;font-size:9px;font-style:normal;font-weight:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);padding:3px 8px 10px 10px;"><b style="box-sizing:border-box;">[java]</b> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="view plain">view plain</a><span style="box-sizing:border-box;"> <a href="http://csdnimg.cn/release/phoenix/#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(&quot;http://csdnimg.cn//csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;);color:rgb(12, 137, 207);" target="_blank" title="copy">copy</a><div style="box-sizing:border-box;position:absolute;left:483px;top:5270px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;visibility:hidden;background-color:rgb(255, 255, 255);"></div></div></span><span style="box-sizing:border-box;"> </span></div></div><ol start="1" style="box-sizing:border-box;padding:0px;border:none;list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);margin:0px 0px 1px 45px;"><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       WebClient webClient = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> WebClient();    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       webClient.getOptions().setJavaScriptEnabled(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">); </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//启用JS解释器，默认为true  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       webClient.getOptions().setCssEnabled(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">false</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">); </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//禁用css支持      </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       webClient.getOptions().setThrowExceptionOnScriptError(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">false</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">); </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//js运行错误时，是否抛出异常   </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       webClient.getOptions().setTimeout(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">20000</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);        </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       HtmlPage page = wc.getPage(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;http://www.hao123.com&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//我认为这个最重要</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       String pageXml = page.asXml(); <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//以xml的形式获取响应文本  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">   </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">/**jsoup解析文档*/</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">       Document doc = Jsoup.parse(pageXml, <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;http://cq.qq.com&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);     </span></span></li></ol></div><br style="box-sizing:border-box;"/><p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p>
<pre style="line-height:24px;box-sizing:border-box;background-color:rgb(255,255,252);font-family:'Courier New';border:1px solid rgb(255,255,204);word-wrap:break-word;white-space:pre-wrap;color:rgb(0, 0, 0);margin:0px 0px 24px;font-size:14px;overflow:auto;"><span style="box-sizing:border-box;padding:0px;margin:0px;"><span style="box-sizing:border-box;font-size:10px;">这个时候，就可以得到jsoup中的document对象了，接下来就好写了，就像爬普通静态网页一样了。</span></span></pre>
<pre style="line-height:24px;box-sizing:border-box;background-color:rgb(255,255,252);font-family:'Courier New';border:1px solid rgb(255,255,204);word-wrap:break-word;white-space:pre-wrap;color:rgb(0, 0, 0);margin:0px 0px 24px;font-size:14px;overflow:auto;"><span style="box-sizing:border-box;font-size:10px;">不过，webclient解析是还是会出现一些问题，js的问题，</span></pre>
<pre style="line-height:24px;box-sizing:border-box;background-color:rgb(255,255,252);font-family:'Courier New';border:1px solid rgb(255,255,204);word-wrap:break-word;white-space:pre-wrap;color:rgb(0, 0, 0);margin:0px 0px 24px;font-size:14px;overflow:auto;"><span style="box-sizing:border-box;font-size:10px;">主要是由于目标url的js写的有些问题，但在实际的浏览器中却会忽略，eclipse中会报异常。</span></pre>
<br style="box-sizing:border-box;"/><p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;">今天一看，好多人踩啊哈，可能当时并没有认真的写博客吧，如果大家想找一个java爬虫的项目，可以去我的专栏</p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><a href="http://blog.csdn.net/column/details/javaweb-lire-jsoup.html" style="box-sizing:border-box;text-decoration:none;color:rgb(12, 137, 207);" target="_blank">图片搜索</a>  包括使用jsoup来爬图，以及lire来建立索引以及搜索图片。<br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><br style="box-sizing:border-box;"/></p>
<p style="color:rgb(79, 79, 79);box-sizing:border-box;padding:0px;font-size:16px;font-weight:400;line-height:26px;min-height:26px;text-align:justify;margin:0px 0px 16px;word-break:normal;word-wrap:break-word;"><strong style="box-sizing:border-box;font-weight:700;"><span style="box-sizing:border-box;font-weight:700;font-size:14px;">赠人玫瑰手留余香，有问题的大家可以多多讨论呀！</span></strong></p>
            </div>
                
        </div>
        
        <ul style="margin-top:30px;">
                                    <li style="margin-bottom:16px;">
                <span style="padding-left:27px;width:51px;line-height:26px;display:inline-block;color:rgb(255, 255, 255);height:26px;margin-right:7px;background:rgb(153, 153, 153);background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png&quot;);background-repeat:no-repeat;background-position:8px -111px;">上一篇</span>
                <a href="http://blog.csdn.net/anla_/article/details/50118859" style="text-decoration:none;color:rgb(51, 51, 51);">使用eclipse时，jvm错误</a>
            </li>
            
                                    <li>
                <span style="padding-left:27px;width:51px;line-height:26px;display:inline-block;color:rgb(255, 255, 255);height:26px;background:rgb(153, 153, 153);margin-right:7px;background-image:url(&quot;http://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png&quot;);background-repeat:no-repeat;background-position:8px -140px;">下一篇</span>
                <a href="http://blog.csdn.net/anla_/article/details/50365208" style="text-decoration:none;color:rgb(51, 51, 51);">如何发布自己写的网站，使自己的机器成为服务器</a>
            </li>
                    </ul>
        <div style="clear:both;height:10px;"></div>
    </div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 