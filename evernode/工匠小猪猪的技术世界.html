<html>
<head>
  <title>工匠小猪猪的技术世界</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2886"/>
<h1>工匠小猪猪的技术世界</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/11/28 13:43</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://mp.weixin.qq.com/s?__biz=MzUzNTY4NTYxMA==&mid=2247486242&idx=2&sn=c1ec0e301d6320fc5faab097bf715f24&chksm=fa80fba7cdf772b12fee5763f9dd8c58e8d193cab785f3939c8b579aa5698369250dfa04237e&mpshare=1&scene=1&srcid=1124kN1XiQafCnWPBQ61EED3#rd"><i>https://mp.weixin.qq.com/s?__biz=MzUzNTY4NTYxMA==&amp;mid=2247486242&amp;idx=2&amp;sn=c1ec0e301d6320fc5faab097bf715f24&amp;chksm=fa80fba7cdf772b12fee5763f9dd8c58e8d193cab785f3939c8b579aa5698369250dfa04237e&amp;mpshare=1&amp;scene=1&amp;srcid=1124kN1XiQafCnWPBQ61EED3#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;"><div style="text-size-adjust:100%;line-height:1.6;"><div style="font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(51, 51, 51);letter-spacing:0.034em;background-color:rgb(255, 255, 255);"><div><div style="word-wrap:break-word;"><div style="background-color:rgb(255, 255, 255);"><div><div><div style="overflow:hidden;color:rgb(51, 51, 51);font-size:17px;word-wrap:break-word;text-align:justify;">
                    

                    

                    
                    
                    <p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);text-align:center;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;white-space:normal;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">每天分享一个技术知识点，推荐一篇值得阅读的好文，我们一起终身学习。</span></strong></p><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640" type="image/webp" data-filename="640" height="68" style="height:auto !important;margin:0px;visibility:visible !important;box-sizing:border-box !important;overflow-wrap:break-word !important;padding:0px;text-align:center;letter-spacing:1.5px;word-wrap:break-word;max-width:100%;width:677px !important;" width="677"/></p><div style="font-size:17px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;color:rgb(51, 51, 51);font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;padding:0px;letter-spacing:0.544px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;line-height:25.6px;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><blockquote style="border-left:3px solid rgb(219, 219, 219);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgba(112, 138, 153, 0.1);padding-left:10px;padding:10px 20px 10px 15px;margin-bottom:20px;border-left-width:5px;border-left-color:rgb(214, 219, 223);word-wrap:break-word;overflow-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;font-size:16px;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:11px;letter-spacing:0.544px;color:rgb(62, 62, 62);overflow-wrap:break-word !important;">本文转载自公众号：http://www.cnblogs.com/toutou/p/9183795.html</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;font-size:16px;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:11px;letter-spacing:0.544px;color:rgb(62, 62, 62);overflow-wrap:break-word !important;">作者：请叫我头头哥 </span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;font-size:16px;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 76, 65);font-family:宋体;font-size:12px;letter-spacing:2px;overflow-wrap:break-word !important;">(本文版权归原作者所有。转载文章仅为传播更多信息之目的，如有侵权请与我们联系，我们将及时处理。)</span></p></blockquote></div></div></div></div></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;padding:0px;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:15px;">这是下篇，上一篇MySQL干货地址：<a href="http://mp.weixin.qq.com/s?__biz=MzUzNTY4NTYxMA==&amp;mid=2247486232&amp;idx=2&amp;sn=327f9972e81e9a8bfc35930ebfe4538c&amp;chksm=fa80fb9dcdf7728b28bd3bdcef7b7cd946d3968dffd829941c7efd2de4af40dc2aeb47bdf7a2&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(87, 107, 149);text-decoration:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);max-width:100%;box-sizing:border-box;word-wrap:break-word;" target="_blank">别花冤枉钱买专栏了！两篇文章带你读懂MySQL优化原理</a></span></p><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;padding:0px;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;font-size:15px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">当MySQL单表记录数过大时，增删改查性能都会急剧下降，所以我们本文会提供一些优化参考，大家可以参考以下步骤来优化：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="font-family:arial, helvetica, sans-serif;margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(55, 57, 57);margin-top:5px;border-style:none none none solid;font-size:14px;line-height:25px;padding:10px;text-shadow:rgb(34, 95, 135) 0px 1px 0px;color:rgb(255, 255, 255);border-radius:4px;box-shadow:rgb(153, 153, 153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253, 208, 0);word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:17px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;">一、单表优化</span></strong></span></div></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">除非单表数据未来会一直不断上涨，否则不要一开始就考虑拆分，拆分会带来逻辑、部署、运维的各种复杂度。一般以整型值为主的表在千万级以下，字符串为主的表在五百万以下是没有太大问题的，而事实上很多时候MySQL单表的性能依然有不少优化空间，甚至能正常支撑千万级以上的数据量。</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;line-height:25.6px;min-height:1em;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">1.1 字段</strong></span></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">尽量使用TINYINT、SMALLINT、MEDIUM_INT作为整数类型而非INT，如果非负则加上UNSIGNED；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">VARCHAR的长度只分配真正需要的空间；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">使用枚举或整数代替字符串类型；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">尽量使用TIMESTAMP而非DATETIME；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">单表不要有太多字段，建议在20以内；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">避免使用NULL字段，很难查询优化且占用额外索引空间；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">用整型来存IP。</span></p></li></ul><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">1.2 索引</strong></span></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">索引并不是越多越好，要根据查询有针对性的创建，考虑在WHERE和ORDER BY命令上涉及的列建立索引，可根据EXPLAIN来查看是否用了索引还是全表扫描；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">应尽量避免在WHERE子句中对字段进行NULL值判断，否则将导致引擎放弃使用索引而进行全表扫描；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">值分布很稀少的字段不适合建索引，例如“</span>性别<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">”这种只有两三个值的字段；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">字符字段只建前缀索引；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">字符字段最好不要做主键；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不用外键，由程序保证约束；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">尽量不用UNIQUE，由程序保证约束；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">使用多列索引时主意顺序和查询条件保持一致，同时删除不必要的单列索引。</span></p><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p></li></ul><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">1.3 查询SQL</strong></span></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可通过开启慢查询日志来找出较慢的SQL；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不做列运算：SELECT id WHERE age + 1 = 10，任何对列的操作都将导致表扫描，它包括数据库教程函数、计算表达式等等，查询时要尽可能将操作移至等号右边；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">sql语句尽可能简单：一条sql只能在一个cpu运算；大语句拆小语句，减少锁时间；一条大sql可以堵死整个库；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不用SELECT *；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">OR改写成IN：OR的效率是n级别，IN的效率是log(n)级别，IN的个数建议控制在200以内；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不用函数和触发器，在应用程序实现；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">避免%xxx式查询；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">少用JOIN；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">使用同类型进行比较，比如用'123'和'123'比，123和123比；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">尽量避免在WHERE子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">对于连续数值，使用BETWEEN不用IN：SELECT id FROM t WHERE num BETWEEN 1 AND 5；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">列表数据不要拿全表，要使用LIMIT来分页，每页数量也不要太大。</span></p></li></ul><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">1.4 引擎</strong></span></p></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">目前广泛使用的是MyISAM和InnoDB两种引擎：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">MyISAM</strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">MyISAM引擎是MySQL 5.1及之前版本的默认引擎，它的特点是：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不支持行锁，读取时对需要读到的所有表加锁，写入时则对表加排它锁；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不支持事务；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不支持外键；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不支持崩溃后的安全恢复；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">在表有读取查询的同时，支持往表中插入新纪录；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">支持BLOB和TEXT的前500个字符索引，支持全文索引；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">支持延迟更新索引，极大提升写入性能；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">对于不会进行修改的表，支持压缩表，极大减少磁盘空间占用。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">InnoDB</strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">InnoDB在MySQL 5.5后成为默认索引，它的特点是：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">支持行锁，采用MVCC来支持高并发；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">支持事务；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">支持外键；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">支持崩溃后的安全恢复；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不支持全文索引。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">ps: 据说InnoDB已经在MySQL 5.6.4支持全文索引了</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">总体来讲，MyISAM适合SELECT密集型的表，而InnoDB适合INSERT和UPDATE密集型的表。</span></p><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">1.5 系统调优参数</strong></span></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以使用下面几个工具来做基准测试：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">sysbench：</strong>一个模块化，跨平台以及多线程的性能测试工具。</span></p><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:12px;color:rgb(136, 136, 136);overflow-wrap:break-word !important;">https://github.com/akopytov/sysbench</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">iibench-mysql：</strong>基于Java的MySQL / Percona / MariaDB 索引进行插入性能测试工具。</span></p><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(136, 136, 136);font-size:12px;overflow-wrap:break-word !important;">https://github.com/tmcallaghan/iibench-mysql</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">tpcc-mysql：</strong>Percona开发的TPC-C测试工具。</span></p><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:12px;color:rgb(136, 136, 136);overflow-wrap:break-word !important;">https://github.com/Percona-Lab/tpcc-mysql</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">具体的调优参数内容较多，具体可参考官方文档，这里介绍一些比较重要的参数：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">back_log：</strong>back_log值可以指出在MySQL暂时停止回答新请求之前的短时间内多少个请求可以被存在堆栈中。也就是说，如果MySQL的连接数据达到max_connections时，新来的请求将会被存在堆栈中，以等待某一连接释放资源，该堆栈的数量即back_log，如果等待连接的数量超过back_log，将不被授予连接资源。可以从默认的50升至500。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">wait_timeout：</strong>数据库连接闲置时间，闲置连接会占用内存资源。可以从默认的8小时减到半小时。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">max_user_connection：</strong>最大连接数，默认为0无上限，最好设一个合理上限。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">thread_concurrency：</strong>并发线程数，设为CPU核数的两倍。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">skip_name_resolve：</strong>禁止对外部连接进行DNS解析，消除DNS解析时间，但需要所有远程主机用IP访问。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">key_buffer_size：</strong>索引块的缓存大小，增加会提升索引处理速度，对MyISAM表性能影响最大。对于内存4G左右，可设为256M或384M，通过查询show status like 'key_read%'，保证key_reads / key_read_requests在0.1%以下最好。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">innodb_buffer_pool_size：</strong>缓存数据块和索引块，对InnoDB表性能影响最大。通过查询show status like 'Innodb_buffer_pool_read%'，保证 (Innodb_buffer_pool_read_requests – Innodb_buffer_pool_reads) / Innodb_buffer_pool_read_requests越高越好。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">innodb_additional_mem_pool_size：</strong>InnoDB存储引擎用来存放数据字典信息以及一些内部数据结构的内存空间大小，当数据库对象非常多的时候，适当调整该参数的大小以确保所有数据都能存放在内存中提高访问效率，当过小的时候，MySQL会记录Warning信息到数据库的错误日志中，这时就需要该调整这个参数大小。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">innodb_log_buffer_size：</strong>InnoDB存储引擎的事务日志所使用的缓冲区，一般来说不建议超过32MB。 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">query_cache_size：</strong>缓存MySQL中的ResultSet，也就是一条SQL语句执行的结果集，所以仅仅只能针对select语句。当某个表的数据有任何任何变化，都会导致所有引用了该表的select语句在Query Cache中的缓存数据失效。所以，当我们数据变化非常频繁的情况下，使用Query Cache可能得不偿失。根据命中率(Qcache_hits/(Qcache_hits+Qcache_inserts)*100))进行调整，一般不建议太大，256MB可能已经差不多了，大型的配置型静态数据可适当调大。可以通过命令show status like 'Qcache_%'查看目前系统Query catch使用大小。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">read_buffer_size：</strong><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">MySQL读入缓冲区大小。对表进行顺序扫描的请求将分配一个读入缓冲区，MySQL会为它分配一段内存缓冲区。如果对表的顺序扫描请求非常频繁，可以通过增加该变量值以及内存缓冲区大小提高其性能。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">sort_buffer_size：</strong>MySQL执行排序使用的缓冲大小。如果想要增加ORDER BY的速度，首先看是否可以让MySQL使用索引而不是额外的排序阶段。如果不能，可以尝试增加sort_buffer_size变量的大小。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">read_rnd_buffer_size：</strong>MySQL的随机读缓冲区大小。当按任意顺序读取行时(例如按照排序顺序)，将分配一个随机读缓存区。进行排序查询时，MySQL会首先扫描一遍该缓冲，以避免磁盘搜索，提高查询速度，如果需要排序大量数据，可适当调高该值。但MySQL会为每个客户连接发放该缓冲空间，所以应尽量适当设置该值，以避免内存开销过大。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">record_buffer：</strong>每个进行一个顺序扫描的线程为其扫描的每张表分配这个大小的一个缓冲区。如果你做很多顺序扫描，可能想要增加该值。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">thread_cache_size：</strong>保存当前没有与连接关联但是准备为后面新的连接服务的线程，可以快速响应连接的线程请求而无需创建新的。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">table_cache：</strong>类似于thread_cache _size，但用来缓存表文件，对InnoDB效果不大，主要用于MyISAM。</span></p></li></ul><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;line-height:25.6px;min-height:1em;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">1.6 升级硬件</strong></span></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">Scale up，这个不多说了，根据MySQL是CPU密集型还是I/O密集型，通过提升CPU和内存、使用SSD，都能显著提升MySQL性能。</span></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></div></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="font-family:arial, helvetica, sans-serif;margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(55, 57, 57);margin-top:5px;border-style:none none none solid;font-size:14px;line-height:25px;padding:10px;text-shadow:rgb(34, 95, 135) 0px 1px 0px;color:rgb(255, 255, 255);border-radius:4px;box-shadow:rgb(153, 153, 153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253, 208, 0);word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:17px;overflow-wrap:break-word !important;">二、读写分离</span></strong></span></div></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">也是目前常用的优化，从库读主库写，一般不要采用双主或多主引入很多复杂性，尽量采用文中的其他方案来提高性能。同时目前很多拆分的解决方案同时也兼顾考虑了读写分离。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="font-family:arial, helvetica, sans-serif;margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(55, 57, 57);margin-top:5px;border-style:none none none solid;font-size:14px;line-height:25px;padding:10px;text-shadow:rgb(34, 95, 135) 0px 1px 0px;color:rgb(255, 255, 255);border-radius:4px;box-shadow:rgb(153, 153, 153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253, 208, 0);word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:17px;overflow-wrap:break-word !important;">三、缓存</span></strong></span></div></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">缓存可以发生在这些层次：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">MySQL内部：</strong>在系统调优参数介绍了相关设置；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">数据访问层：</strong>比如MyBatis针对SQL语句做缓存，而Hibernate可以精确到单个记录，这里缓存的对象主要是持久化对象Persistence Object；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">应用服务层：</strong>可以通过编程手段对缓存做到更精准的控制和更多的实现策略，这里缓存的对象是数据传输对象Data Transfer Object；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">Web层：</strong>针对web页面做缓存；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">浏览器客户端：</strong>用户端的缓存。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以根据实际情况在一个层次或多个层次结合加入缓存。这里重点介绍下服务层的缓存实现，目前主要有两种方式：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">直写式（Write Through）：</strong>在数据写入数据库后，同时更新缓存，维持数据库与缓存的一致性。这也是当前大多数应用缓存框架如Spring Cache的工作方式。这种实现非常简单，同步好，但效率一般。 </span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">回写式（Write Back）：</strong>当有数据要写入数据库时，只会更新缓存，然后异步批量的将缓存数据同步到数据库上。这种实现比较复杂，需要较多的应用逻辑，同时可能会产生数据库与缓存的不同步，但效率非常高。</span></p></li></ul><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;line-height:25.6px;min-height:1em;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="font-family:arial, helvetica, sans-serif;margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(55, 57, 57);margin-top:5px;border-style:none none none solid;font-size:14px;line-height:25px;padding:10px;text-shadow:rgb(34, 95, 135) 0px 1px 0px;color:rgb(255, 255, 255);border-radius:4px;box-shadow:rgb(153, 153, 153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253, 208, 0);word-wrap:break-word;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);font-size:17px;overflow-wrap:break-word !important;">四、表分区</span></strong></div></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">MySQL在5.1版引入的分区是一种简单的水平拆分，用户需要在建表的时候加上分区参数，对应用是透明的无需修改代码。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">对用户来说，分区表是一个独立的逻辑表，但是底层由多个物理子表组成，实现分区的代码实际上是通过对一组底层表的对象封装，但对SQL层来说是一个完全封装底层的黑盒子。MySQL实现分区的方式也意味着索引也是按照分区的子表定义，没有全局索引。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;font-family:微软雅黑;min-height:1em;color:rgb(51, 51, 51);font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [1]" type="image/webp" data-filename="640" height="289" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:558px !important;" width="558"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">用户的SQL语句是需要针对分区表做优化，SQL条件中要带上分区条件的列，从而使查询定位到少量的分区上，否则就会扫描全部分区，可以通过EXPLAIN PARTITIONS来查看某条SQL语句会落在那些分区上，从而进行SQL优化，如下图5条记录落在两个分区上：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="text-align:justify;margin:0px;max-width:100%;box-sizing:border-box !important;border-color:initial;color:rgb(51, 51, 51);font-variant-numeric:normal;font-variant-east-asian:normal;letter-spacing:0.544px;padding:0px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;font-family:微软雅黑;border-width:0px;border-style:none;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;margin-top:10px;margin-bottom:10px;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;width:677px;transform:rotate(0deg);overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;width:50px;height:4px;color:rgb(255, 255, 255);background-color:rgba(19, 139, 222, 0);overflow-wrap:break-word !important;"></div></div><div style="margin:0px;padding:10px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;margin-top:-4px;background-color:rgb(239, 239, 239);overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">mysql&gt; explain partitions select count(1) from user_partition where id in (1,2,3,4,5);</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">+----+-------------+----------------+------------+-------+---------------+---------+---------+------+------+--------------------------+</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">| id | select_type | table          | partitions | type  | possible_keys | key     | key_len | ref  | rows | Extra                    |</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">+----+-------------+----------------+------------+-------+---------------+---------+---------+------+------+--------------------------+</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">|  1 | SIMPLE      | user_partition | p1,p4      | range | PRIMARY       | PRIMARY | 8       | NULL |    5 | Using where; Using index |</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">+----+-------------+----------------+------------+-------+---------------+---------+---------+------+------+--------------------------+</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">1 row in set (0.00 sec)</span></p></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">4.1 分区的好处是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以让单表存储更多的数据；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">分区表的数据更容易维护，可以通过清楚整个分区批量删除大量数据，也可以增加新的分区来支持新插入的数据，另外，还可以对一个独立分区进行优化、检查、修复等操作；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">部分查询能够从查询条件确定只落在少数分区上，速度会很快；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">分区表的数据还可以分布在不同的物理设备上，从而高效利用多个硬件设备；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以使用分区表赖避免某些特殊瓶颈，例如InnoDB单个索引的互斥访问、ext3文件系统的inode锁竞争；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以备份和恢复单个分区。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">4.2 分区的限制和缺点：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">一个表最多只能有1024个分区；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">如果分区字段中有主键或者唯一索引的列，那么所有主键列和唯一索引列都必须包含进来；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">分区表无法使用外键约束；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">NULL值会使分区过滤无效；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">所有分区必须使用相同的存储引擎。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">4.3 分区的类型：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">RANGE分区：</strong>基于属于一个给定连续区间的列值，把多行分配给分区。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">LIST分区：</strong>类似于按RANGE分区，区别在于LIST分区是基于列值匹配一个离散值集合中的某个值来进行选择。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">HASH分区：</strong>基于用户定义的表达式的返回值来进行选择的分区，该表达式使用将要插入到表中的这些行的列值进行计算。这个函数可以包含MySQL中有效的、产生非负整数值的任何表达式。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">KEY分区：</strong>类似于按HASH分区，区别在于KEY分区只支持计算一列或多列，且MySQL服务器提供其自身的哈希函数。必须有一列或多列包含整数值。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">4.4 分区适合的场景有：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;padding:0px;margin-right:5px;margin-left:5px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">最适合的场景数据的时间序列性比较强，则可以按时间来分区，如下所示：</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="text-align:justify;margin:0px;max-width:100%;box-sizing:border-box !important;border-color:initial;color:rgb(51, 51, 51);font-variant-numeric:normal;font-variant-east-asian:normal;letter-spacing:0.544px;padding:0px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;font-family:微软雅黑;border-width:0px;border-style:none;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;margin-top:10px;margin-bottom:10px;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;width:677px;transform:rotate(0deg);overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;width:50px;height:4px;color:rgb(255, 255, 255);background-color:rgba(19, 139, 222, 0);overflow-wrap:break-word !important;"></div></div><div style="margin:0px;padding:10px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;margin-top:-4px;background-color:rgb(239, 239, 239);overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">CREATE TABLE members (</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    firstname VARCHAR(25) NOT NULL,</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    lastname VARCHAR(25) NOT NULL,</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    username VARCHAR(16) NOT NULL,</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    email VARCHAR(35),</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    joined DATE NOT NULL</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">)PARTITION BY RANGE( YEAR(joined) ) (</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    PARTITION p0 VALUES LESS THAN (1960),</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    PARTITION p1 VALUES LESS THAN (1970),</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    PARTITION p2 VALUES LESS THAN (1980),</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    PARTITION p3 VALUES LESS THAN (1990),</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">    PARTITION p4 VALUES LESS THAN MAXVALUE</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:10px;overflow-wrap:break-word !important;">);</span></p></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">查询时加上时间范围条件效率会非常高，同时对于不需要的历史数据能很容的批量删除。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;padding:0px;margin-right:5px;margin-left:5px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">如果数据有明显的热点，而且除了这部分数据，其他数据很少被访问到，那么可以将热点数据单独放在一个分区，让这个分区的数据能够有机会都缓存在内存中，查询时只访问一个很小的分区表，能够有效使用索引和缓存。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">另外MySQL有一种早期的简单的分区实现 - 合并表（merge table），限制较多且缺乏优化，不建议使用，应该用新的分区机制来替代。</span></p><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="font-family:arial, helvetica, sans-serif;margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(55, 57, 57);margin-top:5px;border-style:none none none solid;font-size:14px;line-height:25px;padding:10px;text-shadow:rgb(34, 95, 135) 0px 1px 0px;color:rgb(255, 255, 255);border-radius:4px;box-shadow:rgb(153, 153, 153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253, 208, 0);word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);font-size:17px;overflow-wrap:break-word !important;">五、垂直拆分</span></div></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">垂直分库是根据数据库里面的数据表的相关性进行拆分，比如：一个数据库里面既存在用户数据，又存在订单数据，那么垂直拆分可以把用户数据放到用户库、把订单数据放到订单库。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">垂直分表是对数据表进行垂直拆分的一种方式，常见的是把一个多字段的大表按常用字段和非常用字段进行拆分，每个表里面的数据记录数一般情况下是相同的，只是字段不一样，使用主键关联。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">比如原始的用户表是：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;font-family:微软雅黑;min-height:1em;color:rgb(51, 51, 51);font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [2]" type="image/webp" data-filename="640" height="204" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:527px !important;" width="527"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">垂直拆分后是：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;font-family:微软雅黑;min-height:1em;color:rgb(51, 51, 51);font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [3]" type="image/webp" data-filename="640" height="171" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:486px !important;" width="486"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">垂直拆分的优点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以使得行数据变小，一个数据块(Block)就能存放更多的数据，在查询时就会减少I/O次数(每次查询时读取的Block 就少)；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以达到最大化利用Cache的目的，具体在垂直拆分的时候可以将不常变的字段放一起，将经常改变的放一起；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">数据维护简单。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">缺点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">主键出现冗余，需要管理冗余列；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">会引起表连接JOIN操作（增加CPU开销）可以通过在业务服务器上进行join来减少数据库压力；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">依然存在单表数据量过大的问题（需要水平拆分）。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">事务处理复杂。</span></p><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p></li></ul><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="font-family:arial, helvetica, sans-serif;margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(55, 57, 57);margin-top:5px;border-style:none none none solid;font-size:14px;line-height:25px;padding:10px;text-shadow:rgb(34, 95, 135) 0px 1px 0px;color:rgb(255, 255, 255);border-radius:4px;box-shadow:rgb(153, 153, 153) 2px 2px 4px;border-left-width:10px;border-left-color:rgb(253, 208, 0);word-wrap:break-word;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);font-size:17px;overflow-wrap:break-word !important;">六、水平拆分</span></strong></div></div></div></div></div><p style="color:rgb(51, 51, 51);margin:0px;max-width:100%;box-sizing:border-box !important;background-color:rgb(255, 255, 255);white-space:normal;min-height:1em;padding:0px;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">6.1 概述</strong></span></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">水平拆分是通过某种策略将数据分片来存储，分库内分表和分库两部分，每片数据会分散到不同的MySQL表或库，达到分布式的效果，能够支持非常大的数据量。前面的表分区本质上也是一种特殊的库内分表。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">库内分表，仅仅是单纯的解决了单一表数据过大的问题，由于没有把表的数据分布到不同的机器上，因此对于减轻MySQL服务器的压力来说，并没有太大的作用，大家还是竞争同一个物理机上的IO、CPU、网络，这个就要通过分库来解决。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">前面垂直拆分的用户表如果进行水平拆分，结果是：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;font-family:微软雅黑;min-height:1em;color:rgb(51, 51, 51);font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [4]" type="image/webp" data-filename="640" height="264" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:530px !important;" width="530"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">实际情况中往往会是垂直拆分和水平拆分的结合，即将Users_A_M和Users_N_Z再拆成Users和UserExtras，这样一共四张表。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">水平拆分的优点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不存在单库大数据和高并发的性能瓶颈；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">应用端改造较少；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">提高了系统的稳定性和负载能力。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">缺点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">分片事务一致性难以解决；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">跨节点Join性能差，逻辑复杂；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">数据多次扩展难度跟维护量极大。</span></p></li></ul><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;line-height:25.6px;min-height:1em;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">6.2 分片原则</strong></span></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">能不分就不分，参考单表优化；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">分片数量尽量少，分片尽量均匀分布在多个数据结点上，因为一个查询SQL跨分片越多，则总体性能越差，虽然要好于所有数据在一个分片的结果，只在必要的时候进行扩容，增加分片数量；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">分片规则需要慎重选择做好提前规划，分片规则的选择，需要考虑数据的增长模式，数据的访问模式，分片关联性问题，以及分片扩容问题，最近的分片策略为范围分片，枚举分片，一致性Hash分片，这几种分片都有利于扩容；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">尽量不要在一个事务中的SQL跨越多个分片，分布式事务一直是个不好处理的问题；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">查询条件尽量优化，尽量避免Select * 的方式，大量数据结果集下，会消耗大量带宽和CPU资源，查询尽量避免返回大量结果集，并且尽量为频繁使用的查询语句建立索引；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">通过数据冗余和表分区赖降低跨库Join的可能。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">这里特别强调一下分片规则的选择问题，如果某个表的数据有明显的时间特征，比如订单、交易记录等，则他们通常比较合适用时间范围分片，因为具有时效性的数据，我们往往关注其近期的数据，查询条件中往往带有时间字段进行过滤，比较好的方案是，当前活跃的数据，采用跨度比较短的时间段进行分片，而历史性的数据，则采用比较长的跨度存储。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">总体上来说，分片的选择是取决于最频繁的查询SQL的条件，因为不带任何Where语句的查询SQL，会遍历所有的分片，性能相对最差，因此这种SQL越多，对系统的影响越大，所以我们要尽量避免这种SQL的产生。</span></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;line-height:25.6px;min-height:1em;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><div style="letter-spacing:0.544px;margin:0px;max-width:100%;box-sizing:border-box !important;widows:1;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-variant-numeric:normal;font-variant-east-asian:normal;padding:0px;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:16px;line-height:25.6px;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">6.3 解决方案</strong></span></div></div></div></div><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">由于水平拆分牵涉的逻辑比较复杂，当前也有了不少比较成熟的解决方案。这些方案分为两大类：客户端架构和代理架构。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">客户端架构</strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">通过修改数据访问层，如JDBC、Data Source、MyBatis，通过配置来管理多个数据源，直连数据库，并在模块内完成数据的分片整合，一般以Jar包的方式呈现。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">这是一个客户端架构的例子：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;font-family:微软雅黑;min-height:1em;color:rgb(51, 51, 51);font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [5]" type="image/webp" data-filename="640" height="355" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:542px !important;" width="542"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">可以看到分片的实现是和应用服务器在一起的，通过修改Spring JDBC层来实现。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">客户端架构的优点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">应用直连数据库，降低外围系统依赖所带来的宕机风险；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">集成成本低，无需额外运维的组件。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">缺点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">限于只能在数据库访问层上做文章，扩展性一般，对于比较复杂的系统可能会力不从心；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">将分片逻辑的压力放在应用服务器上，造成额外风险。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;">代理架构</strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">通过独立的中间件来统一管理所有数据源和数据分片整合，后端数据库集群对前端应用程序透明，需要独立部署和运维代理组件。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">这是一个代理架构的例子：</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-east-asian:normal;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;font-family:微软雅黑;min-height:1em;color:rgb(51, 51, 51);font-variant-numeric:normal;padding:0px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;line-height:25.6px;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [6]" type="image/webp" data-filename="640" height="278" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:497px !important;" width="497"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">代理组件为了分流和防止单点，一般以集群形式存在，同时可能需要Zookeeper之类的服务组件来管理。</span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">代理架构的优点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">能够处理非常复杂的需求，不受数据库访问层原来实现的限制，扩展性强；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">对于应用服务器透明且没有增加任何额外负载。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(255, 79, 121);overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">缺点是：</span></strong></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">需部署和运维独立的代理中间件，成本高；</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">应用需经过代理来连接数据库，网络上多了一跳，性能有损失且有额外风险。</span></p></li></ul><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/>目前来说，业界还是有很多的方案可供选择，但应该如何进行选择？我认为，可以按以下思路来考虑：<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></span></p><p style="font-variant-numeric:normal;margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:0.5px;line-height:1.75em;min-height:1em;margin-right:5px;margin-left:5px;color:rgb(51, 51, 51);padding:0px;font-variant-east-asian:normal;text-align:justify;white-space:normal;background-color:rgb(255, 255, 255);font-size:16px;font-family:微软雅黑;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">确定是使用代理架构还是客户端架构。中小型规模或是比较简单的场景倾向于选择客户端架构，复杂场景或大规模系统倾向选择代理架构。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">具体功能是否满足，比如需要跨节点ORDER BY，那么支持该功能的优先考虑。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">不考虑一年内没有更新的产品，说明开发停滞，甚至无人维护和技术支持。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">最好按大公司→社区→小公司→个人这样的出品方顺序来选择。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">选择口碑较好的，比如github星数、使用者数量质量和使用者反馈。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="min-height:1em;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:left;letter-spacing:0.5px;padding:0px;margin-right:5px;margin-left:5px;line-height:1.75em;clear:both;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:15px;overflow-wrap:break-word !important;">开源的优先，往往项目有特殊需求可能需要改动源代码。</span></p><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p></li></ul><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;letter-spacing:0.544px;font-family:微软雅黑;font-size:16px;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:60px !important;box-sizing:border-box !important;word-wrap:break-word;margin-right:auto;margin-left:auto;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [7]" type="image/webp" data-filename="640" height="60" style="height:auto !important;margin:0px;visibility:visible !important;box-sizing:border-box !important;overflow-wrap:break-word !important;padding:0px;margin-right:auto;margin-left:auto;word-wrap:break-word;max-width:100%;width:80px !important;" width="60"/></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;letter-spacing:0.544px;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;letter-spacing:0.544px;text-align:center;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:14px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;line-height:25.6px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;line-height:25.6px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;line-height:25.6px;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;line-height:25.6px;white-space:pre-wrap;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;line-height:25.6px;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(0, 0, 0);line-height:28px;overflow-wrap:break-word !important;">如果你觉得文章不错，欢迎分享到朋友圈</span></strong></span></strong></strong></span></strong></strong></strong></span></p><p style="margin:0em 16px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;text-align:center;overflow-wrap:break-word !important;"><strong style="color:rgb(42, 52, 58);margin:0px;max-width:100%;box-sizing:border-box !important;letter-spacing:1px;padding:0px;font-size:20px;text-align:inherit;text-decoration:inherit;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(89, 89, 89);font-size:12px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;text-align:inherit;color:rgb(42, 52, 58);font-size:20px;text-decoration:inherit;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(89, 89, 89);font-size:12px;overflow-wrap:break-word !important;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(136, 136, 136);line-height:25.6px;overflow-wrap:break-word !important;">▽</strong></span></strong></span></strong></p><p style="clear:both;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;padding:0px;min-height:1em;margin-right:16px;margin-left:16px;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(62, 62, 62);font-family:Optima-Regular, PingFangTC-light;letter-spacing:0.5px;font-size:12px;overflow-wrap:break-word !important;">长按下方图片识别二维码</span></p><p style="clear:both;margin:0px;max-width:100%;box-sizing:border-box !important;text-align:center;padding:0px;min-height:1em;margin-right:16px;margin-left:16px;word-wrap:break-word;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;color:rgb(62, 62, 62);font-family:Optima-Regular, PingFangTC-light;letter-spacing:0.5px;font-size:12px;overflow-wrap:break-word !important;">关注猪猪</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><img src="工匠小猪猪的技术世界_files/640 [8]" type="image/webp" data-filename="640" height="318" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;height:auto !important;overflow-wrap:break-word !important;visibility:visible !important;width:677px !important;" width="677"/></p></div></div></div></div></div></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;overflow-wrap:break-word !important;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;overflow-wrap:break-word !important;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;letter-spacing:0.544px;text-align:right;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:12px;color:rgb(136, 136, 136);overflow-wrap:break-word !important;">愿每一个点赞的你</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;letter-spacing:0.544px;text-align:right;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:12px;color:rgb(136, 136, 136);overflow-wrap:break-word !important;">被世界温柔以待</span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;clear:both;word-wrap:break-word;min-height:1em;letter-spacing:0.544px;text-align:right;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word;font-size:12px;color:rgb(136, 136, 136);overflow-wrap:break-word !important;"></span></p>
                </div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 