<html>
<head>
  <title>支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN.NET</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="9796"/>
<h1>支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN.NET</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2016/5/3 15:58</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/a6225301/article/details/8946335"><i>http://blog.csdn.net/a6225301/article/details/8946335</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px"><div><div style="font-size:12px;font-family:Arial, Console, Verdana, 'Courier New';background:url(http://static.blog.csdn.net/skin/dark1/images/body_bg.jpg) 50% 0% repeat;"><div><div style="text-align:left;"><div style="overflow:hidden;"><div style="background:rgb(255, 255, 255);"><div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:19935px;">
    <div style="line-height:30px;display:block;color:rgb(0, 0, 0);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:20px;margin:5px 0px;font-family:'Microsoft YaHei';border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:33px;">   
         <span style="display:inline-block;width:19px;height:19px;margin:0px 2px 0px 0px;vertical-align:middle;background:url(http://static.blog.csdn.net/images/ico_Repost.gif) 0px 0px no-repeat;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:url(http://static.blog.csdn.net/images/ico_Repost.gif);box-shadow:none;"></span>


    <h1 style="font-size:20px;margin:0px;background-image:none;background-color:rgba(0, 0, 0, 0);border:0px none rgb(0, 0, 0);padding:0px;font-stretch:normal;font-weight:normal;line-height:30px;font-family:'Microsoft YaHei';vertical-align:middle;font-variant:normal;font-style:normal;display:inline;box-shadow:none;">
        <span style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><a href="http://blog.csdn.net/a6225301/article/details/8946335" style="text-decoration:none;color:rgb(0, 0, 0);border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">
        支付宝及时到帐接口使用详解            
        </a></span>
    </h1>
<span style="color:rgb(0, 0, 0);font-style:normal;font-variant:normal;font-weight:normal;font-size:20px;line-height:30px;font-family:'Microsoft YaHei';display:block;height:0px;clear:both;visibility:hidden;">.</span></div>

   

        <div style="border-bottom-style:solid;padding:0px 20px 5px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;line-height:22px;font-family:Arial;text-align:right;display:block;color:rgb(153, 153, 153);border-bottom-width:1px;border-bottom-color:rgb(237, 237, 237);margin:0px -20px;overflow:hidden;border:;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:22px;">
        <div style="border:0px none rgb(153, 153, 153);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:22px;">
            <span style="margin:0px 5px 0px 0px;border:0px none rgb(153, 153, 153);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">2013-05-19 11:18</span>
            <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(http://static.blog.csdn.net/images/ico_view.png) 0% 50% no-repeat;border:0px none rgb(153, 153, 153);background-color:rgba(0, 0, 0, 0);background-image:url(http://static.blog.csdn.net/images/ico_view.png);box-shadow:none;" title="阅读次数">850人阅读</span>
            <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(http://static.blog.csdn.net/images/ico_comm.png) 0% 50% no-repeat;border:0px none rgb(153, 153, 153);background-color:rgba(0, 0, 0, 0);background-image:url(http://static.blog.csdn.net/images/ico_comm.png);box-shadow:none;" title="评论次数"> <a href="http://blog.csdn.net/a6225301/article/details/8946335#comments" style="color:rgb(202, 0, 0);text-decoration:none;border:0px none rgb(202, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">评论</a>(0)</span>
            <span style="margin:0px 5px;border:0px none rgb(153, 153, 153);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> <a href="#" style="color:rgb(202, 0, 0);text-decoration:none;border:0px none rgb(202, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" title="收藏">收藏</a></span>
             <span style="margin:0px 5px;border:0px none rgb(153, 153, 153);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> <a href="http://blog.csdn.net/a6225301/article/details/8946335#report" style="color:rgb(202, 0, 0);text-decoration:none;border:0px none rgb(202, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" title="举报">举报</a></span>

        </div>
    <span style="color:rgb(153, 153, 153);font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:22px;font-family:Arial;text-align:right;display:block;height:0px;clear:both;visibility:hidden;">.</span></div>
    
    
    
      <div style="height:46px;display:block;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:rgb(237, 237, 237);padding:0px 20px;margin:0px -20px;border:;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;">
        <div style="display:inline-block;font-size:14px;color:rgb(51, 51, 51);border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:61px;height:17px;">
           <img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/category_icon.jpg" type="image/jpeg" data-filename="category_icon.jpg" height="13" style="border:0px none rgb(51, 51, 51);vertical-align:middle;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:15px;height:13px;" width="15"/>
            <span style="display:inline-block;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:42px;height:16px;">分类：</span>
        </div>
        <div style="display:inline-block;font-size:14px;color:rgb(223, 52, 52);border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:340px;height:46px;">
                    <span style="border:0px none rgb(223, 52, 52);display:inline-block;cursor:pointer;line-height:46px;position:relative;margin-left:15px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:84px;height:46px;">
                        <span style="border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">C#<em style="font-style:normal;border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">（122）</em></span>
                      <img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/arrow_triangle _down.jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:0px none rgb(223, 52, 52);display:inline;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:10px;height:5px;" width="10"/>
                      
                        
                    </span>                    
                    <span style="border:0px none rgb(223, 52, 52);display:inline-block;cursor:pointer;line-height:46px;position:relative;margin-left:15px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:86px;height:46px;">
                        <span style="border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">项目<em style="font-style:normal;border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">（21）</em></span>
                      <img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/arrow_triangle _down [1].jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:0px none rgb(223, 52, 52);display:inline;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:10px;height:5px;" width="10"/>
                      
                        
                    </span>                    
                    <span style="border:0px none rgb(223, 52, 52);display:inline-block;cursor:pointer;line-height:46px;position:relative;margin-left:15px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:117px;height:46px;">
                        <span style="border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">ASP.NET<em style="font-style:normal;border:0px none rgb(223, 52, 52);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">（68）</em></span>
                      <img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/arrow_triangle _down [2].jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:0px none rgb(223, 52, 52);display:inline;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:10px;height:5px;" width="10"/>
                      
                        
                    </span>                    
        </div>
    <span style="display:block;height:0px;clear:both;visibility:hidden;">.</span></div>
      

  

  
  
     

<div style="font-family:Arial;margin:20px 0px 0px;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14px;line-height:26px;font-style:normal;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:19277px;">

<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
转载：  <a href="http://blog.csdn.net/sufei1013/article/details/5299547" style="color:rgb(202, 0, 0);text-decoration:none;border:0px none rgb(202, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://blog.csdn.net/sufei1013/article/details/5299547</a></p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
这两天写支付宝接口， 这个话题不新了， 因为很多人都 做过了， 在这里我说说我的看法吧， 先说一下实现</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
其实支付宝公司已经给我们做的很好了， 只要少量的改动就OK了，只是有的程序员不太明天他们的动作流程而以，我就以及时到帐为例子来说了，呵呵</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:52px;">
在这之前就大家先下载一下c#版的及时到帐代码    这里是下载地址<a href="http://dev.alipay.com/devclub/mvnforum/viewthread_thread,4;jsessionid=595DB7442AAA5CD2FC849E7C2FBE51D7" style="color:rgb(255,153,0);text-decoration:none;border:0px none rgb(255, 153, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank"><span style="color:rgb(29,88,209);border:0px none rgb(29, 88, 209);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://dev.alipay.com/devclub/mvnforum/viewthread_thread,4;jsessionid=595DB7442AAA5CD2FC849E7C2FBE51D7</span></a></p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
先看一下程序的结构吧</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:293px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/zhifubai1.png" type="image/png" data-filename="zhifubai1.png" alt="" border="0" height="293" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:330px;height:293px;" width="330"/></p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
支付宝有一个类文件叫  AliPay 是一些加密算法之类的东西，包括构造URL</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
要吧看一下这个类的全部内容</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<div style="font-family:Arial;font-size:14px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:4134px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/ExpandedBlockStart.gif" type="image/gif" data-filename="ExpandedBlockStart.gif" alt="" height="16" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:11px;height:16px;" width="11"/><span style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">代码</span>
<div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:4108px;">
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Text;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Security.Cryptography;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.IO;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Net;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> New Interface for AliPay<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/summary&gt;</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">namespace</span> Gateway<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
{<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">class</span> AliPay<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 与ASP兼容的MD5加密算法<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/summary&gt;</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">static</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> GetMD5(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> s, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> _input_charset)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            MD5 md5 = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> MD5CryptoServiceProvider();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">byte</span>[] t = md5.ComputeHash(Encoding.GetEncoding(_input_charset).GetBytes(s));<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            StringBuilder sb = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StringBuilder(<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">32</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">for</span> (<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">int</span> i = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>; i &lt; t.Length; i++)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                sb.Append(t[i].ToString(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">x</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>).PadLeft(<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">2</span>, <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">'</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">'</span>));<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">return</span> sb.ToString();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 冒泡排序法<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 按照字母序列从a到z的顺序排列<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/summary&gt;</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">static</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] BubbleSort(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] r)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">int</span> i, j; <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">交换标志 </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> temp;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">bool</span> exchange;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">for</span> (i = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>; i &lt; r.Length; i++) <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">最多做R.Length-1趟排序 </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                exchange = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">false</span>; <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">本趟排序开始前，交换标志应为假</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">for</span> (j = r.Length - <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">2</span>; j &gt;= i; j--)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">交换条件</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (System.String.CompareOrdinal(r[j + <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>], r[j]) &lt; <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                        temp = r[j + <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>];<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                        r[j + <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>] = r[j];<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                        r[j] = temp;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                        exchange = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">true</span>; <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">发生了交换，故将交换标志置为真 </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                    }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (!exchange) <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">本趟排序未发生交换，提前终止算法 </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">break</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">return</span> r;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 生成URL链接或加密结果<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;param name=&quot;para&quot;&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">参数加密数组</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/param&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;param name=&quot;_input_charset&quot;&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">编码格式</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/param&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;param name=&quot;sign_type&quot;&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">加密类型</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/param&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;param name=&quot;key&quot;&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">安全校验码</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/param&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;returns&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">字符串URL或加密结果</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/returns&gt;</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">static</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> CreatUrl(<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string gateway,</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">GET方式传递参数时请去掉注释</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] para,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> _input_charset,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> sign_type,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> key<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            )<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">int</span> i;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">进行排序；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] Sortedstr = BubbleSort(para);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">构造待md5摘要字符串 ；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            StringBuilder prestr = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StringBuilder();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">for</span> (i = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>; i &lt; Sortedstr.Length; i++)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (i == Sortedstr.Length - <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    prestr.Append(Sortedstr[i]);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    prestr.Append(Sortedstr[i] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            prestr.Append(key);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">生成Md5摘要；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> sign = GetMD5(prestr.ToString(), _input_charset);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">以下是POST方式传递参数</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">return</span> sign;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">以下是GET方式传递参数<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">构造支付Url；<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            char[] delimiterChars = { '='};<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            StringBuilder parameter = new StringBuilder();<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            parameter.Append(gateway);<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            for (i = 0; i &lt; Sortedstr.Length; i++)<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            {</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">UTF-8格式的编码转换<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">                parameter.Append(Sortedstr[i].Split(delimiterChars)[0] + &quot;=&quot; + HttpUtility.UrlEncode(Sortedstr[i].Split(delimiterChars)[1]) + &quot;&amp;&quot;);<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            }<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            parameter.Append(&quot;sign=&quot; + sign + &quot;&amp;sign_type=&quot; + sign_type);<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">返回支付Url；<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">            return parameter.ToString();</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">获取远程服务器ATN结果，验证是否是支付宝服务器发来的请求</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">static</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> Get_Http(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> a_strUrl, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">int</span> timeout)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strResult;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">try</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                HttpWebRequest myReq = (HttpWebRequest)HttpWebRequest.Create(a_strUrl);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                myReq.Timeout = timeout;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                HttpWebResponse HttpWResp = (HttpWebResponse)myReq.GetResponse();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                Stream myStream = HttpWResp.GetResponseStream();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                StreamReader sr = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StreamReader(myStream, Encoding.Default);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                StringBuilder strBuilder = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StringBuilder();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">while</span> (-<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span> != sr.Peek())<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    strBuilder.Append(sr.ReadLine());<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                strResult = strBuilder.ToString();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">catch</span> (Exception exp)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                strResult = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">错误：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + exp.Message;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">return</span> strResult;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}</div>
</div>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 而我们一般不用管这个类，只要保证能调用 的到就行了，不用管他</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
    我们要做的很少，他是怎么工作的呢，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:805px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/zhifubai2.png" type="image/png" data-filename="zhifubai2.png" alt="" border="0" height="805" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:805px;" width="979"/></p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
   这是开发文档里的工作图</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
其实我们要处理的只有三个Aspx的文件，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
先看第一个吧   Default.aspx</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
这是一个请求的界面</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<div style="font-family:Arial;font-size:14px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:2522px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/ExpandedBlockStart [1].gif" type="image/gif" data-filename="ExpandedBlockStart.gif" alt="" height="16" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:11px;height:16px;" width="11"/><span style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">代码</span>
<div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:2496px;">
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Data;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Configuration;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.Security;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.WebControls;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.WebControls.WebParts;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.HtmlControls;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> Gateway;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partial</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">class</span> _Default : System.Web.UI.Page<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
{<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">protected</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">void</span> Page_Load(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">object</span> sender, EventArgs e)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
       <br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">protected</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">void</span> BtnAlipay_Click(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">object</span> sender, EventArgs e)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">业务参数赋值；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> gateway = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">https://www.alipay.com/cooperate/gateway.do?</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;    <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">支付接口</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> service = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">create_direct_pay_by_user</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                       <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">服务名称，这个是识别是何接口实现何功能的标识，请勿修改</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> seller_email = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                     <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商家签约时的支付宝帐号，即收款的支付宝帐号</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> sign_type = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">MD5</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                                           <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">加密类型,签名方式“不用改”</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> key = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                    <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">安全校验码，与partner是一组，获取方式是：用签约时支付宝帐号登陆支付宝网站www.alipay.com，在商家服务我的商家里即可查到。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> partner = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                                <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商户ID，合作身份者ID，合作伙伴ID</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> _input_charset = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">utf-8</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                                    <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">编码类型，完全根据客户自身的项目的编码格式而定，千万不要填错。否则极其容易造成MD5加密错误。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> show_url = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://www.alipay.com/</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                         <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">展示地址，即在支付页面时，商品名称旁边的“详情”的链接地址。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> out_trade_no = TxtOrderno.Text.Trim();                       <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">客户自己的订单号，订单号必须在自身订单系统中保持唯一性</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> subject = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">4.0系统支付宝充值</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商品名称，也可称为订单名称，该接口并不是单一的只能买一样东西，可把一次支付当作一次下订单</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> body = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商户：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + TxtOrderno.Text.Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">通过支付宝给自己充值：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + TxtTotal_fee.Text.Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">元</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;                                   <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商品描述，即备注</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> total_fee = TxtTotal_fee.Text.Trim();                        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商品价格，也可称为订单的总金额<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">服务器通知url（Alipay_Notify.aspx文件所在路经），必须是完整的路径地址</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> notify_url = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><a href="http://0.0.6.108/Alipay/Alipay_Notify.aspx" style="color:rgb(255,153,0);text-decoration:none;border:0px none rgb(255, 153, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank"><span style="color:rgb(29,88,209);border:0px none rgb(29, 88, 209);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://0.0.6.108/Alipay/Alipay_Notify.aspx</span></a></span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">服务器返回url（Alipay_Return.aspx文件所在路经），必须是完整的路径地址</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> return_url = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><a href="http://0.0.6.108/Alipay/Alipay_Return.aspx" style="color:rgb(255,153,0);text-decoration:none;border:0px none rgb(255, 153, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;" target="_blank"><span style="color:rgb(29,88,209);border:0px none rgb(29, 88, 209);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://0.0.6.108/Alipay/Alipay_Return.aspx</span></a></span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">构造数组；<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">以下数组即是参与加密的参数，若参数的值不允许为空，若该参数为空，则不要成为该数组的元素</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] para ={<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">service=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>+service,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partner=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + partner,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">seller_email=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + seller_email,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">out_trade_no=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + out_trade_no,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">subject=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + subject,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">body=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + body,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">total_fee=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + total_fee, <br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">show_url=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + show_url,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">payment_type=1</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">notify_url=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + notify_url,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">return_url=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + return_url,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">_input_charset=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>+_input_charset<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        };<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">支付URL生成</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> aliay_url = AliPay.CreatUrl(<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">gateway,</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">GET方式传递参数时请去掉注释</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            para,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            _input_charset,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            sign_type,<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            key<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            );<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">以下是GET方式传递参数<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Response.Redirect(aliay_url);<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">以下是POST方式传递参数</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;form name='alipaysubmit' method='post' action='https://www.alipay.com/cooperate/gateway.do?_input_charset=utf-8'&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='service' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + service + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='partner' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + partner + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='seller_email' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + seller_email + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='out_trade_no' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + out_trade_no + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='subject' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + subject + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='body' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + body + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='total_fee' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + total_fee + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='show_url' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + show_url + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='return_url' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + return_url + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='notify_url' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + notify_url + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='payment_type' value=1&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='sign' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + aliay_url + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;input type='hidden' name='sign_type' value=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign_type + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/form&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;script&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">document.alipaysubmit.submit()</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/script&gt;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</div>
</div>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
代码里的key和 partner的获取方法</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:225px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/zhifubai4.png" type="image/png" data-filename="zhifubai4.png" alt="" border="0" height="225" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:319px;height:225px;" width="319"/></p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
现在我们只要按代码里的信息填写一样就可以了，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
然后远行网页</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
点提交</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
就会进入</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:612px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/zhifubai5.png" type="image/png" data-filename="zhifubai5.png" alt="" border="0" height="612" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:612px;" width="978"/></p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
下面的操作就是在支付平台的完成了， 跟咱的程序没有关系了</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
现在我们应该想，那付完钱之后呢？</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
我们有两个界面来处理这个问题一个是</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
Alipay_Return.aspx</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<div style="font-family:Arial;font-size:14px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:3510px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/ExpandedBlockStart [2].gif" type="image/gif" data-filename="ExpandedBlockStart.gif" alt="" height="16" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:11px;height:16px;" width="11"/><span style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">代码</span>
<div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:3484px;">
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Data;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Configuration;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Collections;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.Security;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.WebControls;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.WebControls.WebParts;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.HtmlControls;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Text;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Collections.Specialized;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.IO;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> Gateway;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 创建该页面文件时，请留心该页面文件是可以对其进行美工处理的，原因在于支付完成以后，当前窗口会从支付宝的页面跳转回这个页面。<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 该页面称作“返回页”，是同步被支付宝服务器所调用，可当作是支付完成后的提示信息页，如“您的某某某订单，多少金额已支付成功”。<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/summary&gt;</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partial</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">class</span> Alipay_Return : System.Web.UI.Page<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
{<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">protected</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">void</span> Page_Load(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">object</span> sender, EventArgs e)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> alipayNotifyURL = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">https://www.alipay.com/cooperate/gateway.do?service=notify_verify</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string alipayNotifyURL = &quot;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><u style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://notify.alipay.com/trade/notify_query.do?</u></span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">此路径是在上面链接地址无法起作用时替换使用。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> key = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>; <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partner 的对应交易安全校验码（必须填写）</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> partner = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;         <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partner合作伙伴id（必须填写）</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> _input_charset = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">utf-8</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">编码类型，完全根据客户自身的项目的编码格式而定，千万不要填错。否则极其容易造成MD5加密错误。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        alipayNotifyURL = alipayNotifyURL + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;partner=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + partner + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;notify_id=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + Request.QueryString[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">notify_id</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">获取支付宝ATN返回结果，true是正确的订单信息，false 是无效的</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> responseTxt = AliPay.Get_Http(alipayNotifyURL, <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">120000</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">*******加密签名程序开始</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">*******</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">int</span> i;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        NameValueCollection coll;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Load Form variables into NameValueCollection variable.</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        coll = Request.QueryString;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> Get names of all forms into a string array.</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        String[] requestarr = coll.AllKeys;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">进行排序；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] Sortedstr = AliPay.BubbleSort(requestarr);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">构造待md5摘要字符串 ；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        StringBuilder prestr = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StringBuilder();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">for</span> (i = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>; i &lt; Sortedstr.Length; i++)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (Request.Form[Sortedstr[i]] != <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span> &amp;&amp; Sortedstr[i] != <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sign</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> &amp;&amp; Sortedstr[i] != <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sign_type</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (i == Sortedstr.Length - <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    prestr.Append(Sortedstr[i] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + Request.QueryString[Sortedstr[i]]);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    prestr.Append(Sortedstr[i] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + Request.QueryString[Sortedstr[i]] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        prestr.Append(key);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">生成Md5摘要；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> mysign = AliPay.GetMD5(prestr.ToString(), _input_charset);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">*******加密签名程序结束*******</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> sign = Request.QueryString[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sign</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">  Response.Write(prestr.ToString());  </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">调试用，支付宝服务器返回时的完整路径。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (mysign == sign &amp;&amp; responseTxt == <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">true</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>)   <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">验证支付发过来的消息，签名是否正确</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">更新自己数据库的订单语句，请自己填写一下</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strOrderNO = Request.QueryString[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">out_trade_no</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单号</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strPrice = Request.QueryString[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">total_fee</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">金额</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strTradeStatus = Request.QueryString[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">TRADE_STATUS</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单状态<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">生成对象<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">OfficeFinanceServices objOfficeFinanceServices = new OfficeFinanceServices();<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单信息</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] login = strOrderNO.Split(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] { <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">_</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> }, StringSplitOptions.RemoveEmptyEntries);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">/查询当前的余额</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">decimal objdm = objOfficeFinanceServices.OfficeFinanceSelect(Convert.ToInt32(login[0].ToString().Trim()), true);<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">OfficeFinance objofficeFinance = new OfficeFinance();<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofId = Convert.ToInt32(login[0].ToString().Trim());<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofOrid = &quot;cz&quot;;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofTime = DateTime.Now;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofType = 1;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofAmount = Convert.ToDecimal(strPrice.ToString().Trim());<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofRemainAmount = Convert.ToDecimal(strPrice.ToString().Trim()) + objdm;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofIsCurrentValue = 1;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofUserId = -10;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofNote1 = &quot;支付宝上帐：&quot; + strPrice.ToString().Trim() + &quot;元&quot;;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofNote2 = &quot;商户：&quot; + login[1].ToString().Trim() + &quot;  通过支付宝上帐金额：&quot; + strPrice + &quot;元&quot;;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objOfficeFinanceServices.addOfficeFinanceOne(objofficeFinance);</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商户：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + login[<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>].ToString().Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;br&gt;金额：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + strPrice + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">   交易成功</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);     <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">成功，可美化该页面，提示信息</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">/写文本，纪录支付宝返回消息，比对md5计算结果（如网站不支持写txt文件，可改成写数据库）</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> TOEXCELLR = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">MD5结果:mysign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + mysign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,sign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,responseTxt=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + responseTxt + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">   交易信息</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商户：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + login[<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>].ToString().Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;br&gt;金额：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + strPrice + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">   交易成功</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            StreamWriter fs = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StreamWriter(Server.MapPath(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Return_DATA/</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + DateTime.Now.ToString().Replace(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">:</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>)) + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">.txt</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">false</span>, System.Text.Encoding.Default);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Write(TOEXCELLR);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Close();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">------------------------------------------</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;br&gt;Result:responseTxt=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + responseTxt);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;br&gt;Result:mysign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + mysign);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;br&gt;Result:sign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">支付失败</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">/写文本，纪录支付宝返回消息，比对md5计算结果（如网站不支持写txt文件，可改成写数据库）</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> TOEXCELLR = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">MD5结果:mysign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + mysign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,sign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,responseTxt=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + responseTxt;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            StreamWriter fs = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StreamWriter(Server.MapPath(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Return_DATA/</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + DateTime.Now.ToString().Replace(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">:</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>)) + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">.txt</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">false</span>, System.Text.Encoding.Default);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Write(TOEXCELLR);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Close();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">支付失败，提示信息</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</div>
</div>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
这个是当交易成功后要调用 的界面 在这里只要改动一下就行了， 其实我们要做的只是改一下这里，只要在这里更新一下你的数据库就行了，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<div style="font-family:Arial;font-size:14px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:546px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/ContractedBlock.gif" type="image/gif" data-filename="ContractedBlock.gif" alt="" height="16" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:11px;height:16px;" width="11"/><span style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">代码</span>
<div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:520px;">
<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">生成对象<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">OfficeFinanceServices objOfficeFinanceServices = new OfficeFinanceServices();<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单信息</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] login = strOrderNO.Split(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] { <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">_</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> }, StringSplitOptions.RemoveEmptyEntries);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">/查询当前的余额</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">decimal objdm = objOfficeFinanceServices.OfficeFinanceSelect(Convert.ToInt32(login[0].ToString().Trim()), true);<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">OfficeFinance objofficeFinance = new OfficeFinance();<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofId = Convert.ToInt32(login[0].ToString().Trim());<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofOrid = &quot;cz&quot;;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofTime = DateTime.Now;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofType = 1;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofAmount = Convert.ToDecimal(strPrice.ToString().Trim());<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofRemainAmount = Convert.ToDecimal(strPrice.ToString().Trim()) + objdm;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofIsCurrentValue = 1;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofUserId = -10;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofNote1 = &quot;支付宝上帐：&quot; + strPrice.ToString().Trim() + &quot;元&quot;;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objofficeFinance.ofNote2 = &quot;商户：&quot; + login[1].ToString().Trim() + &quot;  通过支付宝上帐金额：&quot; + strPrice + &quot;元&quot;;<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">objOfficeFinanceServices.addOfficeFinanceOne(objofficeFinance);</span></div>
</div>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
大家现在会问我为什么会把他们注释了呢？</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
我测试过，，这个界面呢是只到成功的时候 调用 一次以后就再不会调用 了，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
所以这样有一个不好的地方 ，就是有些客户他们对转帐操作的很老手，当交易成功之后不等调用这个界面就关闭了浏览器，这个时候会出现什么问题呢？</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:78px;">
那支付宝就再也不会调用这个界面 了，只能等下次交易，钱是打上了，我们也收到了，但是就是没有给客户充上钱，这个时候客户就会打电话到公司，怎么回事啊， 钱打过去了， 可是我这边还没有上帐，我们上支付宝一看有啊，但就是没有上帐 ，怎么办，最后只能手动给客户上了，但又怕他程序再自动上一把，呵呵</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
     所以在这里不我建议使用这个页面，如果你只是修改自己的订单状态的话当然是可以的 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:52px;">
  修改余额就不要在这里写了，而是写在这个Alipay_Notify.aspx页面里，这个界面是当交易状态 发生变化时就会调用 ，在没有收到成功的消息前就会一直调用，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
时效是24小时，这样的话我们就不用管他是不是转到了成功页面了，只要把这个页面挂在网上等通知就行了，</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
    当交易成功的时候上帐 就OK了</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<div style="font-family:Arial;font-size:14px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:4992px;">
<img src="支付宝及时到帐接口使用详解 - Better Thinker - 博客频道 - CSDN._files/ExpandedBlockStart [3].gif" type="image/gif" data-filename="ExpandedBlockStart.gif" alt="" height="16" style="border:0px none rgb(0, 0, 0);max-width:100%;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:11px;height:16px;" width="11"/><span style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">代码</span>
<div style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:4966px;">
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Data;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Configuration;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Collections;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.Security;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.WebControls;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.WebControls.WebParts;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Web.UI.HtmlControls;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Text;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.Collections.Specialized;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> System.IO;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> Gateway;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">using</span> SystemModel;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;summary&gt;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 创建该页面文件时，请留心该页面文件中无任何HTML代码及空格。<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 该页面称作“通知页”，是异步被支付宝服务器所调用。<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> 当支付宝的订单状态改变时，支付宝服务器则会自动调用此页面，因此请做好自身网站订单信息与支付宝上的订单的同步工作<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> </span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&lt;/summary&gt;</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">public</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partial</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">class</span> Alipay_Notify : System.Web.UI.Page<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
{<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">protected</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">void</span> Page_Load(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">object</span> sender, EventArgs e)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> alipayNotifyURL = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">https://www.alipay.com/cooperate/gateway.do?service=notify_verify</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string alipayNotifyURL = &quot;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><u style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">http://notify.alipay.com/trade/notify_query.do?</u></span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;;</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">此路径是在上面链接地址无法起作用时替换使用。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> partner = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;         <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partner合作伙伴id（必须填写）</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> key = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写自己的</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>; <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">partner 的对应交易安全校验码（必须填写）</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> _input_charset = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">utf-8</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">编码类型，完全根据客户自身的项目的编码格式而定，千万不要填错。否则极其容易造成MD5加密错误。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        alipayNotifyURL = alipayNotifyURL + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;partner=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + partner + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;notify_id=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">notify_id</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">获取支付宝ATN返回结果，true是正确的订单信息，false 是无效的</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> responseTxt = AliPay.Get_Http(alipayNotifyURL, <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">120000</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">*******加密签名程序开始*******</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">int</span> i;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        NameValueCollection coll;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Load Form variables into NameValueCollection variable.</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        coll = Request.Form;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"> Get names of all forms into a string array.</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        String[] requestarr = coll.AllKeys;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">进行排序；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] Sortedstr = AliPay.BubbleSort(requestarr);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">构造待md5摘要字符串 ；</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        StringBuilder prestr = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StringBuilder();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">for</span> (i = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>; i &lt; Sortedstr.Length; i++)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (Request.Form[Sortedstr[i]] != <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span> &amp;&amp; Sortedstr[i] != <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sign</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> &amp;&amp; Sortedstr[i] != <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sign_type</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (i == Sortedstr.Length - <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>)<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    prestr.Append(Sortedstr[i] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + Request.Form[Sortedstr[i]]);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    prestr.Append(Sortedstr[i] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + Request.Form[Sortedstr[i]] + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&amp;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        prestr.Append(key);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> mysign = AliPay.GetMD5(prestr.ToString(), _input_charset);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">*******加密签名程序结束*******</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> sign = Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">sign</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (mysign == sign &amp;&amp; responseTxt == <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">true</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>)   <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">验证支付发过来的消息，签名是否正确，只要成功进如这个判断里，则表示该页面已被支付宝服务器成功调用<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">但判断内出现自身编写的程序相关错误导致通知给支付宝并不是发送success的消息或没有更新客户自身的数据库的情况，请自身程序编写好应对措施，否则查明原因时困难之极</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">trade_status</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>] == <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">WAIT_BUYER_PAY</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>)<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">   判断支付状态_等待买家付款（文档中有枚举表可以参考）            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">更新自己数据库的订单语句，请自己填写一下</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strOrderNO = Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">out_trade_no</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单号</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strPrice = Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">total_fee</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">金额    如果你申请了商家购物卷功能，在返回信息里面请不要做金额的判断，否则会校验通过不了。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> TOEXCELL = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">MD5结果:mysign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + mysign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,sign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,responseTxt=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + responseTxt;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                StreamWriter f = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StreamWriter(Server.MapPath(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Notify_DATA/</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + DateTime.Now.ToString().Replace(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">:</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>)) + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">.txt</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">false</span>, System.Text.Encoding.Default);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                f.Write(TOEXCELL + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单号：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + strOrderNO.ToString().Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">  金额：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + strPrice.ToString().Trim());<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                f.Close();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                Alipaym objalipay = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> Alipaym();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.APID = strOrderNO;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.addTime = DateTime.Now;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.total_fee = Convert.ToDecimal(strPrice);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.trade_status = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">等待买家付款</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.Text1 = DateTime.Now.ToString();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.Text2 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.Text3 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.Text4 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objalipay.Text5 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                OfficeFinanceServices.Update(objalipay);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
              <br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">trade_status</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>] == <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">TRADE_FINISHED</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> || Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">trade_status</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>] == <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">TRADE_SUCCESS</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>)<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">   判断支付状态_交易成功结束（文档中有枚举表可以参考）   </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">更新自己数据库的订单语句，请自己填写一下</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strOrderNO = Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">out_trade_no</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单号</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> strPrice = Request.Form[<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">total_fee</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>];<span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">金额  <br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">生成对象</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                OfficeFinanceServices objOfficeFinanceServices = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> OfficeFinanceServices();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">订单信息</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] login = strOrderNO.Split(<span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span>[] { <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">_</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> }, StringSplitOptions.RemoveEmptyEntries);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">/查询当前的余额</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">decimal</span> objdm = objOfficeFinanceServices.OfficeFinanceSelect(Convert.ToInt32(login[<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>].ToString().Trim()), <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">true</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                OfficeFinance objofficeFinance = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> OfficeFinance();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofId = Convert.ToInt32(login[<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">0</span>].ToString().Trim());<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofOrid = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">cz</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofTime = DateTime.Now;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofType = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofAmount = Convert.ToDecimal(strPrice.ToString().Trim());<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofRemainAmount = Convert.ToDecimal(strPrice.ToString().Trim()) + objdm;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofIsCurrentValue = <span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofUserId = -<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">10</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofNote1 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">支付宝上帐：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + strPrice.ToString().Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">元</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                objofficeFinance.ofNote2 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">商户：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + login[<span style="color:rgb(128,0,128);border:0px none rgb(128, 0, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1</span>].ToString().Trim() + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">  通过支付宝上帐金额：</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + strPrice + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">元</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">if</span> (objOfficeFinanceServices.addOfficeFinanceOne(objofficeFinance))<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">success</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    Alipaym objalipay = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> Alipaym();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.APID = strOrderNO;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.addTime = DateTime.Now;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.total_fee = Convert.ToDecimal(strPrice);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.trade_status = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">交易成功</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.Text1 = DateTime.Now.ToString();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.Text2 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.Text3 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.Text4 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    objalipay.Text5 = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    OfficeFinanceServices.Update(objalipay);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                    Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">fail</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
                <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">更新自己数据库的订单语句，请自己填写一下</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Response.Write(&quot;success&quot;);     </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">返回给支付宝消息，成功，请不要改写这个success<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">success与fail及其他字符的区别在于，支付宝的服务器若遇到success时，则不再发送请求通知（即不再调用该页面，让该页面再次运行起来），<br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            </span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">若不是success，则支付宝默认没有收到成功的信息，则会反复不停地调用该页面直到失效，有效调用时间是24小时以内。</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">///</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">/写文本，纪录支付宝返回消息，比对md5计算结果（如网站不支持写txt文件，可改成写数据库）</span><span style="color:rgb(128,128,128);border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(128, 128, 128);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> TOEXCELLR = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">MD5结果:mysign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + mysign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,sign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,responseTxt=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + responseTxt;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            StreamWriter fs = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StreamWriter(Server.MapPath(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Notify_DATA/</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + DateTime.Now.ToString().Replace(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">:</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>)) + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">.txt</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">false</span>, System.Text.Encoding.Default);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Write(TOEXCELLR);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Close();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">else</span><br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        {<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            Response.Write(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">fail</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            <span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">//</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">写文本，纪录支付宝返回消息，比对md5计算结果（如网站不支持写txt文件，可改成写数据库）</span><span style="color:rgb(0,128,0);border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"><br style="border:0px none rgb(0, 128, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</span>            <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">string</span> TOEXCELLR = <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">MD5结果:mysign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + mysign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,sign=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + sign + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">,responseTxt=</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + responseTxt;<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            StreamWriter fs = <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">new</span> StreamWriter(Server.MapPath(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">Notify_DATA/</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span> + DateTime.Now.ToString().Replace(<span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">:</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;&quot;</span>)) + <span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">.txt</span><span style="color:rgb(128,0,0);border:0px none rgb(128, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">&quot;</span>, <span style="color:rgb(0,0,255);border:0px none rgb(0, 0, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">false</span>, System.Text.Encoding.Default);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Write(TOEXCELLR);<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
            fs.Close();<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
        }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
    }<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
}<br style="border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;"/>
</div>
</div>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
 </p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
最好是记录一下日志文件，这样一但出了问题还可以有个参考的地方</p>
<p style="font-size:14px;margin:0px;margin-top:0px;margin-bottom:0px;padding-top:0px;padding-bottom:0px;font-family:Arial;padding:0px;line-height:26px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:26px;">
我的代码写的有点乱大家可以适当的改一下，呵呵</p>
   
</div>









<div style="zoom:1;float:right;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:138px;height:28px;">
<a href="http://blog.csdn.net/a6225301/article/details/8946335#" style="height:16px;color:rgb(51, 51, 51);background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png);background-position:0 0 !important;float:left;font-size:12px;padding-left:17px;line-height:16px;text-decoration:none;cursor:pointer;margin:6px 6px 6px 0px;background-repeat:no-repeat;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);box-shadow:none;width:0px;"></a>
<a href="http://blog.csdn.net/a6225301/article/details/8946335#" style="cursor:pointer;color:rgb(202, 0, 0);background-position:0 -52px !important;box-shadow:none;background-color:rgba(0, 0, 0, 0);border:0px none rgb(202, 0, 0);background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=ba7acbd3.png);height:16px;text-decoration:none;margin:6px 6px 6px 0px;line-height:16px;background-repeat:no-repeat;padding-left:17px;font-size:12px;float:left;width:0px;" title="分享到QQ空间"></a>
<a href="http://blog.csdn.net/a6225301/article/details/8946335#" style="cursor:pointer;color:rgb(202, 0, 0);background-position:0 -104px !important;box-shadow:none;background-color:rgba(0, 0, 0, 0);border:0px none rgb(202, 0, 0);background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=ba7acbd3.png);height:16px;text-decoration:none;margin:6px 6px 6px 0px;line-height:16px;background-repeat:no-repeat;padding-left:17px;font-size:12px;float:left;width:0px;" title="分享到新浪微博"></a>
<a href="http://blog.csdn.net/a6225301/article/details/8946335#" style="cursor:pointer;color:rgb(202, 0, 0);background-position:0 -260px !important;box-shadow:none;background-color:rgba(0, 0, 0, 0);border:0px none rgb(202, 0, 0);background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=ba7acbd3.png);height:16px;text-decoration:none;margin:6px 6px 6px 0px;line-height:16px;background-repeat:no-repeat;padding-left:17px;font-size:12px;float:left;width:0px;" title="分享到腾讯微博"></a>
<a href="http://blog.csdn.net/a6225301/article/details/8946335#" style="cursor:pointer;color:rgb(202, 0, 0);background-position:0 -208px !important;box-shadow:none;background-color:rgba(0, 0, 0, 0);border:0px none rgb(202, 0, 0);background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=ba7acbd3.png);height:16px;text-decoration:none;margin:6px 6px 6px 0px;line-height:16px;background-repeat:no-repeat;padding-left:17px;font-size:12px;float:left;width:0px;" title="分享到人人网"></a>
<a href="http://blog.csdn.net/a6225301/article/details/8946335#" style="margin:6px 6px 6px 0px;color:rgb(202, 0, 0);box-shadow:none;background-color:rgba(0, 0, 0, 0);border:0px none rgb(202, 0, 0);background-position:0 -1612px !important;height:16px;background-image:url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=ba7acbd3.png);text-decoration:none;cursor:pointer;background-repeat:no-repeat;line-height:16px;padding-left:17px;font-size:12px;float:left;width:0px;" title="分享到微信"></a>
<span style="visibility:hidden;display:block;height:0px;clear:both;">.</span></div>



   

    








 

        <div style="text-align:center;display:block;width:182px;margin:0px auto;padding:30px 0px 15px;clear:both;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:72px;">
            <dl style="background:rgb(153, 153, 153);display:inline-block;width:72px;height:72px;overflow:hidden;margin:0px 2px;text-align:center;float:left;color:rgb(255, 255, 255);cursor:pointer;border:0px none rgb(255, 255, 255);background-color:rgb(153, 153, 153);background-image:none;box-shadow:none;">
               
                 <dt style="line-height:30px;margin:0px;color:rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:27px;padding:12px 0px 3px;font-family:'Microsoft YaHei';border:0px none rgb(255, 255, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:72px;height:30px;">顶</dt>
                <dd style="line-height:22px;margin:0px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;color:rgb(255, 255, 255);font-family:Arial;border:0px none rgb(255, 255, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:72px;height:22px;">0</dd>
            </dl>
            <dl style="background:rgb(153, 153, 153);display:inline-block;width:72px;height:72px;overflow:hidden;margin:0px 2px;text-align:center;float:left;color:rgb(255, 255, 255);cursor:pointer;border:0px none rgb(255, 255, 255);background-color:rgb(153, 153, 153);background-image:none;box-shadow:none;">
              
                  <dt style="line-height:30px;margin:0px;color:rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:27px;padding:12px 0px 3px;font-family:'Microsoft YaHei';border:0px none rgb(255, 255, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:72px;height:30px;">踩</dt>
                <dd style="line-height:22px;margin:0px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;color:rgb(255, 255, 255);font-family:Arial;border:0px none rgb(255, 255, 255);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:72px;height:22px;">0</dd>
            </dl>
        <span style="text-align:center;display:block;height:0px;clear:both;visibility:hidden;">.</span></div>

   <ul style="clear:both;display:block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14px;line-height:24px;font-family:'Microsoft YaHei', Arial, Helvetica, sans-serif;color:rgb(102, 102, 102);float:left;margin:0px 0px 5px;padding:10px 0px 0px;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:406.141px;height:58px;">
                <li style="list-style-type:none;clear:both;padding:0px 0px 3px;overflow:hidden;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:406.141px;height:26px;"><span style="margin-right:7px;display:block;width:52px;padding:0px 0px 0px 27px;height:26px;color:rgb(255, 255, 255);font-size:14px;float:left;background-color:rgb(153, 153, 153);background-image:url(http://static.blog.csdn.net/skin/dark1/images/blog-page-arr.png);border:0px none rgb(255, 255, 255);background-repeat:no-repeat;background-position:9px 8px;box-shadow:none;">上一篇</span><a href="http://blog.csdn.net/a6225301/article/details/8944883" style="border:0px none rgb(51, 51, 51);color:rgb(51, 51, 51);display:block;float:left;font-size:14px;text-decoration:none;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:320.141px;height:24px;">使用 System.Net.Mail.MailMessage 发送电子邮件</a></li>
                <li style="list-style-type:none;clear:both;padding:0px 0px 3px;overflow:hidden;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:406.141px;height:26px;"><span style="margin-right:7px;display:block;width:52px;padding:0px 0px 0px 27px;height:26px;color:rgb(255, 255, 255);font-size:14px;float:left;background-color:rgb(153, 153, 153);background-image:url(http://static.blog.csdn.net/skin/dark1/images/blog-page-arr.png);border:0px none rgb(255, 255, 255);background-repeat:no-repeat;background-position:9px -22px;box-shadow:none;">下一篇</span><a href="http://blog.csdn.net/a6225301/article/details/8946962" style="border:0px none rgb(51, 51, 51);color:rgb(51, 51, 51);display:block;float:left;font-size:14px;text-decoration:none;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:123.969px;height:24px;">DataList的数据绑定</a></li>
    <span style="color:rgb(102, 102, 102);font-style:normal;font-variant:normal;font-weight:normal;font-size:14px;line-height:24px;font-family:'Microsoft YaHei', Arial, Helvetica, sans-serif;display:block;height:0px;clear:both;visibility:hidden;">.</span></ul>

    <div style="clear:both;height:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;"></div>


        <div style="overflow:hidden;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;height:297px;">
                <h4 style="margin:0px;padding:0px;font-size:16px;color:rgb(51, 51, 51);border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:946px;">我的同类文章</h4>
                <div style="border:1px solid rgb(187, 187, 187);margin:20px 0px 0px 0px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:944px;height:256px;">
                    <div style="height:45px;line-height:45px;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:rgb(220, 220, 220);border:;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:944px;">
                                <span style="border:0px none rgb(102, 102, 102);display:inline-block;font-size:16px;color:rgb(102, 102, 102);width:79.7813px;margin-left:25px;background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;font-weight:bold;height:45px;">
                                    <span style="cursor:pointer;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">C#<em style="font-style:normal;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">（122）</em></span>
                                </span>
                                <span style="display:inline-block;margin-left:25px;font-size:16px;color:rgb(102, 102, 102);border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:81.7969px;height:45px;">
                                    <span style="cursor:pointer;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">项目<em style="font-style:normal;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">（21）</em></span>
                                </span>
                                <span style="display:inline-block;margin-left:25px;font-size:16px;color:rgb(102, 102, 102);border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:118.266px;height:45px;">
                                    <span style="cursor:pointer;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">ASP.NET<em style="font-style:normal;border:0px none rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">（68）</em></span>
                                </span>
                    </div>
                   
                    <div style="max-height:195px;overflow-y:auto;padding:10px 20px;background:rgb(252, 252, 252);border:0px none rgb(0, 0, 0);background-color:rgb(252, 252, 252);background-image:none;box-shadow:none;width:904px;height:190px;">
                        
                        <ul style="float:left;width:442.953px;list-style:none;margin:0px;padding:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:155px;"><li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/47030139" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="C#中把Datatable转换为Json的5个代码实例">C#中把Datatable转换为Json的5个代码实例</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2015-07-23</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">145</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/47019733" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="c#的js调用后台多维数组">c#的js调用后台多维数组</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2015-07-23</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">131</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/46964313" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="C#泛型之List操作示例">C#泛型之List操作示例</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2015-07-20</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">188</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/42009235" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="转换到 COFF 期间失败: 文件无效或损坏">转换到 COFF 期间失败: 文件无效或损坏</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2014-12-18</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">465</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/40147863" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="ASP.NET中的WebService一个简单的例子">ASP.NET中的WebService一个简单的例子</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2014-10-16</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:57px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">1040</b></span></li> </ul>

                        <ul style="float:right;width:442.953px;list-style:none;margin:0px;padding:0px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:155px;"><li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/47020141" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="C# DataTable 转换成JSON数据">C# DataTable 转换成JSON数据</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2015-07-23</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">103</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/47001333" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="C# Dictionary用法总结">C# Dictionary用法总结</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2015-07-22</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:43px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">98</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/46923397" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="ASP.NET 泛型类型 Dictionary操作">ASP.NET 泛型类型 Dictionary操作</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2015-07-17</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">172</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/41523713" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="c++指针和引用的区别">c++指针和引用的区别</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2014-11-26</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:50px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">173</b></span></li> <li style="list-style:none;line-height:30px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:442.953px;height:31px;"><em style="font-style:normal;display:inline-block;vertical-align:middle;margin-right:10px;border:0px none rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:4px;height:30px;">•</em><a href="http://blog.csdn.net/a6225301/article/details/40144177" style="overflow:hidden;color:rgb(51, 51, 51);display:inline-block;width:221.469px;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;border:0px none rgb(51, 51, 51);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;height:30px;" target="_blank" title="一个Android客户端，调用WCF服务获取数据">一个Android客户端，调用WCF服务获取数据</a><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:64px;height:30px;">2014-10-16</span><span style="font-size:12px;color:rgb(187, 187, 187);display:inline-block;margin-left:9px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;width:57px;height:30px;"><i style="font-weight:normal;font-style:normal;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">阅读</i><b style="font-weight:normal;font-style:normal;margin-left:5px;border:0px none rgb(187, 187, 187);background-color:rgba(0, 0, 0, 0);background-image:none;box-shadow:none;">3076</b></span></li> </ul>
                    <a href="http://blog.csdn.net/a6225301/article/category/1210522" style="text-align:center;color:rgb(102, 102, 102);clear:both;display:block;height:35px;line-height:35px;font-size:12px;text-decoration:none;background:rgb(252, 252, 252);border:0px none rgb(102, 102, 102);background-color:rgb(252, 252, 252);background-image:none;box-shadow:none;width:904px;">更多文章</a></div>
                </div>
            </div>    
    
      
</div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 