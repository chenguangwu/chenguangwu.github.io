<html>
<head>
  <title>五分钟入门消息中间件</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5110"/>
<h1>五分钟入门消息中间件</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/5/30 0:03</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&mid=2247484331&idx=1&sn=2662229023e20cea3dd96aab1899c899&chksm=9bf4b31eac833a0853619d30de60a1af0229fdd9cf4ab2c1a893194dffe7ce279ed4b626053c&mpshare=1&scene=1&srcid=0529csCJ0HqOUp8dazK7vH11#rd"><i>http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484331&amp;idx=1&amp;sn=2662229023e20cea3dd96aab1899c899&amp;chksm=9bf4b31eac833a0853619d30de60a1af0229fdd9cf4ab2c1a893194dffe7ce279ed4b626053c&amp;mpshare=1&amp;scene=1&amp;srcid=0529csCJ0HqOUp8dazK7vH11#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="background-color:#fff;padding:20px 16px 12px;margin:0"><div style="margin:0;padding:0"><h2 style="font-weight:400;margin:0;padding:0;font-size:22px;line-height:1.4;margin-bottom:14px"></h2><div style="margin:0;padding:0;margin-bottom:22px;line-height:20px;font-size:0"><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;position:relative"><a style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)"> Java架构沉思录 </a></span><em style="padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;color:rgba(0,0,0,0.3)"></em></div><div lang="=&quot;en&quot;" style="margin:0;padding:0;overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;color:rgb(51,51,51);text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(127,127,127);font-size:14px;line-height:24.5px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;color:rgb(51,51,51);text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(127,127,127);font-size:14px;line-height:24.5px">点击上方“</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:24.5px;color:rgb(87,107,149);font-size:15px">Java架构沉思录</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(127,127,127);font-size:14px;line-height:24.5px">”，选择“置顶公众号”。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;color:rgb(51,51,51);text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(127,127,127);font-size:14px">有内涵、有价值的文章第一时间送达！</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;color:rgb(51,51,51);text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(127,127,127);font-size:14px"></span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);text-align:center;font-size:18px"><a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484325&amp;idx=2&amp;sn=ae496599120302d51b0aaf9db6df8b6e&amp;chksm=9bf4b310ac833a0604da0c542e490d81a4bdad8c7c2dedfa029a0b26fdf27451edb293a6fa11&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">技术交流群</a>、<a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484271&amp;idx=1&amp;sn=fd563bcc8cd8dd91d38c0f6d7d422043&amp;chksm=9bf4b3daac833accbdd4ae259f0f9e3821d4a0c81446e1f6df5db94f49b865b88c33984a4bc8&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">购书优惠</a>、<a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484207&amp;idx=1&amp;sn=606444383f6d2532c94cd3a2c675f5ae&amp;chksm=9bf4b39aac833a8c4de8b6f3a5ad63b4dce8c678dda764194460948e77ecf5aff3644207a139&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">视频资料</a></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><h2 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:10px;margin-bottom:10px;white-space:normal;color:rgb(51,51,51);line-height:1.75em;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:24px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(249,3,21);box-sizing:border-box !important;word-wrap:break-word !important">前言</span></strong></span></h2><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">众所周知，消息中间件是大型分布式系统中不可或缺的重要组件。它使用简单，却解决了不少难题，比如异步处理，系统耦合，流量削锋，分布式事务管理等。实现了一个高性能，高可用，高扩展的系统。本章通过介绍<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(255,76,65)"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">消息中间件的应用场景</strong></span>，<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(255,76,65)"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">消息中间件的传输模式</strong></span>，<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(255,76,65)"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQ快速入门</strong></span> 三个方面来对消息中间件进行入门介绍。还在等什么，赶快来学习吧！</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">说明：消息中间件非常强大，值得我们认真去学习和使用。完整代码请异步github。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>技术：消息中间件的应用场景，通信模式，ActiveMQ。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>源码：</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(255,76,65);box-sizing:border-box !important;word-wrap:break-word !important">https://github.com/ITDragonBlog/daydayup/tree/master/MQ</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>文章目录结构：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><img src="五分钟入门消息中间件_files/640.png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><h2 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:24px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(249,3,21);box-sizing:border-box !important;word-wrap:break-word !important">消息中间件应用场景</span></strong></span></h2><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></h3><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);box-sizing:border-box !important;word-wrap:break-word !important">异步处理</span></strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">异步处理</strong>：调用者发起请求后，调用者不会立刻得到结果，也无需等待结果，继续执行其他业务逻辑。提高了效率但存在异步请求失败的隐患，适用于非核心业务逻辑处理。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">同步处理</strong>：调用者发起请求后，调用者必须等待直到返回结果，再根据返回的结果执行其他业务逻辑。效率虽然没有异步处理高，但能保证业务逻辑可控性，适用于核心业务逻辑处理。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">举一个比较常见的应用场景：为了确保注册用户的真实性，一般在注册成功后会发送验证邮件或者验证码短信，只有认证成功的用户才能正常使用平台功能。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>如下图所示：同步处理和异步处理的比较。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><img src="五分钟入门消息中间件_files/640 [1].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">用消息中间件实现异步处理的好处：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>一、在传统的系统架构，用户从注册到跳转成功页面，中间需要等待邮件发送的业务逻辑耗时。这不仅影响系统响应时间，降低了CPU吞吐量，同时还影响了用户的体验。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>二、通过消息中间件将邮件发送的业务逻辑异步处理，用户注册成功后发送数据到消息中间件，再跳转成功页面，邮件发送的逻辑再由订阅该消息中间件的其他系统负责处理。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>三、消息中间件的读写速度非常的快，其中的耗时可以忽略不计。通过消息中间件可以处理更多的请求。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">小结：正确使用消息中间件将非核心业务逻辑功能异步处理，可以提高系统的响应效率，提高了CPU的吞吐量，改善用户的体验。</strong></p><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);box-sizing:border-box !important;word-wrap:break-word !important">系统耦合和事务的最终一致性</span></strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">分布式系统是若干个独立的计算机（系统）集合。每个计算机负责自己的模块，实现系统的解耦，也避免单点故障对整个系统的影响。每个系统还可以做一个集群，进一步降低故障的发生概率。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>在这样的分布式系统中，消息中间件又扮演着什么样的角色呢？</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">举一个比较常见的应用场景：订单系统下单成功后，需要调用仓库系统接口，选择最优的发货仓库和更新商品库存。若因为某种原因在调用仓库系统接口失败，会直接影响到下单流程。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>如下图所示：感受一下消息中间件扮演的重要角色。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><img src="五分钟入门消息中间件_files/640 [2].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">用消息中间件实现系统耦合的好处：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>一、消息中间件可以让各系统之间耦合性降低，不会因为其他系统的异常影响到自身业务逻辑。各尽其职，订单系统只需负责将订单数据持久化到数据库中，仓库系统只需负责更新库存，不会因为仓库系统的原因从而影响到下单的流程。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>二、各位看官是否发现了一个问题，下单和库存减少本应该是一个事务。因为分布式的原因很难保证事务的强一致性。这里通过消息中间件实现事务的最终一致性效果(后续会详细介绍)。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">小结：事务的一致性固然重要，没有库存会导致下单失败是一个理论上很正常的逻辑。但实际业务中并非如此，我们完全可以利用发货期通过采购或者借库的方式来增加库存。这样无疑可以增加销量，还是可以保证事务的最终一致性。</strong></p><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important">流量削锋</span></strong></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">流量削锋也称限流。在秒杀，抢购的活动中，为了不影响整个系统的正常使用，一般会通过消息中间件做限流，避免流量突增压垮系统，前端页面可以提示&quot;排队等待&quot;，即便用户体验很差，也不能让系统垮掉。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><img src="五分钟入门消息中间件_files/640 [3].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">小结：限流可以在流量突增的情况下保障系统的稳定。系统宕机会被同行抓住笑柄。</strong></p><h2 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:24px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(249,3,21);box-sizing:border-box !important;word-wrap:break-word !important">消息中间件的传输模式</span></strong></span></h2><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">消息中间件除了支持对点对和发布订阅两种模式外，在实际开发中还有一种双向应答模式被广泛使用。</p><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">点对点(p2p)模式</strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">点对点(p2p)模式有三个角色：消息队列（Queue），发送者(Sender)，接收者(Receiver)。发送者将消息发送到一个特定的队列中，等待接收者从队列中获取消息消耗。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>P2P的三个特点：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>一、每个消息只能被一个接收者消费，且消息被消费后默认从队列中删掉（也可以通过其他签收机制重复消费）。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>二、发送者和接收者之间没有依赖性，生产者发送消息和消费者接收消息并不要求同时运行。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>三、接收者在成功接收消息之后需向队列发送接收成功的确认消息。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><img src="五分钟入门消息中间件_files/640 [4].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important">发布订阅(Pub/Sub)模式</span></strong></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">发布订阅(Pub/Sub)模式也有三个角色：主题（Topic），发布者（Publisher），订阅者（Subscriber）。发布者将消息发送到主题队列中，系统再将这些消息传递给订阅者。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>Pub/Sub的特点：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>一、每个消息可以被多个订阅者消费。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>二、发布者和订阅者之间存在依赖性。订阅者必须先订阅主题后才能接收到信息，在订阅前发布的消息，订阅者是接收不到的。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>三、非持久化订阅：如果订阅者不在线，此时发布的消息订阅者是也接收不到，即便订阅者重新上线也接收不到。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>四、持久化订阅：订阅者订阅主题后，即便订阅者不在线，此时发布的消息可以在订阅者重新上线后接收到的。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><img src="五分钟入门消息中间件_files/640 [5].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);box-sizing:border-box !important;word-wrap:break-word !important">双向应答模式</span></strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">双向应答模式并不是消息中间件提供的一种通信模式，它是由于实际生成环境的需要，在原有的基础上做了改良。即消息的发送者也是消息的接收者。消息的接收者也是消息的发送者。如下图所示</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><img src="五分钟入门消息中间件_files/640 [6].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;width:auto !important;visibility:visible !important"/></p><h2 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(249,3,21);font-size:24px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQ 入门</strong></span></h2><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">ActiveMQ是Apache出品，简单好用，能力强大，可以处理大部分的业务的开源消息总线。同时也支持JMS规范。</p><blockquote style="padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding-left:10px;border-left:3px solid #dbdbdb;color:rgb(51,51,51)"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin-top:10px;margin-bottom:10px;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important">JMS（JAVA Message Service,java消息服务）API是一个消息服务的标准或者说是规范，允许应用程序组件基于JavaEE平台创建、发送、接收和读取消息。它使分布式通信耦合度更低，消息服务更加可靠以及异步性。</p></blockquote><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQ 安装</strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">ActiveMQ 的安装很简单，三个步骤：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第一步：下载，官网下载地址：<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(255,76,65);box-sizing:border-box !important;word-wrap:break-word !important">http://activemq.apache.org/download.html</span>。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第二步：运行，压缩包解压后，在bin目录下根据电脑系统位数找到对应的wrapper.exe程序，双击运行。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第三步：访问，浏览器访问http://localhost:8161/admin，账号密码都是admin。</p><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQ 工作流程</strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">我们通过简单的P2P模式来了解ActiveMQ的工作流程。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>生产者发送消息给MQ主要步骤：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第一步：创建连接工厂实例<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第二步：创建连接并启动<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第三步：获取操作消息的接口<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第四步：创建队列，即Queue或者Topic<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第五步：创建消息发送者<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第六步：发送消息，关闭资源</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> java.util.Random;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Connection;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.ConnectionFactory;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.DeliveryMode;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Destination;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.MessageProducer;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Session;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.TextMessage;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.apache.activemq.ActiveMQConnection;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.apache.activemq.ActiveMQConnectionFactory;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:133px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* 消息队列生产者<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* @author itdragon<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>*/</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">class</span> ITDragonProducer {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">private</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">static</span> final <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> QUEUE_NAME = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:112px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;ITDragon.Queue&quot;</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>     <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">static</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> main(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span>[] args) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:323px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// ConnectionFactory: 连接工厂,JMS 用它创建连接  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       ConnectionFactory connectionFactory = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:282px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// Connection: 客户端和JMS系统之间建立的链接</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       Connection connection = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:326px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// Session: 一个发送或接收消息的线程 ,操作消息的接口</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       Session session = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:277px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// Destination: 消息的目的地,消息发送给谁  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       Destination destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:214px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// MessageProducer: 消息生产者  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       MessageProducer producer = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">try</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:745px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step1 构造ConnectionFactory实例对象，需要填入 用户名, 密码 以及要连接的地址，默认端口为&quot;tcp://localhost:61616&quot;  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           connectionFactory = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER,  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>                   ActiveMQConnection.DEFAULT_PASSWORD, ActiveMQConnection.DEFAULT_BROKER_URL);   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:197px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step2 连接工厂创建连接对象  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           connection = connectionFactory.createConnection();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:101px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step3 启动  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           connection.start();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:149px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step4 获取操作连接  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:761px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/** <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>            * 第一个参数：是否设置事务 true or false。 如果设置了true，第二个参数忽略，并且需要commit()才执行 <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>            * 第二个参数：acknowledge模式 <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>            * AUTO_ACKNOWLEDGE：自动确认，客户端发送和接收消息不需要做额外的工作。不管消息是否被正常处理。 默认<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>            * CLIENT_ACKNOWLEDGE：客户端确认。客户端接收到消息后，必须手动调用acknowledge方法，jms服务器才会删除消息。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>            * DUPS_OK_ACKNOWLEDGE：允许重复的确认模式。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>            */</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           session = connection.createSession(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">Boolean</span>.TRUE, Session.AUTO_ACKNOWLEDGE);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:197px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step5 创建一个队列到目的地  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           destination = session.createQueue(QUEUE_NAME);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:209px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step6 在目的地创建一个生产者  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           producer = session.createProducer(destination);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:380px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step7 生产者设置不持久化，若要设置持久化则使用 PERSISTENT</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:257px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// step8 生产者发送信息，具体的业务逻辑  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           sendMessage(session, producer);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           session.commit();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">catch</span> (Exception e) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           e.printStackTrace();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">finally</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">try</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">if</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span> != connection) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>                   connection.close();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">catch</span> (Exception e) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               e.printStackTrace();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/> <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">static</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> sendMessage(Session session, MessageProducer producer) throws Exception {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">for</span>(int i = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> []operators = {<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;+&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;-&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;*&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;/&quot;</span>};<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           Random random = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> Random(System.currentTimeMillis());  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> expression = random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+operators[random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">4</span>)]+(random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           TextMessage message = session.createTextMessage(expression);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:143px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 发送消息到目的地方  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           producer.send(message);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:182px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;Queue Sender ---------&gt; &quot;</span> + expression);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>}</p></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">消费者从MQ中获取数据消费步骤和上面类似，只是将发送消息改成了接收消息。</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Connection;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.ConnectionFactory;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Destination;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.MessageConsumer;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Session;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.TextMessage;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.apache.activemq.ActiveMQConnection;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.apache.activemq.ActiveMQConnectionFactory;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> com.itdragon.utils.ITDragonUtil;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:133px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* 消息队列消费者<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* @author itdragon<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>*/</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">class</span> ITDragonConsumer {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">private</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">static</span> final <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> QUEUE_NAME = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:112px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;ITDragon.Queue&quot;</span>; <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:125px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 要和Sender一致  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">static</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> main(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span>[] args) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       ConnectionFactory connectionFactory = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       Connection connection = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       Session session = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       Destination destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:214px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// MessageConsumer: 信息消费者  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       MessageConsumer consumer = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">try</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           connectionFactory = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER,  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>                   ActiveMQConnection.DEFAULT_PASSWORD, ActiveMQConnection.DEFAULT_BROKER_URL);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           connection = connectionFactory.createConnection();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           connection.start();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           session = connection.createSession(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">Boolean</span>.FALSE, Session.AUTO_ACKNOWLEDGE);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           destination = session.createQueue(QUEUE_NAME);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           consumer = session.createConsumer(destination);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:203px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 不断地接收信息，直到没有为止  </span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">while</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">true</span>) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               TextMessage message = (TextMessage) consumer.receive();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">if</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span> != message) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>                   System.out.print(ITDragonUtil.cal(message.getText()));  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">else</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>                   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">break</span>;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">catch</span> (Exception e) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           e.printStackTrace();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">finally</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">try</span> {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">if</span> (<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">null</span> != connection) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>                   connection.close();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           } <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">catch</span> (Exception e) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>               e.printStackTrace();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>}</p></pre></div><h3 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(171,25,66);font-size:18px;box-sizing:border-box !important;word-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">SpringBoot 整合ActiveMQ使用</strong></span></h3><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">SpringBoot可以帮助我们快速搭建项目，减少Spring整合第三方配置的精力。SpringBoot整合ActiveMQ也是非常简单，只需要简单的两个步骤：<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第一步，在pom.xml文件中添加依赖使其支持ActiveMQ<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>第二步，在application.properties文件中配置连接ActiveMQ参数</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">pom.xml是Maven项目的核心配置文件</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important">&lt;dependency&gt;  <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:167px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">&lt;!-- 支持ActiveMQ依赖 --&gt;</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:63px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">groupId</span>&gt;</span>org.springframework.boot<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">groupId</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">artifactId</span>&gt;</span>spring-boot-starter-activemq<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">artifactId</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">dependency</span>&gt;</span></span> <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>&lt;dependency&gt;  <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:161px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">&lt;!-- 支持使用mq连接池 --&gt;</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:63px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">groupId</span>&gt;</span>org.apache.activemq<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">groupId</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">artifactId</span>&gt;</span>activemq-pool<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">artifactId</span>&gt;</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">&lt;/<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">dependency</span>&gt;</span></span></p></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">application.properties是SpringBoot项目的核心参数配置文件</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important">spring.activemq.user=admin<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>spring.activemq.password=admin<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>spring.activemq.broker-url=tcp:<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:119px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">//localhost:61616</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>spring.activemq.<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">in</span>-memory=<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">true</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>spring.activemq.pool.enabled=<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(86,182,194);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">true</span></p></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><code style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">spring.activemq.in-memory</code> 默认值为true，表示无需安装ActiveMQ的服务器，直接使用内存。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><code style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">spring.activemq.pool.enabled</code> 表示通过连接池的方式连接。</p><h4 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">springboot-activemq-producer</strong></h4><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">springboot-activemq-producer 项目模拟生产者所在的系统，支持同时发送点对点模式和发布订阅模式。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>两个核心文件：一个是消息发送类，一个是队列Bean管理配置类。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>三种主要模式：一个是对点对模式，队列名为&quot;queue.name&quot;；一个是发布订阅模式，主题名为&quot;topic.name&quot;；最后一个是双向应答模式，队列名为&quot;response.name&quot; 。</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> java.util.Random;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Queue;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.Topic;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.beans.factory.annotation.Autowired;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.jms.annotation.JmsListener;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.jms.core.JmsMessagingTemplate;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.scheduling.annotation.EnableScheduling;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.scheduling.annotation.Scheduled;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.stereotype.Service;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:133px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* 消息队列生产者<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* @author itdragon<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>*/</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">@Service</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:119px;box-sizing:border-box !important;word-wrap:break-word !important">@EnableScheduling</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">class</span> ITDragonProducer {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Autowired</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">private</span> JmsMessagingTemplate jmsTemplate;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Autowired</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">private</span> Queue queue;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Autowired</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">private</span> Topic topic;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Autowired</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">private</span> Queue responseQueue;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:517px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 点对点(p2p)模式测试<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 包含三个角色：消息队列（Queue），发送者(Sender)，接收者(Receiver)。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 发送者将消息发送到一个特定的队列，队列保留着消息，直到接收者从队列中获取消息。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    */</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Scheduled</span>(fixedDelay = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">5000</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> testP2PMQ(){<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">for</span>(int i = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> []operators = {<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;+&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;-&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;*&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;/&quot;</span>};<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           Random random = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> Random(System.currentTimeMillis());  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> expression = random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+operators[random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">4</span>)]+(random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           jmsTemplate.convertAndSend(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">this</span>.queue, expression);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:182px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;Queue Sender ---------&gt; &quot;</span> + expression);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:512px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 订阅/发布(Pub/Sub)模拟测试<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 包含三个角色：主题（Topic），发布者（Publisher），订阅者（Subscriber） 。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 多个发布者将消息发送到Topic,系统将这些消息传递给多个订阅者。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    */</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Scheduled</span>(fixedDelay = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">5000</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> testPubSubMQ() {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">for</span> (int i = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> []operators = {<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;+&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;-&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;*&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;/&quot;</span>};<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           Random random = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> Random(System.currentTimeMillis());<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> expression = random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+operators[random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">4</span>)]+(random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           jmsTemplate.convertAndSend(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">this</span>.topic, expression);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:182px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;Topic Sender ---------&gt; &quot;</span> + expression);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:745px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * 双向应答模式测试<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    * P2P和Pub/Sub是MQ默认提供的两种模式，而双向应答模式则是在原有的基础上做了改进。发送者既是接收者，接收者也是发送者。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>    */</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@Scheduled</span>(fixedDelay = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">5000</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> testReceiveResponseMQ(){<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">for</span> (int i = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> []operators = {<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;+&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;-&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;*&quot;</span>,<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;/&quot;</span>};<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           Random random = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> Random(System.currentTimeMillis());  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> expression = random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+operators[random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">4</span>)]+(random.nextInt(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;box-sizing:border-box !important;word-wrap:break-word !important">10</span>)+<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:7px;box-sizing:border-box !important;word-wrap:break-word !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>           jmsTemplate.convertAndSend(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">this</span>.responseQueue, expression);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:198px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 接收P2P模式，消费者返回的数据</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">@JmsListener</span>(destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:77px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;out.queue&quot;</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> receiveResponse(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> message) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:287px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;Producer Response Receiver  ---------&gt; &quot;</span> + message);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>}</p></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">javax</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">.jms</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">.Queue</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">javax</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">.jms</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">.Topic</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">org</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">.apache</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:63px;box-sizing:border-box !important;word-wrap:break-word !important">.activemq</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">.command</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:98px;box-sizing:border-box !important;word-wrap:break-word !important">.ActiveMQQueue</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">org</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">.apache</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:63px;box-sizing:border-box !important;word-wrap:break-word !important">.activemq</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">.command</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:98px;box-sizing:border-box !important;word-wrap:break-word !important">.ActiveMQTopic</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">org</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:112px;box-sizing:border-box !important;word-wrap:break-word !important">.springframework</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">.context</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:77px;box-sizing:border-box !important;word-wrap:break-word !important">.annotation</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">.Bean</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">org</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:112px;box-sizing:border-box !important;word-wrap:break-word !important">.springframework</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">.context</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:77px;box-sizing:border-box !important;word-wrap:break-word !important">.annotation</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:98px;box-sizing:border-box !important;word-wrap:break-word !important">.Configuration</span>;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:133px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* bean配置管理类 <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* @author itdragon<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>*/</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>@<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">Configuration</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>public class ActiveMQBeansConfig {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   @<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">Bean</span>   // 定义一个名字为queue.name的点对点列队<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   public Queue queue() {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQQueue</span>(&quot;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">queue</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">.name</span>&quot;);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   @<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">Bean</span>   // 定义一个名字为topic.name的主题队列<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   public Topic topic() {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQTopic</span>(&quot;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">topic</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">.name</span>&quot;);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   @<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">Bean</span>   // 定义一个名字为response.name的双向应答队列<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   public Queue responseQueue() {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:91px;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQQueue</span>(&quot;<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">response</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">.name</span>&quot;);<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>}</p></pre></div><h4 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">springboot-activemq-consumer</strong></h4><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">springboot-activemq-consumer 模拟消费者所在的服务器，主要负责监听队列消息。<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>两个核心文件：一个是消息接收类，一个是兼容点对点模式和发布订阅模式的链接工厂配置类。</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.jms.annotation.JmsListener;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.messaging.handler.annotation.SendTo;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.stereotype.Service;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> com.itdragon.utils.ITDragonUtil;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:133px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">/**<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* 消息队列消费者<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>* @author itdragon<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>*/</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:56px;box-sizing:border-box !important;word-wrap:break-word !important">@Service</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">class</span> ITDragonConsumer {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:258px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 1. 监听名字为&quot;queue.name&quot;的点对点队列</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">@JmsListener</span>(destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;queue.name&quot;</span>, containerFactory=<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:154px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;queueListenerFactory&quot;</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> receiveQueue(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> text) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:133px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;Queue Receiver : &quot;</span> + text + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:111px;box-sizing:border-box !important;word-wrap:break-word !important">&quot; \t 处理结果 : &quot;</span> + ITDragonUtil.cal(text));  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:270px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 2. 监听名字为&quot;topic.name&quot;的发布订阅队列</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">@JmsListener</span>(destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;topic.name&quot;</span>, containerFactory=<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:154px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;topicListenerFactory&quot;</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> receiveTopicOne(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> text) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       System.out.println(Thread.currentThread().getName() + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:175px;box-sizing:border-box !important;word-wrap:break-word !important">&quot; No.1 Topic Receiver : &quot;</span> + text + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:111px;box-sizing:border-box !important;word-wrap:break-word !important">&quot; \t 处理结果 : &quot;</span> + ITDragonUtil.cal(text));  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:270px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 2. 监听名字为&quot;topic.name&quot;的发布订阅队列</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">@JmsListener</span>(destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;topic.name&quot;</span>, containerFactory=<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:154px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;topicListenerFactory&quot;</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">void</span> receiveTopicTwo(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> text) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       System.out.println(Thread.currentThread().getName() +<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:175px;box-sizing:border-box !important;word-wrap:break-word !important">&quot; No.2 Topic Receiver : &quot;</span> + text + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:111px;box-sizing:border-box !important;word-wrap:break-word !important">&quot; \t 处理结果 : &quot;</span> + ITDragonUtil.cal(text));  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:329px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 3. 监听名字为&quot;response.name&quot;的接收应答(双向)队列</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:84px;box-sizing:border-box !important;word-wrap:break-word !important">@JmsListener</span>(destination = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:105px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;response.name&quot;</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:49px;box-sizing:border-box !important;word-wrap:break-word !important">@SendTo</span>(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:77px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;out.queue&quot;</span>)<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> receiveResponse(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">String</span> text) {<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       System.out.println(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:154px;box-sizing:border-box !important;word-wrap:break-word !important">&quot;Response Receiver : &quot;</span> + text + <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:156px;box-sizing:border-box !important;word-wrap:break-word !important">&quot; \t 正在返回数据......&quot;</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">return</span> ITDragonUtil.cal(text).toString();<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>}</p></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><pre style="margin:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;background-image:none;background-color:initial;box-sizing:border-box !important;word-wrap:break-word !important"><p style="max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;margin:10px 0.15em;padding:6px;border-radius:4px;font-size:0.85em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;overflow-x:auto;white-space:nowrap;line-height:1.75em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> java.util.concurrent.Executors;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> javax.jms.ConnectionFactory;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.context.annotation.Bean;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.context.annotation.Configuration;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.jms.annotation.EnableJms;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.jms.config.DefaultJmsListenerContainerFactory;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">import</span> org.springframework.jms.config.JmsListenerContainerFactory;<br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:98px;box-sizing:border-box !important;word-wrap:break-word !important">@Configuration</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:70px;box-sizing:border-box !important;word-wrap:break-word !important">@EnableJms</span>  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;background:rgba(0,0,0,0);display:inline;width:112px;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:63px;box-sizing:border-box !important;word-wrap:break-word !important">JmsConfig</span> </span>{  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">@Bean</span>  <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:118px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// 开启pub/Sub模式</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> JmsListenerContainerFactory&lt;?&gt; topicListenerFactory(ConnectionFactory connectionFactory) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       DefaultJmsListenerContainerFactory factory = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> DefaultJmsListenerContainerFactory();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       factory.setPubSubDomain(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:28px;box-sizing:border-box !important;word-wrap:break-word !important">true</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       factory.setConnectionFactory(connectionFactory);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">return</span> factory;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">@Bean</span>  <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(92,99,112);background:rgba(0,0,0,0);display:inline;width:135px;font-style:italic;box-sizing:border-box !important;word-wrap:break-word !important">// JMS默认开启P2P模式</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">public</span> JmsListenerContainerFactory&lt;?&gt; queueListenerFactory(ConnectionFactory connectionFactory) {  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       DefaultJmsListenerContainerFactory factory = <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:21px;box-sizing:border-box !important;word-wrap:break-word !important">new</span> DefaultJmsListenerContainerFactory();  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       factory.setPubSubDomain(<span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:35px;box-sizing:border-box !important;word-wrap:break-word !important">false</span>);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       factory.setConnectionFactory(connectionFactory);  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>       <span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:42px;box-sizing:border-box !important;word-wrap:break-word !important">return</span> factory;  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>   }  <br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/>}</p></pre></div><h2 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:24px"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(249,3,21);box-sizing:border-box !important;word-wrap:break-word !important">总结</span></strong></span></h2><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">1) <strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">消息中间件可以解决异步处理，系统解耦，流量削锋，分布式系统事务管理等问题。</strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">2) <strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">消息中间件默认支持点对点模式和发布订阅模式，实际工作中还可以使用双向应当模式。</strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51);margin-top:10px;margin-bottom:10px;line-height:1.75em">3) <strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important">ActiveMQ是Apache出品，简单好用，功能强大，可以处理大部分的业务的开源消息总线。</strong></p><pre style="padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:0.85em;font-family:Consolas,Inconsolata,Courier,monospace;font-size:1em;line-height:1.2em;margin:1.2em 0"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:0.85em;font-family:Consolas,Inconsolata,Courier,monospace;margin:0 0.15em;background-color:rgb(248,248,248);white-space:pre;overflow:auto;border-radius:3px;border-width:1px;border-style:solid;border-color:rgb(204,204,204);padding:0.5em 0.7em;display:block !important">原文地址：http://www.cnblogs.com/itdragon/p/8535187.html Java架构沉思录做了部分修改。</code></pre><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51)"><div style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:8.5px;margin-bottom:8.5px;padding:8.5px;width:518.4px;text-align:center"><div style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding:10px;box-shadow:rgba(159,160,160,0.498) 0 0 10px;display:inline-block;vertical-align:top"><div style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding:7px;box-shadow:rgba(0,0,0,0.29) 0 0 10px inset"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:17px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">Java架构沉思录</strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:17px">一码不扫，何扫天下<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-color:rgb(51,51,51);border-style:none;border-width:0"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><img src="五分钟入门消息中间件_files/640.jpg" type="image/jpeg" data-filename="640.jpg" border="0" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;vertical-align:middle;visibility:visible !important;width:258px !important" title="undefined" width="258"/></div></div></div></div></div></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(51,51,51);text-align:center"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;display:-webkit-flex;justify-content:center;width:650px"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;width:160px"><img src="五分钟入门消息中间件_files/640 [7].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;display:block;visibility:visible !important;width:160px !important" width="100%"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:-18px;margin-bottom:-28px;color:rgb(63,62,63);letter-spacing:1px;line-height:50px">推荐阅读</div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;width:160px"><img src="五分钟入门消息中间件_files/640 [8].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;display:block;visibility:visible !important;width:160px !important" width="100%"/></div></div></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:17px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:circle"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:10px;margin-bottom:10px;min-height:17px;line-height:29.75px"><a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484311&amp;idx=1&amp;sn=6eebf034f35680a786e7046474fec72b&amp;chksm=9bf4b322ac833a343e3fc83e0ede6ec00595a0031dad1635f77277be77de8548350dfa193593&amp;scene=21#wechat_redirect" style="margin:0;padding:0;text-decoration:none;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(87,107,149);-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">不懂RPC，休谈微服务</a><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:10px;margin-bottom:10px;min-height:17px;line-height:29.75px"><a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484297&amp;idx=1&amp;sn=684acfd4d54b397fe3711bd98082b076&amp;chksm=9bf4b33cac833a2a62eb629d11d706f0ff88520f4d62aeb3858598b8ee008ccdd2a9846a5164&amp;scene=21#wechat_redirect" style="margin:0;padding:0;text-decoration:none;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(87,107,149);-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">谈谈高并发下的幂等性处理</a><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:10px;margin-bottom:10px;min-height:17px;line-height:29.75px"><a href="http://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484325&amp;idx=1&amp;sn=f12d5676e8948a63b2e960dab33b75cb&amp;chksm=9bf4b310ac833a06b1a30b1b09a7aaf80470a5524bae9be2fcaa8c54ab5c475ce7a4809ea81e&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">再谈分布式ID生成方案</a></p></li></ul></div></div><div style="margin:0;padding:0"> 文章已于<span style="margin:0;padding:0"></span>修改 </div><ul style="margin:0;padding:0"></ul><div style="margin:0;padding:0"><a href="https://mp.weixin.qq.com/s?__biz=MzAxNjM2MTk0Ng==&amp;mid=2247484331&amp;idx=1&amp;sn=2662229023e20cea3dd96aab1899c899&amp;chksm=9bf4b31eac833a0853619d30de60a1af0229fdd9cf4ab2c1a893194dffe7ce279ed4b626053c&amp;mpshare=1&amp;scene=1&amp;srcid=0529csCJ0HqOUp8dazK7vH11##" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)">阅读原文</a></div></div></div></span>
</div></body></html> 