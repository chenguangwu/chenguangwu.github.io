<html>
<head>
  <title>基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="15017"/>
<h1>基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2020/4/20 10:36</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzU2NjIzNDk5NQ==&mid=2247489282&idx=1&sn=f94e33d2827793bf941953fe1b435d21&chksm=fcaecd1ecbd94408e221d913b041733e3aba12a5cf3d0ea99c5cce0c7e08a31bd9685bc3ef58#rd"><i>http://mp.weixin.qq.com/s?__biz=MzU2NjIzNDk5NQ==&amp;mid=2247489282&amp;idx=1&amp;sn=f94e33d2827793bf941953fe1b435d21&amp;chksm=fcaecd1ecbd94408e221d913b041733e3aba12a5cf3d0ea99c5cce0c7e08a31bd9685bc3ef58#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="text-size-adjust:100%;line-height:1.6;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div style="font-family:-apple-system-font, &quot;Helvetica Neue&quot;, sans-serif;color:rgb(51, 51, 51);background-color:rgb(242, 242, 242);letter-spacing:0.034em;line-height:1.6;font-size:16px;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div><div style="overflow-wrap:break-word;"><div style="background-color:rgb(255, 255, 255);"><div><div>
                
                <h2 style="font-weight:400;font-size:22px;margin:0px;padding:0px;line-height:1.4;margin-bottom:14px;">
                    
                    
                    
基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步
                </h2>
                <div style="margin:0px;padding:0px;margin-bottom:22px;line-height:20px;font-size:0px;overflow-wrap:break-word;word-break:break-all;position:relative;z-index:1;">
                                                                                                                <span style="margin:0px 10px 10px 0px;padding:0px;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);color:rgba(0, 0, 0, 0.3);">
                                                                    Throwable
                                                            </span>
                                                                
                                        <span style="margin:0px 10px 10px 0px;padding:0px;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);position:relative;">
                      <a href="#" style="margin:0px;padding:0px;color:var(--weui-LINK);text-decoration:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);cursor:pointer;">
                        匠心零度                      </a>
                      
                    </span>
                    <em style="margin:0px 10px 10px 0px;padding:0px;font-style:normal;display:inline-block;vertical-align:middle;font-size:15px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);color:rgba(0, 0, 0, 0.3);">今天</em>
                </div>
                

                

                

                
                                


                
                
                
                
                                                
                                                                
                                
                <div style="margin:0px;padding:0px;">
                                    </div>
                
                
                                
                
                <div style="margin:0px;padding:0px;overflow:hidden;color:rgb(51, 51, 51);font-size:17px;overflow-wrap:break-word;text-align:justify;position:relative;z-index:0;visibility:visible;">
                    

                    

                    
                    
                    <div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;white-space:normal;color:rgb(62, 62, 62);font-size:15px;background-color:rgb(255, 255, 255);"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:15px;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;letter-spacing:0.544px;word-spacing:2px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(127, 127, 127);font-size:14px;line-height:1.75em;">点击上方</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;word-spacing:2px;color:rgb(127, 127, 127);font-size:14px;line-height:1.75em;">“</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;word-spacing:2px;font-size:14px;line-height:1.75em;color:rgb(0, 176, 240);">匠心零度</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;word-spacing:2px;color:rgb(127, 127, 127);font-size:14px;line-height:1.75em;">”</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;letter-spacing:0.544px;word-spacing:2px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(127, 127, 127);font-size:14px;line-height:1.75em;">，选择“</span><a href="http://mp.weixin.qq.com/s?__biz=MzU0MzQ5MDA0Mw==&amp;mid=2247484785&amp;idx=1&amp;sn=adfe86f12ffd8ab255e635cac5db67f5&amp;chksm=fb0befe5cc7c66f3a7c5e132f6005135f530d1dbc1788da00382307b1c325ac3fa600ce8f9d8&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:var(--weui-LINK);text-decoration:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;cursor:pointer;letter-spacing:0.544px;font-size:16px;word-spacing:2px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(127, 127, 127);font-size:14px;">设为星标</span></a><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;word-spacing:2px;color:rgb(127, 127, 127);font-size:14px;">”</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;white-space:normal;font-family:-apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:15px;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;clear:both;min-height:1em;color:rgb(0, 0, 0);font-size:16px;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(127, 127, 127);font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:14px;letter-spacing:0.544px;word-spacing:2px;">做积极的人，而不是积极废人</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color:rgb(178, 178, 178);letter-spacing:1px;font-size:14px;"></span></p></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;clear:both;min-height:1em;white-space:normal;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing:0.544px;color:rgb(62, 62, 62);background-color:rgb(255, 255, 255);font-size:16px;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(127, 127, 127);font-size:14px;line-height:1.75em;"></span></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640.webp" type="image/webp" data-filename="640.webp" height="383" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;height:auto !important;white-space:normal;letter-spacing:0.544px;visibility:visible !important;width:574px !important;" title="" width="574"/></p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(62, 62, 62);font-family:-apple-system-font, system-ui, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;font-size:15px;letter-spacing:0.544px;white-space:normal;background-color:rgb(255, 255, 255);"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;margin-top:5px;margin-bottom:10px;letter-spacing:0.544px;text-align:right;text-indent:0em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(178, 178, 178);font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size:12px;white-space:pre-line;letter-spacing:0.544px;">来源 | https://urlify.cn/AfUBRr</span></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;margin-top:5px;margin-bottom:10px;letter-spacing:0.544px;text-align:right;text-indent:0em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(178, 178, 178);font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size:12px;white-space:pre-line;letter-spacing:0.544px;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></span></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">近段时间，业务系统架构基本完备，数据层面的建设比较薄弱，因为笔者目前工作重心在于搭建一个小型的数据平台。优先级比较高的一个任务就是需要近实时同步业务系统的数据（包括保存、更新或者软删除）到一个另一个数据源，持久化之前需要清洗数据并且构建一个相对合理的便于后续业务数据统计、标签系统构建等扩展功能的数据模型。基于当前团队的资源和能力，优先调研了Alibaba开源中间件Canal的使用。</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [1].webp" type="image/webp" data-filename="640.webp" height="454" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">这篇文章简单介绍一下如何快速地搭建一套<code style="margin:0px;padding:2px 4px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-right:2px;margin-left:2px;font-size:inherit;line-height:inherit;border-radius:4px;color:rgb(233, 105, 0);background:rgb(248, 248, 248);">Canal</code>相关的组件。</p><h3 style="font-weight:bold;font-size:1.3em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">关于Canal</span></h3><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">下面的简介和下一节的原理均来自于Canal项目的README：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [2].webp" type="image/webp" data-filename="640.webp" height="357" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><code style="margin:0px;padding:2px 4px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-right:2px;margin-left:2px;font-size:inherit;line-height:inherit;border-radius:4px;color:rgb(233, 105, 0);background:rgb(248, 248, 248);">Canal[kə'næl]</code>，译意为水道/管道/沟渠，主要用途是基于MySQL数据库增量日志解析，提供增量数据订阅和消费。早期阿里巴巴因为杭州和美国双机房部署，存在跨机房同步的业务需求，实现方式主要是基于<code style="margin:0px;padding:2px 4px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-right:2px;margin-left:2px;font-size:inherit;line-height:inherit;border-radius:4px;color:rgb(233, 105, 0);background:rgb(248, 248, 248);">业务trigger</code>获取增量变更。从 2010 年开始，业务逐步尝试数据库日志解析获取增量变更进行同步，由此衍生出了大量的数据库增量订阅和消费业务。</p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">基于日志增量订阅和消费的业务包括：</p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:1.75em;">数据库镜像</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:1.75em;">数据库实时备份</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:1.75em;">索引构建和实时维护（拆分异构索引、倒排索引等）</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:1.75em;">业务Cache刷新</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;line-height:1.75em;">带业务逻辑的增量数据处理</p></li></ul><h4 style="font-weight:bold;font-size:1.2em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">Canal 的工作原理</span></h4><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">MySQL主备复制原理：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [3].webp" type="image/webp" data-filename="640.webp" height="333" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:497px !important;visibility:visible !important;" title="" width="497"/></div><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75em;">MySQL的Master实例将数据变更写入二进制日志（binary log，其中记录叫做二进制日志事件binary log events，可以通过show binlog events进行查看）</div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75em;">MySQL的Slave实例将master的binary log events拷贝到它的中继日志（relay log）</div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75em;">MySQL的Slave实例重放relay log中的事件，将数据变更反映它到自身的数据</div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p></li></ul><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">Canal的工作原理如下：</p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:2.2em;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75em;">Canal模拟MySQL Slave的交互协议，伪装自己为MySQL Slave，向MySQL Master发送dump协议</div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75em;">MySQL Master收到dump请求，开始推送binary log给Slave（即Canal）</div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;line-height:1.75em;">Canal解析binary log对象（原始为byte流），并且可以通过连接器发送到对应的消息队列等中间件中</div></li></ul><h4 style="font-weight:bold;font-size:1.2em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">关于Canal的版本和部件</span></h4><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">截止笔者开始编写本文的时候（2020-03-05），Canal的最新发布版本是v1.1.5-alpha-1（2019-10-09发布的），最新的正式版是v1.1.4（2019-09-02发布的）。其中，v1.1.4主要添加了鉴权、监控的功能，并且做了一些列的性能优化，此版本集成的连接器是Tcp、Kafka和RockerMQ。而v1.1.5-alpha-1版本已经新增了RabbitMQ连接器，但是此版本的RabbitMQ连接器暂时不能定义连接RabbitMQ的端口号，不过此问题已经在master分支中修复（具体可以参看源码中的CanalRabbitMQProducer类的提交记录）。换言之，v1.1.4版本中目前能使用的内置连接器只有Tcp、Kafka和RockerMQ三种，如果想尝鲜使用RabbitMQ连接器，可以选用下面的两种方式之一：</p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">选用v1.1.5-alpha-1版本，但是无法修改RabbitMQ的port属性，默认为5672。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">基于master分支自行构建Canal。</span></p></li></ul><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">目前，Canal项目的活跃度比较高，但是考虑到功能的稳定性问题，笔者建议选用稳定版本在生产环境中实施，当前可以选用v1.1.4版本，本文的例子用选用的就是v1.1.4版本，配合Kafka连接器使用。Canal主要包括三个核心部件：</p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal-admin：后台管理模块，提供面向WebUI的Canal管理能力。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal-adapter：适配器，增加客户端数据落地的适配及启动功能，包括REST、日志适配器、关系型数据库的数据同步（表对表同步）、HBase数据同步、ES数据同步等等。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal-deployer：发布器，核心功能所在，包括binlog解析、转换和发送报文到连接器中等等功能都由此模块提供。</span></p></li></ul><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">一般情况下，canal-deployer部件是必须的，其他两个部件按需选用即可。</p><h3 style="font-weight:bold;font-size:1.3em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">部署所需的中间件</span></h3><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">搭建一套可以用的组件需要部署MySQL、Zookeeper、Kafka和Canal四个中间件的实例，下面简单分析一下部署过程。选用的虚拟机系统是CentOS7。</p><h4 style="font-weight:bold;font-size:1.2em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">安装MySQL</span></h4><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">为了简单起见，选用yum源安装（官方链接是https://dev.mysql.com/downloads/repo/yum）：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [4].webp" type="image/webp" data-filename="640.webp" height="470" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><blockquote style="margin:1em 0px;padding:15px 15px 15px 1rem;max-width:100%;box-sizing:border-box;overflow-wrap:normal;padding-left:10px;border-left:3px solid rgb(219, 219, 219);color:rgb(129, 145, 152);font-size:0.9em;padding-top:4px;border-left-width:6px;border-left-color:rgb(220, 230, 240);line-height:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;background:rgb(242, 247, 251);overflow:auto;word-break:normal;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;">mysql80-community-release-el7-3虽然包名带了mysql80关键字，其实已经集成了MySQL主流版本5.6、5.7和8.x等等的最新安装包仓库</p></blockquote><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">选用的是最新版的MySQL8.x社区版，下载CentOS7适用的rpm包：</p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">cd /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span>/mysql<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>wget https:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">//dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">// 下载完毕之后</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>sudo rpm -Uvh mysql80-community-release-el7<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-3.</span>noarch.rpm<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">此时列举一下yum仓库里面的MySQL相关的包：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">[root@localhost mysql]<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># yum repolist all | grep mysql</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-cluster-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.5</span>-community/x86_64 MySQL Cluster <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.5</span> Community   disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-cluster-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.5</span>-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span> MySQL Cluster <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.5</span> Community - disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-cluster-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.6</span>-community/x86_64 MySQL Cluster <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.6</span> Community   disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-cluster-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.6</span>-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span> MySQL Cluster <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7.6</span> Community - disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-cluster-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span>-community/x86_64 MySQL Cluster <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span> Community   disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-cluster-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span>-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span> MySQL Cluster <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span> Community - disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-connectors-community/x86_64  MySQL Connectors Community    enabled:    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">141</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-connectors-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>  MySQL Connectors Community -  disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-tools-community/x86_64       MySQL Tools Community         enabled:    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">105</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-tools-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>       MySQL Tools Community - Sourc disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-tools-preview/x86_64         MySQL Tools Preview           disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-tools-preview-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>         MySQL Tools Preview - Source  disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql55-community/x86_64           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5.5</span> Community Server    disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql55-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5.5</span> Community Server -  disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql56-community/x86_64           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5.6</span> Community Server    disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql56-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5.6</span> Community Server -  disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql57-community/x86_64           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5.7</span> Community Server    disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql57-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5.7</span> Community Server -  disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql80-community/x86_64           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span> Community Server    enabled:    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">161</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql80-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">source</span>           MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span> Community Server -  disabled<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">编辑/etc/yum.repos.d/mysql-community.repo文件（[mysql80-community]块中enabled设置为1，其实默认就是这样子，不用改，如果要选用5.x版本则需要修改对应的块）：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);word-break:inherit !important;">[mysql80-community]</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);word-break:inherit !important;">name</span>=MySQL <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span> Community Server<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);word-break:inherit !important;">baseurl</span>=http://repo.mysql.com/yum/mysql-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0</span>-community/el/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">7</span>/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(98, 151, 85);word-break:inherit !important;">$basearch</span>/<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);word-break:inherit !important;">enabled</span>=<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);word-break:inherit !important;">gpgcheck</span>=<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(165, 218, 45);word-break:inherit !important;">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">然后安装MySQL服务：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">sudo yum <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">install</span> mysql-community-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">server</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">这个过程比较漫长，因为需要下载和安装5个rpm安装包（或者是所有安装包组合的压缩包mysql-8.0.18-1.el7.x86_64.rpm-bundle.tar）。如果网络比较差，也可以直接从官网手动下载后安装：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [5].webp" type="image/webp" data-filename="640.webp" height="340" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">// 下载下面5个rpm包 common <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">--&gt; libs --&gt; libs-compat --&gt; client --&gt; server</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-community-common<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-community-libs<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-community-libs-compat<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-community-client<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mysql-community-server<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>// 强制安装<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rpm -ivh mysql-community-common-8.0.18-1.el7.x86_64.rpm <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">--force --nodeps</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rpm -ivh mysql-community-libs-8.0.18-1.el7.x86_64.rpm <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">--force --nodeps</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rpm -ivh mysql-community-libs-compat-8.0.18-1.el7.x86_64.rpm <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">--force --nodeps</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rpm -ivh mysql-community-client-8.0.18-1.el7.x86_64.rpm <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">--force --nodeps</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rpm -ivh mysql-community-server-8.0.18-1.el7.x86_64.rpm <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">--force --nodeps</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">安装完毕之后，启动MySQL服务，然后搜索MySQL服务的root账号的临时密码用于首次登陆（mysql -u root -p）：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">// 启动服务，关闭服务就是service mysqld <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">stop</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>service mysqld <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">start</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>// 查看临时密码 cat /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">var</span>/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">log</span>/mysqld.log<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>[root@localhost <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">log</span>]<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># cat /var/log/mysqld.log </span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">2020-03-02</span>T06:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">03</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">53.996423</span>Z <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">0</span> [<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">System</span>] [MY<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-013169</span>] [<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">Server</span>] /usr/sbin/mysqld (mysqld <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0.18</span>) initializing <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">of</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">server</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">in</span> progress <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">as</span> process <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">22780</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">2020-03-02</span>T06:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">03</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">57.321447</span>Z <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5</span> [Note] [MY<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-010454</span>] [<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">Server</span>] A <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">temporary</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">password</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">is</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">generated</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">for</span> root@localhost: &gt;kjYaXENK6li<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">2020-03-02</span>T06:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">04</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">00.123845</span>Z <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">0</span> [<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">System</span>] [MY<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-010116</span>] [<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">Server</span>] /usr/sbin/mysqld (mysqld <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">8.0.18</span>) <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">starting</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">as</span> process <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">22834</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>// 登录临时root用户，使用临时密码<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>[root@localhost <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">log</span>]<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># mysql -u root -p</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">接下来做下面的操作：</p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">修改root用户的密码：<code style="margin:0px;padding:2px 4px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-right:2px;margin-left:2px;font-size:inherit;line-height:inherit;border-radius:4px;color:rgb(233, 105, 0);background:rgb(248, 248, 248);">ALTER USER 'root'@'localhost' IDENTIFIED BY 'QWqw12!@';</code>（注意密码规则必须包含大小写字母、数字和特殊字符）</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">更新root的host，切换数据库use mysql;，指定host为%以便可以让其他服务器远程访问<code style="margin:0px;padding:2px 4px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-right:2px;margin-left:2px;font-size:inherit;line-height:inherit;border-radius:4px;color:rgb(233, 105, 0);background:rgb(248, 248, 248);">UPDATE USER SET HOST = '%' WHERE USER = 'root';</code></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">赋予'root'@'%'用户，所有权限，执行GRANT ALL PRIVILEGES ON <em style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-style:italic;font-size:inherit;color:inherit;line-height:inherit;">.</em> TO 'root'@'%';</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">改变root'@'%用户的密码校验规则以便可以使用Navicat等工具访问：ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'QWqw12!@';</span></p></li></ul><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [6].webp" type="image/webp" data-filename="640.webp" height="439" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">操作完成之后，就可以使用root用户远程访问此虚拟机上的MySQL服务。最后确认是否开启了binlog（注意一点是MySQL8.x默认开启binlog）SHOW VARIABLES LIKE '%bin%';：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [7].webp" type="image/webp" data-filename="640.webp" height="609" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">最后在MySQL的Shell执行下面的命令，新建一个用户名canal密码为QWqw12!@的新用户，赋予REPLICATION SLAVE和 REPLICATION CLIENT权限：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">CREATE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">USER</span> canal <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">IDENTIFIED</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">BY</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'QWqw12!@'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">GRANT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">SELECT</span>, <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">REPLICATION</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">SLAVE</span>, <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">REPLICATION</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">CLIENT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">ON</span> *.* <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">TO</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'canal'</span>@<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'%'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">FLUSH</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">PRIVILEGES</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">ALTER</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">USER</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'canal'</span>@<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'%'</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">IDENTIFIED</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">WITH</span> mysql_native_password <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">BY</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'QWqw12!@'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">切换回去root用户，创建一个数据库test：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">CREATE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">DATABASE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`test`</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">CHARSET</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`utf8mb4`</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">COLLATE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`utf8mb4_unicode_ci`</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><h4 style="font-weight:bold;font-size:1.2em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">安装Zookeeper</span></h4><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">Canal和Kafka集群都依赖于Zookeeper做服务协调，为了方便管理，一般会独立部署Zookeeper服务或者Zookeeper集群。笔者这里选用2020-03-04发布的3.6.0版本：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">midkr /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span>/zk<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/># 创建数据目录<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>midkr /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span>/zk/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>cd /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span>/zk<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>wget http:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">//mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.6.0/apache-zookeeper-3.6.0-bin.tar.gz</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>tar -zxvf apache-zookeeper<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-3.6.0</span>-bin.tar.gz<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>cd apache-zookeeper<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-3.6.0</span>-bin/conf<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>cp zoo_sample.cfg zoo.cfg &amp;&amp; vim zoo.cfg<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">把zoo.cfg文件中的dataDir设置为/data/zk/data，然后启动Zookeeper：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">[root@localhost conf]<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># sh /data/zk/apache-zookeeper-3.6.0-bin/bin/zkServer.sh start</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>/usr/bin/java<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>ZooKeeper JMX enabled <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">by</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">default</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>Using config: <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;color:inherit;line-height:inherit;word-break:inherit !important;">/data/zk/apache-zookeeper-3.6.0-bin/bin/</span>../conf/zoo.cfg<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>Starting zookeeper ... STARTED<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">这里注意一点，要启动此版本的Zookeeper服务必须本地安装好JDK8+，这一点需要自行处理。启动的默认端口是2181，启动成功后的日志如下：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [8].webp" type="image/webp" data-filename="640.webp" height="295" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><h4 style="font-weight:bold;font-size:1.2em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">安装Kafka</span></h4><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">Kafka是一个高性能分布式消息队列中间件，它的部署依赖于Zookeeper。笔者在此选用2.4.0并且Scala版本为2.13的安装包：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">mkdir /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span>/kafka<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>mkdir /<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span>/kafka/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">data</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>wget http:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">//mirrors.tuna.tsinghua.edu.cn/apache/kafka/2.4.0/kafka_2.13-2.4.0.tgz</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>tar -zxvf kafka_2<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">.13-2.4.0</span>.tgz<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">由于解压后/data/kafka/kafka_2.13-2.4.0/config/server.properties配置中对应的zookeeper.connect=localhost:2181已经符合需要，不必修改，需要修改日志文件的目录log.dirs为/data/kafka/data。然后启动Kafka服务：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">sh /data/kafka/kafka_2<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">.13-2.4.0</span>/bin/kafka-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">server</span>-start.sh /data/kafka/kafka_2<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">.13-2.4.0</span>/config/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">server</span>.properties<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [9].webp" type="image/webp" data-filename="640.webp" height="349" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">这样启动一旦退出控制台就会结束Kafka进程，可以添加-daemon参数用于控制Kafka进程后台不挂断运行。</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">sh /data/kafka/kafka_2<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">.13-2.4.0</span>/bin/kafka-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">server</span>-start.sh -daemon /data/kafka/kafka_2<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">.13-2.4.0</span>/config/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">server</span>.properties<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><h4 style="font-weight:bold;font-size:1.2em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">安装和使用Canal</span></h4><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">终于到了主角登场，这里选用Canal的v1.1.4稳定发布版，只需要下载deployer模块：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">mkdir /data/canal<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>cd /data/canal<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># 这里注意一点，Github在国内被墙，下载速度极慢，可以先用其他下载工具下载完再上传到服务器中</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>wget <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">https:</span>/<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;color:inherit;line-height:inherit;word-break:inherit !important;">/github.com/alibaba/canal/releases/download/canal</span>-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1.1</span>.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">4</span>/canal.deployer-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1.1</span>.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">4</span>.tar.gz<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>tar -zxvf canal.deployer-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1.1</span>.<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">4</span>.tar.gz<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">解压后的目录如下：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">- bin   <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 运维脚本</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>- conf  <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 配置文件</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>  canal_local.properties  <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># canal本地配置，一般不需要动</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>  canal.properties        <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># canal服务配置</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>  logback.xml             <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># logback日志配置</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>  metrics                 <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 度量统计配置</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>  spring                  <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># spring-实例配置，主要和binlog位置计算、一些策略配置相关，可以在canal.properties选用其中的任意一个配置文件</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>  example                 <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 实例配置文件夹，一般认为单个数据库对应一个独立的实例配置文件夹</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>    instance.properties   <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 实例配置，一般指单个数据库的配置</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>- <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">lib</span>   <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 服务依赖包</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>- logs  <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(91, 218, 237);word-break:inherit !important;"># 日志文件输出目录</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">在开发和测试环境建议把logback.xml的日志级别修改为DEBUG方便定位问题。这里需要关注canal.properties和instance.properties两个配置文件。canal.properties文件中，需要修改：</p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">去掉canal.instance.parser.parallelThreadSize = 16这个配置项的注释，也就是启用此配置项，和实例解析器的线程数相关，不配置会表现为阻塞或者不进行解析。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.serverMode配置项指定为kafka，可选值有tcp、kafka和rocketmq（master分支或者最新的的v1.1.5-alpha-1版本，可以选用rabbitmq），默认是kafka。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.mq.servers配置需要指定为Kafka服务或者集群Broker的地址，这里配置为127.0.0.1:9092。</span></p></li></ul><blockquote style="margin:1em 0px;padding:15px 15px 15px 1rem;max-width:100%;box-sizing:border-box;overflow-wrap:normal;padding-left:10px;border-left:3px solid rgb(219, 219, 219);color:rgb(129, 145, 152);font-size:0.9em;padding-top:4px;border-left-width:6px;border-left-color:rgb(220, 230, 240);line-height:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;background:rgb(242, 247, 251);overflow:auto;word-break:normal;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;">canal.mq.servers在不同的canal.serverMode有不同的意义。<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>kafka模式下，指Kafka服务或者集群Broker的地址，也就是bootstrap.servers<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rocketmq模式下，指NameServer列表<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>rabbitmq模式下，指RabbitMQ服务的Host和Port</p></blockquote><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">其他配置项可以参考下面两个官方Wiki的链接：</p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">Canal-Kafka-RocketMQ-QuickStart</p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">AdminGuide</p></li></ul><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">instance.properties一般指一个数据库实例的配置，Canal架构支持一个Canal服务实例，处理多个数据库实例的binlog异步解析。instance.properties需要修改的配置项主要包括：</p><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:577.422px;color:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.instance.mysql.slaveId需要配置一个和Master节点的服务ID完全不同的值，这里笔者配置为654321。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">配置数据源实例，包括地址、用户、密码和目标数据库：</p></li><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:544.875px;font-size:inherit;color:inherit;line-height:inherit;list-style-type:square;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.instance.master.address，这里指定为127.0.0.1:3306。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.instance.dbUsername，这里指定为canal。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.instance.dbPassword，这里指定为QWqw12!@。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">新增canal.instance.defaultDatabaseName，这里指定为test（需要在MySQL中建立一个test数据库，见前面的流程）。</span></p></li></ul><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">Kafka相关配置，这里暂时使用静态topic和单个partition：</p></li><ul style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;padding-left:32px;width:544.875px;font-size:inherit;color:inherit;line-height:inherit;list-style-type:square;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.mq.topic，这里指定为test，也就是解析完的binlog结构化数据会发送到Kafka的命名为test的topic中。</span></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-bottom:0.5em;font-size:inherit;color:inherit;line-height:inherit;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;color:inherit;line-height:inherit;">canal.mq.partition，这里指定为0。</span></p></li></ul></ul><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">配置工作做好之后，可以启动Canal服务：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">sh</span> /data/canal/bin/startup.sh <br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># 查看服务日志</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>tail -100f /data/canal/logs/canal/canal<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;"># 查看实例日志  -- 一般情况下，关注实例日志即可</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>tail -100f /data/canal/logs/example/example.log<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">启动正常后，见实例日志如下：</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [10].webp" type="image/webp" data-filename="640.webp" height="92" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">在test数据库创建一个订单表，并且执行几个简单的DML：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">use</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`test`</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">CREATE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">TABLE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`order`</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>(<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">id</span>          <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">BIGINT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">UNIQUE</span> PRIMARY <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">KEY</span> AUTO_INCREMENT <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">COMMENT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'主键'</span>,<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>    order_id    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">VARCHAR</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">64</span>)    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">NOT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">NULL</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">COMMENT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'订单ID'</span>,<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>    amount      <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">DECIMAL</span>(<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">10</span>, <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">2</span>) <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">NOT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">NULL</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">DEFAULT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">0</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">COMMENT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'订单金额'</span>,<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>    create_time DATETIME       <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">NOT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">NULL</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">DEFAULT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">CURRENT_TIMESTAMP</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">COMMENT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'创建时间'</span>,<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>    <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">UNIQUE</span> uniq_order_id (<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`order_id`</span>)<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>) <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">COMMENT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'订单表'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">INSERT</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">INTO</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`order`</span>(order_id, amount) <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">VALUES</span> (<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'10086'</span>, <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">999</span>);<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">UPDATE</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`order`</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">SET</span> amount = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">10087</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">WHERE</span> order_id = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'10086'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">DELETE</span>  <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">FROM</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">`order`</span> <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">WHERE</span> order_id = <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">'10086'</span>;<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">这个时候，可以利用Kafka的kafka-console-consumer或者Kafka Tools查看test这个topic的数据：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;">sh /data/kafka/kafka_2<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">.13-2.4.0</span>/bin/kafka-<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">console</span>-consumer.sh --bootstrap-server <span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">127.0.0.1</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">9092</span> --<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(248, 35, 117);word-break:inherit !important;">from</span>-beginning --topic test<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [11].webp" type="image/webp" data-filename="640.webp" height="136" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;margin-right:auto;margin-left:auto;font-size:inherit;color:inherit;line-height:inherit;display:block;width:677px !important;visibility:visible !important;" title="" width="677"/></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;">具体的数据如下：</p><pre style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:inherit;font-size:inherit;line-height:inherit;"><code style="margin:0px;padding:0.5em;max-width:100%;box-sizing:border-box;overflow-wrap:normal !important;margin-right:2px;margin-left:2px;line-height:18px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;border-radius:0px;color:rgb(169, 183, 198);background:rgb(40, 43, 46);word-break:normal !important;overflow:auto !important;display:-webkit-box !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">// test数据库建库脚本</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;data&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;database&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;`test`&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;es&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143732000</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;isDdl&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">false</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;mysqlType&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;old&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;pkNames&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sql&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;CREATE DATABASE `test` CHARSET `utf8mb4` COLLATE `utf8mb4_unicode_ci`&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sqlType&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;table&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;ts&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143930177</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;type&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;QUERY&quot;</span>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">// order表建表DDL</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;data&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;database&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;test&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;es&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143957000</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">2</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;isDdl&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">true</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;mysqlType&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;old&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;pkNames&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sql&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;CREATE TABLE `order`\n(\n    id          BIGINT UNIQUE PRIMARY KEY AUTO_INCREMENT COMMENT '主键',\n    order_id    VARCHAR(64)    NOT NULL COMMENT '订单ID',\n    amount      DECIMAL(10, 2) NOT NULL DEFAULT 0 COMMENT '订单金额',\n    create_time DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    UNIQUE uniq_order_id (`order_id`)\n) COMMENT '订单表'&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sqlType&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;table&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;ts&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143958045</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;type&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;CREATE&quot;</span>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">// INSERT</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;data&quot;</span>:[{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;1&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;10086&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;999.0&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;2020-03-02 05:12:49&quot;</span>}],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;database&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;test&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;es&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143969000</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">3</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;isDdl&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">false</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;mysqlType&quot;</span>:{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;BIGINT&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;VARCHAR(64)&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DECIMAL(10,2)&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DATETIME&quot;</span>},<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;old&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;pkNames&quot;</span>:[<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sql&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sqlType&quot;</span>:{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-5</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">12</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">3</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">93</span>},<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;table&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;ts&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143969460</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;type&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;INSERT&quot;</span>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">// UPDATE</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;data&quot;</span>:[{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;1&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;10086&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;10087.0&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;2020-03-02 05:12:49&quot;</span>}],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;database&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;test&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;es&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143974000</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">4</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;isDdl&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">false</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;mysqlType&quot;</span>:{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;BIGINT&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;VARCHAR(64)&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DECIMAL(10,2)&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DATETIME&quot;</span>},<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;old&quot;</span>:[{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;999.0&quot;</span>}],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;pkNames&quot;</span>:[<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sql&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sqlType&quot;</span>:{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-5</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">12</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">3</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">93</span>},<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;table&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;ts&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143974870</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;type&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;UPDATE&quot;</span>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(128, 128, 128);word-break:inherit !important;">// DELETE</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/>{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;data&quot;</span>:[{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;1&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;10086&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;10087.0&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;2020-03-02 05:12:49&quot;</span>}],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;database&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;test&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;es&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143980000</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">5</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;isDdl&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">false</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;mysqlType&quot;</span>:{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;BIGINT&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;VARCHAR(64)&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DECIMAL(10,2)&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DATETIME&quot;</span>},<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;old&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">null</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;pkNames&quot;</span>:[<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>],<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sql&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;sqlType&quot;</span>:{<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">-5</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order_id&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">12</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;amount&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">3</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;create_time&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">93</span>},<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;table&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;order&quot;</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;ts&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(174, 135, 250);word-break:inherit !important;">1583143981091</span>,<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;type&quot;</span>:<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:inherit !important;font-size:inherit;line-height:inherit;color:rgb(238, 220, 112);word-break:inherit !important;">&quot;DELETE&quot;</span>}<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></code></pre><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;margin-top:1.5em;margin-bottom:1.5em;color:inherit;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:inherit;white-space:normal;line-height:inherit;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-family:-apple-system-font, system-ui, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;letter-spacing:0.544px;">可见Kafka的名为test的topic已经写入了对应的结构化binlog事件数据，可以编写消费者监听Kafka对应的topic然后对获取到的数据进行后续处理。</span><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></p><h3 style="font-weight:bold;font-size:1.3em;margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;margin-top:1.5em;margin-bottom:1.5em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space:normal;line-height:inherit;color:rgb(0, 172, 193);"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:inherit;line-height:inherit;color:rgb(0, 0, 0);">小结</span></h3><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;clear:both;min-height:1em;">这篇文章大部分篇幅用于介绍其他中间件是怎么部署的，这个问题侧面说明了Canal本身部署并不复杂，它的配置文件属性项比较多，但是实际上需要自定义和改动的配置项是比较少的，也就是说明了它的运维成本和学习成本并不高。后面会分析基于结构化binlog事件做ELT和持久化相关工作以及Canal的生产环境可用级别HA集群的搭建。</p><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;white-space:normal;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:16px;border-width:0px;border-style:none;border-color:initial;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;background-color:rgb(255, 255, 255);color:rgb(62, 62, 62);font-size:14px;letter-spacing:0.5px;word-spacing:2px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-size:16px;line-height:1.6;letter-spacing:0px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(51, 51, 51);font-size:17px;letter-spacing:0.544px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;font-size:14px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;text-align:center;height:50px;"><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;margin-right:auto;margin-left:auto;width:48px;height:48px;color:rgb(255, 255, 255);line-height:48px;display:inline-block;background-image:url('https://mp.weixin.qq.com/s/YTl48aWwwg5-TVF-wYh38A&quot;https://mmbiz.qpic.cn/mmbiz_gif/ncqN8l14plZccK32d6rFjnDsvVhac0rplCGjfGcvjbPic2g9ibvXJrR5iaibPcxeatKCO3fFy17Rq709VnAGqQ1daw/640?wx_fmt=gif&quot;');background-size:100%;background-position:0px center;background-repeat:no-repeat;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;clear:both;min-height:1em;font-weight:bold;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(136, 136, 136);">END</span></p></div><div style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;margin-top:-26px;height:2px;background-color:rgb(34, 33, 33);"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div></div></div></div></div></div></div><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;clear:both;min-height:1em;margin-top:15px;margin-bottom:15px;letter-spacing:0.544px;font-size:16px;white-space:pre-line;line-height:30px;color:rgb(74, 74, 74);text-align:left;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;color:rgb(0, 0, 0);">如果读完觉得有收获的话，欢迎点【好看】，关注【匠心零度】，查阅更多精彩历史！！！</strong></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51, 51, 51);font-size:17px;letter-spacing:0.544px;text-align:center;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640.gif" type="image/gif" data-filename="640.gif" height="328" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;height:auto !important;background-color:rgb(238, 237, 235);border-width:1px;border-style:solid;border-color:rgb(238, 237, 235);background-size:22px;background-position:center center;background-repeat:no-repeat;visibility:visible !important;width:500px !important;" width="498"/></p><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51, 51, 51);font-size:17px;letter-spacing:0.544px;text-align:right;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;letter-spacing:0.544px;word-spacing:0px;text-decoration:underline;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">让我“</span></strong><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;color:rgb(2, 30, 170);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">好看</span></strong></span><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:14px;">” </span></strong></span><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;letter-spacing:0.544px;word-spacing:0px;"><img src="基于Canal 和 Kafka，实现 MySQL 的 Binlog 近实时同步_files/640 [1].gif" type="image/gif" data-filename="640.gif" height="34" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;vertical-align:middle;visibility:visible !important;width:33.8438px !important;" width="34"/></strong></p></div></div></div></div></div></div>
				</div>

                

                



                
                

                 
                                                    
                				
            </div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 