<html>
<head>
  <title>MySQL中文全文检索 - 爱开卷360 - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5483"/>
<h1>MySQL中文全文检索 - 爱开卷360 - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/5/23 15:19</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.cnblogs.com/ibook360/p/5073313.html"><i>http://www.cnblogs.com/ibook360/p/5073313.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color:rgb(0, 0, 0);background:url(&quot;/Skins/coffee/images/bg_body.gif&quot;) left top;line-height:1.5;font-size:14px;"><div style="min-width:auto;"><div style="min-width:auto;text-align:left;"><div style="background:transparent;text-align:left;overflow-x:hidden;"><div style="background:url(&quot;/Skins/coffee/images/bg_left.gif&quot;) left top repeat-x rgb(254, 254, 242);"><div><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div>
		<h1 style="margin:0px;padding:0px;width:100%;clear:both;font-weight:bold;float:left;line-height:1.5;font-size:14px;padding-left:5px;">
			<a href="http://www.cnblogs.com/ibook360/p/5073313.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">MySQL中文全文检索</a>
		</h1>
		<div style="margin:0px;padding:0px;clear:both;"></div>
		<div style="margin:0px;padding:5px 2px 5px 5px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin-top:5px;">
			<div style="margin:0px;padding:0px;margin-bottom:20px;word-break:break-word;"><p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">一、概述<br style="margin:0px;padding:0px;"/>      MySQL全文检索是利用查询关键字和查询列内容之间的相关度进行检索，可以利用全文索引来提高匹配的速度。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">二、语法<br style="margin:0px;padding:0px;"/>      MATCH (col1,col2,...) AGAINST (expr [search_modifier])<br style="margin:0px;padding:0px;"/>      search_modifier: { IN BOOLEAN MODE | WITH QUERY EXPANSION }<br style="margin:0px;padding:0px;"/>      <br style="margin:0px;padding:0px;"/>      例如：SELECT * FROM tab_name WHERE MATCH ('列名1,列名2...列名n') AGAINST('词1 词2 词3 ... 词m');<br style="margin:0px;padding:0px;"/>    <br style="margin:0px;padding:0px;"/>      即：MATCH 相当于要匹配的列，而 AGAINST 就是要找的内容。  <br style="margin:0px;padding:0px;"/>      这里的table需要是MyISAM类型的表，col1、col2 必须是char、varchar或text类型，在查询之前需要在 col1 和 col2 上分别建立全文索引(FULLTEXT索引)。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">三、检索方式<br style="margin:0px;padding:0px;"/>     1、自然语言检索： IN NATURAL LANGUAGE MODE</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     2、布尔检索： IN BOOLEAN MODE<br style="margin:0px;padding:0px;"/>          剔除一半匹配行以上都有的词，譬如说，每个行都有this这个字的话，那用this去查时，会找不到任何结果，这在记录条数特别多时很有用，<br style="margin:0px;padding:0px;"/>          原因是数据库认为把所有行都找出来是没有意义的，这时，this几乎被当作是stopword(中断词)；但是若只有两行记录时，是啥鬼也查不出来的，<br style="margin:0px;padding:0px;"/>          因为每个字都出现50%（或以上），要避免这种状况，请用IN BOOLEAN MODE。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       ● IN BOOLEAN MODE的特色： <br style="margin:0px;padding:0px;"/>          ·不剔除50%以上符合的row。 <br style="margin:0px;padding:0px;"/>          ·不自动以相关性反向排序。 <br style="margin:0px;padding:0px;"/>          ·可以对没有FULLTEXT index的字段进行搜寻，但会非常慢。 <br style="margin:0px;padding:0px;"/>          ·限制最长与最短的字符串。 <br style="margin:0px;padding:0px;"/>          ·套用Stopwords。<br style="margin:0px;padding:0px;"/> <br style="margin:0px;padding:0px;"/>       ● 搜索语法规则：<br style="margin:0px;padding:0px;"/>         +   一定要有(不含有该关键词的数据条均被忽略)。 <br style="margin:0px;padding:0px;"/>         -   不可以有(排除指定关键词，含有该关键词的均被忽略)。 <br style="margin:0px;padding:0px;"/>         &gt;   提高该条匹配数据的权重值。 <br style="margin:0px;padding:0px;"/>         &lt;   降低该条匹配数据的权重值。<br style="margin:0px;padding:0px;"/>         ~   将其相关性由正转负，表示拥有该字会降低相关性(但不像 - 将之排除)，只是排在较后面权重值降低。 <br style="margin:0px;padding:0px;"/>         *   万用字，不像其他语法放在前面，这个要接在字符串后面。 <br style="margin:0px;padding:0px;"/>         &quot; &quot; 用双引号将一段句子包起来表示要完全相符，不可拆字。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SELECT * FROM articles WHERE MATCH (title,content) AGAINST ('+apple -banana' IN BOOLEAN MODE);<br style="margin:0px;padding:0px;"/>         + 表示AND，即必须包含。- 表示NOT，即必须不包含。即：返回记录必需包含 apple，且不能包含 banner。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SELECT * FROM articles WHERE MATCH (title,content) AGAINST ('apple banana' IN BOOLEAN MODE);<br style="margin:0px;padding:0px;"/>         apple和banana之间是空格，空格表示OR。即：返回记录至少包含apple、banana中的一个。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SELECT * FROM articles WHERE MATCH (title,content) AGAINST ('+apple banana' IN BOOLEAN MODE);<br style="margin:0px;padding:0px;"/>         返回记录必须包含apple，同时banana可包含也可不包含，若包含的话会获得更高的权重。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SELECT * FROM articles WHERE MATCH (title,content) AGAINST ('+apple ~banana' IN BOOLEAN MODE);<br style="margin:0px;padding:0px;"/>         ~ 是我们熟悉的异或运算符。返回记录必须包含apple，若也包含了banana会降低权重。<br style="margin:0px;padding:0px;"/>         但是它没有 +apple -banana 严格，因为后者如果包含banana压根就不返回。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         SELECT * FROM articles WHERE MATCH (title,content) AGAINST ('+apple +(&gt;banana &lt;orange)' IN BOOLEAN MODE);<br style="margin:0px;padding:0px;"/>         返回必须同时包含“apple banana”或者必须同时包含“apple orange”的记录。<br style="margin:0px;padding:0px;"/>         若同时包含“apple banana”和“apple orange”的记录，则“apple banana”的权重高于“apple orange”的权重。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>    3、查询扩展检索： WITH QUERY EXPANSION</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>四、MySQL全文检索的条件限制<br style="margin:0px;padding:0px;"/>     1、在MySQL5.6以下，只有MyISAM表支持全文检索。在MySQL5.6以上Innodb引擎表也提供支持全文检索。<br style="margin:0px;padding:0px;"/>     2、相应字段建立FULLTEXT索引</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>五、与全文检索相关的系统变量：<br style="margin:0px;padding:0px;"/>     ft_min_word_len = 全文检索的最小许可字符(默认4，通过 SHOW VARIABLES LIKE 'ft_min_word_len' 可查看)，<br style="margin:0px;padding:0px;"/>     中文通常是两个字就是一个词，所以做中文的话需要修改这个值为2最好。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>六、总结事项<br style="margin:0px;padding:0px;"/>     1、预设搜寻是不分大小写，若要分大小写，columne 的 character set要从utf8改成utf8_bin。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     2、预设 MATCH...AGAINST 是以相关性排序，由高到低。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     3、MATCH(title, content)里的字段必须和FULLTEXT(title, content)里的字段一模一样。<br style="margin:0px;padding:0px;"/>          如果只要单查title或content一个字段，那得另外再建一个 FULLTEXT(title) 或 FULLTEXT(content)，也因为如此，MATCH()的字段一定不能跨table，但是另外两种搜寻方式好像可以。<br style="margin:0px;padding:0px;"/>    <br style="margin:0px;padding:0px;"/>     4、MySQL不支持中文全文索引，原因很简单：与英文不同，中文的文字是连着一起写的，中间没有MySQL能找到分词的地方，截至目前MySQL5.6版本是如此，但是有变通的办法，就是将整句的中文分词，并按urlencode、区位码、base64、拼音等进行编码使之以“字母+数字”的方式存储于数据库中。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>七、实验部分</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">◆ 步骤1 配置my.ini，在my.ini末尾添加如下：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"># 修改全文检索的最小许可字符为2个字符或汉字<br style="margin:0px;padding:0px;"/>ft_min_word_len = 2</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">完成后“重启 MySQL 服务”，并用 SHOW VARIABLES LIKE 'ft_min_word_len' 查询下是否得到了正确的结果值为2，如下图：<br style="margin:0px;padding:0px;"/><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27211742-0b808041ef3f4e86b16eddc0d1592720.x-png.png" type="image/png" data-filename="27211742-0b808041ef3f4e86b16eddc0d1592720.x-png.png" alt="" height="97" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="385"/><br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>◆ 步骤2 创建数据库（视情况可跳过此步）<br style="margin:0px;padding:0px;"/>CREATE DATABASE search DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>◆ 步骤3 创建数据表<br style="margin:0px;padding:0px;"/>CREATE TABLE `zzx_articles` (<br style="margin:0px;padding:0px;"/>`id` int(10) unsigned NOT NULL auto_increment, <br style="margin:0px;padding:0px;"/>`title` char(254) default NULL COMMENT '标题',<br style="margin:0px;padding:0px;"/>`content` text COMMENT '内容',<br style="margin:0px;padding:0px;"/>`author` char(60) default NULL COMMENT '作者',<br style="margin:0px;padding:0px;"/>`title_fc` char(254) default NULL COMMENT '标题的分词',<br style="margin:0px;padding:0px;"/>`content_fc` text COMMENT '内容的分词',<br style="margin:0px;padding:0px;"/>PRIMARY KEY  (`id`),<br style="margin:0px;padding:0px;"/>FULLTEXT KEY `zzx_title_fc` (`title_fc`),<br style="margin:0px;padding:0px;"/>FULLTEXT KEY `zzx_content_fc` (`content_fc`),<br style="margin:0px;padding:0px;"/>FULLTEXT KEY `zzx_title_con_fc` (`title_fc`,`content_fc`)<br style="margin:0px;padding:0px;"/>) ENGINE=MyISAM DEFAULT CHARSET=utf8</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"># 如果后期需要添全文加索引可以用如下语句：<br style="margin:0px;padding:0px;"/>alter table `zzx_articles` add fulltext zzx_title_fc(`title_fc`); <br style="margin:0px;padding:0px;"/>alter table `zzx_articles` add fulltext zzx_con_fc(`content_fc`); <br style="margin:0px;padding:0px;"/>alter table `zzx_articles` add fulltext zzx_title_con_fc(`title_fc`,`content_fc`);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><br style="margin:0px;padding:0px;"/>◆ 步骤4 插入测试数据<br style="margin:0px;padding:0px;"/>INSERT INTO `zzx_articles` (title_fc,content_fc) VALUES<br style="margin:0px;padding:0px;"/>('MySQL Tutorial Linux red','DBMS stands for DataBase ok'),<br style="margin:0px;padding:0px;"/>('How To Use MySQL Well','After you went through blue'),<br style="margin:0px;padding:0px;"/>('Optimizing MySQL ok','In this tutorial we will optimizing'),<br style="margin:0px;padding:0px;"/>('MySQL vs this YourSQL blue red','1. Never run mysqld as root red'),<br style="margin:0px;padding:0px;"/>('MySQL Tricks blue','In the following database'),<br style="margin:0px;padding:0px;"/>('MySQL Security','When configured properly, MySQL'),<br style="margin:0px;padding:0px;"/>('中华','中华人民共和国 '),<br style="margin:0px;padding:0px;"/>('中华情 和谐','上海 和谐'),<br style="margin:0px;padding:0px;"/>('污染之都','你好 我是 北京 人'),<br style="margin:0px;padding:0px;"/>('北京精神','创新 爱国 包容 厚颜')</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">插入结果如下图：<br style="margin:0px;padding:0px;"/><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27212544-9ea160b4f4994ee9815e0005bf079e35.x-png.png" type="image/png" data-filename="27212544-9ea160b4f4994ee9815e0005bf079e35.x-png.png" alt="" height="274" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="756"/><br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>◆ 步骤5 搜索语法规则、排序 实验<br style="margin:0px;padding:0px;"/>   说明：匹配语句 MATCH (col1,col2,...) AGAINST (expr [search_modifier]) 匹配完成后，会返回此条数据的权重值(权重值1 ≈ 各个词的匹配结果权重值之和)，我们利用此权重值“由高到低”排序可优化查询结果。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验1：只对 title_fc 索引字段做全文检索，并显示每条数据的权重值</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213026-1785f5679f4c4303885eaf1b63afa1c7.x-png.png" type="image/png" data-filename="27213026-1785f5679f4c4303885eaf1b63afa1c7.x-png.png" alt="" height="151" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="727"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：1.当没有加 + - 这样的过滤符号时，这些关键词是“或(or)”的关系，即：要么匹配optimizing，要么匹配ok，要么匹配red，要么匹配blue。<br style="margin:0px;padding:0px;"/>           2.通过上面实验，发现当某条数据有多个关键词匹配时(如：red blue)，此条数据的权重值会略高：<br style="margin:0px;padding:0px;"/>              此条数据权重值 ≈ optimizing权重值 + ok权重值 + red权重值 + blue权重值<br style="margin:0px;padding:0px;"/>              理论上来说，当一条数据能匹配上的关键词越多，则此条数据的权重值越高，排名越靠前。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验2：过滤条件：必须包含&quot;red&quot;关键词</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok +red' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213137-2d365e442c244995815159ad08baddc6.x-png.png" type="image/png" data-filename="27213137-2d365e442c244995815159ad08baddc6.x-png.png" alt="" height="113" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="746"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：使用了过滤符号 + ，表示查询结果中，任一条数据都必须包含&quot;red&quot;这个词，不包含&quot;red&quot;这个词的行均被忽略。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>   ▶ 实验3：过滤条件：必须包含&quot;red&quot;关键词，如果匹配到的行中还含有&quot;blue&quot;关键词，则会对此条数据增加权重：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok +red blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   或下面写法：<br style="margin:0px;padding:0px;"/>   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red &gt;blue') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok +red &gt;blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213219-e4272f68dd3a47d09079e40af3dc90b1.x-png.png" type="image/png" data-filename="27213219-e4272f68dd3a47d09079e40af3dc90b1.x-png.png" alt="" height="114" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="715"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：与实验2比较，当包含了red的行中，若也包含blue关键词，权重确实增加了(如：id=4这条)。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>   ▶ 实验4：过滤条件：必须包含&quot;red&quot;关键词，并且不能包含&quot;blue&quot;关键词</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok +red -blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213334-0acc1f551d5c4e14aafe0379c490366d.x-png.png" type="image/png" data-filename="27213334-0acc1f551d5c4e14aafe0379c490366d.x-png.png" alt="" height="96" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="686"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：可见 + - 这两个符号是表示“并且(and)”的意思，即：必须包含red关键词 and 不能包含blue关键词。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------<br style="margin:0px;padding:0px;"/>   <br style="margin:0px;padding:0px;"/>   ▶ 实验5：过滤条件：必须包含&quot;red&quot;关键词，如果匹配到的行中还包含&quot;blue&quot;关键词则降低此条数据权重</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok +red ~blue') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok +red ~blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213402-646afaf4d7e041f3a93f73f73382cb57.x-png.png" type="image/png" data-filename="27213402-646afaf4d7e041f3a93f73f73382cb57.x-png.png" alt="" height="112" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="708"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：这个实验没有看到明显效果，但 ~ 过滤符确实是降低此权重符</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验6：过滤条件：匹配包含单词“red”和“Linux” 的行，或包含“red” 和“blue”的行(无先后顺序)<br style="margin:0px;padding:0px;"/>                然而包含 “apple Linux”的行较包含“apple blue”的行有更高的权重值。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('+red  +(&gt;Linux &lt;blue)') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('+red  +(&gt;Linux &lt;blue)' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213444-36ecdba62c4c4458a2ebb58e8c5c19a0.x-png.png" type="image/png" data-filename="27213444-36ecdba62c4c4458a2ebb58e8c5c19a0.x-png.png" alt="" height="113" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="718"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------ </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验7：过滤条件：匹配关键词以 re 开头，或以 bl 开头的数据行</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('re* bl*') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('re* bl*' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213516-c55dffe92e20474d8d8623170c94593b.x-png.png" type="image/png" data-filename="27213516-c55dffe92e20474d8d8623170c94593b.x-png.png" alt="" height="132" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="763"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：注意 * 是写在后面哦，此时相当于 like 模糊匹配，没有权重值了</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------ </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验8：过滤条件：匹配查找字符串“To Use MySQL”关键词</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('&quot;To Use MySQL&quot;') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('&quot;To Use MySQL&quot;' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213543-569458401b104c7f85ea838c056a64f2.x-png.png" type="image/png" data-filename="27213543-569458401b104c7f85ea838c056a64f2.x-png.png" alt="" height="94" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="687"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：此时是把双引号内的的字符串看成一个关键词，若不用双引号则是将 To Use MySQL 三个关键词去分别匹配，两者有区别；</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验9：在实验1基础上，将blue的权重值忽视不要(注意与实验1比较)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213654-d3a2016014ce43d18a88f34598bec4d6.x-png.png" type="image/png" data-filename="27213654-d3a2016014ce43d18a88f34598bec4d6.x-png.png" alt="" height="147" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="808"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：在实验1的基础上，此时去除select字段条件里的blue关键词，但在where里去仍保留blue关键词。<br style="margin:0px;padding:0px;"/>            我的本意是想正常匹配“optimizing ok red blue”这几个关键词，但不想得到blue的权重值(忽视blue的权重值)。<br style="margin:0px;padding:0px;"/>            查询的结果是含有blue关键词的数据的权重值会略降低了。<br style="margin:0px;padding:0px;"/>            通过“降重”——忽略某些关键词权重值的方式可使部分数据权重值减小，进而影响排序。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验10：在实验9的基础上，在select字段条件里增加几个red关键词，where里的关键词保持不变(注意与实验1 实验9比较)。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red red red') as title_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by title_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213823-7ddcb4babe814c23bce01a7f9601d17e.x-png.png" type="image/png" data-filename="27213823-7ddcb4babe814c23bce01a7f9601d17e.x-png.png" alt="" height="148" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="832"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：发现只要含有 red 关键词的数据的权重值都增加了，排序也发生了变化。<br style="margin:0px;padding:0px;"/>           说明通过“提重”——重复多次某些关键词权重值的方式可使部分数据权重值增加，进而影响排序。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验11：同时对 title_fc 和 content_fc 两字段做全文检索</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score,MATCH (content_fc) AGAINST ('optimizing ok red blue') as content_score<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc,content_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by title_score DESC,content_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   <img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213853-9db8e5dc2dc44a3da6b85bb7a99dcbe3.x-png.png" type="image/png" data-filename="27213853-9db8e5dc2dc44a3da6b85bb7a99dcbe3.x-png.png" alt="" height="154" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="900"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：通过实验发现，又成功的取到了 content_fc 字段匹配的权重值，排序方式是首要按title字段权重降序排序，次要按 content_fc 权重降序排序。<br style="margin:0px;padding:0px;"/>           另外我发现 ok 这个关键词在对“title_fc char(254)”字段匹配时得到匹配值为2.1xxxxxxx，但对“content_fc text”字段匹配时权重值去为0，<br style="margin:0px;padding:0px;"/>           这是MySQL对各英文单词权重值的给予有自己的算法，我们无权干涉。所以当我们发现有些单词的权重值为零甚至为负时，不用过于纠结，<br style="margin:0px;padding:0px;"/>           因为MySQL有自己的算法。<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>           关于排序，首要按 title_score 字段权重降序排序，次要按 content_score 权重降序排序，这样的排序规则看起来更科学了，但我想优秀的搜索引擎绝不至于简单如此吧，继续下面的实验：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验12：进一步优化 排序规则</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       看一个SQL语句原型，查询“字段1,字段2”两字段，同时将每条数据的“字段1”与“字段2”的求和作为“字段3”字段：<br style="margin:0px;padding:0px;"/>       select 字段1,字段2,字段1 + 字段2 as 字段3<br style="margin:0px;padding:0px;"/>       from 表名<br style="margin:0px;padding:0px;"/>       where .....</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   下面将 title_fc 和 content_fc 两权重值求和，放入新字段 score1 中，并按 score1 首要排序，title_score 次之，content_score再次之：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score,MATCH (content_fc) AGAINST ('optimizing ok red blue') as content_score,MATCH (title_fc) AGAINST ('optimizing ok red blue') + MATCH (content_fc) AGAINST ('optimizing ok red blue') as score1<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc,content_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by score1 DESC,title_score DESC,content_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27213955-7a93e11738c84d11a9b5abbab5b9b9a3.x-png.png" type="image/png" data-filename="27213955-7a93e11738c84d11a9b5abbab5b9b9a3.x-png.png" alt="" height="144" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="900"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：相对而言，如果 title_fc 和 content_fc 都匹配上了，应给予靠前的排名吧。所以首要按其 title_fc 和 content_fc 两权重值之和排名，<br style="margin:0px;padding:0px;"/>            次要再考虑 title_fc、content_fc 排序。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ▶ 实验13：另一个角度看排序<br style="margin:0px;padding:0px;"/>     看一个SQL语句原型，如果性别字段值为“1”显示“男”否则显示“女”<br style="margin:0px;padding:0px;"/>     select *,IF(sex=1,&quot;男&quot;,&quot;女&quot;) as ssva from 表名 where id = 1</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     我的新排序思路：如果 title_fc 和 content_fc 同时匹配上的行做首要排序，然后对只匹配上 title_fc 的做次要排序，只匹配上 content_fc 的再次要排序。 (对于实验5的排序不科学之处在于：如果有一个对content_fc关键词的匹配权重很高，导致了求和后 score1 的值也高，但对title_fc的匹配权重去为0，由于score1值高却排到了前面这不一定科学吧？)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score,MATCH (content_fc) AGAINST ('optimizing ok red blue') as content_score,IF(MATCH (title_fc) AGAINST ('optimizing ok red blue') &gt; 0 AND MATCH (content_fc) AGAINST ('optimizing ok red blue') &gt; 0,1,0) as score1<br style="margin:0px;padding:0px;"/>   FROM zzx_articles <br style="margin:0px;padding:0px;"/>   WHERE MATCH (title_fc,content_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by score1 DESC,title_score DESC,content_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27214226-581a6d7413574ce1bcaa6807e7bb23bb.x-png.png" type="image/png" data-filename="27214226-581a6d7413574ce1bcaa6807e7bb23bb.x-png.png" alt="" height="151" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="900"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   总结：如果 title_fc 和 content_fc 都匹配上了，做为优先排序理所当然，但也应考虑局部权重值过高的问题哦。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    ▶ 实验14：优化实验13，可支持更复杂的条件排序<br style="margin:0px;padding:0px;"/>       看一个SQL语句原型，CASE WHEN THEN END 结构：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">          CASE &lt;单值表达式&gt;<br style="margin:0px;padding:0px;"/>              WHEN &lt;表达式值&gt; THEN &lt;SQL语句或者返回值&gt;<br style="margin:0px;padding:0px;"/>              WHEN &lt;表达式值&gt; THEN &lt;SQL语句或者返回值&gt;<br style="margin:0px;padding:0px;"/>               ...<br style="margin:0px;padding:0px;"/>              WHEN &lt;表达式值&gt; THEN &lt;SQL语句或者返回值&gt;<br style="margin:0px;padding:0px;"/>              ELSE &lt;SQL语句或者返回值&gt;<br style="margin:0px;padding:0px;"/>          END</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       有一表查询：大于或等于80表示显示为“优秀”，大于或等于60显示为“及格”，小于60分显示为“不及格”。<br style="margin:0px;padding:0px;"/>       select (CASE WHEN 语文&gt;=80 THEN '优秀' WHEN 语文&gt;=60 THEN '及格' ELSE '不及格' END) as 语文,<br style="margin:0px;padding:0px;"/>              (CASE WHEN 数学&gt;=80 THEN '优秀' WHEN 数学&gt;=60 THEN '及格' ELSE '不及格' END) as 数学,<br style="margin:0px;padding:0px;"/>              (CASE WHEN 英语&gt;=80 THEN '优秀' WHEN 英语&gt;=60 THEN '及格' ELSE '不及格' END) as 英语<br style="margin:0px;padding:0px;"/>       from table_name</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       # 实例测试一下<br style="margin:0px;padding:0px;"/>       select *,(CASE WHEN id&lt;8 THEN '5' WHEN id=8 THEN '4' ELSE '0' END) as newfield<br style="margin:0px;padding:0px;"/>       from zzx_articles<br style="margin:0px;padding:0px;"/>       where id&gt;5</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       我的新排序思路：如果 title_fc 和 content_fc 的权重值“同时大于0且相等”为首要排序，“同时大于0且不相等”的为次要排序，<br style="margin:0px;padding:0px;"/>       “title_fc 大于0的再次要排序”，如果用 IF() 貌似不好实现，看下面语句：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       SELECT *,MATCH (title_fc) AGAINST ('optimizing ok red blue') as title_score,MATCH (content_fc) AGAINST ('optimizing ok red blue') as content_score,<br style="margin:0px;padding:0px;"/>             (CASE WHEN MATCH (title_fc) AGAINST ('optimizing ok red blue') &gt; 0 AND MATCH (title_fc) AGAINST ('optimizing ok red blue') = MATCH (content_fc) AGAINST ('optimizing ok red blue') THEN '3' WHEN MATCH (title_fc) AGAINST ('optimizing ok red blue') &gt; 0 AND MATCH (title_fc) AGAINST ('optimizing ok red blue') &lt;&gt; MATCH (content_fc) AGAINST ('optimizing ok red blue') THEN '2' WHEN MATCH (title_fc) AGAINST ('optimizing ok red blue') &gt; 0 THEN '1' ELSE '0' END) AS score1<br style="margin:0px;padding:0px;"/>       FROM zzx_articles <br style="margin:0px;padding:0px;"/>       WHERE MATCH (title_fc,content_fc) AGAINST ('optimizing ok red blue' IN BOOLEAN MODE) order by score1 DESC,title_score DESC,content_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27214241-a4d7ce76534644e0bd5d16aa7ff7ef46.x-png.png" type="image/png" data-filename="27214241-a4d7ce76534644e0bd5d16aa7ff7ef46.x-png.png" alt="" height="146" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="900"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       总结：本实验的排序未必合乎科学，但引出一个更复杂规则的排序方式、角度，多种排序结合使用才能做出更合理的排序，才能使你的搜索引擎更加智能。抛砖引玉，或许你有更好的排序，请也分享给我。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">   ------------------------------------------------------------------------------------------------------------------------------</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    ▶ 实验15：中文全文检索<br style="margin:0px;padding:0px;"/>      MySQL不支持中文全文检索，因为中文一句话是连着写的，不像英文单词间有空格分隔。解决办法就是中文分词(关于中文分词请参阅其它文章)，<br style="margin:0px;padding:0px;"/>      如果你的MySQL是安装在Windows平台上的，可以不用转码直接存储中文就可以使用全文索引，如本例。但是如果你的MySQL是安装在Linux上的则需要进行转编码(urlencode / base64_encode / json_encode / 区位 / 拼音)等方案，具体方案参看其它博文。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">      SELECT *,MATCH (title_fc) AGAINST ('中华 北京 和谐 security') as title_score,MATCH (content_fc) AGAINST ('中华 北京 和谐 security') as content_score,(case when MATCH (title_fc) AGAINST ('中华 北京 和谐 security') &gt; 0 and MATCH (content_fc) AGAINST ('中华 北京 和谐 security') &gt; 0 then '5' when MATCH (title_fc) AGAINST ('中华 北京 和谐 security') &gt; 0 and MATCH (content_fc) AGAINST ('中华 北京 和谐 security') = 0 then '4' else '0' end) as score1<br style="margin:0px;padding:0px;"/>      FROM zzx_articles <br style="margin:0px;padding:0px;"/>      WHERE MATCH (title_fc,content_fc) AGAINST ('中华 北京 和谐 security' IN BOOLEAN MODE) order by score1 DESC,title_score DESC,content_score DESC</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/27214254-d24bfc540b5c4ae5b8489aaa1270811f.x-png.png" type="image/png" data-filename="27214254-d24bfc540b5c4ae5b8489aaa1270811f.x-png.png" alt="" height="150" style="margin:0px;padding:0px;border:0px;height:auto;max-width:300px;" width="830"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">来源：http://www.cnblogs.com/martinzhang/p/3220345.html</p></div><div style="display:block;margin:0px;padding:0px;">博客地址：<a href="http://www.cnblogs.com/ibook360/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">【爱开卷360】http://www.cnblogs.com/ibook360</a></div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;margin-top:20px;">
<div style="margin:0px;padding:0px;margin-bottom:10px;">分类: <a href="http://www.cnblogs.com/ibook360/category/412388.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">数据库</a>,<a href="http://www.cnblogs.com/ibook360/category/328869.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">搜索引擎</a></div>
<div style="margin:0px;padding:0px;font-size:9pt;color:rgb(102, 102, 102);margin-top:0px;">标签: <a href="http://www.cnblogs.com/ibook360/tag/MySQL/" style="margin:0px;padding:0px;text-decoration:underline;margin-left:5px;color:rgb(102, 102, 102);">MySQL</a>, <a href="http://www.cnblogs.com/ibook360/tag/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2/" style="margin:0px;padding:0px;text-decoration:underline;margin-left:5px;color:rgb(102, 102, 102);">全文搜索</a>, <a href="http://www.cnblogs.com/ibook360/tag/Innodb/" style="margin:0px;padding:0px;text-decoration:underline;margin-left:5px;color:rgb(102, 102, 102);">Innodb</a>, <a href="http://www.cnblogs.com/ibook360/tag/MyISAM/" style="margin:0px;padding:0px;text-decoration:underline;margin-left:5px;color:rgb(102, 102, 102);">MyISAM</a></div>
<div style="margin:0px;padding:0px;"><div style="margin:0px;padding:10px 0px;margin-bottom:10px;margin-top:10px;border:1px dashed silver;font-size:12px;width:320px;text-align:center;">
        <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(45, 174, 191);color:rgb(255, 255, 255);border:none;">好文要顶</a>
            <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(227, 49, 0);color:rgb(255, 255, 255);border:none;">关注我</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(255, 181, 21);color:rgb(255, 255, 255);border:none;">收藏该文</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至新浪微博"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" alt="" height="24" style="margin:0px;padding:0px;height:auto;border:none;vertical-align:middle;margin-left:5px;box-shadow:none;max-width:300px;" width="24"/></a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至微信"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" alt="" height="24" style="margin:0px;padding:0px;border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;max-width:300px;" width="24"/></a>
</div>
<div style="margin:0px;padding:0px;float:left;width:280px;margin-top:0px;margin-bottom:10px;color:rgb(0, 0, 0);margin-left:0px;font-size:12px;">
    <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/ibook360/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank"><img src="MySQL中文全文检索 - 爱开卷360 - 博客园_files/sample_face.gif" type="image/gif" data-filename="sample_face.gif" alt="" height="46" style="margin:0px;padding:0px;height:auto;border:0px;vertical-align:top;float:left;margin-right:5px;padding-top:5px;padding-left:2px;max-width:300px;" width="47"/></a>
        <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/ibook360/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">爱开卷360</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/ibook360/followees" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">关注 - 1</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/ibook360/followers" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">粉丝 - 242</a>
        </div>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;"></div>
    <div style="margin:0px;padding:0px;">
                <a href="#" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">+加关注</a>
    </div>
</div>
<div style="margin:0px;padding:0px;float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:125px;text-align:center;margin-top:10px;">
    <div style="margin:0px;padding:0px;float:left;width:46px;height:52px;background:url(&quot;http://static.cnblogs.com/images/upup.gif&quot;) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">2</span>
    </div>
    <div style="text-align:center;padding:0px;margin:0px;height:52px;background:url(&quot;http://static.cnblogs.com/images/downdown.gif&quot;) no-repeat;margin-left:20px;cursor:pointer;margin-top:2px;padding-top:5px;width:46px;float:right;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;margin-top:5px;margin-left:0px;font-size:12px;color:gray;">
    </div>
</div>
</div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;line-height:1.8;font-size:12px;"><a href="http://www.cnblogs.com/ibook360/p/5012123.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">« </a> 上一篇：<a href="http://www.cnblogs.com/ibook360/p/5012123.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2015-12-02 10:11">Hermes实时检索分析平台</a><br style="margin:0px;padding:0px;"/><a href="http://www.cnblogs.com/ibook360/p/5073781.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">» </a> 下一篇：<a href="http://www.cnblogs.com/ibook360/p/5073781.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2015-12-24 17:25">MySQL存储引擎选型</a><br style="margin:0px;padding:0px;"/></div>
</div>


		</div>
		<div style="margin:0px;padding:0px;clear:both;font-size:12px;float:right;width:100%;text-align:right;padding-right:5px;color:rgb(102, 102, 102);margin-top:5px;">posted @ <span style="margin:0px;padding:0px;">2015-12-24 15:42</span> <a href="http://www.cnblogs.com/ibook360/" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">爱开卷360</a> 阅读(<span style="margin:0px;padding:0px;">7565</span>) 评论(<span style="margin:0px;padding:0px;">2</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=5073313" rel="nofollow" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">编辑</a> <a href="http://www.cnblogs.com/ibook360/p/5073313.html#" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">收藏</a></div>
	</div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 