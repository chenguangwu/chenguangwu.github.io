<html>
<head>
  <title>深入浅出 spring-data-elasticsearch – 基本案例详解（三) | Spring For All</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8971"/>
<h1>深入浅出 spring-data-elasticsearch – 基本案例详解（三) | Spring For All</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/12/8 17:15</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.spring4all.com/article/332"><i>http://www.spring4all.com/article/332</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:14px;"><div style="box-sizing:inherit;overflow-x:hidden;min-width:320px;background:rgb(255, 255, 255);font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;font-size:14px;line-height:1.4285em;color:rgba(0, 0, 0, 0.870588);background-color:#f3f3f3;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;"><div style="box-sizing:inherit;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:stretch;align-items:stretch;"><div style="box-sizing:inherit;vertical-align:top;"><div style="box-sizing:inherit;background:rgb(255, 255, 255);box-shadow:rgba(34, 36, 38, 0.14902) 0px 1px 2px 0px;border-radius:0.285714rem;font-size:1rem;"><h3 style="font-size:1.28571rem;box-sizing:inherit;border:none;line-height:1.28571em;font-weight:700;padding:0px;font-family:Lato, &quot;Helvetica Neue&quot;, Arial, Helvetica, sans-serif;margin:calc(2rem - 0.142857em) 0px 1rem;text-transform:none;margin-top:-0.142857em;padding-bottom:0.214286rem;border-bottom:2px solid rgb(219, 40, 40);color:rgb(219, 40, 40);"><i style="height:1em;box-sizing:inherit;font-family:Icons;backface-visibility:hidden;-webkit-font-smoothing:antialiased;speak:none;text-align:center;margin:0px 0.25rem 0px 0px;width:1.18em;text-decoration:inherit;font-weight:400;font-style:normal;font-size:1.5em;display:table-cell;vertical-align:middle;padding-top:0.142857em;opacity:1;margin-bottom:0px;"><span style="font-size:1.5em;font-family:Icons;font-style:normal;font-weight:400;text-align:center;background:0px 0px !important;"></span></i> <div style="box-sizing:inherit;display:table-cell;vertical-align:middle;padding-left:0.75rem;">深入浅出 spring-data-elasticsearch – 基本案例详解（三)</div></h3> <div style="line-height:1.6;box-sizing:inherit;padding:0px;overflow:auto;font-family:&quot;Microsoft YaHei&quot;, Helvetica, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Monaco, monospace, Tahoma, STXihei, 华文细黑, STHeiti, &quot;Helvetica Neue&quot;, &quot;Droid Sans&quot;, &quot;wenquanyi micro hei&quot;, FreeSans, Arimo, Arial, SimSun, 宋体, Heiti, 黑体, sans-serif;font-size:14px;text-size-adjust:100%;word-wrap:break-word;text-align:left;color:rgb(51, 51, 51);width:100%;background-color:rgb(255, 255, 255);"><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-bottom:16px;margin-top:0px;">『  风云说：能分享自己职位的知识的领导是个好领导。 』<br style="box-sizing:border-box;"/><strong style="box-sizing:border-box;font-weight:bold;">运行环境</strong>：JDK 7 或 8，Maven 3.0+<br style="box-sizing:border-box;"/><strong style="box-sizing:border-box;font-weight:bold;">技术栈</strong>：SpringBoot 1.5+， Spring Data Elasticsearch 1.5+ ，ElasticSearch 2.3.2<br style="box-sizing:border-box;"/><strong style="box-sizing:border-box;font-weight:bold;">本文提纲</strong><br style="box-sizing:border-box;"/>一、spring-data-elasticsearch-crud 的工程介绍<br style="box-sizing:border-box;"/>二、运行 spring-data-elasticsearch-crud 工程<br style="box-sizing:border-box;"/>三、spring-data-elasticsearch-crud 工程代码详解</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">一、spring-data-elasticsearch-crud 的工程介绍</strong><br style="box-sizing:border-box;"/>spring-data-elasticsearch-crud 的工程，介绍 Spring Data Elasticsearch 简单的 ES 操作。Spring Data Elasticsearch 可以跟 JPA 进行类比。其使用方法也很简单。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">二、运行 spring-data-elasticsearch-crud 工程</strong><br style="box-sizing:border-box;"/>注意的是这里使用的是 ElasticSearch 2.3.2。是因为版本对应关系 <a href="https://github.com/spring-projects/spring-data-elasticsearch/wiki/Spring-Data-Elasticsearch---Spring-Boot---version-matrix;" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/spring-projects/spring-data-elasticsearch/wiki/Spring-Data-Elasticsearch---Spring-Boot---version-matrix;</a></p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Spring Boot Version (x)    Spring Data Elasticsearch Version (y)    Elasticsearch Version (z)<br style="box-sizing:border-box;"/>x &lt;= 1.3.5    y &lt;= 1.3.4    z &lt;= 1.7.2<em style="box-sizing:border-box;"><br style="box-sizing:border-box;"/>x &gt;= 1.4.x    2.0.0 &lt;=y &lt; 5.0.0<strong style="box-sizing:border-box;font-weight:bold;">    2.0.0 &lt;= z &lt; 5.0.0</strong><br style="box-sizing:border-box;"/>\</em>  - 只需要你修改下对应的 pom 文件版本号<br style="box-sizing:border-box;"/>** - 下一个 ES 的版本会有重大的更新</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">1. 后台起守护线程启动 Elasticsearch</strong></p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>cd elasticsearch-2.3.2/
./bin/elasticsearch -d
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">git clone 下载工程 springboot-elasticsearch ，项目地址见 GitHub - <a href="https://github.com/JeffLi1993/springboot-learning-example" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/JeffLi1993/ … ample</a>。<br style="box-sizing:border-box;"/>下面开始运行工程步骤（Quick Start）：</p>
<ol style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">项目结构介绍</li></ol>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>org.spring.springboot.controller - Controller 层
org.spring.springboot.repository - ES 数据操作层
org.spring.springboot.domain - 实体类
org.spring.springboot.service - ES 业务逻辑层
Application - 应用启动类
application.properties - 应用配置文件，应用启动会自动读取配置
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">本地启动的 ES ，就不需要改配置文件了。如果连测试 ES 服务地址，需要修改相应配置</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">3.编译工程<br style="box-sizing:border-box;"/>在项目根目录 spring-data-elasticsearch-crud，运行 maven 指令：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>mvn clean install
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">4.运行工程<br style="box-sizing:border-box;"/>右键运行 Application 应用启动类（位置：/springboot-learning-example/springboot-elasticsearch/src/main/java/org/spring/springboot/Application.java）的 main 函数，这样就成功启动了 springboot-elasticsearch 案例。<br style="box-sizing:border-box;"/>用 Postman 工具新增两个城市</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">a. 新增城市信息</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>POST http://127.0.0.1:8080/api/city
{
    &quot;id”:&quot;1&quot;,
    &quot;score&quot;:&quot;5&quot;,
    &quot;name&quot;:&quot;上海&quot;,
    &quot;description&quot;:&quot;上海是个热城市&quot;
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>POST http://127.0.0.1:8080/api/city
{
    &quot;id&quot;:&quot;2&quot;,
    &quot;score”:&quot;4&quot;,
    &quot;name”:”温岭&quot;,
    &quot;description&quot;:”温岭是个沿海城市&quot;
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">可以打开 ES 可视化工具 head 插件：<a href="http://localhost:9200/_plugin/head/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://localhost:9200/_plugin/head/</a>：<br style="box-sizing:border-box;"/>（如果不知道怎么安装，请查阅 《Elasticsearch 和插件 elasticsearch-head 安装详解》 <a href="http://www.bysocket.com/?p=1744" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://www.bysocket.com/?p=1744</a> 。）<br style="box-sizing:border-box;"/>在「数据浏览」tab，可以查阅到 ES 中数据是否被插入，插入后的数据格式如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>{
&quot;_index&quot;: &quot;cityindex&quot;,
&quot;_type&quot;: &quot;city&quot;,
&quot;_id&quot;: &quot;1&quot;,
&quot;_version&quot;: 1,
&quot;_score&quot;: 1,
&quot;_source&quot;: {
  &quot;id&quot;:&quot;2&quot;,
    &quot;score”:&quot;4&quot;,
    &quot;name”:”温岭&quot;,
    &quot;description&quot;:”温岭是个沿海城市&quot;
}
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">下面是基本查询语句的接口：<br style="box-sizing:border-box;"/>a. 普通查询，查询城市描述</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>GET http://localhost:8080/api/city ... on%3D温岭
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">返回 JSON 如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>[
    {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;温岭&quot;,
        &quot;description&quot;: &quot;温岭是个沿海城市&quot;,
        &quot;score&quot;: 4
    }
]
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">b. AND 语句查询</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>GET http://localhost:8080/api/city ... on%3D温岭&amp;score=4
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">返回 JSON 如下:</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>[
    {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;温岭&quot;,
        &quot;description&quot;: &quot;温岭是个沿海城市&quot;,
        &quot;score&quot;: 4
    }
]
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">如果换成 score=5 ，就没有结果了。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">c. OR 语句查询</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>GET http://localhost:8080/api/city ... on%3D上海&amp;score=4
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">返回 JSON 如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>[
    {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;温岭&quot;,
        &quot;description&quot;: &quot;温岭是个沿海城市&quot;,
        &quot;score&quot;: 4
    },
    {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;上海&quot;,
        &quot;description&quot;: &quot;上海是个好城市&quot;,
        &quot;score&quot;: 3
    }
]
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">d. NOT 语句查询</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>GET http://localhost:8080/api/city ... on%3D温州
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">返回 JSON 如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>[
    {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;温岭&quot;,
        &quot;description&quot;: &quot;温岭是个沿海城市&quot;,
        &quot;score&quot;: 4
    },
    {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;上海&quot;,
        &quot;description&quot;: &quot;上海是个好城市&quot;,
        &quot;score&quot;: 3
    }
]
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">e. LIKE 语句查询</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>GET http://localhost:8080/api/city ... on%3D城市
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">返回 JSON 如下：</p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>[
    {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;温岭&quot;,
        &quot;description&quot;: &quot;温岭是个沿海城市&quot;,
        &quot;score&quot;: 4
    },
    {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;上海&quot;,
        &quot;description&quot;: &quot;上海是个好城市&quot;,
        &quot;score&quot;: 3
    }
]
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">三、spring-data-elasticsearch-crud 工程代码详解</strong><br style="box-sizing:border-box;"/>具体代码见 GitHub - <a href="https://github.com/JeffLi1993/springboot-learning-example" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">https://github.com/JeffLi1993/springboot-learning-example</a></p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">1.pom.xml 依赖</strong></p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/ma ... gt%3B
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;springboot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-data-elasticsearch-crud&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;spring-data-elasticsearch-crud :: spring-data-elasticsearch - 基本案例 &lt;/name&gt;
    &lt;!-- Spring Boot 启动父依赖 --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.5.1.RELEASE&lt;/version&gt;
    &lt;/parent&gt;
    &lt;dependencies&gt;
        &lt;!-- Spring Boot Elasticsearch 依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Boot Web 依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Junit --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.12&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">这里依赖的 spring-boot-starter-data-elasticsearch 版本是 1.5.1.RELEASE，对应的 spring-data-elasticsearch 版本是 2.1.0.RELEASE。对应官方文档：<a href="http://docs.spring.io/spring-data/elasticsearch/docs/2.1.0.RELEASE/reference/html/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://docs.spring.io/spring-d … html/</a>。后面数据操作层都是通过该 spring-data-elasticsearch 提供的接口实现。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">2. application.properties 配置 ES 地址</strong></p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span># ES
spring.data.elasticsearch.repositories.enabled = true
spring.data.elasticsearch.cluster-nodes = 127.0.0.1:9300
默认 9300 是 Java 客户端的端口。9200 是支持 Restful HTTP 的接口。
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">更多配置：<br style="box-sizing:border-box;"/> spring.data.elasticsearch.cluster-name Elasticsearch    集群名。(默认值: elasticsearch)<br style="box-sizing:border-box;"/> spring.data.elasticsearch.cluster-nodes    集群节点地址列表，用逗号分隔。如果没有指定，就启动一个客户端节点。<br style="box-sizing:border-box;"/> spring.data.elasticsearch.propertie     用来配置客户端的额外属性。<br style="box-sizing:border-box;"/> spring.data.elasticsearch.repositories.enabled     开启 Elasticsearch 仓库。(默认值:true。)</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">3. ES 数据操作层</strong></p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>/**
 * ES 操作类
 * &lt;p&gt;
 * Created by bysocket on 17/05/2017.
 */
public interface CityRepository extends ElasticsearchRepository&lt;City, Long&gt; {
    /**
     * AND 语句查询
     *
     * @param description
     * @param score
     * @return
     */
    List&lt;City&gt; findByDescriptionAndScore(String description, Integer score);
    /**
     * OR 语句查询
     *
     * @param description
     * @param score
     * @return
     */
    List&lt;City&gt; findByDescriptionOrScore(String description, Integer score);
    /**
     * 查询城市描述
     *
     * 等同于下面代码
     * @Query(&quot;{\&quot;bool\&quot; : {\&quot;must\&quot; : {\&quot;term\&quot; : {\&quot;description\&quot; : \&quot;?0\&quot;}}}}&quot;)
     * Page&lt;City&gt; findByDescription(String description, Pageable pageable);
     *
     * @param description
     * @param page
     * @return
     */
    Page&lt;City&gt; findByDescription(String description, Pageable page);
    /**
     * NOT 语句查询
     *
     * @param description
     * @param page
     * @return
     */
    Page&lt;City&gt; findByDescriptionNot(String description, Pageable page);
    /**
     * LIKE 语句查询
     *
     * @param description
     * @param page
     * @return
     */
    Page&lt;City&gt; findByDescriptionLike(String description, Pageable page);
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">接口只要继承 ElasticsearchRepository 类即可。默认会提供很多实现，比如 CRUD 和搜索相关的实现。类似于 JPA 读取数据，是使用 CrudRepository 进行操作 ES 数据。支持的默认方法有： count(), findAll(), findOne(ID), delete(ID), deleteAll(), exists(ID), save(DomainObject), save(Iterable&lt;DomainObject&gt;)。</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">另外可以看出，接口的命名是遵循规范的。常用命名规则如下：<br style="box-sizing:border-box;"/>关键字     方法命名<br style="box-sizing:border-box;"/>And          findByNameAndPwd<br style="box-sizing:border-box;"/>Or             findByNameOrSex<br style="box-sizing:border-box;"/>Is              findById<br style="box-sizing:border-box;"/>Between   findByIdBetween<br style="box-sizing:border-box;"/>Like           findByNameLike<br style="box-sizing:border-box;"/>NotLike     findByNameNotLike<br style="box-sizing:border-box;"/>OrderBy    findByIdOrderByXDesc<br style="box-sizing:border-box;"/>Not           findByNameNot</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">4. 实体类</strong></p>
<pre style="font-weight:normal;box-sizing:border-box;font-stretch:normal;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;overflow:auto;font-size:85%;line-height:1.6;padding:10px;border-radius:3px;word-wrap:normal;border:1px solid rgb(221, 221, 221);background:rgb(246, 246, 246);"><code style="background:transparent;box-sizing:border-box;border:0px;font-size:100%;margin:0px;border-radius:3px;word-break:normal;white-space:pre;font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;padding:0px;display:inline;max-width:initial;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>/**
 * 城市实体类
 * &lt;p&gt;
 * Created by bysocket on 03/05/2017.
 */
@Document(indexName = &quot;province&quot;, type = &quot;city&quot;)
public class City implements Serializable {
    private static final long serialVersionUID = -1L;
    /**
     * 城市编号
     */
    private Long id;
    /**
     * 城市名称
     */
    private String name;
    /**
     * 描述
     */
    private String description;
    /**
     * 城市评分
     */
    private Integer score;
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    public Integer getScore() {
        return score;
    }
    public void setScore(Integer score) {
        this.score = score;
    }
}
<span style="font-family:&quot;YaHei Consolas Hybrid&quot;, Consolas, &quot;Meiryo UI&quot;, &quot;Malgun Gothic&quot;, &quot;Segoe UI&quot;, &quot;Trebuchet MS&quot;, Helvetica, monospace, monospace;font-size:100%;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre><p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">注意</strong><br style="box-sizing:border-box;"/>a. City 属性名不支持驼峰式。<br style="box-sizing:border-box;"/>b. indexName 配置必须是全部小写，不然会出异常。<br style="box-sizing:border-box;"/>org.elasticsearch.indices.InvalidIndexNameException: Invalid index name [provinceIndex], must be lowercase</p>
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">四、小结</strong><br style="box-sizing:border-box;"/>预告下<br style="box-sizing:border-box;"/>下一篇《深入浅出 spring-data-elasticsearch - 实战案例详解》，会带来实战项目中涉及到的权重分 &amp; 短语精准匹配的讲解。</p>
<blockquote style="border-left:4px solid rgb(221, 221, 221);box-sizing:border-box;padding:0px 15px;color:rgb(102, 102, 102);margin:0px;font-size:14px;font-style:italic;margin-top:0px;padding-left:20px;margin-left:0px;margin-bottom:0px;">
<p style="margin:0px 0px 1em;line-height:1.4285em;box-sizing:border-box;margin-top:0px;margin-bottom:0px;">摘要: 原创出处 www.bysocket.com 「泥瓦匠BYSocket 」欢迎转载，保留摘要，谢谢！</p>
</blockquote>
</div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 