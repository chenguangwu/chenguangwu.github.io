<html>
<head>
  <title>Servlet 输出 xml - 刘文涛 - ITeye技术网站</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7836"/>
<h1>Servlet 输出 xml - 刘文涛 - ITeye技术网站</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2015/11/9 9:46</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://wentao365.iteye.com/blog/1102815"><i>http://wentao365.iteye.com/blog/1102815</i></a></td></tr>
</table>
</div>
<br/>

<div><span><br/><div style="font-size: 16px"><div><div style="text-align:center;font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:12px;line-height:1.5;color:black;background-color:white;"><div style="background-color:rgb(239, 250, 255);text-align:center;"><div style="text-align:left;"><div style="overflow:hidden;background-color:white;"><div style="background-color:white;"><div style="font-size:14px;line-height:1.8em;">
    <div style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Servlet 输出 xml - 刘文涛 - ITeye技术网站_files/Image.png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:black;">StringBuffer sf = </span><span style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;"> StringBuffer(</span><span style="color:blue;">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">sf.append(<span style="color:blue;">&quot;&lt;message&gt;&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">Iterator&lt;Book&gt; it = list.iterator();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">while</span><span style="color:black;"> (it.hasNext()){  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    Book book = it.next();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">if</span><span style="color:black;"> (book == </span><span style="color:rgb(127, 0, 85);font-weight:bold;">null</span><span style="color:black;">){  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(127, 0, 85);font-weight:bold;">continue</span><span style="color:black;">;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    String author = book.getAuthor();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    String name = book.getName();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    sf.append(<span style="color:blue;">&quot;&lt;book name='&quot;</span><span style="color:black;">+name+</span><span style="color:blue;">&quot;' author='&quot;</span><span style="color:black;">+author+</span><span style="color:blue;">&quot;'&gt;&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    sf.append(<span style="color:blue;">&quot;&lt;/book&gt;&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">sf.append(<span style="color:blue;">&quot;&lt;/message&gt;&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">AjaxUtil.ajaxResponse(response, sf.toString());  </span></li></ol></div>
<br/>
<br/><div style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:12px;background-color:transparent;width:97%;overflow:auto;margin-left:9px;padding:1px;word-break:break-all;word-wrap:break-word;"><div><div style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码 <div></div> <a href="#" style="color:rgb(16, 138, 198);text-decoration:underline;" title="收藏这段代码"><img src="Servlet 输出 xml - 刘文涛 - ITeye技术网站_files/Image [1].png" type="image/png" data-filename="Image.png" alt="收藏代码" height="14" style="border:0px;" width="15"/></a></div></div><ol start="1" style="font-size:1em;line-height:1.4em;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(43, 145, 175);"><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> javax.servlet.http.HttpServletResponse;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">import</span><span style="color:black;"> java.io.PrintWriter;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;"><span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;"> AjaxUtil {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    <span style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">static</span><span style="color:black;"> </span><span style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;"> ajaxResponse(HttpServletResponse response, String message) {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        PrintWriter pw = <span style="color:rgb(127, 0, 85);font-weight:bold;">null</span><span style="color:black;">;  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(127, 0, 85);font-weight:bold;">try</span><span style="color:black;"> {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            response.setContentType(<span style="color:blue;">&quot;text/xml;charset=utf-8&quot;</span><span style="color:black;">);   </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            response.setCharacterEncoding(<span style="color:blue;">&quot;UTF-8&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            response.setHeader(<span style="color:blue;">&quot;Cache-Control&quot;</span><span style="color:black;">, </span><span style="color:blue;">&quot;no-cache&quot;</span><span style="color:black;">);  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            pw = response.getWriter();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            pw.print(message);  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            pw.flush();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(127, 0, 85);font-weight:bold;">catch</span><span style="color:black;"> (Exception e) {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            e.printStackTrace();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        <span style="color:rgb(127, 0, 85);font-weight:bold;">finally</span><span style="color:black;"> {  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">            <span style="color:rgb(127, 0, 85);font-weight:bold;">if</span><span style="color:black;"> (pw != </span><span style="color:rgb(127, 0, 85);font-weight:bold;">null</span><span style="color:black;">)  </span></span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">                pw.close();  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">        }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">    }  </span></li><li style="font-size:1em;padding:0px;margin:0px 0px 0px 38px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);padding-left:10px;line-height:18px;"><span style="color:black;">}  </span></li></ol></div>
  </div></div></div></div></div></div></div></div><br/></span>
</div></body></html> 