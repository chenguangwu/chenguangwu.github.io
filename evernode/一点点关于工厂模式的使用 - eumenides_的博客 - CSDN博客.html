<html>
<head>
  <title>一点点关于工厂模式的使用 - eumenides_的博客 - CSDN博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3245"/>
<h1>一点点关于工厂模式的使用 - eumenides_的博客 - CSDN博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/11/2 14:48</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://blog.csdn.net/eumenides_/article/details/83341294"><i>https://blog.csdn.net/eumenides_/article/details/83341294</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;"><div style="outline:0px;box-sizing:border-box;text-size-adjust:100%;color:rgba(0, 0, 0, 0.75);font-family:Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;font-variant-ligatures:common-ligatures;line-height:1.67;-webkit-font-smoothing:antialiased;"><div style="box-sizing:inherit;outline:0px;font-family:Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;font-size:14px;line-height:1.67;background-color:rgb(245, 246, 247);color:rgba(0, 0, 0, 0.75);font-variant-ligatures:common-ligatures;-webkit-font-smoothing:antialiased;"><div style="outline:0px;box-sizing:border-box;"><span style="box-sizing:inherit;outline:0px;"><div style="box-sizing:inherit;outline:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;">
	<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;border-bottom:1px solid rgb(224, 224, 224);padding-top:16px;z-index:9;background-color:rgb(255, 255, 255);">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;">
			<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:8px;">
				<span style="color:rgb(202, 12, 22);padding:0px;margin:0px;outline:0px;box-sizing:inherit;margin-right:8px;text-align:center;border-radius:50%;width:26px;height:26px;font-size:12px;line-height:26px;display:inline-block;border:1px solid rgb(244, 206, 208);margin-top:4px;float:left;">原</span>				<h1 style="box-sizing:inherit;outline:0px;padding:0px;margin:0.67em 0px;font-size:24px;word-wrap:break-word;">一点点关于工厂模式的使用</h1>
			</div>
			<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:14px;position:relative;">
				<div style="color:rgb(133, 133, 133);width:88%;height:24px;box-sizing:inherit;outline:0px;padding:0px;margin:0px;overflow:hidden;">
																				<span style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;margin-right:14px;">2018年10月24日 11:26:25</span>
					<a href="https://me.csdn.net/eumenides_" style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;text-decoration:none;cursor:pointer;background-color:transparent;color:rgb(120, 165, 241);margin-right:14px;" target="_blank">eumenides_</a>
						<span style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;margin-right:14px;">阅读数：131</span>
						
														<span style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;margin-right:14px;margin-bottom:8px;font-size:12px;">
								<span style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;margin-right:14px;color:rgb(77, 77, 77);">标签：</span>
																<a href="http://so.csdn.net/so/search/s.do?q=%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F&amp;t=blog" style="margin-bottom:4px;background-color:transparent;margin:0px;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;border-radius:100px;color:rgb(77, 77, 77);padding:0px 8px;display:inline-block;word-wrap:break-word;text-align:center;border:1px solid rgb(204, 204, 204);line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">工厂模式																</a><a href="http://so.csdn.net/so/search/s.do?q=MVC&amp;t=blog" style="margin-bottom:4px;background-color:transparent;margin:0px;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;border-radius:100px;color:rgb(77, 77, 77);padding:0px 8px;display:inline-block;word-wrap:break-word;text-align:center;border:1px solid rgb(204, 204, 204);line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">MVC																</a><a href="http://so.csdn.net/so/search/s.do?q=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F&amp;t=blog" style="margin-bottom:4px;background-color:transparent;margin:0px;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;border-radius:100px;color:rgb(77, 77, 77);padding:0px 8px;display:inline-block;word-wrap:break-word;text-align:center;border:1px solid rgb(204, 204, 204);line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">设计模式																</a>
							<span style="top:0px;padding:0px;margin:0px;outline:0px;box-sizing:inherit;cursor:pointer;background-color:rgb(255, 255, 255);font-size:12px;right:101px;width:45px;display:inline-block;line-height:20px;letter-spacing:0px;color:rgb(51, 153, 234);margin-right:0px;">更多</span></span>
																					<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:12px;margin-top:6px;margin-bottom:0px;">
								<span style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;margin-right:14px;color:rgb(77, 77, 77);">个人分类：</span>
																<a href="https://blog.csdn.net/eumenides_/article/category/7274255" style="outline:0px;background-color:transparent;padding:0px;margin:0px;box-sizing:inherit;cursor:pointer;text-decoration:none;margin-right:24px;word-wrap:break-word;color:rgb(121, 165, 229);display:inline-block;" target="_blank">设计模式																</a>
							</div>
																								</div>
				<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;position:absolute;top:0px;right:0px;">
														</div>
			</div>
		</div>
	</div>
	<div style="box-sizing:inherit;outline:0px;margin:0px;padding:0px;display:block;position:relative;padding-top:16px;">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-wrap:break-word;">
								<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-wrap:break-word;font-size:12px;color:rgb(153, 153, 153);margin-bottom:8px;">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/eumenides_/article/details/83341294				</div>
								            <div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-family:-apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;word-wrap:break-word;word-break:break-word;">
							
							
							<p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;word-wrap:break-word;">背景：<br style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;word-wrap:break-word;"/>
　　　入行写java也快3年了，从一开始不懂什么事设计模式，死记硬背设计模式的概念，到后来随着写代码的深入，慢慢的开始理解设计模式的强大，就像古装片武功的心法一样，需要自身去主动地理解去体会，才能化为己用，在编码层面在上升一个阶段。<br style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;word-wrap:break-word;"/>
　　　最近我带着几个同事做了一个媒体运营推广的项目，一开始的业务设计是我们开发一个产品对应一个唯一的H5页面，用户访问H5页面后填写一个信息，然后提交到后台，我们公司再和第三方公司合作，把这部分填写的信息抽取有价值的地方对接第三方公司API传递过去。这种业务过程其实很简单，用最常用的MVC架构就可以完美解决，其实我们平时常用的controller-&gt;service-&gt;serviceImpl这个过程其实就是代理模式的体现，只不过我们的service接口下只有一个对应的实现类。但是后台业务有所发展，公司又对接了其他公司的API，要求我们把这个产品的数据也传给新对接的公司，这个时候正常业务场景下我们把新的公司接入到serviceImpl里就行了，于是我把这个工作交给一个4年经验的同事去做，我相信他应该可以做的不错，但是事与愿违，他做的并不好(这是后话了，后台我自己给重构了这部分代码)。但是过两天我就想到，这么做其实是有问题的，因为一开始的设置是一对一(一个产品对应一个推送公司)，到现在发展到一对多(一个产品对应多个推送公司)，问题在哪呢？实际上当业务人员开始要求产品接入多家公司的时候这是个显性需求，隐性需求其实很多，就算业务人员现在不提出来，以后也会提出来，如果设计这部分代码现在不设计好，那么以后也会重构，隐性需求有那些呢？<br style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;word-wrap:break-word;"/>
<strong style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;font-weight:700;word-wrap:break-word;">业务上：</strong></p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-wrap:break-word;">
<li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-wrap:break-word;">推送公司的状态问题：既然一个产品会合作多家公司，以后就肯定会不和哪家公司合作，对这个产品下的某家公司做无效，这样数据也不会继续推送给他家</li>
<li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-wrap:break-word;">推送公司优先级问题：合作一段时间后通过统计就能发现哪家公司的转化率好，哪家公司的利润高，这样对于产品下的合作公司势必会产生一个推送优先级的问题，比如满足所有推送公司推送条件优先推给谁等等</li>
</ul>
<p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;word-wrap:break-word;"><strong style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;font-weight:700;word-wrap:break-word;">编码上</strong></p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-wrap:break-word;">
<li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-wrap:break-word;">代码耦合问题：由于一个serviceImpl中承担了多家合作公司推送方法，虽然可以通过if/else的方式来对推送优先及做限定，但是没办法对合作公司的状态做调整，就算勉强做了调整，这样也会导致这个类的代码过分冗余，难以维护，难以看懂，也不符合设计的单一原则。正规的做法应该是针对每一个合作公司的API对接写一个实现类，然后让这些实现类统一实现一个合作公司的接口，只需要重写推送方法和规则要求验证就行。然后设计一个推送公司的表来统一维护这些推送公司实现类，让调用方通过工厂模式来动态选择应该推给谁</li>
<li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-wrap:break-word;">后期维护问题：上面也说了，那样写相当于写死，不可能业务人员换一个优先级，禁用部分合作公司就改一次代码，上一次线，这样代价太大，也不合适</li>
<li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-wrap:break-word;">分工合作问题：如果把所有逻辑写在一个实现类里，万一以后短期内接入多家公司API的话，怎么才能做到及时有效的迭代？全写在一个类里，意味着只能由一个程序员去编码，这样多家API就相当于同步阻塞，写完一个在写一个，可能有人会说可以把多家API分给多个程序员啊，可是你逻辑实现写在一个类里分开后是不是还得合并代码，合并冲突？所以，通过工厂模式，各自写各自的实现类，只需要统一实现一个接口，重写1，2个方法，这样对于主类完全没有干扰，可以愉快的分工合作</li>
</ul>
<p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;word-wrap:break-word;"><strong style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;font-weight:700;word-wrap:break-word;">废话了不少，简单看看代码实现吧</strong></p>
<ol style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-wrap:break-word;">
<li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-wrap:break-word;">先看看统一管理的表结构：</li>
</ol>
<table style="border-spacing:0px;font-size:inherit;font-style:inherit;font-variant:inherit;padding:0px;margin:0px;outline:0px;font-weight:inherit;box-sizing:border-box;border-collapse:collapse;background-color:transparent;display:table;width:100%;text-align:center;margin-bottom:24px;word-wrap:break-word;">
    <thead style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;word-wrap:break-word;">
        <tr style="border-left-style:initial;background-color:rgb(255, 255, 255);outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);word-wrap:break-word;">
            <th style="font-size:14px;word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:700;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;background-color:rgb(239, 243, 245);word-break:break-word;">Field</th>
            <th style="font-size:14px;word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:700;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;background-color:rgb(239, 243, 245);word-break:break-word;">Type</th>
            <th style="font-size:14px;word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:700;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;background-color:rgb(239, 243, 245);word-break:break-word;">Comment</th>
        </tr>
    </thead>
    <tbody style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;border:0px;word-wrap:break-word;">
        <tr style="border-left-style:initial;background-color:rgb(255, 255, 255);outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);word-wrap:break-word;">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">id</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">int(10) unsigned NOT NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">主键</td>
        </tr>
        <tr style="border-left-style:initial;word-wrap:break-word;outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:rgb(247, 247, 247);">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">product_id</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">int(10) unsigned NOT NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">产品编号</td>
        </tr>
        <tr style="border-left-style:initial;background-color:rgb(255, 255, 255);outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);word-wrap:break-word;">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">name</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">varchar(100) NOT NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">合作方通道名称</td>
        </tr>
        <tr style="border-left-style:initial;word-wrap:break-word;outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:rgb(247, 247, 247);">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">clazz</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">varchar(500) NOT NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">服务</td>
        </tr>
        <tr style="border-left-style:initial;background-color:rgb(255, 255, 255);outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);word-wrap:break-word;">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">lvl</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">int(10) unsigned NOT NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">排序</td>
        </tr>
        <tr style="border-left-style:initial;word-wrap:break-word;outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:rgb(247, 247, 247);">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">status</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">int(10) unsigned NOT NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">状态</td>
        </tr>
        <tr style="border-left-style:initial;background-color:rgb(255, 255, 255);outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);word-wrap:break-word;">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">rmk</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">varchar(500) NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">备注</td>
        </tr>
        <tr style="border-left-style:initial;word-wrap:break-word;outline:0px;margin:0px;padding:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;box-sizing:border-box;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:rgb(247, 247, 247);">
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">create_time</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">datetime NULL</td>
            <td style="border-top:1px solid rgb(220, 220, 220);word-wrap:break-word;outline:0px;padding:8px;margin:0px;font-weight:normal;border-right:1px solid rgb(220, 220, 220);box-sizing:border-box;font-size:14px;color:rgb(79, 79, 79);line-height:22px;border:1px solid rgb(221, 221, 221);vertical-align:middle;word-break:break-word;">创建时间</td>
        </tr>
    </tbody>
</table>
 2. 看一下接口和2个实现类
<pre style="margin:0px 0px 24px;margin-bottom:24px;overflow-y:hidden;overflow-x:auto;box-sizing:border-box;outline:0px;color:rgb(0, 0, 0);position:relative;line-height:22px;font-size:14px;font-family:&quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;word-wrap:break-word;border:none;padding:8px 16px 6px 56px;background-color:rgb(40, 44, 52);"><code style="line-height:22px;text-size-adjust:none;outline:0px;margin:0px;font-family:&quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;display:block;font-size:14px;box-sizing:border-box;overflow-x:auto;border-radius:4px;white-space:pre;word-wrap:break-word;background-color:rgb(40, 44, 52);color:rgb(171, 178, 191);padding:0px;">//接口
public interface PushCompanyChannelService {

	boolean pushData(Data data);

}
//实现类A公司
@Service
@Slf4j
public class ACompanyChannel implements PushCompanyChannelService {

@Override
    public boolean pushData(Data data) {
		//具体细节。。。
    }
}
//实现类B公司
@Service
@Slf4j
public class BCompanyChannel implements PushCompanyChannelService {

@Override
    public boolean pushData(Data data) {
		//具体细节。。。
    }
}
//业务调用实现类
@Service
@Slf4j
public class ServiceImpl implements Service{

@Override
    public boolean pushData2Channel(Data data) {
    		//根据产品id查询推送通道，按照设置等级排序
            Sort sort = new Sort(Sort.Direction.ASC,&quot;lvl&quot;);
    		//获取产品配置的有效通道
			List&lt;PushCompanyChannel&gt; pushCompanyChannels = pushCompanyChannelRepository.findByProductIdIsAndStatusIs(data.getProductId(),1,sort);
            for (PushCompanyChannel pushChannel : pushCompanyChannels){
                //按照预先设置推送通道优先级动态代理推送数据
                PushCompanyChannelService bean =  (PushCompanyChannelService ) SpringContext.getBean(Class.forName(pushChannel.getClazz()));
                boolean result = bean.pushData(data);
                if (result){
                    //一比数据只能推送一次，一个通道推送成功即跳出
                   break;
                }
            }
    }
}

</code><ul style="position:absolute;font-size:inherit;outline:0px;box-sizing:border-box;word-wrap:break-word;margin:0px;list-style:none;padding:8px 0px;width:48px;top:0px;left:0px;text-align:right;background-color:rgb(40, 44, 52);"><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">1</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">2</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">3</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">4</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">5</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">6</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">7</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">8</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">9</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">10</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">11</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">12</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">13</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">14</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">15</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">16</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">17</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">18</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">19</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">20</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">21</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">22</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">23</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">24</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">25</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">26</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">27</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">28</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">29</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">30</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">31</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">32</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">33</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">34</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">35</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">36</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">37</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">38</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">39</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">40</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">41</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">42</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">43</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">44</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">45</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">46</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">47</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">48</li><li style="outline:0px;box-sizing:border-box;word-wrap:break-word;padding:0px 8px;margin:0px;list-style:none;border-right:1px solid rgb(197, 197, 197);color:rgb(153, 153, 153);font-size:inherit;list-style-type:disc;">49</li></ul></pre>
<p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;word-wrap:break-word;"></p>

            </div>
						
                <span style="display:block;height:0px;visibility:hidden;clear:both;"> </span></div>
									
					
					</div>
	
</div></span></div></div></div></div>
</div>
</span>
</div></body></html> 