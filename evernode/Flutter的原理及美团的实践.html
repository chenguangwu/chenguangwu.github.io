<html>
<head>
  <title>Flutter的原理及美团的实践</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7214"/>
<h1>Flutter的原理及美团的实践</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/8/9 21:40</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&mid=2651748565&idx=1&sn=f92ce52627b680529c3c31e393779168&chksm=bd12a1988a65288eec838dbe64a31990f64baff2093f85ba8c75f581fcd5883947867d7a20a0&mpshare=1&scene=1&srcid=0809F7PYLKHqt4xV13Zzs9tD#rd"><i>http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;mid=2651748565&amp;idx=1&amp;sn=f92ce52627b680529c3c31e393779168&amp;chksm=bd12a1988a65288eec838dbe64a31990f64baff2093f85ba8c75f581fcd5883947867d7a20a0&amp;mpshare=1&amp;scene=1&amp;srcid=0809F7PYLKHqt4xV13Zzs9tD#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="padding:20px 16px 12px;margin:0;background-color:#fff"><div style="margin:0;padding:0"><div style="margin:0;padding:0"><h2 style="font-weight:400;margin:0;padding:0;font-size:22px;line-height:1.4;margin-bottom:14px"> Flutter的原理及美团的实践 </h2><div style="margin:0;padding:0;margin-bottom:22px;line-height:20px;font-size:0;word-wrap:break-word;word-break:break-all"><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);margin-right:0;color:rgba(0,0,0,0.3)">原创：</span><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);color:rgba(0,0,0,0.3)"> 少杰 </span><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative"><a style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)"> 美团技术团队 </a></span><em style="padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);color:rgba(0,0,0,0.3)"></em></div><div style="margin:0;padding:0;overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><img src="Flutter的原理及美团的实践_files/640.png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal;text-align:center"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:12px;letter-spacing:1px">总第272篇</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal;text-align:center"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:12px;letter-spacing:1px">2018年 第64篇</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);white-space:normal;font-size:20px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">导读</span></strong></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px;line-height:1.6;letter-spacing:0"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter是Google开发的一套全新的跨平台、开源UI框架，支持iOS、Android系统开发，并且是未来新操作系统Fuchsia的默认开发套件。自从2017年5月发布</span><a href="https://github.com/flutter/flutter/releases/tag/v0.0.6" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">第一个版本</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">以来，目前Flutter已经发布了近60个版本，并且在2018年5月发布了第一个</span><a href="https://developers.googleblog.com/2018/05/ready-for-production-apps-flutter-beta-3.html" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">“Ready for Production Apps”</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">的Beta 3版本，6月20日发布了第一个</span><a href="https://medium.com/flutter-io/flutter-release-preview-1-943a9b6ee65a" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">“Release Preview”</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">版本。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:20px;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">初识Flutter</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter的目标是使同一套代码同时运行在Android和iOS系统上，并且拥有媲美原生应用的性能，Flutter甚至提供了两套控件来适配Android和iOS（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">滚动效果、字体和控件图标等等</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），为了让App在细节处看起来更像原生应用。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Flutter诞生之前，已经有许多跨平台UI框架的方案，比如基于WebView的</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;letter-spacing:0">Cordova、AppCan等</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;letter-spacing:0">，还有使用HTML+JavaScript渲染成原生控件的React Native、Weex等。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">基于WebView的框架优点很明显，它们几乎可以完全继承现代Web开发的所有成果（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">丰富得多的控件库、满足各种需求的页面框架、完全的动态化、自动化测试工具等等</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），当然也包括Web开发人员，不需要太多的学习和迁移成本就可以开发一个App。同时WebView框架也有一个致命（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">在对体验&amp;性能有较高要求的情况下</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）的缺点，那就是WebView的渲染效率和JavaScript执行性能太差。再加上Android各个系统版本和设备厂商的定制，很难保证所在所有设备上都能提供一致的体验。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">为了解决WebView性能差的问题，以React Native为代表的一类框架将最终渲染工作交还给了系统，虽然同样使用类HTML+JS的UI构建逻辑，但是最终会生成对应的自定义原生控件，以充分利用原生控件相对于WebView的较高的绘制效率。与此同时这种策略也将框架本身和App开发者绑在了系统的控件系统上，不仅框架本身需要处理大量平台相关的逻辑，随着系统版本变化和API的变化，开发者可能也需要处理不同平台的差异，甚至有些特性只能在部分平台上实现，这样框架的跨平台特性就会大打折扣。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter则开辟了一种全新的思路，从头到尾重写一套跨平台的UI框架，包括UI控件、渲染逻辑甚至开发语言。渲染引擎依靠跨平台的Skia图形库来实现，依赖系统的只有图形绘制相关的接口，可以在最大程度上保证不同平台、不同设备的体验一致性，逻辑处理使用支持AOT的Dart语言，执行效率也比JavaScript高得多。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter同时支持Windows、Linux和macOS操作系统作为开发环境，并且在Android Studio和VS Code两个IDE上都提供了全功能的支持。Flutter所使用的Dart语言同时支持AOT和JIT运行方式，JIT模式下还有一个备受欢迎的开发利器“热刷新”（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">Hot Reload</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），即在Android Studio中编辑Dart代码后，只需要点击保存或者“Hot Reload”按钮，就可以立即更新到正在运行的设备上，不需要重新编译App，甚至不需要重启App，立即就可以看到更新后的样式。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Flutter中，所有功能都可以通过组合多个Widget来实现，包括对齐方式、按行排列、按列排列、网格排列甚至事件处理等等。Flutter控件主要分为两大类，StatelessWidget和StatefulWidget，StatelessWidget用来展示静态的文本或者图片，如果控件需要根据外部数据或者用户操作来改变的话，就需要使用StatefulWidget。State的概念也是来源于Facebook的流行Web框架</span><a href="http://facebook.github.io/react/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">React</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，React风格的框架中使用控件树和各自的状态来构建界面，当某个控件的状态发生变化时由框架负责对比前后状态差异并且采取最小代价来更新渲染结果。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">Hot Reload</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Dart代码文件中修改字符串“Hello, World”，添加一个惊叹号，点击保存或者热刷新按钮就可以立即更新到界面上，仅需几百毫秒：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640.gif" type="image/gif" data-filename="640.gif" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter通过将新的代码注入到正在运行的DartVM中，来实现Hot Reload这种神奇的效果，在DartVM将程序中的类结构更新完成后，Flutter会立即重建整个控件树，从而更新界面。但是热刷新也有一些限制，并不是所有的代码改动都可以通过热刷新来更新：</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">编译错误，如果修改后的Dart代码无法通过编译，Flutter会在控制台报错，这时需要修改对应的代码。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">控件类型从</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">StatelessWidget</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">到</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">StatefulWidget</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">的转换，因为Flutter在执行热刷新时会保留程序原来的state，而某个控件从stageless→stateful后会导致Flutter重新创建控件时报错“myWidget is not a subtype of StatelessWidget”，而从stateful→stateless会报错“type 'myWidget' is not a subtype of type 'StatefulWidget' of 'newWidget'”。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">全局变量和静态成员变量，这些变量不会在热刷新时更新。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">修改了main函数中创建的根控件节点，Flutter在热刷新后只会根据原来的根节点重新创建控件树，不会修改根节点。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">某个类从普通类型转换成枚举类型，或者类型的泛型参数列表变化，都会使热刷新失败。</span></p></li></ol><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">热刷新无法实现更新时，执行一次热重启（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">Hot Restart</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）就可以全量更新所有代码，同样不需要重启App，区别是restart会将所有Dart代码打包同步到设备上，并且所有状态都会重置。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">Flutter插件</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter使用的Dart语言无法直接调用Android系统提供的Java接口，这时就需要使用插件来实现中转。Flutter官方提供了丰富的原生接口封装：</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/android_alarm_manager" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">android_alarm_manager</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，访问Android系统的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">AlertManager</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/android_intent" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">android_intent</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，构造Android的Intent对象。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/battery" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">battery</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，获取和监听系统电量变化。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/connectivity" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">connectivity</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，获取和监听系统网络连接状态。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/device_info" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">device info</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，获取设备型号等信息。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/image_picker" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">image_picker</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，从设备中选取或者拍摄照片。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/package_info" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">package_info</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，获取App安装包的版本等信息。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/path_provider" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">path_provider</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，获取常用文件路径。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/quick_actions" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">quick_actions</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，App图标添加快捷方式，iOS的</span><a href="https://developer.apple.com/ios/human-interface-guidelines/extensions/home-screen-actions" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">eponymous concept</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">和Android的</span><a href="https://developer.android.com/guide/topics/ui/shortcuts.html" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">App Shortcuts</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/sensors" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">sensors</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，访问设备的加速度和陀螺仪传感器。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/shared_preferences" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">shared_preferences</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，App KV存储功能。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/url_launcher" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">url_launcher</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，启动URL，包括打电话、发短信和浏览网页等功能。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/plugins/blob/master/packages/video_player" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">video_player</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，播放视频文件或者网络流的控件。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Flutter中，依赖包由</span><a href="https://pub.Dartlang.org/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Pub</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">仓库管理，项目依赖配置在pubspec.yaml文件中声明即可（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">类似于NPM的版本声明</span><a href="https://www.Dartlang.org/tools/pub/versioning" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Pub Versioning Philosophy</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），对于未发布在Pub仓库的插件可以使用git仓库地址或文件路径：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">dependencies: <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  url_launcher: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;&gt;=0.1.2 &lt;0.2.0&quot;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  collection: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;^0.1.2&quot;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  plugin1: <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    git: <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      url: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;git://github.com/flutter/plugin1.git&quot;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  plugin2: <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    path: ../plugin2/<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">以shared_preferences为例，在pubspec中添加代码：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">dependencies:<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  flutter:<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    sdk: flutter<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  shared_preferences: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;^0.4.1&quot;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">脱字号“^”开头的版本表示</span><a href="https://www.Dartlang.org/tools/pub/dependencies#caret-syntax" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">和当前版本接口保持兼容</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">的最新版，</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">^1.2.3</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"> 等效于 </span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">&gt;=1.2.3 &lt;2.0.0</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"> 而 </span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">^0.1.2</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"> 等效于 </span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">&gt;=0.1.2 &lt;0.2.0</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，添加依赖后点击“Packages get”按钮即可下载插件到本地，在代码中添加import语句就可以使用插件提供的接口：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'package:shared_preferences/shared_preferences.Dart'</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">_MyAppState</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">State</span>&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">MyAppCounter</span>&gt; </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">int</span> _count = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">static</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">const</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">String</span> COUNTER_KEY = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'counter'</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  _MyAppState() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    init();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  init() <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">async</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">var</span> pref = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">await</span> SharedPreferences.getInstance();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    _count = pref.getInt(COUNTER_KEY) ?? <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    setState(() {});<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  increaseCounter() <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">async</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    SharedPreferences pref = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">await</span> SharedPreferences.getInstance();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    pref.setInt(COUNTER_KEY, ++_count);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    setState(() {});<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>...<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);white-space:normal;font-size:20px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">Dart</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><a href="https://www.Dartlang.org/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">是一种强类型、跨平台的客户端开发语言。具有专门为客户端优化、高生产力、快速高效、可移植（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">兼容ARM/x86</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）、易学的OO编程风格和原生支持响应式编程（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">Stream &amp; Future</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）等优秀特性。Dart主要由Google负责开发和维护，在</span><a href="http://gotocon.com/aarhus-2011/presentation/Opening%20Keynote:%20Dart,%20a%20new%20programming%20language%20for%20structured%20web%20programming" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">2011年10启动项目</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，2017年9月发布第一个2.0-dev版本。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart本身提供了三种运行方式：</span></strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">使用Dart2js编译成JavaScript代码，运行在常规浏览器中（</span><a href="https://webdev.Dartlang.org/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart Web</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">使用DartVM直接在命令行中运行Dart代码（</span><a href="https://www.Dartlang.org/Dart-vm" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">DartVM</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">AOT方式编译成机器码，例如Flutter App框架（</span><a href="https://flutter.io/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）。</span></p></li></ol><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter在筛选了20多种语言后，最终选择Dart作为开发语言主要有几个原因：</span></strong></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">健全的类型系统，同时支持静态类型检查和运行时类型检查。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">代码体积优化（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;font-size:15px;color:rgb(136,136,136)">Tree Shaking</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">），编译时只保留运行时需要调用的代码（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;font-size:15px;color:rgb(136,136,136)">不允许反射这样的隐式引用</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">），所以庞大的Widgets库不会造成发布体积过大。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">丰富的底层库，Dart自身提供了非常多的库。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">多生代无锁垃圾回收器，专门为UI框架中常见的大量Widgets对象创建和销毁优化。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">跨平台，iOS和Android共用一套代码。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">JIT &amp; AOT运行模式，支持开发时的快速迭代和正式发布后最大程度发挥硬件性能。</span></p></li></ol><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Dart中，有一些重要的基本概念需要了解：</span></strong></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">所有变量的值都是对象，也就是类的实例。甚至数字、函数和</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">null</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">也都是对象，都继承自</span><a href="https://api.Dartlang.org/dev/Dart-core/Object-class.html" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Object</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">类。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">虽然Dart是强类型语言，但是显式变量类型声明是可选的，Dart支持类型推断。如果不想使用类型推断，可以用</span><a href="https://www.Dartlang.org/guides/language/effective-Dart/design#do-annotate-with-object-instead-of-dynamic-to-indicate-any-object-is-allowed" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">dynamic</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">类型。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart支持泛型，</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">List</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"></span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">表示包含int类型的列表，</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">List</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;color:inherit;line-height:inherit"></span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">则表示包含任意类型的列表。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">Dart支持顶层（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;font-size:15px;color:rgb(136,136,136)">top-level</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">）函数和类成员函数，也支持嵌套函数和本地函数。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">Dart支持顶层变量和类成员变量。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart没有public、protected和private这些关键字，使用下划线“_”开头的变量或者函数，表示只在库内可见。参考</span><a href="https://www.Dartlang.org/guides/language/language-tour#libraries-and-visibility" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">库和可见性</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">DartVM的内存分配策略非常简单，创建对象时只需要在现有堆上移动指针，内存增长始终是线形的，省去了查找可用内存段的过程：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [1].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart中类似线程的概念叫做Isolate，每个Isolate之间是无法共享内存的，所以这种分配策略可以让Dart实现无锁的快速分配。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart的垃圾回收也采用了多生代算法，新生代在回收内存时采用了“半空间”算法，触发垃圾回收时Dart会将当前半空间中的“活跃”对象拷贝到备用空间，然后整体释放当前空间的所有内存：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [2].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">整个过程中Dart只需要操作少量的“活跃”对象，大量的没有引用的“死亡”对象则被忽略，这种算法也非常适合Flutter框架中大量Widget重建的场景。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);white-space:normal;font-size:20px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">Flutter Framework</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter的框架部分完全使用Dart语言实现，并且有着清晰的分层架构。分层架构使得我们可以在调用Flutter提供的便捷开发功能（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">预定义的一套高质量Material控件</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）之外，还可以直接调用甚至修改每一层实现（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">因为整个框架都属于“用户空间”的代码</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），这给我们提供了最大程度的自定义能力。Framework底层是Flutter引擎，引擎主要负责图形绘制（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">Skia</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）、文字排版（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">libtxt</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）和提供Dart运行时，引擎全部使用C++实现，Framework层使我们可以用Dart语言调用引擎的强大能力。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">分层架构</span></strong></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:center"><img src="Flutter的原理及美团的实践_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Framework的最底层叫做Foundation，其中定义的大都是非常基础的、提供给其他所有层使用的工具类和方法。绘制库（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">Painting</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）封装了Flutter Engine提供的绘制接口，主要是为了在绘制控件等固定样式的图形时提供更直观、更方便的接口，比如绘制缩放后的位图、绘制文本、插值生成阴影以及在盒子周围绘制边框等等。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Animation是动画相关的类，提供了类似Android系统的ValueAnimator的功能，并且提供了丰富的内置插值器。Gesture提供了手势识别相关的功能，包括触摸事件类定义和多种内置的手势识别器。GestureBinding类是Flutter中处理手势的抽象服务类，继承自BindingBase类。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Binding系列的类在Flutter中充当着类似于Android中的SystemService系列（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">ActivityManager、PackageManager</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）功能，每个Binding类都提供一个服务的单例对象，App最顶层的Binding会包含所有相关的Bingding抽象类。如果使用Flutter提供的控件进行开发，则需要使用WidgetsFlutterBinding，如果不使用Flutter提供的任何控件，而直接调用Render层，则需要使用RenderingFlutterBinding。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter本身支持Android和iOS两个平台，除了性能和开发语言上的“native”化之外，它还提供了两套设计语言的控件实现Material &amp; Cupertino，可以帮助App更好地在不同平台上提供原生的用户体验。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">渲染库（Rendering）</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter的控件树在实际显示时会转换成对应的渲染对象（</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObject</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）树来实现布局和绘制操作。一般情况下，我们只会在调试布局，或者需要使用自定义控件来实现某些特殊效果的时候，才需要考虑渲染对象树的细节。渲染库主要提供的功能类有：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RendererBinding</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">BindingBase</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">with</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">ServicesBinding</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">SchedulerBinding</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">HitTestable</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderObject</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">AbstractNode</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">with</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">DiagnosticableTreeMixin</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">implements</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">HitTestTarget</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBox</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderObject</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderParagraph</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBox</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderImage</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBox</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderFlex</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBox</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">with</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">ContainerRenderObjectMixin</span>&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBox</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">FlexParentData</span>&gt;,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                                        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBoxContainerDefaultsMixin</span>&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderBox</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">FlexParentData</span>&gt;,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                                        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">DebugOverflowIndicatorMixin</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RendererBinding</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">是渲染树和Flutter引擎的胶水层，负责管理帧重绘、窗口尺寸和渲染相关参数变化的监听。</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObject</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">渲染树中所有节点的基类，定义了布局、绘制和合成相关的接口。</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderBox</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">和其三个常用的子类</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderParagraph</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">、</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderImage</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">、</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderFlex</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">则是具体布局和绘制逻辑的实现类。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Flutter界面渲染过程分为三个阶段：布局、绘制、合成，布局和绘制在Flutter框架中完成，合成则交由引擎负责：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [1].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">控件树中的每个控件通过实现</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObjectWidget#createRenderObject(BuildContext context) → RenderObject</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">方法来创建对应的不同类型的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObject</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">对象，组成渲染对象树。因为Flutter极大地简化了布局的逻辑，所以整个布局过程中只需要深度遍历一次：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [2].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">渲染对象树中的每个对象都会在布局过程中接受父对象的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Constraints</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">参数，决定自己的大小，然后父对象就可以按照自己的逻辑决定各个子对象的位置，完成布局过程。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">子对象不存储自己在容器中的位置，所以在它的位置发生改变时并不需要重新布局或者绘制。子对象的位置信息存储在它自己的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">parentData</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">字段中，但是该字段由它的父对象负责维护，自身并不关心该字段的内容。同时也因为这种简单的布局逻辑，Flutter可以在某些节点设置布局边界（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">Relayout boundary</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），即当边界内的任何对象发生重新布局时，不会影响边界外的对象，反之亦然：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [3].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">布局完成后，渲染对象树中的每个节点都有了明确的尺寸和位置，Flutter会把所有对象绘制到不同的图层上：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62)"><img src="Flutter的原理及美团的实践_files/640 [4].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">因为绘制节点时也是深度遍历，可以看到第二个节点在绘制它的背景和前景不得不绘制在不同的图层上，因为第四个节点切换了图层（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">因为“4”节点是一个需要独占一个图层的内容，比如视频</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），而第六个节点也一起绘制到了红色图层。这样会导致第二个节点的前景（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">也就是“5”</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）部分需要重绘时，和它在逻辑上毫不相干但是处于同一图层的第六个节点也必须重绘。为了避免这种情况，Flutter提供了另外一个“重绘边界”的概念：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [5].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在进入和走出重绘边界时，Flutter会强制切换新的图层，这样就可以避免边界内外的互相影响。典型的应用场景就是ScrollView，当滚动内容重绘时，一般情况下其他内容是不需要重绘的。虽然重绘边界可以在任何节点手动设置，但是一般不需要我们来实现，Flutter提供的控件默认会在需要设置的地方自动设置。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">控件库（Widgets）</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter的控件库提供了非常丰富的控件，包括最基本的文本、图片、容器、输入框和动画等等。在Flutter中“一切皆是控件”，通过组合、嵌套不同类型的控件，就可以构建出任意功能、任意复杂度的界面。它包含的最主要的几个类有：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">WidgetsFlutterBinding</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">BindingBase</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">with</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">GestureBinding</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">ServicesBinding</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">SchedulerBinding</span>,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">PaintingBinding</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RendererBinding</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">WidgetsBinding</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">Widget</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">DiagnosticableTree</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">StatelessWidget</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">Widget</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">StatefulWidget</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">Widget</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderObjectWidget</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">Widget</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">Element</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">DiagnosticableTree</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">implements</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">BuildContext</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">StatelessElement</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">ComponentElement</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">StatefulElement</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">ComponentElement</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">abstract</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">RenderObjectElement</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">Element</span> </span>{ ... }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>...<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">基于Flutter控件系统开发的程序都需要使用</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">WidgetsFlutterBinding</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，它是Flutter的控件框架和Flutter引擎的胶水层。</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Widget</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">就是所有控件的基类，它本身所有的属性都是只读的。</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObjectWidget</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">所有的实现类则负责提供配置信息并创建具体的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObjectElement</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">。</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Element</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">是Flutter用来分离控件树和真正的渲染对象的中间层，控件用来描述对应的element属性，控件重建后可能会复用同一个element。</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObjectElement</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">持有真正负责布局、绘制和碰撞测试（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">hit test</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObject</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">对象。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">StatelessWidget</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">和</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">StatefulWidget</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">并不会直接影响</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObject</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">创建，只负责创建对应的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">RenderObjectWidget</span></code><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:#e96900">StatelessElement</span></span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">和</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;color:rgb(233,105,0);line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">StatefulElement</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">也是类似的功能。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">它们之间的关系如下图：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [6].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">如果控件的属性发生了变化（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">因为控件的属性是只读的，所以变化也就意味着重新创建了新的控件树</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），但是其树上每个节点的类型没有变化时，element树和render树可以完全重用原来的对象（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">因为element和render object的属性都是可变的</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [7].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">但是，如果控件树种某个节点的类型发生了变化，则element树和render树中的对应节点也需要重新创建：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [8].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:20px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62)"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(49,188,173);box-sizing:border-box !important;word-wrap:break-word !important">外卖全品类页面实践</span></strong></span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在调研了Flutter的各项特性和实现原理之后，外卖计划灰度上线Flutter版的全品类页面。对于将Flutter页面作为App的一部分这种集成模式，官方并没有提供</span><a href="https://github.com/flutter/flutter/wiki/Add-Flutter-to-existing-apps" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">完善的支持</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，所以我们首先需要了解Flutter是如何编译、打包并且运行起来的。</span></p><h4 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.2em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:18px">Flutter App构建过程</span></strong></h4><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">最简单的Flutter工程至少包含两个文件：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [3].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">运行Flutter程序时需要对应平台的宿主工程，在Android上Flutter通过自动创建一个Gradle项目来生成宿主，在项目目录下执行</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">flutter create .</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，Flutter会创建ios和android两个目录，分别构建对应平台的宿主项目，Android目录内容如下：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [9].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">此Gradle项目中只有一个app module，构建产物即是宿主APK。Flutter在本地运行时默认采用Debug模式，在项目目录执行</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">flutter run</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">即可安装到设备中并自动运行，Debug模式下Flutter使用JIT方式来执行Dart代码，所有的Dart代码都会打包到APK文件中assets目录下，由libflutter.so中提供的DartVM读取并执行：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [10].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">kernel_blob.bin是Flutter引擎的底层接口和Dart语言基本功能部分代码：</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/runtime/bin/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/runtime/lib/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/_http/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/async/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/collection/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/convert/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/core/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/developer/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/html/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/internal/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/io/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/isolate/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/math/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/mirrors/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/profiler/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/typed_data/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>third_party<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/dart/sdk/lib/vmservice/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/lib/ui/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">platform.dill则是实现了页面逻辑的代码，也包括Flutter Framework和其他由pub依赖的库代码：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">flutter_tutorial_2/lib/main.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/widgets/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/services/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/semantics/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/scheduler/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/rendering/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/physics/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/painting/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/gestures/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/foundation/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/packages/flutter/lib/src/animation/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>.pub-cache<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/hosted/pub.flutter-io.cn/collection-1.14.6/lib/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>.pub-cache<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/hosted/pub.flutter-io.cn/meta-1.1.5/lib/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>.pub-cache<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/hosted/pub.flutter-io.cn/shared_preferences-0.4.2/</span>*.dart<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">kernel_blob.bin和platform.dill都是由flutter_tools中的</span><a href="https://github.com/flutter/flutter/blob/master/packages/flutter_tools/lib/src/bundle.dart" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">bundle.dart</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">中调用</span><a href="https://github.com/flutter/flutter/blob/master/packages/flutter_tools/lib/src/compile.dart" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">KernelCompiler</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">生成。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Release模式（</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">flutter run --release</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）下，Flutter会使用Dart的AOT运行模式，编译时将Dart代码转换成ARM指令：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [11].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">kernel_blob.bin和platform.dill都不在打包后的APK中，取代其功能的是(isolate/vm)_snapshot_(data/instr)四个文件。snapshot文件由Flutter SDK中的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">flutter/bin/cache/artifacts/engine/android-arm-release/darwin-x64/gen_snapshot</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">命令生成，vm_snapshot_*是Dart虚拟机运行所需要的数据和代码指令，isolate_snapshot_*则是每个isolate运行所需要的数据和代码指令。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">Flutter App运行机制</strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter构建出的APK在运行时会将所有assets目录下的资源文件解压到App私有文件目录中的flutter目录下，主要包括处理字符编码的icudtl.dat，还有Debug模式的kernel_blob.bin、platform.dill和Release模式下的4个snapshot文件。默认情况下Flutter在</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Application#onCreate</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">时调用</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterMain#startInitialization</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">来启动解压任务，然后在</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterActivityDelegate#onCreate</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">中调用</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterMain#ensureInitializationComplete</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">来等待解压任务结束。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter在Debug模式下使用JIT执行方式，主要是为了支持广受欢迎的热刷新功能：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [12].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">触发热刷新时Flutter会检测发生改变的Dart文件，将其同步到App私有缓存目录下，DartVM加载并且修改对应的类或者方法，重建控件树后立即可以在设备上看到效果。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Release模式下Flutter会直接将snapshot文件映射到内存中执行其中的指令：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [13].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Release模式下，</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterActivityDelegate#onCreate</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">中调用</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterMain#ensureInitializationComplete</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">方法中会将AndroidManifest中设置的snapshot（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0;font-size:15px;color:rgb(136,136,136)">没有设置则使用上面提到的默认值</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">）文件名等运行参数设置到对应的C++同名类对象中，构造</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterNativeView</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">实例时调用</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;letter-spacing:0;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">nativeAttach</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;letter-spacing:0;font-size:15px">来初始化DartVM，运行编译好的Dart代码。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">打包Android Library</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">了解Flutter项目的构建和运行机制后，我们就可以按照其需求打包成AAR然后集成到现有原生App中了。首先在andorid/app/build.gradle中修改：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [14].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:inherit;letter-spacing:0">简单修改后我们就可以使用Android Studio或者Gradle命令行工具将Flutter代码打包到aar中了。Flutter运行时所需要的资源都会包含在aar中，将其发布到maven服务器或者本地maven仓库后，就可以在原生App项目中引用。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">但这只是集成的第一步，为了让Flutter页面无缝衔接到外卖App中，我们需要做的还有很多。</span></p><h4 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.2em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:18px">图片资源复用</span></strong></h4><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter默认将所有的图片资源文件打包到assets目录下，但是我们并不是用Flutter开发全新的页面，图片资源原来都会按照Android的规范放在各个drawable目录，即使是全新的页面也会有很多图片资源复用的场景，所以在assets目录下新增图片资源并不合适。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter官方并没有提供直接调用drawable目录下的图片资源的途径，毕竟drawable这类文件的处理会涉及大量的Android平台相关的逻辑（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">屏幕密度、系统版本、语言等等</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），assets目录文件的读取操作也在引擎内部使用C++实现，在Dart层面实现读取drawable文件的功能比较困难。Flutter在处理assets目录中的文件时也支持添加</span><a href="https://flutter.io/assets-and-images/#resolution-aware" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">多倍率的图片资源</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，并能够在使用时</span><a href="https://docs.flutter.io/flutter/widgets/Image/Image.asset.html" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">自动选择</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，但是Flutter要求每个图片必须提供1x图，然后才会识别到对应的其他倍率目录下的图片：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">flutter:</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  assets:<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    - images/cat.png<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    - images/2x/cat.png<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    - images/3.5x/cat.png<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">new</span> Image.asset(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'images/cat.png'</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">这样配置后，才能正确地在不同分辨率的设备上使用对应密度的图片。但是为了减小APK包体积我们的位图资源一般只提供常用的2x分辨率，其他分辨率的设备会在运行时自动缩放到对应大小。针对这种特殊的情况，我们在不增加包体积的前提下，同样提供了和原生App一样的能力：</span></p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px">在调用Flutter页面之前将指定的图片资源按照设备屏幕密度缩放，并存储在App私有目录下。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter中使用时通过自定义的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">WMImage</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">控件来加载，实际是通过转换成FileImage并自动设置scale为devicePixelRatio来加载。</span></p></li></ol><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">这样就可以同时解决APK包大小和图片资源缺失1x图的问题。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">Flutter和原生代码的通信</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">我们只用Flutter实现了一个页面，现有的大量逻辑都是用Java实现，在运行时会有许多场景必须使用原生应用中的逻辑和功能，例如网络请求，我们统一的网络库会在每个网络请求中添加许多通用参数，也会负责成功率等指标的监控，还有异常上报，我们需要在捕获到关键异常时将其堆栈和环境信息上报到服务器。这些功能不太可能立即使用Dart实现一套出来，所以我们需要使用Dart提供的Platform Channel功能来实现Dart→Java之间的互相调用。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">以网络请求为例，我们在Dart中定义一个</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">MethodChannel</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">对象：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'dart:async'</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'package:flutter/services.dart'</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">const</span> MethodChannel _channel = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">const</span> MethodChannel(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'com.sankuai.waimai/network'</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Future&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">Map</span>&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">String</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">dynamic</span>&gt;&gt; post(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">String</span> path, [<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">Map</span>&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">String</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">dynamic</span>&gt; form]) <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">async</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span> _channel.invokeMethod(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;post&quot;</span>, {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'path'</span>: path, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'body'</span>: form}).then((result) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">new</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">Map</span>&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">String</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">dynamic</span>&gt;.from(result);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }).catchError((_) =&gt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">null</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">然后在Java端实现相同名称的MethodChannel：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">FlutterNetworkPlugin</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">implements</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">MethodChannel</span>.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">MethodCallHandler</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">private</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">static</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">final</span> String CHANNEL_NAME = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;com.sankuai.waimai/network&quot;</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">void</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">onMethodCall</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">(MethodCall methodCall, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">final</span> MethodChannel.Result result)</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">switch</span> (methodCall.method) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">case</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;post&quot;</span>:<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                RetrofitManager.performRequest(post((String) methodCall.argument(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;path&quot;</span>), (Map) methodCall.argument(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;body&quot;</span>)),<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">new</span> DefaultSubscriber&lt;Map&gt;() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">void</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">onError</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">(Throwable e)</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                                result.error(e.getClass().getCanonicalName(), e.getMessage(), <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">null</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">void</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">onNext</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">(Map stringBaseResponse)</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                                result.success(stringBaseResponse);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                        }, tag);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">break</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">default</span>:<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                result.notImplemented();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">break</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在Flutter页面中注册后，调用post方法就可以调用对应的Java实现：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">loadData: (callback) async {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    Map&lt;String, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">dynamic</span>&gt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">data</span> = await post(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;home/groups&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">data</span> == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">null</span>) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      callback(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">false</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    _data = AllCategoryResponse.fromJson(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">data</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (_data == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">null</span> || _data.code != <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      callback(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">false</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    callback(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">true</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }),<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">SO库兼容性</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter官方只提供了四种CPU架构的SO库：armeabi-v7a、arm64-v8a、x86和x86-64，其中x86系列只支持Debug模式，但是外卖使用的大量SDK都只提供了armeabi架构的库。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">虽然我们可以通过修改引擎</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">src</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">根目录和</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">third_party/dart</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">目录下</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">build/config/arm.gni</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">，</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">third_party/skia</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">目录下的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">BUILD.gn</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">等配置文件来编译出armeabi版本的Flutter引擎，但是实际上市面上绝大部分设备都已经支持armeabi-v7a，其提供的硬件加速浮点运算指令可以大大提高Flutter的运行速度，在灰度阶段我们可以主动屏蔽掉不支持armeabi-v7a的设备，直接使用armeabi-v7a版本的引擎。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">做到这点我们首先需要修改Flutter提供的引擎，在Flutter安装目录下的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">bin/cache/artifacts/engine</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">下有Flutter下载的所有平台的引擎：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [15].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">我们只需要修改android-arm、android-arm-profile和android-arm-release下的flutter.jar，将其中的lib/armeabi-v7a/libflutter.so移动到lib/armeabi/libflutter.so即可：</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">cd</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(98,151,85);word-wrap:inherit !important;word-break:inherit !important">$FLUTTER_ROOT</span>/bin/cache/artifacts/engine<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">for</span> arch <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">in</span> android-arm android-arm-profile android-arm-release; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">do</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">pushd</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(98,151,85);word-wrap:inherit !important;word-break:inherit !important">$arch</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  cp flutter.jar flutter-armeabi-v7a.jar <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important"># 备份</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  unzip flutter.jar lib/armeabi-v7a/libflutter.so<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  mv lib/armeabi-v7a lib/armeabi<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  zip -d flutter.jar lib/armeabi-v7a/libflutter.so<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  zip flutter.jar lib/armeabi/libflutter.so<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">popd</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">done</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">这样在打包后Flutter的SO库就会打到APK的lib/armeabi目录中。在运行时如果设备不支持armeabi-v7a可能会崩溃，所以我们需要主动识别并屏蔽掉这类设备，在Android上判断设备是否支持armeabi-v7a也很简单：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">boolean</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">isARMv7Compatible</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">()</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">try</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (SDK_INT &gt;= LOLLIPOP) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">for</span> (String abi : Build.SUPPORTED_32_BIT_ABIS) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (abi.equals(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;armeabi-v7a&quot;</span>)) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">true</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        } <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">else</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (CPU_ABI.equals(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;armeabi-v7a&quot;</span>) || CPU_ABI.equals(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;arm64-v8a&quot;</span>)) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">true</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    } <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">catch</span> (Throwable e) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        L.wtf(e);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">false</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">灰度和自动降级策略</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Horn是一个美团内部的跨平台配置下发SDK，使用Horn可以很方便地指定灰度开关：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [16].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在条件配置页面定义一系列条件，然后在参数配置页面添加新的字段flutter即可：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [17].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">因为在客户端做了ABI兜底策略，所以这里定义的ABI规则并没有启用。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter目前仍然处于Beta阶段，灰度过程中难免发生崩溃现象，观察到崩溃后再针对机型或者设备ID来做降级虽然可以尽量降低影响，但是我们可以做到更迅速。外卖的Crash采集SDK同时也支持JNI Crash的收集，我们专门为Flutter注册了崩溃监听器，一旦采集到Flutter相关的JNI Crash就立即停止该设备的Flutter功能，启动Flutter之前会先判断</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FLUTTER_NATIVE_CRASH_FLAG</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">文件是否存在，如果存在则表示该设备发生过Flutter相关的崩溃，很有可能是不兼容导致的问题，当前版本周期内在该设备上就不再使用Flutter功能。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">除了崩溃以外，Flutter页面中的Dart代码也可能发生异常，例如服务器下发数据格式错误导致解析失败等等，Dart也提供了全局的异常捕获功能：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">import</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'package:wm_app/plugins/wm_metrics.dart'</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">void</span> main() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  runZoned(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">()</span> =&gt;</span> runApp(WaimaiApp()), <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">onError</span>: (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">Object</span> obj, StackTrace stack) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    uploadException(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;$obj\n$stack&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">这样我们就可以实现全方位的异常监控和完善的降级策略，最大程度减少灰度时可能对用户带来的影响。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">分析崩溃堆栈和异常数据</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter的引擎部分全部使用C/C++实现，为了减少包大小，所有的SO库在发布时都会去除符号表信息。和其他的JNI崩溃堆栈一样，我们上报的堆栈信息中只能看到内存地址偏移量等信息：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Build <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">fingerprint:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'Rock/odin/odin:7.1.1/NMF26F/1527007828:user/dev-keys'</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">Revision:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'0'</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">Author:</span> collect by <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'libunwind'</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">ABI:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'arm64-v8a'</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">pid:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">28937</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">tid:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">29314</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">name:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>.ui  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">&gt;&gt;&gt; </span>com.sankuai.meituan.takeoutnew &lt;&lt;&lt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>signal <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">11</span> (SIGSEGV), code <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span> (SEGV_MAPERR), fault addr <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0x0</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">backtrace:</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    r<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">00000000</span>  r1 ffffffff  r2 c0e7cb2c  r3 c15affcc<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    r4 c15aff88  r5 c0e7cb2c  r6 c15aff9<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>  r7 bf56780<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    r8 c0e7cc58  r9 <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">00000000</span>  sl c15aff0c  fp <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">00000001</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    ip <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">80000000</span>  sp c0e7cb28  lr c11a03f9  pc c1254088  cpsr <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">200</span>c003<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#00 pc 002d7088  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#01 pc 002d5a23  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#02 pc 002d95b5  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#03 pc 002d9f33  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#04 pc 00068e6d  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#05 pc 00067da5  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#06 pc 00067d5f  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#07 pc 003b1877  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#08 pc 003b1db5  /data/app/com.sankuai.meituan.takeoutnew-1/lib/arm/libflutter.so</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">#09 pc 0000241c  /data/data/com.sankuai.meituan.takeoutnew/app_flutter/vm_snapshot_instr</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">单纯这些信息很难定位问题，所以我们需要使用NDK提供的ndk-stack来解析出具体的代码位置：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">ndk-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">stack</span> -sym PATH [-dump PATH]<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Symbolizes the <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">stack</span> trace from an Android native crash.<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  -sym PATH   sets the root directory <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">for</span> symbols<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  -<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">dump PATH  sets the file containing the crash <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">dump</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">default</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">stdin</span>)</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">如果使用了定制过的引擎，必须使用</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">engine/src/out/android-release</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">下编译出的libflutter.so文件。一般情况下我们使用的是官方版本的引擎，可以在</span><a href="https://console.cloud.google.com/storage/browser/flutter_infra/flutter/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">flutter_infra</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">页面直接下载带有符号表的SO文件，根据打包时使用的Flutter工具版本下载对应的文件即可。比如0.4.4 beta版本：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">$ flutter --version <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important"># version命令可以看到Engine对应的版本 06afdfe54e</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Flutter <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0.4.4</span> • channel beta • https:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">//github.com/flutter/flutter.git</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Framework • revision f9bb4289e9 (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">5</span> weeks ago) • <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">2018-05-11</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">21</span>:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">44</span>:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">54</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">-0700</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Engine • revision <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">06</span>afdfe54e<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Tools • Dart <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">2.0.0</span>-dev<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">.54.0</span>.flutter<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">-46</span>ab040e58<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>$ cat flutter/bin/internal/engine.version <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important"># flutter安装目录下的engine.version文件也可以看到完整的版本信息 06afdfe54ebef9168a90ca00a6721c2d36e6aafa</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">06</span>afdfe54ebef9168a90ca00a6721c2d36e6aafa<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">拿到引擎版本号后在 </span><a href="https://console.cloud.google.com/storage/browser/flutter_infra/flutter/06afdfe54ebef9168a90ca00a6721c2d36e6aafa/" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">https://console.cloud.google.com/storage/browser/flutter_infra/flutter/06afdfe54ebef9168a90ca00a6721c2d36e6aafa/</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"> 看到该版本对应的所有构建产物，下载android-arm-release、android-arm64-release和android-x86目录下的symbols.zip，并存放到对应目录：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [4].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">执行ndk-stack即可看到实际发生崩溃的代码和具体行数信息：</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">ndk-stack -sym flutter-production-syms/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">06</span>afdfe54ebef9168a90ca00a6721c2d36e6aafa/armeabi-v7a -dump flutter_jni_crash.txt <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>********** Crash dump: **********<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Build fingerprint: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'Rock/odin/odin:7.1.1/NMF26F/1527007828:user/dev-keys'</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>pid: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">28937</span>, tid: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">29314</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">name</span>: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>.ui  &gt;&gt;&gt; com.sankuai.meituan.takeoutnew &lt;&lt;&lt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>signal <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">11</span> (SIGSEGV), code <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span> (SEGV_MAPERR), fault addr <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>x0<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#00</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">002</span>d7088  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine minikin::WordBreaker::setText(unsigned short <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">const</span>*, unsigned int) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../flutter/third_party/txt/src/minikin/WordBreaker.cpp:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">55</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#01</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">002</span>d5a23  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine minikin::LineBreaker::setText() at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../flutter/third_party/txt/src/minikin/LineBreaker.cpp:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">74</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#02</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">002</span>d95b5  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine txt::Paragraph::ComputeLineBreaks() at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../flutter/third_party/txt/src/txt/paragraph.cc:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">273</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#03</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">002</span>d9f33  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine txt::Paragraph::Layout(double, bool) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../flutter/third_party/txt/src/txt/paragraph.cc:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">428</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#04</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">00068</span>e6d  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine blink::ParagraphImplTxt::layout(double) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../flutter/lib/ui/text/paragraph_impl_txt.cc:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">54</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#05</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">00067</span>da5  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine tonic::DartDispatcher&lt;tonic::IndicesHolder&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>u&gt;, void (blink::Paragraph::*)(double)&gt;::Dispatch(void (blink::Paragraph::*)(double)) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../topaz/lib/tonic/dart_args.h:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">150</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#06</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">00067</span>d5f  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine void tonic::DartCall&lt;void (blink::Paragraph::*)(double)&gt;(void (blink::Paragraph::*)(double), _Dart_NativeArguments*) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../topaz/lib/tonic/dart_args.h:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">198</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#07</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">003</span>b1877  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine dart::NativeEntry::AutoScopeNativeCallWrapperNoStackCheck(_Dart_NativeArguments*, void <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">(*)(_Dart_NativeArguments*)</span>) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../third_party/dart/runtime/vm/native_entry.cc:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">198</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#08</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">003</span>b1db5  /data/app/com.sankuai.meituan.takeoutnew-<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>/lib/arm/libflutter.so: Routine dart::NativeEntry::LinkNativeCall(_Dart_NativeArguments*) at /b/build/slave/Linux_Engine/build/src/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">out</span>/android_release/../../third_party/dart/runtime/vm/native_entry.cc:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">348</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>Stack frame <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#09</span> pc <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0000241</span>c  /data/data/com.sankuai.meituan.takeoutnew/app_flutter/vm_snapshot_instr<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Dart异常则比较简单，默认情况下Dart代码在编译成机器码时并没有去除符号表信息，所以Dart的异常堆栈本身就可以标识真实发生异常的代码文件和行数信息：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FlutterException: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">type</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'_InternalLinkedHashMap&lt;dynamic, dynamic&gt;'</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">is</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">not</span> a subtype <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">of</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">type</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">'num'</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">in</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">type</span> cast<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#0</span>      _$CategoryGroupFromJson (package:wm_app/lib/all_category/model/category_model.g.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">29</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#1</span>      new CategoryGroup.fromJson (package:wm_app/all_category/model/category_model.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">51</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#2</span>      _$CategoryListDataFromJson.&lt;anonymous closure&gt; (package:wm_app/lib/all_category/model/category_model.g.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">5</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#3</span>      MappedListIterable.elementAt (dart:_internal/iterable.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">414</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#4</span>      ListIterable.toList (dart:_internal/iterable.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">219</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#5</span>      _$CategoryListDataFromJson (package:wm_app/lib/all_category/model/category_model.g.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">6</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#6</span>      new CategoryListData.fromJson (package:wm_app/all_category/model/category_model.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">19</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#7</span>      _$AllCategoryResponseFromJson (package:wm_app/lib/all_category/model/category_model.g.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">19</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#8</span>      new AllCategoryResponse.fromJson (package:wm_app/all_category/model/category_model.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">29</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#9</span>      AllCategoryPage.build.&lt;anonymous closure&gt; (package:wm_app/all_category/category_page.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">46</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>&lt;asynchronous suspension&gt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#10</span>     _WaimaiLoadingState.build (package:wm_app/all_category/widgets/progressive_loading_page.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">51</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#11</span>     StatefulElement.build (package:flutter/src/widgets/framework.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">3730</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#12</span>     ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">3642</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#13</span>     Element.rebuild (package:flutter/src/widgets/framework.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">3495</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#14</span>     BuildOwner.buildScope (package:flutter/src/widgets/framework.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">2242</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#15</span>     _WidgetsFlutterBinding&amp;BindingBase&amp;GestureBinding&amp;ServicesBinding&amp;SchedulerBinding&amp;PaintingBinding&amp;RendererBinding&amp;WidgetsBinding.drawFrame (package:flutter/src/widgets/binding.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">626</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#16</span>     _WidgetsFlutterBinding&amp;BindingBase&amp;GestureBinding&amp;ServicesBinding&amp;SchedulerBinding&amp;PaintingBinding&amp;RendererBinding._handlePersistentFrameCallback (package:flutter/src/rendering/binding.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">208</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#17</span>     _WidgetsFlutterBinding&amp;BindingBase&amp;GestureBinding&amp;ServicesBinding&amp;SchedulerBinding._invokeFrameCallback (package:flutter/src/scheduler/binding.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">990</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#18</span>     _WidgetsFlutterBinding&amp;BindingBase&amp;GestureBinding&amp;ServicesBinding&amp;SchedulerBinding.handleDrawFrame (package:flutter/src/scheduler/binding.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">930</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#19</span>     _WidgetsFlutterBinding&amp;BindingBase&amp;GestureBinding&amp;ServicesBinding&amp;SchedulerBinding._handleDrawFrame (package:flutter/src/scheduler/binding.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">842</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#20</span>     _rootRun (dart:async/zone.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1126</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#21</span>     _CustomZone.run (dart:async/zone.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1023</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#22</span>     _CustomZone.runGuarded (dart:async/zone.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">925</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#23</span>     _invoke (dart:ui/hooks.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">122</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">#24</span>     _drawFrame (dart:ui/hooks.dart:<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">109</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:18px">Flutter和原生性能对比</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">虽然使用原生实现（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">左</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）和Flutter实现（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">右</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）的全品类页面在实际使用过程中几乎分辨不出来：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [18].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">但是我们还需要在性能方面有一个比较明确的数据对比。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">我们最关心的两个页面性能指标就是页面加载时间和页面渲染速度。测试页面加载速度可以直接使用美团内部的Metrics性能测试工具，我们将页面Activity对象创建作为页面加载的开始时间，页面API数据返回作为页面加载结束时间。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">从两个实现的页面分别启动400多次的数据中可以看到，原生实现（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">AllCategoryActivity</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）的加载时间中位数为210ms，Flutter实现（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">FlutterCategoryActivity</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）的加载时间中位数为231ms。考虑到目前我们还没有针对FlutterView做缓存和重用，FlutterView每次创建都需要初始化整个Flutter环境并加载相关代码，多出的20ms还在预期范围内：</span></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:center"><img src="Flutter的原理及美团的实践_files/640 [19].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:center"><img src="Flutter的原理及美团的实践_files/640 [20].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">因为Flutter的UI逻辑和绘制代码都不在主线程执行，Metrics原有的FPS功能无法统计到Flutter页面的真实情况，我们需要用特殊方法来对比两种实现的渲染效率。Android原生实现的界面渲染耗时使用系统提供的</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">FrameMetrics</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">接口进行监控：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">class</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">AllCategoryActivity</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">extends</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">WmBaseActivity</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">protected</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">void</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">onCreate</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">(Bundle savedInstanceState)</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            getWindow().addOnFrameMetricsAvailableListener(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">new</span> Window.OnFrameMetricsAvailableListener() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                List&lt;Integer&gt; frameDurations = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">new</span> ArrayList&lt;&gt;(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">100</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">void</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(165,218,45);word-wrap:inherit !important;word-break:inherit !important">onFrameMetricsAvailable</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(255,152,35);word-wrap:inherit !important;word-break:inherit !important">(Window window, FrameMetrics frameMetrics, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">int</span> dropCountSinceLastInvocation)</span> </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                    frameDurations.add((<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">int</span>) (frameMetrics.getMetric(TOTAL_DURATION) / <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1000000</span>));<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (frameDurations.size() == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">100</span>) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                        getWindow().removeOnFrameMetricsAvailableListener(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">this</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                        L.w(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;AllCategory&quot;</span>, Arrays.toString(frameDurations.toArray()));<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>            }, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">new</span> Handler(Looper.getMainLooper()));<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">super</span>.onCreate(savedInstanceState);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(128,128,128);word-wrap:inherit !important;word-break:inherit !important">// ...</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter在Framework层只能取到每帧中UI操作的CPU耗时，GPU操作在Flutter引擎内部实现，所以要修改引擎来监控完整的渲染耗时，在Flutter引擎目录下</span><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;padding:2px 4px;border-radius:4px;margin-right:2px;margin-left:2px;color:rgb(233,105,0);background:rgb(248,248,248)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">src/flutter/shell/common/rasterizer.cc</span></code><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">文件中添加：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">void</span> Rasterizer::DoDraw(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">std</span>::<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">unique_ptr</span>&lt;flow::LayerTree&gt; layer_tree) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (!layer_tree || !surface_) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">return</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (DrawToSurface(*layer_tree)) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    last_layer_tree_ = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">std</span>::move(layer_tree);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">#<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> defined(OS_ANDROID)</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">if</span> (compositor_context_-&gt;frame_count().count() == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">101</span>) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">std</span>::<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">ostringstream</span> os;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      os &lt;&lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;[&quot;</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">const</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">std</span>::<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">vector</span>&lt;TimeDelta&gt; &amp;engine_laps = compositor_context_-&gt;engine_time().Laps();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">const</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">std</span>::<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">vector</span>&lt;TimeDelta&gt; &amp;frame_laps = compositor_context_-&gt;frame_time().Laps();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">size_t</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">auto</span> engine_iter = engine_laps.begin() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>, frame_iter = frame_laps.begin() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>           i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">101</span> &amp;&amp; engine_iter != engine_laps.end(); i++, engine_iter++, frame_iter++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>        os &lt;&lt; (*engine_iter + *frame_iter).ToMilliseconds() &lt;&lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;,&quot;</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      os &lt;&lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;]&quot;</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      __android_log_write(ANDROID_LOG_WARN, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(238,220,112);word-wrap:inherit !important;word-break:inherit !important">&quot;AllCategory&quot;</span>, os.str().c_str());<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(91,218,237);word-wrap:inherit !important;word-break:inherit !important">#<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">endif</span></span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">即可得到每帧绘制时真正消耗的时间。测试时我们将两种实现的页面分别打开100次，每次打开后执行两次滚动操作，使其绘制100帧，将这100帧的每帧耗时记录下来：</span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;font-size:inherit;line-height:inherit;margin-top:0;margin-bottom:0;padding:0"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0;font-family:Consolas,Inconsolata,Courier,monospace;border-radius:0;color:rgb(169,183,198);background:rgb(40,43,46);padding:0.5em;display:block !important;word-wrap:normal !important;word-break:normal !important;overflow:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">for</span> (( i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">100</span>; i++ )); <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">do</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    openWMPage allcategory<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    sleep <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    adb shell <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">input</span> swipe <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">500</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1000</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">500</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">300</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">900</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    adb shell <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">input</span> swipe <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">500</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">1000</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">500</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">300</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">900</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    adb shell <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(248,35,117);word-wrap:inherit !important;word-break:inherit !important">input</span> keyevent <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:15px;line-height:inherit;color:rgb(174,135,250);word-wrap:inherit !important;word-break:inherit !important">4</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>done<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">将测试结果的100次启动中每帧耗时取平均値，得到每帧平均耗时情况（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">横坐标轴为帧序列，纵坐标轴为每帧耗时，单位为毫秒</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><img src="Flutter的原理及美团的实践_files/640 [21].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Android原生实现和Flutter版本都会在页面打开的前5帧超过16ms，刚打开页面时原生实现需要创建大量View，Flutter也需要创建大量Widget，后续帧中可以重用大部分控件和渲染节点（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">原生的RenderNode和Flutter的RenderObject</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），所以启动时的布局和渲染操作都是最耗时的。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">10000帧（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">100次×100帧每次</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）中Android原生总平均値为10.21ms，Flutter总平均値为12.28ms，Android原生实现总丢帧数851帧8.51%，Flutter总丢帧987帧9.87%。在原生实现的触摸事件处理和过度绘制充分优化的前提下，Flutter完全可以媲美原生的性能。</span></p><h2 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.4em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:inherit;line-height:inherit;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);white-space:normal;font-size:20px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">总结</span></strong></span></h2><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter目前仍处于早期阶段，也还没有发布正式的Release版本，不过我们看到Flutter团队一直在为这一目标而努力。虽然Flutter的开发生态不如Android和iOS原生应用那么成熟，许多常用的复杂控件还需要自己实现，有的甚至会比较困难（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">比如官方尚未提供的</span><a href="https://github.com/flutter/flutter/issues/12319" style="margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:inherit;color:rgb(30,107,184);font-size:15px;text-decoration:underline"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">ListView.scrollTo(index)</span></a><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">功能</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">），但是在高性能和跨平台方面Flutter在众多UI框架中还是有很大优势的。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">开发Flutter应用只能使用Dart语言，Dart本身既有静态语言的特性，也支持动态语言的部分特性，对于Java和JavaScript开发者来说门槛都不高，3-5天可以快速上手，大约1-2周可以熟练掌握。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">在开发全品类页面的Flutter版本时我们也深刻体会到了Dart语言的魅力，Dart的语言特性使得Flutter的界面构建过程也比Android原生的XML+JAVA更直观，代码量也从原来的900多行减少到500多行（</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">排除掉引用的公共组件</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">）。Flutter页面集成到App后APK体积至少会增加5.5MB，其中包括3.3MB的SO库文件和2.2MB的ICU数据文件，此外业务代码1300行编译产物的大小有2MB左右。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">Flutter本身的特性适合追求iOS和Android跨平台的一致体验，追求高性能的UI交互效果的场景，不适合追求动态化部署的场景。Flutter在Android上已经可以实现动态化部署，但是由于Apple的限制，在iOS上实现动态化部署非常困难，Flutter团队也正在和Apple积极沟通。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">美团外卖大前端团队将来也会继续在更多场景下使用Flutter实现，并且将实践过程中发现和修复的问题积极反馈到开源社区，帮助Flutter更好地发展。如果你也对Flutter感兴趣，欢迎加入我们。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px">如果有问题，可以扫描下方二维码，加入美团Flutter俱乐部，跟作者直接进行交流。</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><img src="Flutter的原理及美团的实践_files/640 [22].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(62,62,62);text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:15px">如群已满，加美团小助手微信 MTDPtech，回复【Flutter】，小助手拉你入群 </span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;margin-top:1.5em;margin-bottom:1.5em;line-height:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">参考资料</strong></span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px;color:rgb(62,62,62);line-height:1.6;letter-spacing:0"><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://flutter-io.cn/" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter中文官网</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://flutter.io/technical-overview/" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter框架技术概览</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://pub.Dartlang.org/flutter/" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter插件仓库</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://www.Dartlang.org/guides/language/language-tour" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">A Tour of the Dart Language</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://www.Dartlang.org/guides/libraries/library-tour" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">A Tour of the Dart Libraries</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://hackernoon.com/why-flutter-uses-Dart-dd635a054ebf" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Why Flutter Uses Dart</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://flutter.io/layout/" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter Layout机制简介</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://www.youtube.com/watch?v=dkyY9WCGMi0" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter's Layered Design</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://www.youtube.com/watch?v=UUfXWzp0-DU" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter's Rendering Pipeline</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://confengine.com/yow-2017-brisbane/proposal/5426/flutter-the-best-way-to-build-for-mobile" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter: The Best Way to Build for Mobile?@GOTO conf</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/engine/wiki" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter Engine</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://flutter.io/platform-channels/" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Writing custom platform-specific code with platform channels</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/engine/wiki/Flutter-Engine-Operation-in-AOT-Mode" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter Engine Operation in AOT Mode</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/flutter/wiki/Flutter%27s-modes" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Flutter's modes</a></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><a href="https://github.com/flutter/engine/wiki/Symbolicating-production-crash-stacks" style="margin:0;padding:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:inherit;line-height:inherit;color:rgb(30,107,184)">Symbolicating-production-crash-stacks</a></p></li></ol></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(62,62,62);white-space:normal;font-size:20px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">作者简介</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:inherit;font-size:inherit;line-height:inherit;margin-top:1.5em;margin-bottom:1.5em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">少杰，美团高级工程师，2017年加入美团，目前主要负责外卖App监控等基础设施建设工作。</span></p></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal;text-align:center"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px;color:rgb(136,136,136)">----------  END  ----------</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">招聘信息</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px;white-space:normal;color:rgb(62,62,62);background-color:rgb(255,255,255);text-align:justify;line-height:27.4286px;box-sizing:border-box !important;overflow-wrap:break-word !important"><div style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding:20px 20px 15px;width:670px;text-decoration:inherit;background-color:rgb(245,245,245);overflow-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px">美团外卖诚招Android、iOS、FE高级/资深工程师和技术专家，Base北京、上海、成都，欢迎有兴趣的同学投递简历到 wukai05#meituan.com。</span></p></div></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)">也许你还想看</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173)"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173);font-size:14px;text-decoration:underline"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;mid=2651748157&amp;idx=1&amp;sn=d4a6e88018c59f21f5942617c2e5067e&amp;chksm=bd12ae708a6527662bf3ddb493309065e66a6d98c0c5887f27a9aeec7d56fe4445b2e58dae41&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">Picasso：开启大前端的未来</a><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(49,188,173);font-size:14px;text-decoration:underline"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;mid=2651748425&amp;idx=1&amp;sn=8a54c5971b9b1c33224459c6f3217899&amp;chksm=bd12a1048a652812eec906f7637c357e2315e62a403e666f668e0f2e61a0503e18da5acea3fd&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important" target="_blank">美团客户端响应式框架EasyReact开源啦</a><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;mid=2651748367&amp;idx=1&amp;sn=91fec5329baebd9e4089e5209b3b43ae&amp;chksm=bd12a1428a6528547b52d0ab9267ae6bdf5fd62a9d85686d334ab0856fc0b755a9953fc0775f&amp;scene=21#wechat_redirect" style="margin:0;padding:0;color:#576b95;-webkit-tap-highlight-color:rgba(0,0,0,0);max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;text-decoration:underline" target="_blank"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px">MCI：大众点评千人移动研发团队怎样做持续集成？</span></a><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:normal"><img src="Flutter的原理及美团的实践_files/640 [23].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p></div></div><ul style="margin:0;padding:0"></ul></div></div></div></span>
</div></body></html> 