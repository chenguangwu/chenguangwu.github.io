<html>
<head>
  <title>面试-线程池的成长之路</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5556"/>
<h1>面试-线程池的成长之路</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/5/27 23:13</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&mid=2247484869&idx=1&sn=d5ded7f08efe2e1d1682bea7aa1f8263&chksm=ebf6ddbadc8154acb7e52e2f35b1b6bcad63655748863bd09f9c1cf37f3141e4e9bc18acba87&mpshare=1&scene=1&srcid=0527eGH5EyJZl1ypHQIGCDLf#rd"><i>http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484869&amp;idx=1&amp;sn=d5ded7f08efe2e1d1682bea7aa1f8263&amp;chksm=ebf6ddbadc8154acb7e52e2f35b1b6bcad63655748863bd09f9c1cf37f3141e4e9bc18acba87&amp;mpshare=1&amp;scene=1&amp;srcid=0527eGH5EyJZl1ypHQIGCDLf#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="background-color:#fff;padding:20px 16px 12px;margin:0"><div style="margin:0;padding:0"><h2 style="font-weight:400;margin:0;padding:0;font-size:22px;line-height:1.4;margin-bottom:14px"></h2><div style="margin:0;padding:0;margin-bottom:22px;line-height:20px;font-size:0"><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;color:rgba(0,0,0,0.3)">尹吉欢 投稿</span><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;position:relative"><a style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)"> 纯洁的微笑 </a></span><em style="padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;color:rgba(0,0,0,0.3)"></em></div><div lang="=&quot;en&quot;" style="margin:0;padding:0;overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify"><h1 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:24px"></span></strong></span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><img src="面试-线程池的成长之路_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></p><h1 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:24px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></span></h1><h1 style="font-weight:400;font-size:16px;margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:24px">背景</span></strong></span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">相信大家在面试过程中遇到面试官问线程的很多，线程过后就是线程池了。从易到难，都是这么个过程，还有就是确实很多人在工作中接触线程池比较少，最多的也就是创建一个然后往里面提交线程，对于一些经验很丰富的面试官来说，一下就可以问出很多线程池相关的问题，与其被问的晕头转向，还不如好好学习。此时不努力更待何时。</p><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">什么是线程池？</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">线程池是一种多线程处理形式，处理过程中将任务提交到线程池，任务的执行交由线程池来管理。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">如果每个请求都创建一个线程去处理，那么服务器的资源很快就会被耗尽，使用线程池可以减少创建和销毁线程的次数，每个工作线程都可以被重复利用，可执行多个任务。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">如果用生活中的列子来说明，我们可以把线程池当做一个客服团队，如果同时有1000个人打电话进行咨询，按照正常的逻辑那就是需要1000个客服接听电话，服务客户。现实往往需要考虑到很多层面的东西，比如：资源够不够，招这么多人需要费用比较多。正常的做法就是招100个人成立一个客服中心，当有电话进来后分配没有接听的客服进行服务，如果超出了100个人同时咨询的话，提示客户等待，稍后处理，等有客服空出来就可以继续服务下一个客户，这样才能达到一个资源的合理利用，实现效益的最大化。</p><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">Java中的线程池种类</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">1. newSingleThreadExecutor</strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">创建方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ExecutorService</span> pool = Executors.newSingleThreadExecutor();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">一个单线程的线程池。这个线程池只有一个线程在工作，也就是相当于单线程串行执行所有任务。如果这个唯一的线程因为异常结束，那么会有一个新的线程来替代它。此线程池保证所有任务的执行顺序按照任务的提交顺序执行。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">使用方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.ExecutorService;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.Executors;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main(String[] args)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newSingleThreadExecutor();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                System.out.println(Thread.currentThread().getName() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;\t开始发车啦....&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">输出结果如下：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important">pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">从输出的结果我们可以看出，一直只有一个线程在运行。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">2.<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">newFixedThreadPool</strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">创建方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ExecutorService</span> pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">创建固定大小的线程池。每次提交一个任务就创建一个线程，直到线程达到线程池的最大大小。线程池的大小一旦达到最大值就会保持不变，如果某个线程因为执行异常而结束，那么线程池会补充一个新线程。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">使用方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.ExecutorService;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.Executors;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main(String[] args)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                System.out.println(Thread.currentThread().getName() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;\t开始发车啦....&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">输出结果如下：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important">pool-1-thread-1    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-4    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-3    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-2    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-6    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-7    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-5    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-8    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-9    开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool-1-thread-10 开始发车啦....<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">3. newCachedThreadPool</strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">创建方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ExecutorService</span> pool = Executors.newCachedThreadPool();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">创建一个可缓存的线程池。如果线程池的大小超过了处理任务所需要的线程，那么就会回收部分空闲的线程，当任务数增加时，此线程池又添加新线程来处理任务。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">使用方式如上2所示。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">4.<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">newScheduledThreadPool</strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">创建方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ScheduledExecutorService</span> pool = Executors.newScheduledThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">此线程池支持定时以及周期性执行任务的需求。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">使用方式：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.Executors;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.ScheduledExecutorService;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.TimeUnit;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main(String[] args)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ScheduledExecutorService pool = Executors.newScheduledThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            pool.schedule(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                System.out.println(Thread.currentThread().getName() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;\t开始发车啦....&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            }, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>, TimeUnit.SECONDS);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">上面演示的是延迟10秒执行任务,如果想要执行周期性的任务可以用下面的方式，每秒执行一次</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">//</span>pool.scheduleWithFixedDelay也可以<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>pool.scheduleAtFixedRate(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">()</span> -&gt;</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                System.out.println(Thread.currentThread().getName() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;\t开始发车啦....&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>, TimeUnit.SECONDS);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;min-height:1em;margin-bottom:25px">5.<strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">newWorkStealingPool</strong><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;min-height:1em;margin-bottom:25px">newWorkStealingPool是jdk1.8才有的，会根据所需的并行层次来动态创建和关闭线程，通过使用多个队列减少竞争，底层用的ForkJoinPool来实现的。ForkJoinPool的优势在于，可以充分利用多cpu，多核cpu的优势，把一个任务拆分成多个“小任务”，把多个“小任务”放到多个处理器核心上并行执行；当多个“小任务”执行完成之后，再将这些执行结果合并起来即可。<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">说说线程池的拒绝策略</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">当请求任务不断的过来，而系统此时又处理不过来的时候，我们需要采取的策略是拒绝服务。RejectedExecutionHandler接口提供了拒绝任务处理的自定义方法的机会。在ThreadPoolExecutor中已经包含四种处理策略。</p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:square"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">AbortPolicy策略：该策略会直接抛出异常，阻止系统正常工作。</span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"></span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">AbortPolicy</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">RejectedExecutionHandler</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">AbortPolicy()</span></span>{ }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">rejectedExecution(Runnable r, ThreadPoolExecutor e)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> RejectedExecutionException(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Task &quot;</span> + r.toString() +<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                                                 <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot; rejected from &quot;</span> +<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                                                 e.toString());<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:square"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">CallerRunsPolicy 策略：只要线程池未关闭，该策略直接在调用者线程中，运行当前的被丢弃的任务。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">CallerRunsPolicy</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">RejectedExecutionHandler</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">CallerRunsPolicy()</span></span>{ }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">rejectedExecution(Runnable r, ThreadPoolExecutor e)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (!e.isShutdown()) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                r.run();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:square"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">DiscardOleddestPolicy策略： 该策略将丢弃最老的一个请求，也就是即将被执行的任务，并尝试再次提交当前任务。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">DiscardOldestPolicy</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">RejectedExecutionHandler</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">DiscardOldestPolicy()</span></span>{ }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">rejectedExecution(Runnable r, ThreadPoolExecutor e)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (!e.isShutdown()) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            e.getQueue().poll();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            e.execute(r);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;word-wrap:break-word !important"/></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:square"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">DiscardPolicy策略：该策略默默的丢弃无法处理的任务，不予任何处理。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;color:rgb(51,51,51)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"></span></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">DiscardPolicy</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">RejectedExecutionHandler</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">DiscardPolicy()</span></span>{ }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">rejectedExecution(Runnable r, ThreadPoolExecutor e)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">除了JDK默认为什么提供的四种拒绝策略，我们可以根据自己的业务需求去自定义拒绝策略，自定义的方式很简单，直接实现RejectedExecutionHandler接口即可</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">比如Spring integration中就有一个自定义的拒绝策略CallerBlocksPolicy，将任务插入到队列中，直到队列中有空闲并插入成功的时候，否则将根据最大等待时间一直阻塞，直到超时。</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">package</span> org.springframework.integration.util;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.BlockingQueue;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.RejectedExecutionException;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.RejectedExecutionHandler;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.ThreadPoolExecutor;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> java.util.concurrent.TimeUnit;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> org.apache.commons.logging.Log;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">import</span> org.apache.commons.logging.LogFactory;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">CallerBlocksPolicy</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">RejectedExecutionHandler</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">final</span> Log logger = LogFactory.getLog(CallerBlocksPolicy.class);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">final</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">long</span> maxWait;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/**<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@param</span> maxWait The maximum time to wait for a queue slot to be<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * available, in milliseconds.<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     */</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">CallerBlocksPolicy(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">long</span> maxWait)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">this</span>.maxWait = maxWait;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(91,218,237);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">rejectedExecution(Runnable r, ThreadPoolExecutor executor)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (!executor.isShutdown()) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">try</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                BlockingQueue&lt;Runnable&gt; queue = executor.getQueue();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (logger.isDebugEnabled()) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    logger.debug(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Attempting to queue task execution for &quot;</span> + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">this</span>.maxWait + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot; milliseconds&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (!queue.offer(r, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">this</span>.maxWait, TimeUnit.MILLISECONDS)) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> RejectedExecutionException(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Max wait time expired to queue task&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (logger.isDebugEnabled()) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    logger.debug(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Task execution queued&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">catch</span> (InterruptedException e) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                Thread.currentThread().interrupt();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> RejectedExecutionException(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Interrupted&quot;</span>, e);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">else</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> RejectedExecutionException(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Executor has been shut down&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">定义好之后如何使用呢？光定义没用的呀，一定要用到线程池中呀，可以通过下面的方式自定义线程池，指定拒绝策略。</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important">BlockingQueue&lt;Runnable&gt; workQueue = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> ArrayBlockingQueue&lt;&gt;(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>ThreadPoolExecutor executor = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> ThreadPoolExecutor(<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">100</span>, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>, TimeUnit.SECONDS, workQueue, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> CallerBlocksPolicy());<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">execute和submit的区别？</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">在前面的讲解中，我们执行任务是用的execute方法，除了execute方法，还有一个submit方法也可以执行我们提交的任务。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">这两个方法有什么区别呢？分别适用于在什么场景下呢？我们来做一个简单的分析。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">execute适用于不需要关注返回值的场景，只需要将线程丢到线程池中去执行就可以了</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main</span>(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">String[] args</span>) </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            System.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">out</span>.println(Thread.currentThread().getName() + <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;\t开始发车啦....&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">submit方法适用于需要关注返回值的场景，submit方法的定义如下：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">interface</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ExecutorService</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">extends</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">Executor</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>　　...<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>　　&lt;T&gt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">Future&lt;T&gt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">submit(Callable&lt;T&gt; task)</span></span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>　　&lt;T&gt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">Future&lt;T&gt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">submit(Runnable task, T result)</span></span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>　　Future&lt;?&gt; submit(Runnable task);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>　　...<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">其子类AbstractExecutorService实现了submit方法,可以看到无论参数是Callable还是Runnable，最终都会被封装成RunnableFuture，然后再调用execute执行。</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important">    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/**<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@throws</span> RejectedExecutionException {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@inheritDoc</span>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@throws</span> NullPointerException       {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@inheritDoc</span>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     */</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> Future<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(91,218,237);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&lt;?</span>&gt; submit(Runnable task) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (task == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">null</span>) <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> NullPointerException();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        RunnableFuture&lt;Void&gt; ftask = newTaskFor(task, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">null</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        execute(ftask);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span> ftask;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/**<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@throws</span> RejectedExecutionException {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@inheritDoc</span>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@throws</span> NullPointerException       {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@inheritDoc</span>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     */</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> &lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (task == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">null</span>) <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> NullPointerException();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        RunnableFuture&lt;T&gt; ftask = newTaskFor(task, result);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        execute(ftask);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span> ftask;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/**<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@throws</span> RejectedExecutionException {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@inheritDoc</span>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@throws</span> NullPointerException       {<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@inheritDoc</span>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>     */</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span> &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (task == <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">null</span>) <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">throw</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> NullPointerException();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        RunnableFuture&lt;T&gt; ftask = newTaskFor(task);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        execute(ftask);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span> ftask;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">下面我们来看看这三个方法分别如何去使用：</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">submit(Callable<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"> task);</span></strong></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main(String[] args)</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">throws</span> Exception </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        Future&lt;String&gt; future = pool.submit(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> Callable&lt;String&gt;() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(91,218,237);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span> String <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">call()</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">throws</span> Exception </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;Hello&quot;</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        String result = future.get();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        System.out.println(result);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">submit(Runnable task, T result);</strong></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main(String[] args)</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">throws</span> Exception </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        Data data = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> Data();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        Future&lt;Data&gt; future = pool.submit(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> MyRunnable(data), data);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        String result = future.get().getName();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        System.out.println(result);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">Data</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    String name;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span> String <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">getName()</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span> name;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">setName(String name)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">this</span>.name = name;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">MyRunnable</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">Runnable</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span> Data data;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">MyRunnable(Data data)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">this</span>.data = data;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(91,218,237);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@Override</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">run()</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        data.setName(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;yinjihuan&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">Future submit(Runnable task);</strong><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>直接submit一个Runnable是拿不到返回值的，返回值就是null.</p><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">五种线程池的使用场景</span></h1><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:square"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">newSingleThreadExecutor：一个单线程的线程池，可以用于需要保证顺序执行的场景，并且只有一个线程在执行。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">newFixedThreadPool：一个固定大小的线程池，可以用于已知并发压力的情况下，对线程数做限制。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">newCachedThreadPool：一个可以无限扩大的线程池，比较适合处理执行时间比较小的任务。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">newScheduledThreadPool：可以延时启动，定时启动的线程池，适用于需要多个后台线程执行周期任务的场景。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important">newWorkStealingPool：一个拥有多个任务队列的线程池，可以减少连接数，创建当前可用cpu数量的线程来并行执行。</p></li></ul><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">线程池的关闭</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">关闭线程池可以调用shutdownNow和shutdown两个方法来实现</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">shutdownNow：对正在执行的任务全部发出interrupt()，停止执行，对还未开始执行的任务全部取消，并且返回还没开始的任务列表</strong></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main</span>(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">String[] args</span>) throws Exception </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            System.err.println(i);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">try</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">30000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    System.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">out</span>.println(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;--&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                } <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">catch</span> (Exception e) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    e.printStackTrace();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        List&lt;Runnable&gt; runs = pool.shutdownNow();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">上面的代码模拟了立即取消的场景，往线程池里添加5个线程任务，然后sleep一段时间，线程池只有一个线程，如果此时调用shutdownNow后应该需要中断一个正在执行的任务和返回4个还未执行的任务，控制台输出下面的内容：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">2</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">3</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">4</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>[fs.ThreadPool$$Lambda$1/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">990368553</span>@682a0b20, <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>fs.ThreadPool$$Lambda$1/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">990368553</span>@682a0b20, <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>fs.ThreadPool$$Lambda$1/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">990368553</span>@682a0b20, <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>fs.ThreadPool$$Lambda$1/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">990368553</span>@682a0b20]<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>java.lang.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">InterruptedException:</span> sleep interrupted<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.lang.Thread.sleep(Native Method)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at fs.ThreadPool.lambda$0(ThreadPool.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:15</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at fs.ThreadPool$$Lambda$1/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">990368553</span>.run(Unknown Source)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:1142</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:617</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.lang.Thread.run(Thread.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:745</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;color:inherit;font-size:inherit;line-height:inherit;word-wrap:break-word !important">shutdown：当我们调用shutdown后，线程池将不再接受新的任务，但也不会去强制终止已经提交或者正在执行中的任务</strong></p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main</span>(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">String[] args</span>) throws Exception </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            System.err.println(i);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">try</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">30000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    System.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">out</span>.println(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;--&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                } <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">catch</span> (Exception e) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    e.printStackTrace();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        pool.shutdown();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">try</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">30000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                System.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">out</span>.println(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;--&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            } <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">catch</span> (Exception e) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                e.printStackTrace();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">上面的代码模拟了正在运行的状态，然后调用shutdown，接着再往里面添加任务，肯定是拒绝添加的，请看输出结果：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">2</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">3</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">4</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>Exception <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">in</span> thread <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;main&quot;</span> java.util.concurrent.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">RejectedExecutionException:</span> Task fs.ThreadPool$$Lambda$2/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1747585824</span>@3d075dc0 rejected from java.util.concurrent.ThreadPoolExecutor@214c265e[Shutting down, pool size = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>, active threads = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>, queued tasks = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">4</span>, completed tasks = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>]<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:2047</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:823</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:1369</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    at fs.ThreadPool.main(ThreadPool.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">java:24</span>)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">还有一些业务场景下需要知道线程池中的任务是否全部执行完成，当我们关闭线程池之后，可以用isTerminated来判断所有的线程是否执行完成，千万不要用isShutdown，isShutdown只是返回你是否调用过shutdown的结果。</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(165,218,45);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPool</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">main</span>(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">String[] args</span>) throws Exception </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        ExecutorService pool = Executors.newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">for</span> (<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> i = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>; i &lt; <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">5</span>; i++) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            System.err.println(i);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            pool.execute(() -&gt; {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">try</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">3000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    System.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">out</span>.println(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;--&quot;</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                } <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">catch</span> (Exception e) {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                    e.printStackTrace();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            });<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1000</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        pool.shutdown();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">while</span>(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">true</span>){  <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span>(pool.isTerminated()){  <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                System.<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">out</span>.println(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;所有的子线程都结束了！&quot;</span>);  <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">break</span>;  <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            }  <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            Thread.sleep(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1000</span>);    <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }  <br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><h1 style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:1.5em;margin-bottom:1.5em;font-weight:bold;font-size:1.6em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;font-size:24px;color:rgb(0,122,170);word-wrap:break-word !important">自定义线程池</span></h1><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">在实际的使用过程中，大部分我们都是用Executors去创建线程池直接使用，如果有一些其他的需求，比如指定线程池的拒绝策略，阻塞队列的类型，线程名称的前缀等等，我们可以采用自定义线程池的方式来解决。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">如果只是简单的想要改变线程名称的前缀的话可以自定义ThreadFactory来实现，在Executors.new…中有一个ThreadFactory的参数，如果没有指定则用的是DefaultThreadFactory。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">自定义线程池核心在于创建一个ThreadPoolExecutor对象，指定参数</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">下面我们看下ThreadPoolExecutor构造函数的定义：</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadPoolExecutor(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> corePoolSize,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                              <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> maximumPoolSize,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                              <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">long</span> keepAliveTime,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                              TimeUnit unit,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                              BlockingQueue&lt;Runnable&gt; workQueue,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                              ThreadFactory threadFactory,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                              RejectedExecutionHandler handler)</span></span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/></code></pre><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:square"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">corePoolSize<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>线程池大小，决定着新提交的任务是新开线程去执行还是放到任务队列中，也是线程池的最最核心的参数。一般线程池开始时是没有线程的，只有当任务来了并且线程数量小于corePoolSize才会创建线程。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">maximumPoolSize<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>最大线程数，线程池能创建的最大线程数量。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">keepAliveTime<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>在线程数量超过corePoolSize后，多余空闲线程的最大存活时间。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">unit<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>时间单位</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">workQueue<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>存放来不及处理的任务的队列，是一个BlockingQueue。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">threadFactory<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>生产线程的工厂类，可以定义线程名，优先级等。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;box-sizing:border-box !important;word-wrap:break-word !important">handler<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:break-word !important"/>拒绝策略，当任务来不及处理的时候，如何处理, 前面有讲解。</p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">了解上面的参数信息后我们就可以定义自己的线程池了，我这边用ArrayBlockingQueue替换了LinkedBlockingQueue，指定了队列的大小，当任务超出队列大小之后使用CallerRunsPolicy拒绝策略处理。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">这样做的好处是严格控制了队列的大小，不会出现一直往里面添加任务的情况，有的时候任务处理的比较慢，任务数量过多会占用大量内存，导致内存溢出。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-top:1.5em;margin-bottom:1.5em;min-height:1em">当然你也可以在提交到线程池的入口进行控制，比如用CountDownLatch, Semaphore等。</p><pre style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-top:0;margin-bottom:0;padding:0;letter-spacing:0.544px;text-align:justify;font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);word-wrap:break-word !important"><code style="margin:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;margin-right:2px;margin-left:2px;padding:0.5em;font-size:14px;color:rgb(169,183,198);line-height:18px;border-radius:0;background:rgb(40,43,46);font-family:Consolas,Inconsolata,Courier,monospace;display:block;overflow-x:auto;letter-spacing:0;word-wrap:normal !important;word-break:normal !important;overflow-y:auto !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(128,128,128);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">/**<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/> * 自定义线程池&lt;br&gt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/> * 默认的newFixedThreadPool里的LinkedBlockingQueue是一个无边界队列，如果不断的往里加任务，最终会导致内存的不可控&lt;br&gt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/> * 增加了有边界的队列，使用了CallerRunsPolicy拒绝策略<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/> * <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">@author</span> yinjihuan<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/> *<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/> */</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">FangjiaThreadPoolExecutor</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span> ExecutorService executorService = newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">50</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span> ExecutorService <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">newFixedThreadPool(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">int</span> nThreads)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> ThreadPoolExecutor(nThreads, nThreads, <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0L</span>, TimeUnit.MILLISECONDS,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> ArrayBlockingQueue&lt;Runnable&gt;(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">10000</span>), <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> DefaultThreadFactory(), <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> CallerRunsPolicy());<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">execute(Runnable command)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        executorService.execute(command);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">void</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">shutdown()</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        executorService.shutdown();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">class</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">DefaultThreadFactory</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">implements</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">ThreadFactory</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">static</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">final</span> AtomicInteger poolNumber = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> AtomicInteger(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">final</span> ThreadGroup group;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">final</span> AtomicInteger threadNumber = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> AtomicInteger(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">1</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">private</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">final</span> String namePrefix;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        DefaultThreadFactory() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            SecurityManager s = System.getSecurityManager();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            group = (s != <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">null</span>) ? s.getThreadGroup() :<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                                  Thread.currentThread().getThreadGroup();<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            namePrefix = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;FSH-pool-&quot;</span> +<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                          poolNumber.getAndIncrement() +<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                         <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(238,220,112);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">&quot;-thread-&quot;</span>;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:inherit !important;word-break:inherit !important">public</span> Thread <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">newThread(Runnable r)</span></span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            Thread t = <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">new</span> Thread(group, r,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                                  namePrefix + threadNumber.getAndIncrement(),<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                                  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(174,135,250);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">0</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (t.isDaemon())<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                t.setDaemon(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">false</span>);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">if</span> (t.getPriority() != Thread.NORM_PRIORITY)<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>                t.setPriority(Thread.NORM_PRIORITY);<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>            <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:rgb(248,35,117);line-height:inherit;word-wrap:inherit !important;word-break:inherit !important">return</span> t;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>        }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:inherit;color:inherit;line-height:inherit;word-wrap:inherit !important;word-break:inherit !important"/>}</code></pre><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:16px;color:rgb(62,62,62);background-color:rgb(255,255,255);box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;text-align:center;height:50px;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-right:auto;margin-left:auto;text-size-adjust:auto;width:48px;height:48px;color:rgb(255,255,255);line-height:48px;display:inline-block;background-image:url(https://mmbiz.qpic.cn/mmbiz_gif/ncqN8l14plZccK32d6rFjnDsvVhac0rplCGjfGcvjbPic2g9ibvXJrR5iaibPcxeatKCO3fFy17Rq709VnAGqQ1daw/640?wx_fmt=gif);background-size:100%;background-position:0 center;background-repeat:no-repeat;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;min-height:1em;font-weight:bold;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;color:rgb(136,136,136);font-size:14px;box-sizing:border-box !important;word-wrap:break-word !important">END</span></p></div></div></div><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:16px;color:rgb(62,62,62);background-color:rgb(255,255,255);text-size-adjust:auto;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;text-align:center;height:50px;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;margin-top:-26px;height:2px;background-color:rgb(34,33,33);box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div></div></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:5px;min-height:1em;font-size:16px;color:rgb(62,62,62);background-color:rgb(255,255,255);text-align:center;box-sizing:border-box !important;word-wrap:break-word !important"><img src="面试-线程池的成长之路_files/640 [1].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;height:auto !important;box-sizing:border-box !important;word-wrap:break-word !important;visibility:visible !important;width:390px !important" width="390px"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;font-size:16px;color:rgb(62,62,62);background-color:rgb(255,255,255);word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;border-bottom:2px solid rgb(71,193,168);word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;clear:both;margin-top:15px;min-height:1em;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;font-size:14px;color:rgb(61,167,66);box-sizing:border-box !important;word-wrap:break-word !important">更多精彩内容，尽在阅读原文</span></p></div></div></div></div></div><a href="https://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484869&amp;idx=1&amp;sn=d5ded7f08efe2e1d1682bea7aa1f8263&amp;chksm=ebf6ddbadc8154acb7e52e2f35b1b6bcad63655748863bd09f9c1cf37f3141e4e9bc18acba87&amp;mpshare=1&amp;scene=1&amp;srcid=0527eGH5EyJZl1ypHQIGCDLf##" style="text-decoration:none;display:block;padding:.75em 1em 0;-webkit-tap-highlight-color:rgba(0,0,0,0);color:#333;border:1px solid #eaeaea;margin:20px 0"><p style="margin:0;padding:0;position:relative;padding-bottom:.5em;font-size:15px">内容转载自公众号</p><div style="margin:0;padding:10px 0;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center"><div style="margin:0;padding:0"><span style="display:inline-block;background-color:#fff;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;overflow:hidden;vertical-align:middle;margin:0;width:27px;height:27px;padding:0;margin-right:.5em"><img src="面试-线程池的成长之路_files/0.jpg" type="image/jpeg" data-filename="0.jpg" alt="猿天地" style="display:block;width:100%;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;background-color:#eee;margin:0;padding:0;height:100% !important"/></span></div><div style="margin:0;padding:0;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;box-flex:1;flex:1;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal"> 猿天地 </div><div style="margin:0;padding:0;font-size:14px;color:#888;padding-left:1em;white-space:nowrap">了解更多</div></div></a></div><ul style="margin:0;padding:0"></ul><div style="margin:0;padding:0"><a href="https://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484869&amp;idx=1&amp;sn=d5ded7f08efe2e1d1682bea7aa1f8263&amp;chksm=ebf6ddbadc8154acb7e52e2f35b1b6bcad63655748863bd09f9c1cf37f3141e4e9bc18acba87&amp;mpshare=1&amp;scene=1&amp;srcid=0527eGH5EyJZl1ypHQIGCDLf##" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)">阅读原文</a></div></div></div></span>
</div></body></html> 