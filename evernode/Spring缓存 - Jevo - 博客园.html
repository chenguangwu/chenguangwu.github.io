<html>
<head>
  <title>Spring缓存 - Jevo - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6134"/>
<h1>Spring缓存 - Jevo - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/29 17:07</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.cnblogs.com/jevo/archive/2013/04/18/3046501.html"><i>http://www.cnblogs.com/jevo/archive/2013/04/18/3046501.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color:rgb(0, 0, 0);background:url(&quot;/Skins/coffee/images/bg_body.gif&quot;) left top;line-height:1.5;font-size:14px;"><div style="min-width:auto;"><div style="min-width:auto;text-align:left;"><div style="background:transparent;text-align:left;overflow-x:hidden;"><div style="background:url(&quot;/Skins/coffee/images/bg_left.gif&quot;) left top repeat-x rgb(254, 254, 242);"><div><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div>
		<h1 style="margin:0px;padding:0px;width:100%;clear:both;font-weight:bold;float:left;line-height:1.5;font-size:14px;padding-left:5px;">
			<a href="http://www.cnblogs.com/jevo/archive/2013/04/18/3046501.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">Spring缓存</a>
		</h1>
		<div style="margin:0px;padding:0px;clear:both;"></div>
		<div style="margin:0px;padding:5px 2px 5px 5px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin-top:5px;">
			<div style="margin:0px;padding:0px;margin-bottom:20px;word-break:break-word;"><p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">在应用中我们一般都会涉及到缓存的使用，实现缓存的方式有很多，在Spring框架中提供了一种支持第三方缓存插件的缓存管理机制。作为自留田总结一下Spring缓存管理的使用。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Spring只是提供了个缓存抽象，并没有提供缓存具体实现，我们可以选择第三方的缓存实现，如EHCache、JBoss Cache。Spring的缓存主要是为方法做cache，第一次调用方法时，将方法返回的结果缓存起来，当再次调用该方法时，则先访问缓存，当缓存中存在有相同参数的方法调用的相应数据（结果）时，则直接返回缓存中的数据。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">缓存应该保证每次调用相同参数的方法返回的结果一致。Spring缓存机制包括了两个方面的操作：缓存方法返回的结果；在方法执行前或后维护缓存。org.springframework.cache.Cache就提供了缓存使用的一般方法定义。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">但spring并不直接使用org.springframework.cache.Cache，而是通过org.springframework.cache.CacheManager 接口来管理。不同的Cache实现有一个相应的CacheManager实现，如对EHCache，org.springframework.cache.ehcache.EhCacheManager就是org.springframework.cache.CacheManager的一个实现，实现对EHCache的支持。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我们知道缓存大多数是一个key-value的存储系统，在对方法进行Cache的系统中，key通常根据方法参数来组成生产。如果想要在Key值生成中增加更多的逻辑，Spring还提供了org.springframework.cache.KeyGenerator来实现这种需求。当然，使用注解方式在@Cacheable注解中指定key的生成逻辑。<br style="margin:0px;padding:0px;"/>在实际项目中，我们即可以通过编程式使用Spring缓存，也可基于Spring AOP机制来使用Spring缓存。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">先来看一下编程式如何使用Spring缓存。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">首先在配置文件中配置：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;configLocation&quot; value=&quot;classpath:/ehcache.xml&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;customerCache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheFactoryBean&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     &lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManager&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     &lt;property name=&quot;cacheName&quot; value=&quot;customerCache&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;orderCache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheFactoryBean&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     &lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManager&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">     &lt;property name=&quot;cacheName&quot; value=&quot;orderCache&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;baseDao&quot; class=&quot;com.legendshop.base.dao.BaseDao&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;hibernateTemplate&quot; ref=&quot;hibernateTemplate&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;customerDao&quot; class=&quot;org.sample.dao.CusomterDao&quot; parent=&quot;baseDao&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=”keyGenerator” ref=”keyGenerator”&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;customerCache&quot; ref=&quot;customerCache&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;orderDao&quot; class=&quot; org.sample.dao.OrderDao&quot; parent=&quot;baseDao&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=”keyGenerator” ref=”keyGenerator”&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;orderCache&quot; ref=&quot;orderCache&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">相关的Java代码如下：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">public class CusomterDao {</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  private CacheKeyGenerator keyGenerator; // KeyGenerator接口的一个实现类</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  private Cache customerCache;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  public Customer load(long customerId) { </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    validateCustomerId(customerId);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    Customer customer = null;   </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    Serializable key = keyGenerator.generateKey(customerId);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    customer = (Customer) customerCache.get(key);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    if (customer == null) {      </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">      customer = getHibernateTemplate().load(getPersistentClass(), customerId);//取得HibernateTemplate加载实体</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">      customerCache.put(key, customer);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    }    </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    return customer;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  }</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  public void update(Customer customer) {   </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    getHibernateTemplate().update(customer);  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    Serializable key = keyGenerator.generateKey(customer.getId());</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    customerCache.remove(key);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  }       </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">}</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">从上面的代码中可以看到，在Dao层将实体采用编程方式保存在一个Cache中，为了避免数据失效，每次更新时，缓存中的数据都会被刷新。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">采用编程方式使用缓存使业务实现形成对缓存实现的依赖。采用AOP方式可有效消除对缓存实现的依赖。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">1．基于拦截器CacheInterceptor</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;cacheManagerFactory&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot; p:configLocation=&quot;classpath:/ehcache.xml&quot; /&gt; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheCacheManager&quot; p:cacheManager-ref=&quot;cacheManagerFactory&quot; /&gt; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;cacheInterceptor&quot;          class=&quot;org.springframework.cache.interceptor.CacheInterceptor&quot;&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManager&quot; /&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;!-- property name=” keyGenerator” ref=” keyGenerator”/ --&gt;  &lt;!-- 可自定义keyGenerator，缺省使用DefaultKeyGenerator  --&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;sampleServiceTarget&quot; class=&quot;sample.SampleServiceImpl&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;sampleDao&quot; ref=&quot;sampleDao&quot;/&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;sampleService&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;target&quot; ref=&quot;sampleServiceTarget&quot;/&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;interceptorNames&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        &lt;list&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">            &lt;idref bean=&quot;cacheInterceptor/&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        &lt;/list&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">或者使用</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean class=&quot;org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator&quot;&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        &lt;property name=&quot;beanNames&quot;&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">            &lt;list&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">                &lt;value&gt;*Service&lt;/value&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">            &lt;/list&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        &lt;/property&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        &lt;property name=&quot;interceptorNames&quot;&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">            &lt;list&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">                &lt;value&gt;cacheInterceptor&lt;/value&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">            &lt;/list&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        &lt;/property&gt;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">其中keyGenerator使用的是缺省的key值生成器org.springframework.cache.interceptor.DefaultKeyGenerator</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">以ProxyFactoryBean实现了单个代理，该方法只能为单个类配置代理。BeanNameAutoProxyCreator或者 DefaultAdvisorAutoProxyCreator实现自动代理，会自动为所有的增强所匹配的bean创建相应的代理。这两个配置只能选择其中一个创建代理。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">使用CacheInterceptor或CacheProxyFactoryBean实现了一个单代理。我们可以按以上思路自定义我们的实现，如下：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">首先，参考CacheInterceptor类定义我们自己的拦截器MyCacheInterceptor。其中最关键的地方是实现其中的invoke方法，在该方法中增加我们自己的逻辑。</p>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse:collapse;font-size:inherit;font-style:inherit;font-variant:inherit;padding:0px;font-weight:inherit;margin:0px;word-break:break-word;border:1px solid silver;display:block;overflow-x:scroll;">
<tbody style="margin:0px;padding:0px;">
<tr style="margin:0px;padding:0px;">
<td style="margin:0px;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;" valign="top" width="590">
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">package org.springcache.sample;<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>public class MyCacheInterceptor extends CacheAspectSupport  implements MethodInterceptor,  Serializable {<br style="margin:0px;padding:0px;"/>    public MyCacheInterceptor(){<br style="margin:0px;padding:0px;"/>        super();<br style="margin:0px;padding:0px;"/>    }<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>    public Object invoke(MethodInvocation invocation) throws Throwable {<br style="margin:0px;padding:0px;"/>         String classname=invocation.getThis().getClass().getName();<br style="margin:0px;padding:0px;"/>         String methodname=invocation.getMethod().getName();<br style="margin:0px;padding:0px;"/>         Object[]arguments=invocation.getArguments();<br style="margin:0px;padding:0px;"/>         Object result;<br style="margin:0px;padding:0px;"/>  <br style="margin:0px;padding:0px;"/>         String cachekey= getKeyGenerator().generate(…); //利用keyGenerator得到key<br style="margin:0px;padding:0px;"/>         System.out.println(cachekey+&quot;&lt;&lt;cachekey&gt;&gt;&gt;&quot;);</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         String cacheName = ..; //根据自定义的规则取得相关cache Name.</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">         Cache cache = getCacheManager().getCache(cacheName);<br style="margin:0px;padding:0px;"/>         Element element=cache.get(cachekey);<br style="margin:0px;padding:0px;"/>         if(element==null){<br style="margin:0px;padding:0px;"/>           logger.debug(&quot;Hold up method , Get method result and create cache........!&quot;);  <br style="margin:0px;padding:0px;"/>           result=invocation.proceed();<br style="margin:0px;padding:0px;"/>           element = new Element(cachekey, (Serializable) result);<br style="margin:0px;padding:0px;"/>           cache.put(element);<br style="margin:0px;padding:0px;"/>         }<br style="margin:0px;padding:0px;"/>         return element.getValue();<br style="margin:0px;padding:0px;"/>    }<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>}</p>
</td>
</tr>
</tbody>
</table>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">我们还需要实现一个AfterReturningAdvice，以便维护Cache中的数据。如下：</p>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse:collapse;font-size:inherit;font-style:inherit;font-variant:inherit;padding:0px;font-weight:inherit;margin:0px;word-break:break-word;border:1px solid silver;display:block;overflow-x:scroll;">
<tbody style="margin:0px;padding:0px;">
<tr style="margin:0px;padding:0px;">
<td style="margin:0px;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;" valign="top" width="590">
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">package org.springcache.sample;<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>public class MyCacheAfterAdvice extends CacheAspectSupport  implements AfterReturningAdvice,  Serializable {<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable {<br style="margin:0px;padding:0px;"/>        String classname=target.getClass().getName();<br style="margin:0px;padding:0px;"/>        List list=cache.getKeys();</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        for(int i=0;list!=null &amp;&amp; i&lt;list.size();i++){<br style="margin:0px;padding:0px;"/>           String cachename=String.valueOf(list.get(i));<br style="margin:0px;padding:0px;"/>           if(cachename.startsWith(classname)){<br style="margin:0px;padding:0px;"/>              cache.remove(cachename);  <br style="margin:0px;padding:0px;"/>           }</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">        }</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    }<br style="margin:0px;padding:0px;"/>}</p>
</td>
</tr>
</tbody>
</table>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">在Spring配置文件中定义Ehcache组件，如下：</p>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse:collapse;font-size:inherit;font-style:inherit;font-variant:inherit;padding:0px;font-weight:inherit;margin:0px;word-break:break-word;border:1px solid silver;display:block;overflow-x:scroll;">
<tbody style="margin:0px;padding:0px;">
<tr style="margin:0px;padding:0px;">
<td style="margin:0px;border:1px solid silver;border-collapse:collapse;padding:3px;white-space:nowrap;" valign="top" width="590">
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;bean id=&quot;cacheManager&quot;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">                              class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot; p:configLocation=&quot;classpath:/ehcache.xml&quot; &gt;<br style="margin:0px;padding:0px;"/>    &lt;/bean&gt;<br style="margin:0px;padding:0px;"/>    <br style="margin:0px;padding:0px;"/>    &lt;bean id=&quot;customerCache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheFactoryBean&quot;&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManager&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;cacheName&quot; value=&quot;customerCache&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>    &lt;/bean&gt;<br style="margin:0px;padding:0px;"/>    <br style="margin:0px;padding:0px;"/>    &lt;bean id=&quot;myCacheInterceptor&quot; class=&quot;org.springcache.sample.MyCacheInterceptor&quot;&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;cache&quot; ref=&quot;customerCache&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>    &lt;/bean&gt;<br style="margin:0px;padding:0px;"/>    <br style="margin:0px;padding:0px;"/>    &lt;bean id=&quot;myCacheAfterAdvice&quot; class=&quot; org.springcache.sample.MyCacheAfterAdvice&quot;&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;cache&quot; ref=&quot;customerCache&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>    &lt;/bean&gt;<br style="margin:0px;padding:0px;"/>    </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;!-- 拦截方法名中带 find get delete的方法 --&gt;<br style="margin:0px;padding:0px;"/>    &lt;bean id=&quot;myCachePointCut&quot;  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">                         class=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;advice&quot; ref=&quot;myCacheInterceptor&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;patterns&quot;&gt;<br style="margin:0px;padding:0px;"/>           &lt;list&gt;<br style="margin:0px;padding:0px;"/>              &lt;value&gt;.*find.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>              &lt;value&gt;.*get.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>              &lt;value&gt;.*delete.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>            &lt;/list&gt;<br style="margin:0px;padding:0px;"/>         &lt;/property&gt;<br style="margin:0px;padding:0px;"/>    &lt;/bean&gt;<br style="margin:0px;padding:0px;"/>    &lt;!-- 拦截方法名中带 insert create delete update的方法--&gt;<br style="margin:0px;padding:0px;"/>    &lt;bean id=&quot;myCachePointCutAdvice&quot; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">                    class=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;advice&quot; ref=&quot;myCacheAfterAdvice&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>        &lt;property name=&quot;patterns&quot;&gt;<br style="margin:0px;padding:0px;"/>            &lt;list&gt;<br style="margin:0px;padding:0px;"/>                &lt;value&gt;.*create.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>                &lt;value&gt;.*delete.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>                &lt;value&gt;.*update.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>                &lt;value&gt;.*insert.*&lt;/value&gt;<br style="margin:0px;padding:0px;"/>             &lt;/list&gt;<br style="margin:0px;padding:0px;"/>          &lt;/property&gt;<br style="margin:0px;padding:0px;"/>    &lt;/bean&gt;<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;!--使用拦截器--&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;baseDao&quot; class=&quot;com.legendshop.base.dao.BaseDao&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;hibernateTemplate&quot; ref=&quot;hibernateTemplate&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;customerDao&quot; class=&quot;org.sample.dao.CusomterDao&quot; parent=&quot;baseDao&quot;&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=”keyGenerator” ref=”keyGenerator”&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    &lt;property name=&quot;customerCache&quot; ref=&quot;customerCache&quot;&gt;&lt;/property&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;/bean&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  &lt;bean id=&quot;customerService&quot; class=&quot;org.service.impl.UserServiceImpl&quot;&gt;<br style="margin:0px;padding:0px;"/>     &lt;property name=&quot;customerDao&quot; ref=&quot;customerDao&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>  &lt;/bean&gt;<br style="margin:0px;padding:0px;"/><br style="margin:0px;padding:0px;"/>  &lt;!-- 用aop来实现cache --&gt;<br style="margin:0px;padding:0px;"/>  &lt;bean id=&quot; customerServiceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;<br style="margin:0px;padding:0px;"/>     &lt;property name=&quot;target&quot; ref=&quot;customerService&quot;&gt;&lt;/property&gt;<br style="margin:0px;padding:0px;"/>     &lt;property name=&quot;interceptorNames&quot;&gt;<br style="margin:0px;padding:0px;"/>       &lt;list&gt;<br style="margin:0px;padding:0px;"/>         &lt;value&gt;myCachePointCut&lt;/value&gt;<br style="margin:0px;padding:0px;"/>         &lt;value&gt;myCachePointCutAdvice&lt;/value&gt;<br style="margin:0px;padding:0px;"/>       &lt;/list&gt;<br style="margin:0px;padding:0px;"/>   &lt;/property&gt;<br style="margin:0px;padding:0px;"/>  &lt;/bean&gt;</p>
</td>
</tr>
</tbody>
</table>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">这样每次对service类中的方法进行调用,都会触发对缓存的访问。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">采用注解方式</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">Spring缓存注解是在方法上声明注解的，它提供了两个注解：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       @Cacheable：负责将方法的返回值加入到缓存中</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       @CacheEvict：负责清除缓存</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">@Cacheable 支持如下几个参数：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    value：缓存名称，不能为空。对EHCache即ehcache.xml中cache的name</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    key：缓存的key，默认为空，表示使用方法的参数类型及参数值作为key，支持SpEL</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    condition：触发条件，只有满足条件的情况才会加入缓存，默认为空，既表示全部都加入缓存，支持SpEL</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">@CacheEvict 支持如下几个参数：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    value：缓存位置名称，不能为空</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    key：缓存的key，默认为空</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    condition：触发条件，只有满足条件的情况才会清除缓存，默认为空，支持SpEL</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    allEntries：true表示清除value中的全部缓存，默认为false</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">一个使用注解的配置示例如下：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">首先在配置文件中打开cache注解的支持。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;cache:annotation-driven cache-manager=&quot;cacheManager&quot; /&gt; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;cacheManagerFactory&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot; p:configLocation=&quot;classpath:/ehcache.xml&quot; /&gt; </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">&lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheCacheManager&quot; p:cacheManager-ref=&quot;cacheManagerFactory&quot; /&gt;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">接着我们就可以在代码中加入cache的注解，如下：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">public class CusomterDao {</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> @Cacheable(value=&quot;customerCache&quot;, key=&quot;#customerId&quot;)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  public Customer load(long customerId) { </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    //加载实体过程</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    ….</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    return customer;</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  }</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  @CacheEvict(value = { &quot;customerCache&quot; }, key=&quot;#obj&quot;)</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  public void update(Customer customer) {   </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">    getHibernateTemplate().update(customer);  </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">  }       </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">}</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">注：以上配置中，都需要一个Ehcahe配置文件，其中包括了Ehcahe的使用参考。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">关于SpEL(Spring Expression Language)的介绍，可以参考如下地址：http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/expressions.html</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;"> </strong></p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">缓存的使用给应用程序带来了一些好处的同时也带来了更多的复杂性。缓存的目标是要透明地提升一个应用程序的性能。所以缓存不应影响到核心业务逻辑，同时也不应改变应用程序的行为。一般，缓存的使用需要考虑以下一些问题：</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       •  增加的缓存是否有利于减少远程调用。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       •  对于给定的参数值集合是否总是返回相同结果。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       •  要缓存的数据量应在可控制的范围之内。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       •  实时数据和敏感数据不要进行缓存。</p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">       •  增加的缓存是否在安全范围内。 </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;line-height:1.5;color:rgb(0, 0, 0);font-size:13px;margin:10px auto;text-indent:0px;">参考：Declarative Caching Services for Spring http://www.oracle.com/technetwork/articles/entarch/declarative-caching-096933.html</p></div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;margin-top:20px;">
<div style="margin:0px;padding:0px;margin-bottom:10px;">分类: <a href="http://www.cnblogs.com/jevo/category/461036.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank">spring</a></div>
<div style="margin:0px;padding:0px;font-size:9pt;color:rgb(102, 102, 102);margin-top:0px;"></div>
<div style="margin:0px;padding:0px;"><div style="margin:0px;padding:10px 0px;margin-bottom:10px;margin-top:10px;border:1px dashed silver;font-size:12px;width:320px;text-align:center;">
        <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(45, 174, 191);color:rgb(255, 255, 255);border:none;">好文要顶</a>
            <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(227, 49, 0);color:rgb(255, 255, 255);border:none;">关注我</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 8px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:rgba(0, 0, 0, 0.498039) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 1px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;background-color:rgb(255, 181, 21);color:rgb(255, 255, 255);border:none;">收藏该文</a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至新浪微博"><img src="Spring缓存 - Jevo - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" alt="" height="24" style="margin:0px;padding:0px;height:auto;border:none;vertical-align:middle;margin-left:5px;box-shadow:none;max-width:300px;" width="24"/></a>
    <a href="#" style="margin-right:10px;margin:0px;border-radius:10px;padding:3px 2px;text-decoration:none;font-weight:bold;cursor:pointer;display:inline-block;vertical-align:middle;box-shadow:none;text-shadow:none;background:none;color:rgb(255, 255, 255);border:none;" title="分享至微信"><img src="Spring缓存 - Jevo - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" alt="" height="24" style="margin:0px;padding:0px;border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;max-width:300px;" width="24"/></a>
</div>
<div style="margin:0px;padding:0px;float:left;width:280px;margin-top:0px;margin-bottom:10px;color:rgb(0, 0, 0);margin-left:0px;font-size:12px;">
    <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jevo/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" target="_blank"><img src="Spring缓存 - Jevo - 博客园_files/sample_face.gif" type="image/gif" data-filename="sample_face.gif" alt="" height="46" style="margin:0px;padding:0px;height:auto;border:0px;vertical-align:top;float:left;margin-right:5px;padding-top:5px;padding-left:2px;max-width:300px;" width="47"/></a>
        <div style="margin:0px;padding:0px;float:left;line-height:18px;">
            <a href="http://home.cnblogs.com/u/jevo/" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">Jevo</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jevo/followees" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">关注 - 0</a><br style="margin:0px;padding:0px;"/>
            <a href="http://home.cnblogs.com/u/jevo/followers" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">粉丝 - 21</a>
        </div>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;"></div>
    <div style="margin:0px;padding:0px;">
                <a href="#" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);">+加关注</a>
    </div>
</div>
<div style="margin:0px;padding:0px;float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:125px;text-align:center;margin-top:10px;">
    <div style="margin:0px;padding:0px;float:left;width:46px;height:52px;background:url(&quot;http://static.cnblogs.com/images/upup.gif&quot;) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="text-align:center;padding:0px;margin:0px;height:52px;background:url(&quot;http://static.cnblogs.com/images/downdown.gif&quot;) no-repeat;margin-left:20px;cursor:pointer;margin-top:2px;padding-top:5px;width:46px;float:right;">
        <span style="margin:0px;padding:0px;font-size:14px;color:rgb(7, 93, 179);font-family:Verdana;line-height:1.5em;">0</span>
    </div>
    <div style="margin:0px;padding:0px;clear:both;"></div>
    <div style="margin:0px;padding:0px;margin-top:5px;margin-left:0px;font-size:12px;color:gray;">
    </div>
</div>
</div>
<div style="margin:0px;padding:0px;clear:both;"></div>
<div style="margin:0px;padding:0px;line-height:1.8;font-size:12px;"><a href="http://www.cnblogs.com/jevo/archive/2013/04/17/3007333.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">« </a> 上一篇：<a href="http://www.cnblogs.com/jevo/archive/2013/04/17/3007333.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2013-04-17 21:57">Hibernate缓存</a><br style="margin:0px;padding:0px;"/><a href="http://www.cnblogs.com/jevo/archive/2013/04/22/3019573.html" style="margin:0px;padding:0px;color:rgb(7, 93, 179);text-decoration:none;">» </a> 下一篇：<a href="http://www.cnblogs.com/jevo/archive/2013/04/22/3019573.html" style="margin:0px;padding:0px;text-decoration:underline;color:rgb(7, 93, 179);" title="发布于2013-04-22 22:49">Java热替换</a><br style="margin:0px;padding:0px;"/></div>
</div>


		</div>
		<div style="margin:0px;padding:0px;clear:both;font-size:12px;float:right;width:100%;text-align:right;padding-right:5px;color:rgb(102, 102, 102);margin-top:5px;">posted @ <span style="margin:0px;padding:0px;">2013-04-18 21:47</span> <a href="http://www.cnblogs.com/jevo/" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">Jevo</a> 阅读(<span style="margin:0px;padding:0px;">1636</span>) 评论(<span style="margin:0px;padding:0px;">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=3046501" rel="nofollow" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">编辑</a> <a href="http://www.cnblogs.com/jevo/archive/2013/04/18/3046501.html#" style="margin:0px;padding:0px;text-decoration:none;color:rgb(7, 93, 179);">收藏</a></div>
	</div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 