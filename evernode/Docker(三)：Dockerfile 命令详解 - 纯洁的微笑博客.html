<html>
<head>
  <title>Docker(三)：Dockerfile 命令详解 - 纯洁的微笑博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8565"/>
<h1>Docker(三)：Dockerfile 命令详解 - 纯洁的微笑博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/3/16 10:49</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.ityouknow.com/docker/2018/03/15/docker-dockerfile-command-introduction.html"><i>http://www.ityouknow.com/docker/2018/03/15/docker-dockerfile-command-introduction.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:10px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:14px;line-height:1.42857;color:rgb(51, 51, 51);background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">
            <div style="background-color:rgb(238, 238, 238);padding-top:200px;display:block;box-sizing:border-box;margin-bottom:30px;color:rgb(255, 255, 255);padding-bottom:100px;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-size:contain;background-image:url('http://www.ityouknow.com/docker/2018/03/15/docker-dockerfile-command-introduction.htmldata:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJyZ2IoMTQ0LDYzLDEyNSkiPjwvcmVjdD48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjE1Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSI2MDAiIGN5PSIwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMTUiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjAiIGN5PSI2MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4xNSI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNjAwIiBjeT0iNjAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMTUiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjAiIHI9IjEwMCIgZmlsbD0iI2RkZCIgb3BhY2l0eT0iMC4wNzIwMDAwMDAwMDAwMDAwMSI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMTAwIiBjeT0iNjAwIiByPSIxMDAiIGZpbGw9IiNkZGQiIG9wYWNpdHk9IjAuMDcyMDAwMDAwMDAwMDAwMDEiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjAiIHI9IjEwMCIgZmlsbD0iI2RkZCIgb3BhY2l0eT0iMC4xMDY2NjY2NjY2NjY2NjY2NyI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAwIiBjeT0iNjAwIiByPSIxMDAiIGZpbGw9IiNkZGQiIG9wYWNpdHk9IjAuMTA2NjY2NjY2NjY2NjY2NjciPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjMwMCIgY3k9IjAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wOTgiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjMwMCIgY3k9IjYwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA5OCI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNDAwIiBjeT0iMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA5OCI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNDAwIiBjeT0iNjAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDk4Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSI1MDAiIGN5PSIwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY2NjYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjUwMCIgY3k9IjYwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA4MDY2NjY2NjY2NjY2NjY2Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSIwIiBjeT0iMTAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDQ2Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSI2MDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wNDYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSIjZGRkIiBvcGFjaXR5PSIwLjE0MTMzMzMzMzMzMzMzMzM0Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSIyMDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iI2RkZCIgb3BhY2l0eT0iMC4wNzIwMDAwMDAwMDAwMDAwMSI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMzAwIiBjeT0iMTAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY2NjYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjQwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA4MDY2NjY2NjY2NjY2NjY2Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSI1MDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iI2RkZCIgb3BhY2l0eT0iMC4wNTQ2NjY2NjY2NjY2NjY2NyI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMCIgY3k9IjIwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA5OCI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNjAwIiBjeT0iMjAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDk4Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSIxMDAiIGN5PSIyMDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4xMzI2NjY2NjY2NjY2NjY2NSI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSIxMDAiIGZpbGw9IiNkZGQiIG9wYWNpdHk9IjAuMDM3MzMzMzMzMzMzMzMzMzMiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjMwMCIgY3k9IjIwMCIgcj0iMTAwIiBmaWxsPSIjZGRkIiBvcGFjaXR5PSIwLjAyIj48L2NpcmNsZT48Y2lyY2xlIGN4PSI0MDAiIGN5PSIyMDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wOTgiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjUwMCIgY3k9IjIwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA0NiI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMCIgY3k9IjMwMCIgcj0iMTAwIiBmaWxsPSIjZGRkIiBvcGFjaXR5PSIwLjAzNzMzMzMzMzMzMzMzMzMzIj48L2NpcmNsZT48Y2lyY2xlIGN4PSI2MDAiIGN5PSIzMDAiIHI9IjEwMCIgZmlsbD0iI2RkZCIgb3BhY2l0eT0iMC4wMzczMzMzMzMzMzMzMzMzMyI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMzAwIiByPSIxMDAiIGZpbGw9IiNkZGQiIG9wYWNpdHk9IjAuMDcyMDAwMDAwMDAwMDAwMDEiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjMwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjAyODY2NjY2NjY2NjY2NjY2NyI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMzAwIiBjeT0iMzAwIiByPSIxMDAiIGZpbGw9IiNkZGQiIG9wYWNpdHk9IjAuMDIiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjQwMCIgY3k9IjMwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA5OCI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNTAwIiBjeT0iMzAwIiByPSIxMDAiIGZpbGw9IiNkZGQiIG9wYWNpdHk9IjAuMDcyMDAwMDAwMDAwMDAwMDEiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjAiIGN5PSI0MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wODA2NjY2NjY2NjY2NjY2NiI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNjAwIiBjeT0iNDAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY2NjYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjQwMCIgcj0iMTAwIiBmaWxsPSIjZGRkIiBvcGFjaXR5PSIwLjA3MjAwMDAwMDAwMDAwMDAxIj48L2NpcmNsZT48Y2lyY2xlIGN4PSIyMDAiIGN5PSI0MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4xMTUzMzMzMzMzMzMzMzMzNCI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMzAwIiBjeT0iNDAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDI4NjY2NjY2NjY2NjY2NjY3Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSI0MDAiIGN5PSI0MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wNjMzMzMzMzMzMzMzMzMzNCI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNDAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY2NjYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjAiIGN5PSI1MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wODA2NjY2NjY2NjY2NjY2NiI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNjAwIiBjeT0iNTAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY2NjYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwMCIgcj0iMTAwIiBmaWxsPSIjZGRkIiBvcGFjaXR5PSIwLjE0MTMzMzMzMzMzMzMzMzM0Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSIyMDAiIGN5PSI1MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4xMzI2NjY2NjY2NjY2NjY2NSI+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMzAwIiBjeT0iNTAwIiByPSIxMDAiIGZpbGw9IiMyMjIiIG9wYWNpdHk9IjAuMDk4Ij48L2NpcmNsZT48Y2lyY2xlIGN4PSI0MDAiIGN5PSI1MDAiIHI9IjEwMCIgZmlsbD0iIzIyMiIgb3BhY2l0eT0iMC4wNDYiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjUwMCIgY3k9IjUwMCIgcj0iMTAwIiBmaWxsPSIjMjIyIiBvcGFjaXR5PSIwLjA5OCI+PC9jaXJjbGU+PC9zdmc+&quot;');">
    <div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;max-width:100%;"><span style="font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:table;"> </span>
        <div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin-top:20px;">        
            <h1 style="box-sizing:border-box;padding:0px;margin:0.67em 0px;font-family:inherit;font-weight:500;line-height:1.1;margin-top:20px;margin-bottom:10px;font-size:63px;color:inherit;">Docker(三)：Dockerfile 命令详解</h1>
            <span style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;font-size:20px;margin-right:15px;display:inline-block;vertical-align:middle;color:rgb(46, 46, 46);">
                
                
                <span style="font-family:octicons;box-sizing:border-box;margin:0px;text-decoration:none;padding:0px;line-height:1;font-style:normal;display:inline-block;font-stretch:normal;text-rendering:auto;-webkit-font-smoothing:antialiased;user-select:none;font-variant:normal;font-weight:normal;font-size:18px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:18px;line-height:1;font-family:octicons;"></span></span> 2018/03/15
                
            </span>
        </div>
    <span style="font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:table;clear:both;"> </span></div>
</div>

<div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:block;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;"><span style="font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:table;"> </span>

    <div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin-right:-15px;margin-left:-15px;"><span style="font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:table;"> </span>

        
        <div style="font-size:16px;box-sizing:border-box;margin:0px;padding:0px;padding-right:15px;padding-left:15px;font-family:-apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;position:relative;line-height:1.5;word-wrap:break-word;text-size-adjust:100%;color:rgb(36, 41, 46);min-height:1px;"><span style="font-family:-apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;font-size:16px;line-height:1.5;color:rgb(36, 41, 46);display:table;"></span>

            <p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-bottom:16px;margin-top:0px;">上一篇文章<a href="http://www.ityouknow.com/docker/2018/03/12/docker-use-dockerfile.html" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">Docker(二)：Dockerfile 使用介绍</a>介绍了 Dockerfile 的使用，这篇文章我们来继续了解 Dockerfile ,学习 Dockerfile 各种命令的使用。</p>

<h2 style="margin-bottom:16px;padding:0px;margin:0px;color:inherit;font-family:inherit;box-sizing:border-box;line-height:1.25;margin-top:24px;font-size:1.5em;padding-bottom:0.3em;border-bottom:1px solid rgb(234, 236, 239);font-weight:600;">Dockerfile 指令详解</h2>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">1 FROM 指定基础镜像</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">FROM 指令用于指定其后构建新镜像所使用的基础镜像。FROM 指令必是 Dockerfile 文件中的首条命令，启动构建流程后，Docker 将会基于该镜像构建新镜像，FROM 后的命令也会基于这个基础镜像。</p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">FROM语法格式为：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>FROM &lt;image&gt;
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">或</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>FROM &lt;image&gt;:&lt;tag&gt;
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">或</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>FROM &lt;image&gt;:&lt;digest&gt;
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">通过 FROM 指定的镜像，可以是任何有效的基础镜像。FROM 有以下限制：</p>

<ul style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0px;margin-bottom:16px;padding-left:2em;">
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;">FROM 必须 是 Dockerfile 中第一条非注释命令</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">在一个 Dockerfile 文件中创建多个镜像时，FROM 可以多次出现。只需在每个新命令 FROM 之前，记录提交上次的镜像 ID。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">tag 或 digest 是可选的，如果不使用这两个值时，会使用 latest 版本的基础镜像</li>
</ul>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">2 RUN 执行命令</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">在镜像的构建过程中执行特定的命令，并生成一个中间镜像。格式:</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>#shell格式
RUN &lt;command&gt;
#exec格式
RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<ul style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0px;margin-bottom:16px;padding-left:2em;">
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;">RUN 命令将在当前 image 中执行任意合法命令并提交执行结果。命令执行提交后，就会自动执行 Dockerfile 中的下一个指令。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">层级 RUN 指令和生成提交是符合 Docker 核心理念的做法。它允许像版本控制那样，在任意一个点，对 image 镜像进行定制化构建。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">RUN 指令创建的中间镜像会被缓存，并会在下次构建中使用。如果不想使用这些缓存镜像，可以在构建时指定 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>--no-cache<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code> 参数，如：<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>docker build --no-cache<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>。</li>
</ul>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">3 COPY 复制文件</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">格式：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>COPY &lt;源路径&gt;... &lt;目标路径&gt;
COPY [&quot;&lt;源路径1&gt;&quot;,... &quot;&lt;目标路径&gt;&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">和 RUN 指令一样，也有两种格式，一种类似于命令行，一种类似于函数调用。COPY 指令将从构建上下文目录中 &lt;源路径&gt; 的文件/目录复制到新的一层的镜像内的`&lt;目标路径&gt;`位置。比如：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>COPY package.json /usr/src/app/
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>&lt;源路径&gt;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>可以是多个，甚至可以是通配符，其通配符规则要满足 Go 的 filepath.Match 规则，如：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>COPY hom* /mydir/
COPY hom?.txt /mydir/
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>&lt;目标路径&gt;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>可以是容器内的绝对路径，也可以是相对于工作目录的相对路径（工作目录可以用 WORKDIR 指令来指定）。目标路径不需要事先创建，如果目录不存在会在复制文件前先行创建缺失目录。</p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">此外，还需要注意一点，使用 COPY 指令，源文件的各种元数据都会保留。比如读、写、执行权限、文件变更时间等。这个特性对于镜像定制很有用。特别是构建相关文件都在使用 Git 进行管理的时候。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">4 ADD 更高级的复制文件</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">ADD 指令和 COPY 的格式和性质基本一致。但是在 COPY 基础上增加了一些功能。比如<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>&lt;源路径&gt;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>可以是一个 URL，这种情况下，Docker 引擎会试图去下载这个链接的文件放到<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>&lt;目标路径&gt;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>去。</p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">在构建镜像时，复制上下文中的文件到镜像内，格式：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ADD &lt;源路径&gt;... &lt;目标路径&gt;
ADD [&quot;&lt;源路径&gt;&quot;,... &quot;&lt;目标路径&gt;&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;font-weight:600;">注意</strong><br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
如果 docker 发现文件内容被改变，则接下来的指令都不会再使用缓存。关于复制文件时需要处理的/，基本跟正常的 copy 一致</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">5 ENV 设置环境变量</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">格式有两种：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ENV &lt;key&gt; &lt;value&gt;
ENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;...
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">这个指令很简单，就是设置环境变量而已，无论是后面的其它指令，如 RUN，还是运行时的应用，都可以直接使用这里定义的环境变量。</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ENV VERSION=1.0 DEBUG=on \
    NAME=&quot;Happy Feet&quot;
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">这个例子中演示了如何换行，以及对含有空格的值用双引号括起来的办法，这和 Shell 下的行为是一致的。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">6 EXPOSE</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">为构建的镜像设置监听端口，使容器在运行时监听。格式：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>EXPOSE &lt;port&gt; [&lt;port&gt;...]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">EXPOSE 指令并不会让容器监听 host 的端口，如果需要，需要在 docker run 时使用 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>-p<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>、<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>-P<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code> 参数来发布容器端口到 host 的某个端口上。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">7 VOLUME 定义匿名卷</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">VOLUME用于创建挂载点，即向基于所构建镜像创始的容器添加卷：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>VOLUME [&quot;/data&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">一个卷可以存在于一个或多个容器的指定目录，该目录可以绕过联合文件系统，并具有以下功能：</p>

<ul style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0px;margin-bottom:16px;padding-left:2em;">
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;">卷可以容器间共享和重用</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">容器并不一定要和其它容器共享卷</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">修改卷后会立即生效</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">对卷的修改不会对镜像产生影响</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">卷会一直存在，直到没有任何容器在使用它</li>
</ul>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">VOLUME 让我们可以将源代码、数据或其它内容添加到镜像中，而又不并提交到镜像中，并使我们可以多个容器间共享这些内容。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">8 WORKDIR 指定工作目录</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">WORKDIR用于在容器内设置一个工作目录：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>WORKDIR /path/to/workdir
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">通过WORKDIR设置工作目录后，Dockerfile 中其后的命令 RUN、CMD、ENTRYPOINT、ADD、COPY 等命令都会在该目录下执行。
如，使用WORKDIR设置工作目录：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>WORKDIR /a
WORKDIR b
WORKDIR c
RUN pwd
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">在以上示例中，pwd 最终将会在 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>/a/b/c<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code> 目录中执行。在使用 docker run 运行容器时，可以通过<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>-w<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>参数覆盖构建时所设置的工作目录。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">9 USER 指定当前用户</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">USER 用于指定运行镜像所使用的用户：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>USER daemon
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">使用USER指定用户时，可以使用用户名、UID 或 GID，或是两者的组合。以下都是合法的指定试：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>USER user
USER user:group
USER uid
USER uid:gid
USER user:gid
USER uid:group
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">使用USER指定用户后，Dockerfile 中其后的命令 RUN、CMD、ENTRYPOINT 都将使用该用户。镜像构建完成后，通过 docker run 运行容器时，可以通过 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>-u<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code> 参数来覆盖所指定的用户。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">10 CMD</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">CMD用于指定在容器启动时所要执行的命令。CMD 有以下三种格式：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]
CMD [&quot;param1&quot;,&quot;param2&quot;]
CMD command param1 param2
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">省略可执行文件的 exec 格式，这种写法使 CMD 中的参数当做 ENTRYPOINT 的默认参数，此时 ENTRYPOINT 也应该是 exec 格式，具体与 ENTRYPOINT 的组合使用，参考 ENTRYPOINT。</p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;font-weight:600;">注意</strong><br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
与 RUN 指令的区别：RUN 在构建的时候执行，并生成一个新的镜像，CMD 在容器运行的时候执行，在构建时不进行任何操作。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">11 ENTRYPOINT</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">ENTRYPOINT 用于给容器配置一个可执行程序。也就是说，每次使用镜像创建容器时，通过 ENTRYPOINT 指定的程序都会被设置为默认程序。ENTRYPOINT 有以下两种形式：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]
ENTRYPOINT command param1 param2
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">ENTRYPOINT 与 CMD 非常类似，不同的是通过<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>docker run<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>执行的命令不会覆盖 ENTRYPOINT，而<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>docker run<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>命令中指定的任何参数，都会被当做参数再次传递给 ENTRYPOINT。Dockerfile 中只允许有一个 ENTRYPOINT 命令，多指定时会覆盖前面的设置，而只执行最后的 ENTRYPOINT 指令。</p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>docker run<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>运行容器时指定的参数都会被传递给 ENTRYPOINT ，且会覆盖 CMD 命令指定的参数。如，执行<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>docker run &lt;image&gt; -d<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>时，-d 参数将被传递给入口点。</p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">也可以通过<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>docker run --entrypoint<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>重写 ENTRYPOINT 入口点。如：可以像下面这样指定一个容器执行程序：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ENTRYPOINT [&quot;/usr/bin/nginx&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">完整构建代码：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span># Version: 0.0.3
FROM ubuntu:16.04
MAINTAINER 何民三 &quot;cn.liuht@gmail.com&quot;
RUN apt-get update
RUN apt-get install -y nginx
RUN echo 'Hello World, 我是个容器' \ 
   &gt; /var/www/html/index.html
ENTRYPOINT [&quot;/usr/sbin/nginx&quot;]
EXPOSE 80
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">使用docker build构建镜像，并将镜像指定为 itbilu/test：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>docker build -t=&quot;itbilu/test&quot; .
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">构建完成后，使用itbilu/test启动一个容器：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>docker run -i -t  itbilu/test -g &quot;daemon off;&quot;
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">在运行容器时，我们使用了 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>-g &quot;daemon off;&quot;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>，这个参数将会被传递给 ENTRYPOINT，最终在容器中执行的命令为 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>/usr/sbin/nginx -g &quot;daemon off;&quot;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">12 LABEL</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">LABEL用于为镜像添加元数据，元数以键值对的形式指定：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">使用LABEL指定元数据时，一条LABEL指定可以指定一或多条元数据，指定多条元数据时不同元数据之间通过空格分隔。推荐将所有的元数据通过一条LABEL指令指定，以免生成过多的中间镜像。
如，通过LABEL指定一些元数据：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>LABEL version=&quot;1.0&quot; description=&quot;这是一个Web服务器&quot; by=&quot;IT笔录&quot;
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">指定后可以通过docker inspect查看：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>docker inspect itbilu/test
&quot;Labels&quot;: {
    &quot;version&quot;: &quot;1.0&quot;,
    &quot;description&quot;: &quot;这是一个Web服务器&quot;,
    &quot;by&quot;: &quot;IT笔录&quot;
},
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">13 ARG</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">ARG用于指定传递给构建运行时的变量：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ARG &lt;name&gt;[=&lt;default value&gt;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">如，通过ARG指定两个变量：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ARG site
ARG build_user=IT笔录
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">以上我们指定了 site 和 build_user 两个变量，其中 build_user 指定了默认值。在使用 docker build 构建镜像时，可以通过 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>--build-arg &lt;varname&gt;=&lt;value&gt;<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code> 参数来指定或重设置这些变量的值。</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>docker build --build-arg site=itiblu.com -t itbilu/test .
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">这样我们构建了 itbilu/test 镜像，其中site会被设置为 itbilu.com，由于没有指定 build_user，其值将是默认值 IT 笔录。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">14 ONBUILD</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">ONBUILD用于设置镜像触发器：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>ONBUILD [INSTRUCTION]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">当所构建的镜像被用做其它镜像的基础镜像，该镜像中的触发器将会被钥触发。
如，当镜像被使用时，可能需要做一些处理：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>[...]
ONBUILD ADD . /app/src
ONBUILD RUN /usr/local/bin/python-build --dir /app/src
[...]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">15 STOPSIGNAL</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">STOPSIGNAL用于设置停止容器所要发送的系统调用信号：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>STOPSIGNAL signal
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">所使用的信号必须是内核系统调用表中的合法的值，如：SIGKILL。</p>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">16 SHELL</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">SHELL用于设置执行命令（shell式）所使用的的默认 shell 类型：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>SHELL [&quot;executable&quot;, &quot;parameters&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">SHELL在Windows环境下比较有用，Windows 下通常会有 cmd 和 powershell 两种 shell，可能还会有 sh。这时就可以通过 SHELL 来指定所使用的 shell 类型：</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>FROM microsoft/windowsservercore

# Executed as cmd /S /C echo default
RUN echo default

# Executed as cmd /S /C powershell -command Write-Host default
RUN powershell -command Write-Host default

# Executed as powershell -command Write-Host hello
SHELL [&quot;powershell&quot;, &quot;-command&quot;]
RUN Write-Host hello

# Executed as cmd /S /C echo hello
SHELL [&quot;cmd&quot;, &quot;/S&quot;&quot;, &quot;/C&quot;]
RUN echo hello
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<h2 style="margin-bottom:16px;padding:0px;margin:0px;color:inherit;font-family:inherit;box-sizing:border-box;line-height:1.25;margin-top:24px;font-size:1.5em;padding-bottom:0.3em;border-bottom:1px solid rgb(234, 236, 239);font-weight:600;">Dockerfile 使用经验</h2>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">Dockerfile 示例</h3>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;font-weight:600;">构建Nginx运行环境</strong></p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span># 指定基础镜像
FROM sameersbn/ubuntu:14.04.20161014

# 维护者信息
MAINTAINER sameer@damagehead.com

# 设置环境
ENV RTMP_VERSION=1.1.10 \
    NPS_VERSION=1.11.33.4 \
    LIBAV_VERSION=11.8 \
    NGINX_VERSION=1.10.1 \
    NGINX_USER=www-data \
    NGINX_SITECONF_DIR=/etc/nginx/sites-enabled \
    NGINX_LOG_DIR=/var/log/nginx \
    NGINX_TEMP_DIR=/var/lib/nginx \
    NGINX_SETUP_DIR=/var/cache/nginx

# 设置构建时变量，镜像建立完成后就失效
ARG BUILD_LIBAV=false
ARG WITH_DEBUG=false
ARG WITH_PAGESPEED=true
ARG WITH_RTMP=true

# 复制本地文件到容器目录中
COPY setup/ ${NGINX_SETUP_DIR}/
RUN bash ${NGINX_SETUP_DIR}/install.sh

# 复制本地配置文件到容器目录中
COPY nginx.conf /etc/nginx/nginx.conf
COPY entrypoint.sh /sbin/entrypoint.sh

# 运行指令
RUN chmod 755 /sbin/entrypoint.sh

# 允许指定的端口
EXPOSE 80/tcp 443/tcp 1935/tcp

# 指定网站目录挂载点
VOLUME [&quot;${NGINX_SITECONF_DIR}&quot;]

ENTRYPOINT [&quot;/sbin/entrypoint.sh&quot;]
CMD [&quot;/usr/sbin/nginx&quot;]
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;font-weight:600;">构建tomcat 环境</strong></p>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Dockerfile文件</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span># 指定基于的基础镜像
FROM ubuntu:13.10  

# 维护者信息
MAINTAINER zhangjiayang &quot;zhangjiayang@sczq.com.cn&quot;  
  
# 镜像的指令操作
# 获取APT更新的资源列表
RUN echo &quot;deb http://archive.ubuntu.com/ubuntu precise main universe&quot;&gt; /etc/apt/sources.list
# 更新软件
RUN apt-get update  
  
# Install curl  
RUN apt-get -y install curl  
  
# Install JDK 7  
RUN cd /tmp &amp;&amp;  curl -L 'http://download.oracle.com/otn-pub/java/jdk/7u65-b17/jdk-7u65-linux-x64.tar.gz' -H 'Cookie: oraclelicense=accept-securebackup-cookie; gpw_e24=Dockerfile' | tar -xz  
RUN mkdir -p /usr/lib/jvm  
RUN mv /tmp/jdk1.7.0_65/ /usr/lib/jvm/java-7-oracle/  
  
# Set Oracle JDK 7 as default Java  
RUN update-alternatives --install /usr/bin/java java /usr/lib/jvm/java-7-oracle/bin/java 300     
RUN update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/java-7-oracle/bin/javac 300     

# 设置系统环境
ENV JAVA_HOME /usr/lib/jvm/java-7-oracle/  
  
# Install tomcat7  
RUN cd /tmp &amp;&amp; curl -L 'http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.8/bin/apache-tomcat-7.0.8.tar.gz' | tar -xz  
RUN mv /tmp/apache-tomcat-7.0.8/ /opt/tomcat7/  
  
ENV CATALINA_HOME /opt/tomcat7  
ENV PATH $PATH:$CATALINA_HOME/bin  

# 复件tomcat7.sh到容器中的目录 
ADD tomcat7.sh /etc/init.d/tomcat7  
RUN chmod 755 /etc/init.d/tomcat7  
  
# Expose ports.  指定暴露的端口
EXPOSE 8080  
  
# Define default command.  
ENTRYPOINT service tomcat7 start &amp;&amp; tail -f /opt/tomcat7/logs/catalina.out
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>tomcat7.sh<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>命令文件</p>

<pre style="word-wrap:normal;overflow:auto;font-size:85%;box-sizing:border-box;display:block;padding:16px;margin:0px 0px 10px;line-height:1.45;color:rgb(51, 51, 51);word-break:break-all;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;background-color:rgb(246, 248, 250);border:1px solid rgb(204, 204, 204);border-radius:3px;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;"><code style="word-break:normal;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;box-sizing:border-box;border-radius:3px;color:inherit;display:inline;padding:0px;margin:0px;font-size:100%;background:transparent;border:0px;white-space:pre;max-width:initial;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span>export JAVA_HOME=/usr/lib/jvm/java-7-oracle/  
export TOMCAT_HOME=/opt/tomcat7  
  
case $1 in  
start)  
  sh $TOMCAT_HOME/bin/startup.sh  
;;  
stop)  
  sh $TOMCAT_HOME/bin/shutdown.sh  
;;  
restart)  
  sh $TOMCAT_HOME/bin/shutdown.sh  
  sh $TOMCAT_HOME/bin/startup.sh  
;;  
esac  
exit 0
<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:100%;color:inherit;white-space:pre;line-height:inherit;letter-spacing:-0.2em;"></span></code></pre>

<h3 style="margin:0px;padding:0px;font-family:inherit;color:inherit;box-sizing:border-box;font-weight:600;line-height:1.25;margin-top:24px;margin-bottom:16px;font-size:1.25em;">原则与建议</h3>

<ul style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0px;margin-bottom:16px;padding-left:2em;">
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;">容器轻量化。从镜像中产生的容器应该尽量轻量化，能在足够短的时间内停止、销毁、重新生成并替换原来的容器。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">使用 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>.gitignore<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>。在大部分情况下，Dockerfile 会和构建所需的文件放在同一个目录中，为了提高构建的性能，应该使用 <code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>.gitignore<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code> 来过滤掉不需要的文件和目录。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">为了减少镜像的大小，减少依赖，仅安装需要的软件包。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">一个容器只做一件事。解耦复杂的应用，分成多个容器，而不是所有东西都放在一个容器内运行。如一个 Python Web 应用，可能需要 Server、DB、Cache、MQ、Log 等几个容器。一个更加极端的说法：One process per container。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">减少镜像的图层。不要多个 Label、ENV 等标签。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">对续行的参数按照字母表排序，特别是使用<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>apt-get install -y<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>安装包的时候。</li>
  <li style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-top:0.25em;">使用构建缓存。如果不想使用缓存，可以在构建的时候使用参数<code style="color:rgb(199, 37, 78);box-sizing:border-box;font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;background-color:rgba(27, 31, 35, 0.0470588);border-radius:3px;margin:0px;"><span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span>--no-cache=true<span style="font-family:SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;font-size:85%;color:rgb(199, 37, 78);letter-spacing:-0.2em;"> </span></code>来强制重新生成中间镜像。</li>
</ul>

<h2 style="margin-bottom:16px;padding:0px;margin:0px;color:inherit;font-family:inherit;box-sizing:border-box;line-height:1.25;margin-top:24px;font-size:1.5em;padding-bottom:0.3em;border-bottom:1px solid rgb(234, 236, 239);font-weight:600;">参考</h2>

<p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="https://docs.docker.com/engine/reference/builder/#usage" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">Dockerfile reference</a><br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
<a href="https://www.jianshu.com/p/cbce69c7a52f" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">使用Dockerfile构建Docker镜像</a><br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
<a href="https://itbilu.com/linux/docker/VyhM5wPuz.html" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">Docker镜像构建文件Dockerfile及相关命令介绍</a><br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
<a href="https://github.com/qianlei90/Blog/issues/35" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">深入Dockerfile（一）: 语法指南</a><br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
<a href="https://yeasy.gitbooks.io/docker_practice/content/" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">Docker — 从入门到实践</a></p>


            
            <div style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;">
   <p align="center" style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">
         <img src="Docker(三)：Dockerfile 命令详解 - 纯洁的微笑博客_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" height="258" style="border-style:none;border:0px;vertical-align:middle;font-family:"Microsoft YaHei", "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";padding:0px;box-sizing:content-box;margin:0px auto;background-color:rgb(255, 255, 255);max-width:600px;height:auto;display:block;" width="258"/>
         <br style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"/>
          扫描关注：纯洁的微笑
   </p>
   <p align="center" style="margin:0px 0px 10px;box-sizing:border-box;margin-top:15px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin-bottom:16px;font-size:11px;color:#cc0000;">
       <strong style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;font-weight:600;">（转载本站文章请注明作者和出处 <a href="http://www.ityouknow.com/" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">纯洁的微笑-ityouknow</a>）</strong>
   </p>
</div>
            
          <div style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;margin-bottom:0px;">
             

  
    <a href="http://www.ityouknow.com/docker/2018/03/15/docker-dockerfile-command-introduction.html#" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(3, 102, 214);text-decoration:none;">Show Disqus Comments</a>
    <div style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"></div>
    
    
  

  
        <div style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;"><div style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;font-size:16px;"><div style="margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;padding:1.25em 0px;text-align:center;"><p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">未找到相关的 <a href="https://github.com/ityouknow/blog-comments/issues" style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;box-sizing:border-box;background-color:transparent;color:rgb(97, 144, 232);text-decoration:none;">Issues</a> 进行评论</p><p style="padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin:0px 0px 10px;box-sizing:border-box;margin-top:0px;margin-bottom:16px;">请联系 @ityouknow 初始化创建</p></div><span style="font-size:16px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;position:fixed;bottom:100%;left:0px;right:0px;top:0px;opacity:0;"></span></div></div>
        
        
  


           </div>
        <span style="font-family:-apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;font-size:16px;line-height:1.5;color:rgb(36, 41, 46);display:table;clear:both;"></span></div>

        <div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;position:static;min-height:1px;padding-right:15px;padding-left:15px;">
            <h3 style="box-sizing:border-box;margin:0px;padding:0px;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;font-size:24px;">Post Directory</h3>
<div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;position:inherit;width:inherit;top:100px;">
<div style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:block;font-size:14px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 10px 2px;width:262px;">
    
    
    <dl style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;margin-top:0px;margin-bottom:20px;"><dt style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;font-weight:700;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">Dockerfile 指令详解</a></dt><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 1 FROM 指定基础镜像</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 2 RUN 执行命令</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 3 COPY 复制文件</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 4 ADD 更高级的复制文件</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 5 ENV 设置环境变量</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 6 EXPOSE</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 7 VOLUME 定义匿名卷</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 8 WORKDIR 指定工作目录</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 9 USER 指定当前用户</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 10 CMD</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 11 ENTRYPOINT</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 12 LABEL</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 13 ARG</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 14 ONBUILD</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 15 STOPSIGNAL</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 16 SHELL</a></dd><dt style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;font-weight:700;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">Dockerfile 使用经验</a></dt><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - Dockerfile 示例</a></dd><dd style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;margin-left:0px;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">  - 原则与建议</a></dd><dt style="box-sizing:border-box;margin:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;line-height:1.42857;font-weight:700;padding:2px 5px 2px 15px;border-left:5px solid rgb(102, 102, 102);cursor:pointer;"><a style="box-sizing:border-box;margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;background-color:transparent;color:rgb(51, 122, 183);text-decoration:none;display:inline-block;width:100%;">参考</a></dt></dl>
</div>
</div>


        </div>
        

    <span style="font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:table;clear:both;"> </span></div>

<span style="font-family:&quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Segoe UI&quot;, Arial, freesans, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;display:table;clear:both;"> </span></div>

        </div></div></div></div><br/></div></span>
</div></body></html> 