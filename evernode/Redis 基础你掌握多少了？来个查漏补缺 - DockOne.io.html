<html>
<head>
  <title>Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="14815"/>
<h1>Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2020/3/21 12:39</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://dockone.io/m/article/9727?from=singlemessage"><i>http://dockone.io/m/article/9727?from=singlemessage</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:14px 18px 10px 18px;border-radius: 4px; text-align:start;background-color:#f7f7f7;margin-bottom: 0"><span style="font-family: -webkit-standard;"><span style="font-size: 18px;"><span style="color: rgb(0, 181, 72);"><span style="background-color: #f7f7f7;">速读摘要</span></span></span></span></div><div style="padding:0px 18px;text-align:start;background-color:#f7f7f7;margin-top: 0;margin-bottom: 0"><span style="font-family: -webkit-standard;"><span style="font-size: 14px;"><span style="color: rgb(0, 0, 0);"><span style="background-color: #f7f7f7;">在一个网站访问量不大的时候，我们使用一个数据库就足以应对流量请求。Redis是一种key value存储的缓存数据库，所有的数据都有一个自己唯一的key。不同的是，在Redis中字典的值只能是字符串，而且他们rehash的方式不一样，在Redis中使用的是渐进式rehash。Redis中的zset是一个有序集合，通过它可以实现很多有意思的功能，比如学生成绩排行榜，视频播放量排行榜等等。</span></span></span></span></div><div style="padding: 8px 18px 16px 16px;margin-top: 0;margin-bottom:12px;text-align:start;background-color:#f7f7f7;"><span style="font-family: -webkit-standard;"><span style="font-size: 12px;"><span style="color:#7B848C ;">原文约 </span><span style="color:#00B548;">4264 </span><span style="color: #7B848C;"> 字 </span><span style="color: #D9D9D9;white-space: pre">  |  </span><span style="color: #7B848C;">图片 </span><span style="color: #00B548;">34</span><span style="color: #7B848C;"> 张</span><span style="color: #D9D9D9;white-space: pre">  |  </span><span style="color: #7B848C;">建议阅读 </span><span style="color: #00B548;">9</span><span style="color:#7B848C ;"> 分钟</span></span><span style="color: #D9D9D9;white-space: pre">  |  </span><a href="https://static.app.yinxiang.com/embedded-web/clipper/#/Evaluating?d=2020-03-21&amp;nu=59661368-331e-422d-8bb2-3d96c76b8194&amp;fr=myyxbj&amp;ud=b85fe2&amp;v=2&amp;sig=404A491CFC0AAE4B720AFD8E13D4B0B7" name="___yx_evaluation___"><span style="font-size: 12px;color: #7B848C;text-decoration: none">评价反馈</span></a></span></div>
<div style="margin:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;line-height:1.42857143;color:#333;background-color:#fff;padding:0;padding-bottom:49px;font-family:&quot;Helvetica Neue&quot;,Helvetica,Arial,'Microsoft YaHei',sans-serif;background:url(http://dockone.io/static/mobile/img/bg.gif) repeat;font-size:14px"><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;height:44px;padding:0 10px;background-color:#499ef3"><a href="http://dockone.io/m/" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;text-decoration:none;cursor:pointer;outline:none;line-height:40px;color:#fff"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/logo.png" type="image/png" data-filename="logo.png" alt="" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0" width="52"/></a><span style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;float:right !important;margin:0;padding:0;line-height:42px"><a href="http://dockone.io/m/login/" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;margin-bottom:0;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border-radius:4px;border-color:#357ebd;margin:0;text-decoration:none;outline:none;border:none;width:70px;padding:0;font-size:15px;color:#fff;height:32px;line-height:32px;margin-right:5px;background-color:#4dabff">登录</a><a href="http://dockone.io/m/register/" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;margin-bottom:0;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border-radius:4px;border-color:#4cae4c;margin:0;text-decoration:none;outline:none;border:none;background-color:#58b957;width:70px;padding:0;font-size:15px;color:#fff;height:32px;line-height:32px">注册</a></span></div><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;margin:0;width:100%;padding:0"><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;background-color:#fff"><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;height:auto;overflow:hidden"><span style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0;float:left;margin:10px 0 10px 10px"><a href="http://dockone.io/m/topic/Redis" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;text-decoration:none;cursor:pointer;outline:none;border-radius:4px;float:left;display:inline-block;height:24px;line-height:22px;padding:2px 5px;background-color:#99cfff;font-size:15px;color:#fff">Redis</a></span></div></div><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0 10px;background-color:#fff;padding-bottom:10px"><h1 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;margin-top:20px;margin-bottom:10px;padding:0;margin:0;font-size:18px;color:#333;line-height:1.6em">Redis 基础你掌握多少了？来个查漏补缺</h1></div><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0 10px;background-color:#fff"><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;padding-bottom:10px;word-wrap:break-word"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h3 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;margin:0;padding:0;font-size:100%">Redis 是什么</h3>Redis 是开源，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。它支持多种类型的数据结构，如字符串 strings，散列 hashes，列表 lists，集合 sets，有序集合 sorted sets 与范围查询， bitmaps，hyperloglogs 和 地理空间（geospatial）索引半径查询。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>Redis 还内置了复制（replication），LUA脚本（Lua scripting）， LRU驱动事件（LRU eviction），事务（transactions）和不同级别的磁盘持久化（persistence），并通过 Redis 哨兵（Sentinel）和自动分区（Cluster）提供高可用性（high availability）。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>嗯，没错这就是 Redis 中文官方网站上面的介绍，简洁明了。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h3 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;margin:0;padding:0;font-size:100%">NoSQL 是什么</h3>我们知道 Redis 是一种非关系型数据库 NoSQL 。而为什么出现 NoSQL？NoSQL 又是什么呢？<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">单机数据库的年代</h4>在一个网站访问量不大的时候，我们使用一个数据库就足以应对流量请求。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/6ceb5e19963cec77287cc3c91ad624aa.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/6ceb5e19963cec77287cc3c91ad624aa.jpg" type="image/jpeg" data-filename="6ceb5e19963cec77287cc3c91ad624aa.jpg" alt="1.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="1.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">缓存 + 拆分</h4>随着访问量的上升，一个数据库已经不能满足我们的需求了。为了更高的性能，我们在中间加上了一个缓存层并且将数据库做了集群、结构优化和读写分离。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/d6e96334e3c012fa246613bf884df918.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/d6e96334e3c012fa246613bf884df918.jpg" type="image/jpeg" data-filename="d6e96334e3c012fa246613bf884df918.jpg" alt="2.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="2.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 而这里的缓存就是 NoSQL，当然做缓存也只是 NoSQL 的一种功能，就像 Redis 并不仅仅有缓存这一种功能。比如它还能实现 简单的消息队列，解决Session共享，计数器，排行榜，好友关系处理 等等功能，可见 Redis 是一个非常强大工具，让我们来学习它吧！<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h3 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;margin:0;padding:0;font-size:100%">Redis 通用命令</h3>首先我们抛开数据类型来讲关于 Redis 的通用命令。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/480f22dea95b46b678a5ef50a7224dfe.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/480f22dea95b46b678a5ef50a7224dfe.jpg" type="image/jpeg" data-filename="480f22dea95b46b678a5ef50a7224dfe.jpg" alt="3.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="3.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">操作 key 和 value</h4>Redis 是一种 key value 存储的缓存数据库，所有的数据都有一个自己唯一的key。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>这里为了方便演示，我使用了字符串相关的设置命令。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>keys [pattern] 获取符合要求的所有key。时间复杂度为 O(n)，一般在生产环境中不使用，因为 Redis 是单线程的，执行耗时的任务会阻塞其他任务。一般会使用 scan 命令替代（非阻塞）。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/359f5b57685b04c7b4d7ee358dde4247.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/359f5b57685b04c7b4d7ee358dde4247.jpg" type="image/jpeg" data-filename="359f5b57685b04c7b4d7ee358dde4247.jpg" alt="4.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="4.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>dbsize 获取当前存储数据个数。</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">exists key 判断是否存在该key</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">del key 删除指定数据</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">type key 获取指定key的数据类型</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">rename key newkey 重命名<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/ac798095994981e17aaa329c7226c5f1.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/ac798095994981e17aaa329c7226c5f1.jpg" type="image/jpeg" data-filename="ac798095994981e17aaa329c7226c5f1.jpg" alt="5.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="5.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">过期时间</h4>Redis 中很多数据都是用来作为缓存数据的，而作为缓存就需要有过期时间，在 Redis 中提供了很强大的过期时间设置功能。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">expire key seconds 为某个 key 设置过期时间。</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">ttl key 查看某个 key 的剩余时间，返回正数代表剩余的时间，-1代表永久，-2代表已过期或不存在。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/338f6fbb6d5c9f389d7cbf5058aa20f2.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/338f6fbb6d5c9f389d7cbf5058aa20f2.jpg" type="image/jpeg" data-filename="338f6fbb6d5c9f389d7cbf5058aa20f2.jpg" alt="6.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="6.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h3 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;margin:0;padding:0;font-size:100%">Redis 的五种基本数据类型</h3>在上面我说到了很多 Redis 作为缓存能实现的其他功能，比如计数器，排行榜，好友关系等，这些实现的依据就是靠着 Redis 的数据结构。在整个 Redis 中一共有五种基本的数据结构(还有些高级数据结构以后会讲)，他们分别是 字符串strings，散列 hashes，列表 lists，集合 sets，有序集合 sorted sets。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">字符串 string</h4>在绝大部分编程语言中都有 String 字符串类型，对于作为数据库的 Redis 也是必不可少的。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/7a82d5c937ec3964e42837d47eed78ac.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/7a82d5c937ec3964e42837d47eed78ac.jpg" type="image/jpeg" data-filename="7a82d5c937ec3964e42837d47eed78ac.jpg" alt="7.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="7.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">set key value 设置值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">get key 获取某个 key 的值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">mset key1 value1 key2 value2 批量设置并且是原子的，可以用来减少网络时间消耗</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>mget key1 key2 批量获取并且是原子的，可以用来减少网络时间消耗<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/22030c6f7bb8cfaa64e28ceb9ddeefd2.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/22030c6f7bb8cfaa64e28ceb9ddeefd2.jpg" type="image/jpeg" data-filename="22030c6f7bb8cfaa64e28ceb9ddeefd2.jpg" alt="8.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="8.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>incr key 自增指定 key 的值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">decr key 自减指定 key 的值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">incrby key value 自增指定数值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">decrby key value 自减指定数值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>incrbyfloat key floatvalue 增加指定浮点数，前面几个操作就可以用来实现计数器的功能。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/73dd300827bb523ecc15800bd868ac71.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/73dd300827bb523ecc15800bd868ac71.jpg" type="image/jpeg" data-filename="73dd300827bb523ecc15800bd868ac71.jpg" alt="9.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="9.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>setnx key value 如果不存在该key则可以设置成功，否则会失败，加上过期时间限制，则是redis实现分布式锁的一种方式（后面会提到）。</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>set key value xx 与前面相反，如果存在则设置成功，否则失败(相当于更新操作)<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/3326f12dab54a7ecec8544f2ec4a6558.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/3326f12dab54a7ecec8544f2ec4a6558.jpg" type="image/jpeg" data-filename="3326f12dab54a7ecec8544f2ec4a6558.jpg" alt="10.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="10.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>getset key newvalue 设置新值并返回旧值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">append key value 为原本内容追加内容</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">strlen key 获取字符串长度</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">getrange key start end 获取指定范围的内容</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>setrange key index value 设置指定范围的内容<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/9e7026b099b7228be8fbce215aa15221.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/9e7026b099b7228be8fbce215aa15221.jpg" type="image/jpeg" data-filename="9e7026b099b7228be8fbce215aa15221.jpg" alt="11.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="11.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>setex key seconds value 设置值且设置过期时间</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">set key value ex seconds nx 为不存在的 key 设置值且设置过期时间，分布式锁的实现方式。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/f299c7bb231fd8bdbe2782e0449b231a.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/f299c7bb231fd8bdbe2782e0449b231a.jpg" type="image/jpeg" data-filename="f299c7bb231fd8bdbe2782e0449b231a.jpg" alt="12.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="12.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">hash</h4><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/b6ac4fac15f348ce8ce8f18a2cbd96bd.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/b6ac4fac15f348ce8ce8f18a2cbd96bd.jpg" type="image/jpeg" data-filename="b6ac4fac15f348ce8ce8f18a2cbd96bd.jpg" alt="13.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="13.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 其实我们可以理解 hash 为小型 Redis ，Redis 在底层实现上和 Java 中的 HashMap 差不多，都是使用数组 + 链表的二维结构实现的。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/822cf657beb9d0a9e1438126e61c536e.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/822cf657beb9d0a9e1438126e61c536e.jpg" type="image/jpeg" data-filename="822cf657beb9d0a9e1438126e61c536e.jpg" alt="14.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="14.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 不同的是，在 Redis 中字典的值只能是字符串，而且他们 rehash 的方式不一样，在 Redis 中使用的是渐进式rehash 。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>在 rehash 的时候会保留新旧两个 hash 字典，在数据迁移的时候会将旧字典中的内容一点一点迁移到新字典中，查询的同时会查询两个 hash 字典，等数据全部迁移完成才会将新字典代替就字典。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>下面我们来看一下关于 hash 的基本操作。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hset key field value 设置字典中某个 key 的值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hsetnx key field value 设置字典中某个 key 的值（不存在的）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hmset key field1 value1 field2 value2……批量设置</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hget key field 获取字典中某个 key 的值</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hmget key field1 field2 批量获取</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>hgetall key 获取全部<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/6dc3aadba4f7ec89e57bc971d33e01c0.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/6dc3aadba4f7ec89e57bc971d33e01c0.jpg" type="image/jpeg" data-filename="6dc3aadba4f7ec89e57bc971d33e01c0.jpg" alt="15.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="15.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>hdel key field 删除某个 key</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hexists key field 判断是否存在</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hlen key 获取指定 key 对应的字典中的存储个数</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hvals key 返回所有的 value</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>hkeys key 返回所有的 key<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/30b2c66650b71912dc117d9f2ed1c4dc.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/30b2c66650b71912dc117d9f2ed1c4dc.jpg" type="image/jpeg" data-filename="30b2c66650b71912dc117d9f2ed1c4dc.jpg" alt="16.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="16.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>hincrby key field increValue 增加某个 value 的值（也可以增加负数）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">hincrbyfloat key field floatValue 增加某个 value 的值（浮点数）<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/9a1e21e40d5c4dc5ace357ee13fcccfe.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/9a1e21e40d5c4dc5ace357ee13fcccfe.jpg" type="image/jpeg" data-filename="9a1e21e40d5c4dc5ace357ee13fcccfe.jpg" alt="17.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="17.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">list</h4>Redis 中的列表相当于 Java 中的 LinkedList（双向链表），也就是底层是通过 链表 来实现的，所以对于 list 来说 插入删除操作很快，但索引定位非常慢。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/fc7cbffa8ba5a671008c2d62c0e77418.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/fc7cbffa8ba5a671008c2d62c0e77418.jpg" type="image/jpeg" data-filename="fc7cbffa8ba5a671008c2d62c0e77418.jpg" alt="18.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="18.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> Redis 提供了许多对于 list 的操作，如出，入等操作，你可以充分利用它们来实现一个 栈或者队列。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/7b0ec2020a266dcf77bd847c815ebaef.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/7b0ec2020a266dcf77bd847c815ebaef.jpg" type="image/jpeg" data-filename="7b0ec2020a266dcf77bd847c815ebaef.jpg" alt="19.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="19.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 下面我们来看一下关于 list 的基本操作。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lpush key item1 item2 item3... 从左入栈</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">rpush key item1 item2 item3... 从右入栈</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lpop key 从左出栈</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">rpop key 从右出栈</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lindex key index 获取指定索引的元素 O(n) 谨慎使用</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>lrange key start end 获取指定范围的元素 O(n) 谨慎使用<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/fc5f4569b8a30dca6a60ff1a847f098e.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/fc5f4569b8a30dca6a60ff1a847f098e.jpg" type="image/jpeg" data-filename="fc5f4569b8a30dca6a60ff1a847f098e.jpg" alt="20.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="20.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>linsert key before|after item newitem 在指定元素的前面或者后面添加新元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>lrem key count value 删除指定个数值为 value 的元素<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:0;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">count = 0：删除所有值为 value 的元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">count &gt; 0：从左到右删除 count 个值为 value 的元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">count &lt; 0：从右到做删除 |count| 个值为 value 的元素</li></ul></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>ltrim key start end 保留指定范围的元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>lset key index newValue 更新某个索引的值<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/68b8979eeccb979e30a2317e69b4d1d5.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/68b8979eeccb979e30a2317e69b4d1d5.jpg" type="image/jpeg" data-filename="68b8979eeccb979e30a2317e69b4d1d5.jpg" alt="21.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="21.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>blpop key timeout 没有则阻塞（timeout 指定阻塞时间为 0 代表永久）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">brpop key timeout 没有则阻塞（timeout指定阻塞时间为 0 代表永久）这两个可以用来实现消费者生产者<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/747b7653feccceecca419ee13f66c5d2.png" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/747b7653feccceecca419ee13f66c5d2.png" type="image/png" data-filename="747b7653feccceecca419ee13f66c5d2.png" alt="22.png" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="22.png"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>总结来说我们可以使用左入又出或者右入左出来实现队列，左入左出或者右入右出来实现栈。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lpush + lpop = Stack</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">rpush + rpop = Stack**</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lpush + rpop = Queue</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">rpush + lpop = Queue</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lpush/rpush + ltrim = Capped List（定长列表）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">lpush + brpop = Message Queue（消息队列）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">rpush + blpop = Message Queue（消息队列）</li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">set</h4>Redis 中的 set 相当于 Java 中的 HashSet（无序集合），其中里面的元素不可以重复，我们可以利用它实现一些去重的功能。我们还有对几个集合进行取交集，取并集等操作，这些操作就可以获取不同用户之间的共同好友，共同爱好等等。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/8009636e2ce6babf55fc161116c17dba.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/8009636e2ce6babf55fc161116c17dba.jpg" type="image/jpeg" data-filename="8009636e2ce6babf55fc161116c17dba.jpg" alt="23.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="23.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 下面我们就来看一下关于 set 的一些基本操作。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">sadd key value 添加元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">sdel key value 删除某个元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">sismember key value 判断是否是集合中的元素</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">srandmember key count 随机获取指定个数的元素（不会影响集合结构）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">spop key count 从集合中随机弹出元素（会破坏结合结构）</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">smembers key 获取集合所有元素 O(n) 复杂度</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>scard key 获取集合个数<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/24dad14f3f9c38875faac90b93d74ccf.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/24dad14f3f9c38875faac90b93d74ccf.jpg" type="image/jpeg" data-filename="24dad14f3f9c38875faac90b93d74ccf.jpg" alt="24.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="24.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>sinter set1 set2 ... 获取所有集合中的交集</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">sdiff set1 set2 ... 获取所有集合中的差集</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">sunion set1 set2 ... 获取所有集合中的并集<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/320c02030d78aeeef17f83f0bddddf88.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/320c02030d78aeeef17f83f0bddddf88.jpg" type="image/jpeg" data-filename="320c02030d78aeeef17f83f0bddddf88.jpg" alt="25.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="25.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">zset</h4>Redis 中的 zset 是一个 有序集合，通过它可以实现很多有意思的功能，比如学生成绩排行榜，视频播放量排行榜等等。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/9980f5251884395a8a21ce0e0303affb.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/9980f5251884395a8a21ce0e0303affb.jpg" type="image/jpeg" data-filename="9980f5251884395a8a21ce0e0303affb.jpg" alt="26.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="26.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> zset 中是使用 跳表 来实现的，我们知道只有数组这种连续的空间才能使用二分查找进行快速的定位，而链表是不可以的。跳表帮助链表查找的时候节省了很多时间（使用跳的方式来遍历索引来进行有序插入），如果不了解跳表的同学可以补习一下。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/06cc5141bb3f3897f53cbbb4343b45d0.png" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/06cc5141bb3f3897f53cbbb4343b45d0.png" type="image/png" data-filename="06cc5141bb3f3897f53cbbb4343b45d0.png" alt="27.png" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="27.png"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 下面我们来看一下关于 zset 的一些基本操作。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zadd key score element 添加，score用于排序，value需要唯一，由于使用的跳表，时间复杂度为 O(logn)。</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zrem key element 删除某元素 O(1) 时间复杂度</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zscore key element 获取某个元素的分数</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zincrby key incrScore element 增加某个元素的分数</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zrange key start end [withscores] 获取指定索引范围的元素加上withscores则返回分数 O(logn + m) 时间复杂度</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zrangebyscore key minScore maxScore [withscores] 获取指定分数范围的元素加上 withscores 则返回分数，O(logn + m) 时间复杂度</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">zcard key 获取有序集合长度<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/f0e2130ff06b81aecedb2f55c3f3f8ab.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/f0e2130ff06b81aecedb2f55c3f3f8ab.jpg" type="image/jpeg" data-filename="f0e2130ff06b81aecedb2f55c3f3f8ab.jpg" alt="28.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="28.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h3 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;margin:0;padding:0;font-size:100%">Redis 中的事务和管道</h3><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">管道 Pipeline</h4>在某些场景下我们在一次操作中可能需要执行多个命令，而如果我们只是一个命令一个命令去执行则会浪费很多网络消耗时间，如果将命令一次性传输到 Redis 中去再执行，则会减少很多开销时间。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>但是需要注意的是 Pipeline 中的命令并不是原子性执行的，也就是说管道中的命令到达 Redis 服务器的时候可能会被其他的命令穿插。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/154263fdb328a563367e9741f00a73cc.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/154263fdb328a563367e9741f00a73cc.jpg" type="image/jpeg" data-filename="154263fdb328a563367e9741f00a73cc.jpg" alt="29.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="29.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/b71da9e413ab150041d10b4ba04c86fe.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/b71da9e413ab150041d10b4ba04c86fe.jpg" type="image/jpeg" data-filename="b71da9e413ab150041d10b4ba04c86fe.jpg" alt="30.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="30.jpg"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h4 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:10px;margin-bottom:10px;margin:0;padding:0;font-size:100%">事务</h4>关系型数据库具有 ACID 特性，Redis 能保证A（原子性）和 I（隔离性），D（持久性）看是否有配置 RDB或者 AOF 持久化操作，但无法保证一致性，因为 Redis 事务不支持回滚。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>我们可以简单理解为 Redis 中的事务只是比 Pipeline 多了个原子性操作，也就是不会被其他命令给分割，如上图。<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;margin:0;list-style:none"><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">multi 事务开始的标志</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>exec 事务执行<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/26cd487b19faf129d679eff1e7409573.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/26cd487b19faf129d679eff1e7409573.jpg" type="image/jpeg" data-filename="26cd487b19faf129d679eff1e7409573.jpg" alt="31.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="31.jpg"/></a></div></li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>discard 清除在这个事务中放入队列的所有命令，即解除整个事务。</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">watch key 在事务开始前监控某个元素，如果在提交事务的时候发现这个元素的值被其他客户端更改了则事务会运行失败。</li><li style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0">unwatch key 解除监控<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/14d8a8151f895a4723a838e1f75cce48.jpg" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/14d8a8151f895a4723a838e1f75cce48.jpg" type="image/jpeg" data-filename="14d8a8151f895a4723a838e1f75cce48.jpg" alt="32.jpg" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="32.jpg"/></a></div></li></ul><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><h3 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;margin:0;padding:0;font-size:100%">Redis 常用命令总结</h3><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"><a href="http://dockone.io/uploads/article/20200212/4506c7bd6d72f63e8db4a1323e48c7a3.png" rel="lightbox" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none;display:block" target="_blank"><img src="Redis 基础你掌握多少了？来个查漏补缺 - DockOne.io_files/4506c7bd6d72f63e8db4a1323e48c7a3.png" type="image/png" data-filename="4506c7bd6d72f63e8db4a1323e48c7a3.png" alt="33.png" style="border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;margin:0;padding:0;max-width:100%;margin-bottom:10px" title="33.png"/></a></div><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/> 好了，这就是这篇文章全部的内容了，对于 Redis 你还有多少遗忘的或者没学习到的呢？<br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/><br style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0"/>原文链接：<a href="https://juejin.im/post/5dc4c5ef5188252af967afd7" rel="nofollow" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none" target="_blank">https://juejin.im/post/5dc4c5ef5188252af967afd7</a>，作者：FrancisQ <ul style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:0;margin-bottom:10px;padding:0;list-style:none;margin:10px 0"></ul></div></div><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0 10px;background-color:#fff"><span style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;float:right !important;margin:0;padding:0"><a style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none"><i style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:'icomoon';speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;padding:0;color:#e32528;line-height:36px;font-size:16px"></i></a></span><span style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;display:inline-block;background-color:#f5f5f5;border-radius:4px;font-size:17px"><a style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;text-decoration:none;cursor:pointer;outline:none;float:left;padding:0 7px;color:#999;height:34px;line-height:34px"><i style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:'icomoon';speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;padding:0;line-height:28px;font-size:18px;vertical-align:-2px;margin-right:3px"></i><b style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;font-weight:normal">0</b></a><a style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;text-decoration:none;cursor:pointer;outline:none;float:left;padding:0 7px;color:#999;border-left:1px solid #fff;height:34px;line-height:34px"><i style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:'icomoon';speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;padding:0;line-height:28px;font-size:18px;vertical-align:-2px"></i></a><a style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;text-decoration:none;cursor:pointer;outline:none;float:left;padding:0 7px;color:#999;border-left:1px solid #fff;height:34px;line-height:34px"><i style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:'icomoon';speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;padding:0;line-height:28px;font-size:18px;vertical-align:-2px"></i></a></span></div></div><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;background-color:#fff"><div style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:15px 10px 10px;border-bottom:1px solid #ccc"><h2 style="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-family:inherit;font-weight:500;line-height:1.1;color:inherit;margin-top:20px;margin-bottom:10px;padding:0;font-size:100%;margin:0">0 个回复</h2></div></div><a name="answer_form" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;color:#155faa;text-decoration:none;cursor:pointer;outline:none"></a><a href="http://dockone.io/login/" style="background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0;text-decoration:none;cursor:pointer;outline:none;display:block;height:34px;line-height:34px;margin:10px 0;background-color:#fff;color:#999;border:1px solid #e6e6e6;border-radius:4px;text-align:center">登录进行回复</a></div></div></span>
</div></body></html> 