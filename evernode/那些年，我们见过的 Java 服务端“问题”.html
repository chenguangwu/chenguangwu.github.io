<html>
<head>
  <title>那些年，我们见过的 Java 服务端“问题”</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="12973"/>
<h1>那些年，我们见过的 Java 服务端“问题”</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/9/20 8:29</i></td></tr>
<tr><td><b>标签：</b></td><td><i>微信</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&mid=2247487782&idx=5&sn=e0566d6e56236daced0f88c6c5ca31e6&chksm=fdeb2346ca9caa50bd36f1e3960716bb350a7b8ffc775454a6a7c8f1ee364d4fe31f8882c080&mpshare=1&scene=1&srcid=&sharer_sharetime=1568939361786&sharer_shareid=f5b9960e886b8a68c0c249bd0ed30f43#rd"><i>http://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247487782&amp;idx=5&amp;sn=e0566d6e56236daced0f88c6c5ca31e6&amp;chksm=fdeb2346ca9caa50bd36f1e3960716bb350a7b8ffc775454a6a7c8f1ee364d4fe31f8882c080&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1568939361786&amp;sharer_shareid=f5b9960e886b8a68c0c249bd0ed30f43#rd</i></a></td></tr>
</table>
</div>
<br/>

<div><span style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="margin:0;padding:0;background-color:#fff"><div style="margin:0;padding:0"><div style="margin:0;padding:0"><h2 style="font-weight:400;margin:0;padding:0;font-size:22px;line-height:1.4;margin-bottom:14px"> 那些年，我们见过的 Java 服务端“问题” </h2><div style="margin:0;padding:0;margin-bottom:22px;line-height:20px;font-size:0;word-wrap:break-word;word-break:break-all"><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative"><a style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)"> 阿里巴巴中间件 </a></span><em style="padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);color:rgba(0,0,0,0.3)"></em></div><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247487782&amp;idx=5&amp;sn=e0566d6e56236daced0f88c6c5ca31e6&amp;chksm=fdeb2346ca9caa50bd36f1e3960716bb350a7b8ffc775454a6a7c8f1ee364d4fe31f8882c080&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1568939361786&amp;sharer_shareid=f5b9960e886b8a68c0c249bd0ed30f43##" style="margin:0;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:block;padding:16px;text-align:center;margin-bottom:24px;border-radius:8px;background-color:rgba(0,0,0,0.03);line-height:1.4;color:rgba(0,0,0,0.3);font-size:0;visibility:hidden"><span style="margin:0;padding:0;font-size:15px">文章转载自公众号</span><span style="display:inline-block;background-color:#fff;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;overflow:hidden;padding:0;width:18px;height:18px;margin:0 4px 0 6px;vertical-align:top;position:relative;top:.1em;font-size:15px"><img src="那些年，我们见过的 Java 服务端“问题”_files/0.jpg" type="image/jpeg" data-filename="0.jpg" alt="高德技术" style="display:block;width:100%;height:100%;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;background-color:#eee;margin:0;padding:0"/></span><span style="margin:0;padding:0;color:#576b95;font-size:15px">高德技术</span><span style="margin:0;padding:0;font-size:15px">，</span><span style="margin:0;padding:0;font-size:15px"> 作者 常意 </span></a><div style="margin:0;padding:0;overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:17px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;color:rgb(0,122,170)">导读</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;color:rgb(0,122,170)"></span></span></strong></p><hr style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:normal;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;border-style:solid;border-right-width:0;border-bottom-width:0;border-left-width:0;border-color:rgba(0,0,0,0.1);transform-origin:0 0 0;transform:scale(1,0.5);box-sizing:border-box !important;overflow-wrap:break-word !important"/><p dir="ltr" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">明代著名的心学集大成者王阳明先生在《传习录》中有云：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">“道无精粗，人之所见有精粗。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如这一间房，人初进来，只见一个大规模如此。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">处久，便柱壁之类，一一看得明白。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">再久，如柱上有些文藻，细细都看出来。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">然只是一间房。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">”</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">是的，知识理论哪有什么精粗之分，只是人的认识程度不同而已。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">笔者在技术圈摸爬滚打数年，接触了各式各样的 Java 服务端架构，见得多了自然也就认识深了，就能分辨出各种方案的优劣了。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这里总结了一些初创公司存在的 Java 服务端问题，并尝试性地给出了一些解决方案，供大家交流参考。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:17px">系统不是分布式</span></strong></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><hr style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;background-color:rgb(255,255,255);border-style:solid;border-right-width:0;border-bottom-width:0;border-left-width:0;border-color:rgba(0,0,0,0.1);transform-origin:0 0;transform:scale(1,0.5);box-sizing:border-box !important;overflow-wrap:break-word !important"/><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">单机版系统抢单案例</span></strong></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,0,0);font-size:15px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 抢取订单函数</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span> synchronized <span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">grabOrder</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">Long orderId, Long userId</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 获取订单信息</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> OrderDO order = orderDAO.<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">get</span>(orderId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (Objects.isNull(order)) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">throw</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> BizRuntimeException(String.format(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;订单(%s)不存在&quot;</span>, orderId));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 检查订单状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (!Objects.<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">equals</span>(order.getStatus, OrderStatus.WAITING_TO_GRAB.getValue())) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">throw</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> BizRuntimeException(String.format(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;订单(%s)已被抢&quot;</span>, orderId));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置订单被抢</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> orderDAO.setGrabed(orderId, userId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;margin-bottom:5px;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;white-space:normal;background-color:rgb(255,255,255);letter-spacing:0.5px;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">以上代码，在一台服务器上运行没有任何问题。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">进入函数 grabOrder（抢取订单）时，利用 synchronized 关键字把整个函数锁定，要么进入函数前订单未被人抢取，从而抢单成功，要么进入函数前订单已被抢取导致抢单失败，绝对不会出现进入函数前订单未被抢取而进入函数后订单又被抢取的情况。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">但是，如果上面的代码在两台服务器上同时运行，由于 Java 的 synchronized 关键字只在一个虚拟机内生效，所以就会导致两个人能够同时抢取一个订单，但会以最后一个写入数据库的数据为准。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">所以，大多数的单机版系统，是无法作为分布式系统运行的。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">分布式系统抢单案例</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">添加分布式锁，进行代码优化：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 抢取订单函数</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">grabOrder</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">Long orderId, Long userId</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> Long lockId = orderDistributedLock.<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">lock</span>(orderId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">try</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> grabOrderWithoutLock(orderId, userId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> } <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">finally</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> orderDistributedLock.unlock(orderId, lockId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 不带锁的抢取订单函数</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">private</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">grabOrderWithoutLock</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">Long orderId, Long userId</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 获取订单信息</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> OrderDO order = orderDAO.<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">get</span>(orderId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (Objects.isNull(order)) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">throw</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> BizRuntimeException(String.format(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;订单(%s)不存在&quot;</span>, orderId));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 检查订单状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (!Objects.<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">equals</span>(order.getStatus, OrderStatus.WAITING_TO_GRAB.getValue())) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">throw</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> BizRuntimeException(String.format(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;订单(%s)已被抢&quot;</span>, orderId));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置订单被抢</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> orderDAO.setGrabed(orderId, userId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">优化后的代码，在调用函数 grabOrderWithoutLock（不带锁的抢取订单）前后，利用分布式锁 orderDistributedLock（订单分布式锁）进行加锁和释放锁，跟单机版的 synchronized 关键字加锁效果基本一样。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">分布式系统的优缺点</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式系统（Distributed System）是支持分布式处理的软件系统，是由通信网络互联的多处理机体系结构上执行任务的系统，包括分布式操作系统、分布式程序设计语言及其编译系统、分布式文件系统分布式数据库系统等。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式系统的优点：</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">可靠性、高容错性：</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">一台服务器的崩溃，不会影响其它服务器，其它服务器仍能提供服务。</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">可扩展性：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如果系统服务能力不足，可以水平扩展更多服务器。</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">灵活性：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">可以很容易的安装、实施、扩容和升级系统。</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">性能高：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">拥有多台服务器的计算能力，比单台服务器处理速度更快。</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">性价比高：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式系统对服务器硬件要求很低，可以选用廉价服务器搭建分布式集群，从而得到更好的性价比。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式系统的缺点：</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">排查难度高：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">由于系统分布在多台服务器上，故障排查和问题诊断难度较高。</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">软件支持少：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式系统解决方案的软件支持较少。</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">建设成本高：</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">需要多台服务器搭建分布式系统。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">曾经有不少的朋友咨询我：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">&quot;找外包做移动应用，需要注意哪些事项？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">&quot;</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">首先，确定是否需要用分布式系统。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">软件预算有多少？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">预计用户量有多少？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">预计访问量有多少？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">是否只是业务前期试水版？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">单台服务器能否解决？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">是否接收短时间宕机？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">……如果综合考虑，单机版系统就可以解决的，那就不要采用分布式系统了。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">因为单机版系统和分布式系统的差别很大，相应的软件研发成本的差别也很大。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其次，确定是否真正的分布式系统。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式系统最大的特点，就是当系统服务能力不足时，能够通过水平扩展的方式，通过增加服务器来增加服务能力。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">然而，单机版系统是不支持水平扩展的，强行扩展就会引起一系列数据问题。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">由于单机版系统和分布式系统的研发成本差别较大，市面上的外包团队大多用单机版系统代替分布式系统交付。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">那么，如何确定你的系统是真正意义上的分布式系统呢？</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">从软件上来说，是否采用了分布式软件解决方案；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">从硬件上来说，是否采用了分布式硬件部署方案。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">分布式软件解决方案</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">作为一个合格的分布式系统，需要根据实际需求采用相应的分布式软件解决方案。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">分布式锁</span></strong></span><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">分布式锁是单机锁的一种扩展，主要是为了锁住分布式系统中的物理块或逻辑块，用以此保证不同服务之间的逻辑和数据的一致性。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">目前，主流的分布式锁实现方式有3种：</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">基于数据库实现的分布式锁；</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">基于Redis实现的分布式锁；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">基于Zookeeper实现的分布式锁。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">分布式消息</span></strong><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)"></span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式消息中间件是支持在分布式系统中发送和接受消息的软件基础设施。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">常见的分布式消息中间件有 ActiveMQ、RabbitMQ、Kafka、MetaQ 等。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">MetaQ（全称Metamorphosis）是一个高性能、高可用、可扩展的分布式消息中间件，思路起源于 LinkedIn 的 Kafka ，但并不是 Kafka 的一个拷贝。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">MetaQ 具有消息存储顺序写、吞吐量大和支持本地和 XA 事务等特性，适用于大吞吐量、顺序消息、广播和日志数据传输等场景。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">数据库分片分组</span></strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">针对大数据量的数据库，一般会采用&quot;分片分组&quot;策略：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分片(shard)：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">主要解决扩展性问题，属于水平拆分。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">引入分片，就引入了数据路由和分区键的概念。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，分表解决的是数据量过大的问题，分库解决的是数据库性能瓶颈的问题。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分组(group)：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">主要解决可用性问题，通过主从复制的方式实现，并提供读写分离策略用以提高数据库性能。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">分布式计算</strong></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">分布式计算( Distributed computing )是一种&quot;把需要进行大量计算的工程数据分割成小块，由多台计算机分别计算；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">在上传运算结果后，将结果统一合并得出数据结论&quot;的科学。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当前的高性能服务器在处理海量数据时，其计算能力、内存容量等指标都远远无法达到要求。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">在大数据时代，工程师采用廉价的服务器组成分布式服务集群，以集群协作的方式完成海量数据的处理，从而解决单台服务器在计算与存储上的瓶颈。 </span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">Hadoop、Storm以 及 Spark 是常用的分布式计算中间件，Hadoop 是对非实时数据做批量处理的中间件，Storm 和 Spark 是对实时数据做流式处理的中间件。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">除此之外，还有更多的分布式软件解决方案，这里就不再一一介绍了。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">分布式硬件部署方案</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">介绍完服务端的分布式软件解决方案，就不得不介绍一下服务端的分布式硬件部署方案。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这里，只画出了服务端常见的接口服务器、MySQL 数据库、Redis 缓存，而忽略了其它的云存储服务、消息队列服务、日志系统服务……</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">一般单机版部署方案</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><img src="那些年，我们见过的 Java 服务端“问题”_files/640.png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:677px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">架构说明：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">只有1台接口服务器、1 个 MySQL 数据库、1 个可选 Redis 缓存，可能都部署在同一台服务器上。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用于演示环境、测试环境以及不怕宕机且日 PV 在 5 万以内的小型商业应用。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">中小型分布式硬件部署方案</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [1].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:677px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">架构说明：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">通过 SLB/Nginx 组成一个负载均衡的接口服务器集群，MySQL 数据库和 Redis 缓存采用了一主一备（或多备）的部署方式。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用于日 PV 在 500 万以内的中小型商业应用。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">大型分布式硬件部署方案</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><img src="那些年，我们见过的 Java 服务端“问题”_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:677px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">架构说明：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">通过 SLB/Nginx 组成一个负载均衡的接口服务器集群，利用分片分组策略组成一个 MySQL 数据库集群和Redis缓存集群。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用于日 PV 在 500 万以上的大型商业应用。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:17px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);color:rgb(0,122,170)">多线程使用不正确</span></strong><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);color:rgb(0,122,170)"></span></strong></span></p><hr style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:normal;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;border-style:solid;border-right-width:0;border-bottom-width:0;border-left-width:0;border-color:rgba(0,0,0,0.1);transform-origin:0 0 0;transform:scale(1,0.5);box-sizing:border-box !important;overflow-wrap:break-word !important"/><p dir="ltr" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">多线程最主要目的就是&quot;最大限度地利用 CPU 资源&quot;，可以把串行过程变成并行过程，从而提高了程序的执行效率。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">一个慢接口案例</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">假设在用户登录时，如果是新用户，需要创建用户信息，并发放新用户优惠券。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">例子代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:justify;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 登录函数(示意写法)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> UserVO login(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">String</span> phoneNumber, <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">String</span> verifyCode) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 检查验证码</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (!checkVerifyCode(phoneNumber, verifyCode)) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">throw</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> ExampleException(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;验证码错误&quot;</span>);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 检查用户存在</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> UserDO user = userDAO.getByPhoneNumber(phoneNumber);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (Objects.nonNull(user)) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span> transUser(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 创建新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span> createNewUser(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 创建新用户函数</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">private</span> UserVO createNewUser(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">String</span> phoneNumber) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 创建新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> UserDO user = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> UserDO();</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ...</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> userDAO.insert(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 绑定优惠券</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> couponService.bindCoupon(user.getId(), CouponType.NEW_USER);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 返回新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span> transUser(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，绑定优惠券（bindCoupon）是给用户绑定新用户优惠券，然后再给用户发送推送通知。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如果随着优惠券数量越来越多，该函数也会变得越来越慢，执行时间甚至超过1秒，并且没有什么优化空间。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">现在，登录（login）函数就成了名副其实的慢接口，需要进行接口优化。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">采用多线程优化</strong></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></strong></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">通过分析发现，绑定优惠券（bindCoupon）函数可以异步执行。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">首先想到的是采用多线程解决该问题，代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 创建新用户函数</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">private</span> UserVO <span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">createNewUser</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">String phoneNumber</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 创建新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> UserDO user = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> UserDO();</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ...</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> userDAO.insert(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 绑定优惠券</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> executorService.execute(()-&gt;couponService.bindCoupon(user.getId(), CouponType.NEW_USER));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 返回新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span> transUser(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">现在，在新线程中执行绑定优惠券（bindCoupon）函数，使用户登录（login）函数性能得到很大的提升。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">但是，如果在新线程执行绑定优惠券函数过程中，系统发生重启或崩溃导致线程执行失败，用户将永远获取不到新用户优惠券。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">除非提供用户手动领取优惠券页面，否则就需要程序员后台手工绑定优惠券。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">所以，用采用多线程优化慢接口，并不是一个完善的解决方案。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">采用消息队列优化</span></strong></span><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如果要保证绑定优惠券函数执行失败后能够重启执行，可以采用数据库表、Redis 队列、消息队列的等多种解决方案。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">由于篇幅优先，这里只介绍采用 MetaQ 消息队列解决方案，并省略了 MetaQ 相关配置仅给出了核心代码。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">消息生产者代码：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">// 创建新用户函数</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">private</span> UserVO createNewUser(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">String</span> phoneNumber) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 创建新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> UserDO user = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> UserDO();</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ...</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> userDAO.insert(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 发送优惠券消息</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> Long userId = user.getId();</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> CouponMessageDataVO data = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> CouponMessageDataVO();</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> data.setUserId(userId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> data.setCouponType(CouponType.NEW_USER);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> Message message = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">new</span> Message(TOPIC, TAG, userId, <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">JSON</span>.toJSONBytes(data));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> SendResult result = metaqTemplate.sendMessage(message);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (!Objects.equals(result, SendStatus.SEND_OK)) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> log.error(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;发送用户({})绑定优惠券消息失败:{}&quot;</span>, userId, <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">JSON</span>.toJSONString(result));</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 返回新用户</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span> transUser(user);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">注意：可能出现发生消息不成功，但是这种概率相对较低。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">消息消费者代码：</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 优惠券服务类</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Slf4j</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Service</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">class</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">CouponService</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">extends</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">DefaultMessageListener</span>&lt;<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">String</span>&gt; </span>{</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 消息处理函数</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Override</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Transactional(rollbackFor = Exception.class)</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> void onReceiveMessages(MetaqMessage&lt;String&gt; message) {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 获取消息体</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> String body = message.getBody();</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (StringUtils.isBlank(body)) {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> log.warn(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;获取消息({})体为空&quot;</span>, message.getId());</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span>;</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 解析消息数据</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> CouponMessageDataVO <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">data</span> = JSON.parseObject(body, CouponMessageDataVO.<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">class</span>);</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (Objects.isNull(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">data</span>)) {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> log.warn(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;解析消息({})体为空&quot;</span>, message.getId());</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">return</span>;</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 绑定优惠券</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> bindCoupon(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">data</span>.getUserId(), <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">data</span>.getCouponType());</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">}</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">解决方案优点：</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">采集 MetaQ 消息队列优化</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">慢接口解决方案的优点：</span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如果系统发生重启或崩溃，导致消息处理函数执行失败，不会确认消息已消费；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">由于 MetaQ 支持多服务订阅同一队列，该消息可以转到别的服务进行消费，亦或等到本服务恢复正常后再进行消费。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">消费者可多服务、多线程进行消费消息，即便消息处理时间较长，也不容易引起消息积压；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">即便引起消息积压，也可以通过扩充服务实例的方式解决。</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如果需要重新消费该消息，只需要在 MetaQ 管理平台上点击&quot;消息验证&quot;即可。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:17px">流程定义不合理</span></strong></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><hr style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:normal;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;border-style:solid;border-right-width:0;border-bottom-width:0;border-left-width:0;border-color:rgba(0,0,0,0.1);transform-origin:0 0 0;transform:scale(1,0.5);box-sizing:border-box !important;overflow-wrap:break-word !important"/><p dir="ltr" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">原有的采购流程</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这是一个简易的采购流程，由库管系统发起采购，采购员开始采购，采购员完成采购，同时回流采集订单到库管系统。</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [2].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:570px !important;visibility:visible !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，完成采购动作的核心代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 完成采购动作函数(此处省去获取采购单/验证状态/锁定采购单等逻辑) */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">finishPurchase</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">PurchaseOrder order</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 完成相关处理</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ......</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 回流采购单(调用HTTP接口)</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> backflowPurchaseOrder(order);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置完成状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderDAO.setStatus(order.getId(), PurchaseOrderStatus.FINISHED.getValue());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">由于函数 backflowPurchaseOrder（回流采购单）调用了 HTTP 接口，可能引起以下问题：</span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">该函数可能耗费时间较长，导致完成采购接口成为慢接口；</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">该函数可能失败抛出异常，导致客户调用完成采购接口失败。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">优化的采购流程</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">通过需求分析，把&quot;采购员完成采购并回流采集订单&quot;动作拆分为&quot;采购员完成采购&quot;和&quot;回流采集订单&quot;两个独立的动作，把&quot;采购完成&quot;拆分为&quot;采购完成&quot;和&quot;回流完成&quot;两个独立的状态，更方便采购流程的管理和实现。</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [3].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(238,237,235);border-width:1px;border-style:solid;border-color:rgb(238,237,235);background-size:22px;background-position:center center;background-repeat:no-repeat;box-sizing:border-box !important;overflow-wrap:break-word !important;height:82.3151px !important;width:677px !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">拆分采购流程的动作和状态后，核心代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 完成采购动作函数(此处省去获取采购单/验证状态/锁定采购单等逻辑) */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">finishPurchase</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">PurchaseOrder order</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 完成相关处理</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ......</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置完成状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderDAO.setStatus(order.getId(), PurchaseOrderStatus.FINISHED.getValue());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 执行回流动作函数(此处省去获取采购单/验证状态/锁定采购单等逻辑) */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">executeBackflow</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">PurchaseOrder order</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 回流采购单(调用HTTP接口)</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> backflowPurchaseOrder(order);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置回流状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderDAO.setStatus(order.getId(), PurchaseOrderStatus.BACKFLOWED.getValue());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，函数 executeBackflow（执行回流）由定时作业触发执行。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">如果回流采购单失败，采购单状态并不会修改为&quot;已回流&quot;；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">等下次定时作业执行时，将会继续执行回流动作；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">直到回流采购单成功为止。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">有限状态机介绍</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">概念</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">有限状态机（Finite-state machine，FSM），又称有限状态自动机，简称状态机，是表示有限个状态以及在这些状态之间的转移和动作等行为的一个数学模型。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">要素</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态机可归纳为4个要素：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">现态、条件、动作、次态。</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [4].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:334px !important;visibility:visible !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">现态：</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">指当前流程所处的状态，包括起始、中间、终结状态。</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">条件：</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">也可称为事件；</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当一个条件被满足时，将会触发一个动作并执行一次状态的迁移。</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">动作：</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当条件满足后要执行的动作。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">动作执行完毕后，可以迁移到新的状态，也可以仍旧保持原状态。</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">次态：</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当条件满足后要迁往的状态。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">“次态”是相对于“现态”而言的，“次态”一旦被激活，就转变成新的“现态”了。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态表示流程中的持久状态，流程图上的每一个圈代表一个状态。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">初始状态：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"> 流程开始时的某一状态；</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">中间状态：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"> 流程中间过程的某一状态；</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">终结状态：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"> 流程完成时的某一状态。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">使用建议：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态必须是一个持久状态，而不能是一个临时状态；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">终结状态不能是中间状态，不能继续进行流程流转；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态划分合理，不要把多个状态强制合并为一个状态；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态尽量精简，同一状态的不同情况可以用其它字段表示。</span></p></li></ul><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">动作</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">动作的三要素：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">角色、现态、次态，流程图上的每一条线代表一个动作。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">角色：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"> 谁发起的这个操作，可以是用户、定时任务等；</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">现态：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"> 触发动作时当前的状态，是执行动作的前提条件；</span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">次态：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"> 完成动作后达到的状态，是执行动作的最终目标。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">使用建议：</span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">每个动作执行前，必须检查当前状态和触发动作状态的一致性；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">状态机的状态更改，只能通过动作进行，其它操作都是不符合规范的；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">需要添加分布式锁保证动作的原子性，添加数据库事务保证数据的一致性；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">类似的动作（比如操作用户、请求参数、动作含义等）可以合并为一个动作，并根据动作执行结果转向不同的状态。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:17px">系统间交互不科学</span></strong></span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><hr style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:normal;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;border-style:solid;border-right-width:0;border-bottom-width:0;border-left-width:0;border-color:rgba(0,0,0,0.1);transform-origin:0 0 0;transform:scale(1,0.5);box-sizing:border-box !important;overflow-wrap:break-word !important"/><p dir="ltr" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">直接通过数据库交互</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">在一些项目中，系统间交互不通过接口调用和消息队列，而是通过数据库直接访问。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">问其原因，回答道：</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">&quot;项目工期太紧张，直接访问数据库，简单又快捷&quot;。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">还是以上面的采购流程为例——采购订单由库管系统发起，由采购系统负责采购，采购完成后通知库管系统，库管系统进入入库操作。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">采购系统采购完成后，通知库管系统数据库的代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 执行回流动作函数(此处省去获取采购单/验证状态/锁定采购单等逻辑) */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">executeBackflow</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">PurchaseOrder order</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 完成原始采购单</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> rawPurchaseOrderDAO.setStatus(order.getRawId(), RawPurchaseOrderStatus.FINISHED.getValue());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置回流状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderDAO.setStatus(order.getId(), PurchaseOrderStatus.BACKFLOWED.getValue());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，通过rawPurchaseOrderDAO（原始采购单DAO）直接访问库管系统的数据库表，并设置原始采购单状态为已完成。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">一般情况下，直接通过数据访问的方式是不会有问题的。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">但是，一旦发生竞态，就会导致数据不同步。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">有人会说，可以考虑使用同一分布式锁解决该问题。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">是的，这种解决方案没有问题，只是又在系统间共享了分布式锁。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">直接通过数据库交互的缺点：</span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">直接暴露数据库表，容易产生数据安全问题；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">多个系统操作同一数据库表，容易造成数据库表数据混乱；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">操作同一个数据库表的代码，分布在不同的系统中，不便于管理和维护；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">具有数据库表这样的强关联，无法实现系统间的隔离和解耦。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">通过Dubbo接口交互</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">由于采购系统和库管系统都是内部系统，可以通过类似Dubbo的RPC接口进行交互。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">库管系统代码：</span><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 采购单服务接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span> PurchaseOrderService {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 完成采购单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">void</span> finishPurchaseOrder(Long orderId);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 采购单服务实现 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Service</span>(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;purchaseOrderService&quot;</span>)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">class</span> PurchaseOrderServiceImpl <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">implements</span> PurchaseOrderService {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 完成采购单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Override</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Transactional</span>(rollbackFor = Exception.class)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">void</span> finishPurchaseOrder(Long orderId) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 相关处理</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ...</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 完成采购单</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderService.finishPurchaseOrder(order.getRawId());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，库管系统通过Dubbo把PurchaseOrderServiceImpl（采购单服务实现）以PurchaseOrderService（采购单服务接口）定义的接口服务暴露给采购系统。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这里，省略了Dubbo开发服务接口相关配置。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">采购系统代码：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 执行回流动作函数(此处省去获取采购单/验证状态/锁定采购单等逻辑) */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">void</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">executeBackflow</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">PurchaseOrder order</span>)</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 完成采购单</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderService.finishPurchaseOrder(order.getRawId());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 设置回流状态</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> purchaseOrderDAO.setStatus(order.getId(), PurchaseOrderStatus.BACKFLOWED.getValue());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">其中，purchaseOrderService（采购单服务）为库管系统PurchaseOrderService（采购单服务）在采购系统中的Dubbo服务客户端存根，通过该服务调用库管系统的服务接口函数finishPurchaseOrder（完成采购单函数）。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这样，采购系统和库管系统自己的强关联，通过Dubbo就简单地实现了系统隔离和解耦。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当然，除了采用Dubbo接口外，还可以采用HTTPS、HSF、WebService等同步接口调用方式，也可以采用MetaQ等异步消息通知方式。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">常见系统间交互协议</span></strong><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">同步接口调用</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">同步接口调用是以一种阻塞式的接口调用机制。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">常见的交互协议有：</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">HTTP/HTTPS接口；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">WebService接口；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">Dubbo/HSF接口；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">CORBA接口。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">异步消息通知</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">异步消息通知是一种通知式的信息交互机制。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当系统发生某种事件时，会主动通知相应的系统。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">常见的交互协议有：</span></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">MetaQ的消息通知；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">CORBA消息通知。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">常见系统间交互方式</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">请求-应答</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em;text-align:center"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [5].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:368px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适合于简单的耗时较短的接口同步调用场景，比如 Dubbo 接口同步调用。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">通知-确认</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em;text-align:center"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [6].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:332px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">适合于</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">简单的异步消息通知场景，比如 MetaQ 消息通知。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">请求-应答-查询-返回</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em;text-align:center"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [7].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(238,237,235);border-width:1px;border-style:solid;border-color:rgb(238,237,235);background-size:22px;background-position:center center;background-repeat:no-repeat;box-sizing:border-box !important;overflow-wrap:break-word !important;height:483px !important;width:332px !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">适合于复杂的耗时较长的接口同步调用场景，比如提交作业任务并定期查询任务结果。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">请求-应答-回调</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em;text-align:center"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [8].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:332px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">适合于复杂的耗时较长的接口同步调用和异步回调相结合的场景，比如支付宝的订单支付。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line">请求-应答-通知-确认</span></strong><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(255,255,255);color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em;text-align:center"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [9].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;box-sizing:border-box !important;overflow-wrap:break-word !important;width:332px !important;visibility:visible !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适合于复杂的耗时较长的接口同步调用和异步消息通知相结合的场景，比如提交作业任务并等待完成消息通知。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">通知-确认-通知-确认</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em;text-align:center"><img src="那些年，我们见过的 Java 服务端“问题”_files/640 [10].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;background-color:rgb(238,237,235);border-width:1px;border-style:solid;border-color:rgb(238,237,235);background-size:22px;background-position:center center;background-repeat:no-repeat;box-sizing:border-box !important;overflow-wrap:break-word !important;height:424px !important;width:332px !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用范围：</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适合于复杂的耗时较长的异步消息通知场景。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(0,122,170)"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:17px">数据查询不分页</span></strong></span></p><hr style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:normal;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;border-style:solid;border-right-width:0;border-bottom-width:0;border-left-width:0;border-color:rgba(0,0,0,0.1);transform-origin:0 0 0;transform:scale(1,0.5);box-sizing:border-box !important;overflow-wrap:break-word !important"/><p dir="ltr" style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">在数据查询时，由于未能对未来数据量做出正确的预估，很多情况下都没有考虑数据的分页查询。</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">普通查询案例</span></strong></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">以下是查询过期订单的代码：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单DAO接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">OrderDAO</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> @Select(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;select * from t_order where status = 5 and gmt_create &lt; date_sub(current_timestamp, interval 30 day)&quot;</span>)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span> List&lt;OrderDO&gt; <span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">queryTimeout</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"></span>)</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单服务接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">OrderService</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span> List&lt;OrderVO&gt; <span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">queryTimeout</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"></span>)</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当过期订单数量很少时，以上代码不会有任何问题。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">但是，当过期订单数量达到几十万上千万时，以上代码就会出现以下问题：</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">数据量太大，导致服务端的内存溢出；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">数据量太大，导致查询接口超时、返回数据超时等；</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">数据量太大，导致客户端的内存溢出。</span></p></li></ul><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">所以，在数据查询时，特别是不能预估数据量的大小时，需要考虑数据的分页查询。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这里，主要介绍&quot;设置最大数量&quot;和&quot;采用分页查询&quot;两种方式。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">设置最大数量</span></strong></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></strong></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">&quot;设置最大数量&quot;是一种最简单的分页查询，相当于只返回第一页数据。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">例子代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em;text-align:justify"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单DAO接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">OrderDAO</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> @Select(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;select * from t_order where status = 5 and gmt_create &lt; date_sub(current_timestamp, interval 30 day) limit 0, #{maxCount}&quot;</span>)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span> List&lt;OrderDO&gt; <span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">queryTimeout</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">@Param(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;maxCount&quot;</span></span>) Integer maxCount)</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单服务接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">OrderService</span> {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">public</span> List&lt;OrderVO&gt; <span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14;box-sizing:border-box !important;overflow-wrap:break-word !important">queryTimeout</span>(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">Integer maxCount</span>)</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用于没有分页需求、但又担心数据过多导致内存溢出、数据量过大的查询。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:16px"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255)">采用分页查询</span></strong></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">&quot;采用分页查询&quot;是指定 startIndex（开始序号）和 pageSize（页面大小）进行数据查询，或者指定 pageIndex（分页序号）和 pageSize（页面大小）进行数据查询。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">例子代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单DAO接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">interface</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5;box-sizing:border-box !important;overflow-wrap:break-word !important">OrderDAO</span></span>{</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 统计过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Select(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">&quot;select count(*) from t_order where status = 5 and gmt_create &lt; date_sub(current_timestamp, interval 30 day)&quot;</span>)</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">Long</span> countTimeout();</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Select(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">&quot;select * from t_order where status = 5 and gmt_create &lt; date_sub(current_timestamp, interval 30 day) limit #{startIndex}, #{pageSize}&quot;</span>)</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> List&lt;OrderDO&gt; queryTimeout(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">&quot;startIndex&quot;</span>)</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">Long</span> startIndex, <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param(<span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">&quot;pageSize&quot;</span>)</span> Integer pageSize);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单服务接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37;box-sizing:border-box !important;overflow-wrap:break-word !important">interface</span><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5;box-sizing:border-box !important;overflow-wrap:break-word !important">OrderService</span></span>{</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> PageData&lt;OrderVO&gt; queryTimeout(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">Long</span> startIndex, Integer pageSize);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">适用于真正的分页查询，查询参数 startIndex（开始序号）和 pageSize（页面大小）可由调用方指定。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:16px">分页查询隐藏问题</span></strong></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">假设，我们需要在一个定时作业（每 5 分钟执行一次）中，针对已经超时的订单（status=5，创建时间超时 30 天）进行超时关闭（status=10）。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">实现代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 订单DAO接口 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">OrderDAO</span></span>{</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Select(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">&quot;select * from t_order where status = 5 and gmt_create &lt; date_sub(current_timestamp, interval 30 day) limit #{startIndex}, #{pageSize}&quot;</span>)</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> List&lt;OrderDO&gt; queryTimeout(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">&quot;startIndex&quot;</span>)</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">Long</span> startIndex, <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">&quot;pageSize&quot;</span>)</span> Integer pageSize);</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 设置订单超时关闭 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Update(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">&quot;update t_order set status = 10 where id = #{orderId} and status = 5&quot;</span>)</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">Long</span> setTimeoutClosed(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">&quot;orderId&quot;</span>)</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">Long</span> orderId)</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 关闭过期订单作业类 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">class</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">CloseTimeoutOrderJob</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">extends</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">Job</span></span>{</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 分页数量 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">private</span> static <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">final</span> int PAGE_COUNT = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">100</span>;</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 分页大小 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">private</span> static <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">final</span> int PAGE_SIZE = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">1000</span>;</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 作业执行函数 */</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Override</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> void execute() {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">for</span> (int i = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">0</span>; i &lt; PAGE_COUNT; i++) {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 查询处理订单</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> List&lt;OrderDO&gt; orderList = orderDAO.queryTimeout(i * PAGE_COUNT, PAGE_SIZE);</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (OrderDO order : orderList) {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 进行超时关闭</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> ......</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> orderDAO.setTimeoutClosed(order.getId());</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 检查处理完毕</span></span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span>(orderList.size() &lt; PAGE_SIZE) {</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">break</span>;</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"> }</span></code><code style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;text-align:left;font-size:14px;white-space:pre;display:flex;position:relative;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important">}</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">粗看这段代码是没有问题的，尝试循环 100 次，每次取 1000 条过期订单，进行订单超时关闭操作，直到没有订单或达到 100 次为止。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">但是，如果结合订单状态一起看，就会发现从第二次查询开始，每次会忽略掉前 startIndex（开始序号）条应该处理的过期订单。</span><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">这就是分页查询存在的隐藏问题：</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">当满足查询条件的数据，在操作中不再满足查询条件时，会导致后续分页查询中前 startIndex（开始序号）条满足条件的数据被跳过。</span></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em"><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px">可以采用&quot;设置最大数量&quot;的方式解决，代码如下：</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;margin:10px 0;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:flex;line-height:26px"><ul style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;counter-reset:line;-webkit-flex-shrink:0;flex-shrink:0;height:100%;padding:1em;list-style-type:none"><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li><li style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;list-style-type:none;text-align:right"></li></ul><pre style="margin:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;overflow-x:auto;padding:1em;padding-left:0;white-space:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-overflow-scrolling:touch"><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 订单DAO接口 */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">interface</span> OrderDAO {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 查询过期订单函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Select</span>(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;select * from t_order where status = 5 and gmt_create &lt; date_sub(current_timestamp, interval 30 day) limit 0, #{maxCount}&quot;</span>)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> List&lt;OrderDO&gt; queryTimeout(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param</span>(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;maxCount&quot;</span>) Integer maxCount);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 设置订单超时关闭 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Update</span>(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;update t_order set status = 10 where id = #{orderId} and status = 5&quot;</span>)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span> Long setTimeoutClosed(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Param</span>(<span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#d14">&quot;orderId&quot;</span>) Long orderId)</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">/** 关闭过期订单作业(定时作业) */</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">class</span> CloseTimeoutOrderJob <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">extends</span> Job {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 分页数量 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">private</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">static</span> final int PAGE_COUNT = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">100</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 分页大小 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">private</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">static</span> final int PAGE_SIZE = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">1000</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">/** 作业执行函数 */</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf">@Override</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">public</span><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">void</span> execute() {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">for</span> (int i = <span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#0e9ce5">0</span>; i &lt; PAGE_COUNT; i++) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 查询处理订单</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> List&lt;OrderDO&gt; orderList = orderDAO.queryTimeout(PAGE_SIZE);</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span> (OrderDO order : orderList) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 进行超时关闭</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> ......</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> orderDAO.setTimeoutClosed(order.getId());</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"><br style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important"/></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#afafaf;font-style:italic">// 检查处理完毕</span></span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">if</span>(orderList.size() &lt; PAGE_SIZE) {</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;color:#ca7d37">break</span>;</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important"> }</span></code><code style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;font-size:14px;position:relative;text-align:left;white-space:pre;display:flex;font-family:Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;max-width:1000% !important;box-sizing:border-box !important;overflow-wrap:break-word !important">}</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;color:rgb(255,255,255);background-color:rgb(0,122,170);box-sizing:border-box !important;overflow-wrap:break-word !important"><strong style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important">本文作者：</strong></span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);box-sizing:border-box !important;overflow-wrap:break-word !important">陈昌毅，花名常意，高德地图技术专家，2018 年加入阿里巴巴，一直从事地图数据采集的相关工作。</span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);box-sizing:border-box !important;overflow-wrap:break-word !important"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;white-space:normal;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;background-color:rgb(255,255,255);box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;background-color:rgb(255,255,255);font-size:15px;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;letter-spacing:0.544px;text-align:left;text-indent:37px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-family:-apple-system,system-ui,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Segoe UI&quot;,system-ui,Roboto,&quot;Droid Sans&quot;,&quot;Helvetica Neue&quot;,sans-serif;font-size:14px;letter-spacing:0.544px;white-space:pre-wrap;box-sizing:border-box !important;overflow-wrap:break-word !important">本文缩略图：icon </span></span></span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;background-color:rgb(255,255,255);font-size:15px;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left;text-indent:37px;color:rgb(136,136,136);font-family:-apple-system,system-ui,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Segoe UI&quot;,system-ui,Roboto,&quot;Droid Sans&quot;,&quot;Helvetica Neue&quot;,sans-serif;font-size:14px;letter-spacing:0.544px;white-space:pre-wrap;box-sizing:border-box !important;overflow-wrap:break-word !important">by </span></span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-family:-apple-system-font,BlinkMacSystemFont,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;letter-spacing:0.544px;background-color:rgb(255,255,255);font-size:15px;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left;text-indent:37px;color:rgb(136,136,136);font-family:-apple-system,system-ui,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Segoe UI&quot;,system-ui,Roboto,&quot;Droid Sans&quot;,&quot;Helvetica Neue&quot;,sans-serif;font-size:14px;letter-spacing:0.544px;white-space:pre-wrap;box-sizing:border-box !important;overflow-wrap:break-word !important">耳铃</span></span></span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;letter-spacing:0.544px;background-color:rgb(255,255,255);font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"></span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;letter-spacing:0.544px;background-color:rgb(255,255,255);font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important">Tips：</span><br style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;box-sizing:border-box !important;overflow-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;letter-spacing:0.544px;background-color:rgb(255,255,255);font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;letter-spacing:0.544px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"># 点下“<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px">在</span>看”❤️</span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;letter-spacing:0.544px;background-color:rgb(255,255,255);font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"># 然后，公众号对话框内发送“</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:#ab1942"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">打起精神</strong></span></span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important">”，试试手气？?</span></p><p style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;white-space:normal;min-height:1em;letter-spacing:0.544px;background-color:rgb(255,255,255);font-family:-apple-system-font,system-ui,&quot;Helvetica Neue&quot;,&quot;PingFang SC&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei UI&quot;,&quot;Microsoft YaHei&quot;,Arial,sans-serif;line-height:1.75em;box-sizing:border-box !important;overflow-wrap:break-word !important"><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"></span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px;color:rgb(74,74,74);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;white-space:pre-line;box-sizing:border-box !important;overflow-wrap:break-word !important"># 本期奖品是来自</span><span style="margin:0;padding:0;max-width:100% !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;letter-spacing:0.544px;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:15px;white-space:pre-line;color:rgb(171,25,66);box-sizing:border-box !important;overflow-wrap:break-word !important">淘宝心选的蒸汽眼罩。</span></p></div></div><ul style="margin:0;padding:0"></ul><div style="margin:0;padding:0;padding-top:15px"><div style="margin:0;padding:0"><span style="margin:0;padding:0;visibility:hidden"><span style="margin:0;padding:0"><span style="margin:0;padding:0"> 在看</span><span style="margin:0;padding:0"></span></span></span></div></div></div></div></div></span>
</div></body></html> 