<html>
<head>
  <title>MongoDB分页的Java实现和分页需求的思考 - Ryan.Miao - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="12735"/>
<h1>MongoDB分页的Java实现和分页需求的思考 - Ryan.Miao - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/8/23 16:32</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html"><i>https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-size:inherit;line-height:inherit;background-repeat:no-repeat;background-color:rgb(255, 255, 255);color:rgb(0, 0, 0);cursor:default;font:100%/1.5 sans-serif;overflow:auto;"><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;box-sizing:inherit;font-size:14px;line-height:inherit;background-repeat:no-repeat;background-color:rgb(241, 241, 241);text-overflow:ellipsis;white-space:normal;overflow:hidden scroll;text-size-adjust:none;background:url('https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html&quot;https://images2018.cnblogs.com/blog/686418/201808/686418-20180822090950326-247785192.jpg&quot;') 0% 0% / 100%;"><div style="box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;"><div style="box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;justify-content:center;min-width:auto;"><div style="box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;opacity:0.97;"><div style="background:white;box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;"><div style="box-shadow:rgba(0, 0, 0, 0.2) 0px 8px 17px 0px, rgba(0, 0, 0, 0.19) 0px 6px 20px 0px;box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;"><div style="box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;"><div style="box-sizing:inherit;font-size:inherit;line-height:inherit;background-repeat:no-repeat;background-color:rgb(255, 255, 255);border-radius:6px;box-shadow:rgba(0, 0, 0, 0.2) 0px 1px 2px;overflow:hidden;">
            <h1 style="box-sizing:inherit;font-size:30px;line-height:inherit;margin:10px auto;padding:10px;border-style:solid;border-width:0px;background-repeat:no-repeat;border-left:0px solid rgb(251, 99, 98);font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:rgb(64, 74, 88);color:rgb(255, 255, 255);cursor:pointer;margin-top:0px;">
                
<a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html" style="box-sizing:inherit;font-size:24px;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(255, 255, 255);transition:color 0.3s ease 0s;display:inline-block;height:100%;width:100%;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">MongoDB分页的Java实现和分页需求的思考</a>

            </h1>
            <div style="clear:both;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"></div>
            <div style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:10px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
                
<div style="margin-bottom:20px;word-break:break-word;box-sizing:inherit;font-size:16pt;line-height:1.8;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-align:left;"><ul style="margin-left:30px;padding-left:0px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-top:10px;"><li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">本文作者：</strong><a href="http://www.cnblogs.com/woshimrf" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">@Ryan Miao</a></li><li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">本文链接：</strong><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html</a></li><li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul><blockquote style="background:none;border:2px solid rgb(239, 239, 239);padding:5px 10px;margin-top:10px;margin-bottom:10px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><h4 style="font-size:16pt;font-weight:600;margin:10px 0px;box-sizing:inherit;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:20px;color:rgb(51, 51, 51);text-align:left;">目录</h4><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html#_caption_0" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">前言</strong></a><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html#_caption_1" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">传统分页思路</strong></a><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html#_caption_2" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">正确的分页办法</strong></a><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">降序</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">升序</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">一共多少条</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">ObjectId的有序性问题</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">如果我一定要跳页</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html#_caption_3" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">排序和性能</strong></a><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">多字段排序</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">用索引优化排序</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">索引</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html#_caption_4" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">Java代码分页</strong></a><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">抽取分页代码为公共工具类</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">使用工具类</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-left:20px;">把工具类共享到maven仓库</span><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/><a href="https://www.cnblogs.com/woshimrf/p/mongodb-pagenation-performance.html#_caption_5" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">参考</strong></a><br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/></blockquote>
    <a name="_caption_0" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"></a><h2 style="font-size:16pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:40px;border-bottom:1px solid rgb(169, 171, 173);color:rgb(0, 0, 0);text-align:left;">前言</h2>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">传统关系数据库中都提供了基于row number的分页功能，切换MongoDB后，想要实现分页，则需要修改一下思路。</p>
<a name="_caption_1" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"></a><h2 style="font-size:16pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:40px;border-bottom:1px solid rgb(169, 171, 173);color:rgb(0, 0, 0);text-align:left;">传统分页思路</h2>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">假设一页大小为10条。则</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//page 1</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">1-10</span>

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//page 2</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">11-20</span>

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//page 3</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">21-30</span>
...

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//page n</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">10</span>*(n-<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>) +<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">1</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">-</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">10</span>*<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">n</span></code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">MongoDB提供了skip()和limit()方法。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">skip</strong>: 跳过指定数量的数据. 可以用来跳过当前页之前的数据，即跳过pageSize*(n-1)。<br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/>
<strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">limit</strong>: 指定从MongoDB中读取的记录条数，可以当做页面大小pageSize。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">所以，分页可以这样做：</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Page 1</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.users</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>()<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.limit</span> (<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10</span>)
<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Page 2</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.users</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>()<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.skip</span>(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10</span>)<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.limit</span>(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10</span>)
<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Page 3</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.users</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>()<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.skip</span>(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">20</span>)<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.limit</span>(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10</span>)
........</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">问题</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">看起来，分页已经实现了，但是官方文档并不推荐，说会扫描全部文档，然后再返回结果。</p>
<blockquote style="background:none;border:2px solid rgb(239, 239, 239);padding:5px 10px;margin-top:10px;margin-bottom:10px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">The cursor.skip() method requires the server to scan from the beginning of the input results set before beginning to return results. As the offset increases, cursor.skip() will become slower.</p>
</blockquote>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">所以，需要一种更快的方式。其实和mysql数量大之后不推荐用limit m,n一样，解决方案是先查出当前页的第一条，然后顺序数pageSize条。MongoDB官方也是这样推荐的。</p>
<a name="_caption_2" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"></a><h2 style="font-size:16pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:40px;border-bottom:1px solid rgb(169, 171, 173);color:rgb(0, 0, 0);text-align:left;">正确的分页办法</h2>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">我们假设基于_id的条件进行查询比较。事实上，这个比较的基准字段可以是任何你想要的有序的字段，比如时间戳。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Page 1</span>
db.users.<span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">find</span>().limit(pageSize);
<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Find the id of the last document in this page</span>
last_id = ...
 
<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Page 2</span>
users = db.users.<span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">find</span>({
  '_id' :{ <span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;$gt&quot;</span> :<span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b16c194666cd10add402c87&quot;</span>)}
}).limit(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10</span>)
<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//Update the last id with the id of the last document in this page</span>
last_id = ...</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">显然，第一页和后面的不同。对于构建分页API, 我们可以要求用户必须传递pageSize, lastId。</p>
<ul style="margin-left:30px;padding-left:0px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-top:10px;">
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;">pageSize 页面大小</li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;">lastId 上一页的最后一条记录的id，如果不传，则将强制为第一页</li>
</ul>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">降序</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">_id</code>降序，第一页是最大的，下一页的id比上一页的最后的id还小。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">function</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">printStudents</span>(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">startValue, nPerPage</span>) </span>{
  <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">let</span> endValue = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">null</span>;
  db.students.find( { <span style="color:rgb(226, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">_id</span>: { <span style="color:rgb(226, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">$lt</span>: startValue } } )
             .sort( { <span style="color:rgb(226, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">_id</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">-1</span> } )
             .limit( nPerPage )
             .forEach( <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">student</span> =&gt;</span> {
               print( student.name );
               endValue = student._id;
             } );

  <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> endValue;
}</code></pre>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">升序</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">_id</code>升序， 下一页的id比上一页的最后一条记录id还大。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">function</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">printStudents</span>(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">startValue, nPerPage</span>) </span>{
  <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">let</span> endValue = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">null</span>;
  db.students.find( { <span style="color:rgb(226, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">_id</span>: { <span style="color:rgb(226, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">$gt</span>: startValue } } )
             .sort( { <span style="color:rgb(226, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">_id</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )
             .limit( nPerPage )
             .forEach( <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">student</span> =&gt;</span> {
               print( student.name );
               endValue = student._id;
             } );

  <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> endValue;
}</code></pre>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">一共多少条</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">还有一共多少条和多少页的问题。所以，需要先查一共多少条count.</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.users</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>()<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.count</span>();</code></pre>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">ObjectId的有序性问题</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">先看ObjectId生成规则：</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><img height="16" src="" style="border:0px;max-width:300px;height:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;vertical-align:middle;" width="16"></img></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">比如<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">&quot;_id&quot; : ObjectId(&quot;5b1886f8965c44c78540a4fc&quot;)</code></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">取id的前4个字节。由于id是16进制的string，4个字节就是32位，对应id前8个字符。即<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">5b1886f8</code>, 转换成10进制为<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">1528334072</code>. 加上1970，就是当前时间。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">事实上，更简单的办法是查看org.mongodb:bson:3.4.3里的ObjectId对象。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(Date date)</span> </span>{
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">this</span>(dateToTimestampSeconds(date), MACHINE_IDENTIFIER, PROCESS_IDENTIFIER, NEXT_COUNTER.getAndIncrement(), <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">false</span>);
}

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//org.bson.types.ObjectId#dateToTimestampSeconds </span>
<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">static</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">dateToTimestampSeconds</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(Date time)</span> </span>{
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> (<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span>)(time.getTime() / <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1000L</span>);
}

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//java.util.Date#getTime</span>
<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">/**
 * Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT
 * represented by this &lt;tt&gt;Date&lt;/tt&gt; object.
 *
 * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@return</span>  the number of milliseconds since January 1, 1970, 00:00:00 GMT
 *          represented by this date.
 */</span>
<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">long</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">getTime</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">()</span> </span>{
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> getTimeImpl();
}</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">MongoDB的ObjectId应该是随着时间而增加的，即后插入的id会比之前的大。但考量id的生成规则，最小时间排序区分是秒，同一秒内的排序无法保证。当然，如果是同一台机器的同一个进程生成的对象，是有序的。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">如果是分布式机器，不同机器时钟同步和偏移的问题。所以，如果你有个字段可以保证是有序的，那么用这个字段来排序是最好的。<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">_id</code>则是最后的备选方案。</p>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">如果我一定要跳页</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">上面的分页看起来看理想，虽然确实是，但有个刚需不曾指明---我怎么跳页。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">我们的分页数据要和排序键关联，所以必须有一个排序基准来截断记录。而跳页，我只知道第几页，条件不足，无法分页了。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">现实业务需求确实提出了跳页的需求，虽然几乎不会有人用，人们更关心的是开头和结尾，而结尾可以通过逆排序的方案转成开头。所以，真正分页的需求应当是不存在的。如果你是为了查找某个记录，那么查询条件搜索是最快的方案。如果你不知道查询条件，通过肉眼去一一查看，那么下一页足矣。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">说了这么多，就是想扭转传统分页的概念，在互联网发展的今天，大部分数据的体量都是庞大的，跳页的需求将消耗更多的内存和cpu，对应的就是查询慢。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">当然，如果数量不大，如果不介意慢一点，那么skip也不是啥问题，关键要看业务场景。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">我今天接到的需求就是要跳页，而且数量很小，那么skip吧，不费事，还快。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">来看看大厂们怎么做的</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">Google最常用了，看起来是有跳页选择的啊。再仔细看，只有10页，多的就必须下一页，并没有提供一共多少页，跳到任意页的选择。这不就是我们的find-condition-then-limit方案吗，只是他的一页数量比较多，前端或者后端把这一页给切成了10份。<br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/>
<img height="16" src="" style="border:0px;max-width:300px;height:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;vertical-align:middle;" width="16"></img></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">同样，看Facebook，虽然提供了总count，但也只能下一页。<br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/>
<img height="16" src="" style="border:0px;max-width:300px;height:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;vertical-align:middle;" width="16"></img></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">其他场景，比如Twitter，微博，朋友圈等，根本没有跳页的概念的。</p>
<a name="_caption_3" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"></a><h2 style="font-size:16pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:40px;border-bottom:1px solid rgb(169, 171, 173);color:rgb(0, 0, 0);text-align:left;">排序和性能</h2>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">前面关注于分页的实现原理，但忽略了排序。既然分页，肯定是按照某个顺序进行分页的，所以必须要有排序的。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">MongoDB的sort和find组合</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.bios</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>()<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.sort</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">name</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.limit</span>( 5 )
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.bios</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>()<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.limit</span>( 5 )<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.sort</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">name</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">这两个都是等价的，顺序不影响执行顺序。即，都是先find查询符合条件的结果，然后在结果集中排序。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">我们条件查询有时候也会按照某字段排序的，比如按照时间排序。查询一组时间序列的数据，我们想要按照时间先后顺序来显示内容，则必须先按照时间字段排序，然后再按照id升序。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.users</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>({<span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">name</span>: <span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;Ryan&quot;</span>})<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.sort</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">birth</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>, _id: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.limit</span>( 5 )</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">我们先按照birth升序，然后birth相同的record再按照_id升序，如此可以实现我们的分页功能了。</p>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">多字段排序</h3>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.records</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.sort</span>({ <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>:<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>, b:-<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>})</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">表示先按照a升序，再按照b降序。即，按照字段a升序，对于a相同的记录，再用b降序，而不是按a排完之后再全部按b排。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">示例：</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;">db.user.find();

结果：

{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886ac965c44c78540a4fb&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;a&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;1&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886f8965c44c78540a4fc&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;a&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">2.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;2&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886fa965c44c78540a4fd&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;b&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;3&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886fd965c44c78540a4fe&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;b&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">2.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;4&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886ff965c44c78540a4ff&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;c&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5&quot;</span>
}</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">按照名称升序，然后按照age降序</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db.user.find({}).sort({name</span>: 1, age: -1})

<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">结果：  
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886f8965c44c78540a4fc&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;a&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">2.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;2&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886ac965c44c78540a4fb&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;a&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;1&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886fd965c44c78540a4fe&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;b&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">2.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;4&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886fa965c44c78540a4fd&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;b&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;3&quot;</span>
}
{ 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span> : <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">ObjectId</span>(<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5b1886ff965c44c78540a4ff&quot;</span>), 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;name&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;c&quot;</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;age&quot;</span> : <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">10.0</span>, 
    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;id&quot;</span> : <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;5&quot;</span>
}
</span></code></pre>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">用索引优化排序</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">到这里必须考虑下性能。</p>
<blockquote style="background:none;border:2px solid rgb(239, 239, 239);padding:5px 10px;margin-top:10px;margin-bottom:10px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">$sort and Memory Restrictions</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">The <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:inherit;"></span><span style="box-sizing:inherit;font-size:100%;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;font-style:normal;font-weight:normal;text-indent:0px;text-align:left;text-transform:none;letter-spacing:normal;word-spacing:normal;overflow-wrap:normal;white-space:nowrap;float:none;direction:ltr;max-width:none;max-height:none;min-width:0px;min-height:0px;border:0px;position:relative;"><span style="box-sizing:inherit;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;border:0px;max-width:none;max-height:none;min-width:0px;min-height:0px;vertical-align:0px;text-decoration:none;white-space:nowrap;transition:none 0s ease 0s;"><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;width:40.825em;"><span style="box-sizing:content-box;font-size:111%;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:relative;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;width:36.771em;height:0px;"><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:absolute;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;clip:rect(1.298em, 1036.71em, 2.593em, -999.997em);top:-2.193em;left:0em;"><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;"><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">o</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">r</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">a</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">g<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">h</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">a</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">a</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">l</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">i</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">m</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">i</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">o</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">f<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.059em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Main;">100</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">m</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">g<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">a</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">b</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">y<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">o</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">f<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.059em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">R</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">A</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">M<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.059em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Main;">.</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;padding-left:0.172em;">B</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">y<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">d<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">f<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.059em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">a</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">u</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">l</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Main;">,</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;padding-left:0.172em;">i</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">f<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.059em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">h</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">a</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">g<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">x</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">c</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">e</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">d<span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;height:1px;width:0.003em;"></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">h</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">i</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">s</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">l</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">i</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">m</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">i</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Math-italic;">t</span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;font-family:MathJax_Main;">,</span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;width:0px;height:2.199em;"></span></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:0px;background-repeat:no-repeat;display:inline-block;position:static;border:0px;vertical-align:-0.309em;text-decoration:none;transition:none 0s ease 0s;overflow:hidden;border-left:0px solid;width:0px;height:1.128em;"></span></span></span><span style="box-sizing:content-box;font-size:inherit;line-height:normal;margin:0px;padding:1px 0px 0px;background-repeat:no-repeat;top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);user-select:none;position:absolute;border:0px;height:1px;width:1px;overflow:hidden;display:block;vertical-align:0px;text-decoration:none;transition:none 0s ease 0s;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">o</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">r</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">a</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">g</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">h</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">a</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">a</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">l</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">i</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">m</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">i</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">o</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">f</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">100</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">m</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">g</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">a</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">b</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">y</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">o</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">f</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">R</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">A</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">M</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">.</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">B</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">y</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">d</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">f</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">a</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">u</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">l</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">,</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">i</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">f</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">h</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">a</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">g</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">x</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">c</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">e</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">d</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">h</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">i</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">s</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">l</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">i</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">m</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">i</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">t</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transition:none 0s ease 0s;">,</span></span></span></span>sort will produce an error. To allow for the handling of large datasets, set the <code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">allowDiskUse</code> option to true to enable $sort operations to write to temporary files. See the allowDiskUse option in db.collection.aggregate() method and the aggregate command for details.</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">Changed in version 2.6: The memory limit for $sort changed from 10 percent of RAM to 100 megabytes of RAM.</p>
</blockquote>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">从2.6开始，sort只排序100M以内的数据，超过将会报错。可以通过设置<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">allowDiskUse</code>来允许排序大容量数据。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">有索引的排序会比没有索引的排序快，所以官方推荐为需要排序的key建立索引。</p>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">索引</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">对于单key排序，建立单独索引</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.records</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.createIndex</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">索引可以支持同排序和逆序的sort</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">索引又分升序(1)和降序(-1)，索引定义的排序方向以及逆转方向可以支持sort。对于上述单key索引a，可以支持<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({a:1})</code>升序和<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({a:-1})</code>降序。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">对于多字段排序</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">如果想要使用索引。则可以建立复合(compound index)索引为</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.records</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.createIndex</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>, b:-<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">复合索引的字段顺序必须和sort一致</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">复合多字段索引的顺序要和sort的字段一致才可以走索引。比如索引<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">{a:1, b:1}</code>, 可以支持<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({a:1, b:1})</code>和逆序<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({a:-1, b:-1})</code>， 但是，不支持a，b颠倒。即，不支持<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({b:1, a:1})</code>.</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">复合索引支持sort同排序和逆序</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">索引<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">{a:1, b:-1}</code> 可以支持<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({a:1, b:-1})</code>, 也可以支持<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">sort({a:-1, b:1})</code></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">复合索引可以前缀子集支持sort</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">对于多字段复合索引，可以拆分成多个前缀子集。比如<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">{a:1, b:1, c:1}</code>相当于</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;">{ <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> }
{ <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>, b: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> }
{ <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>, b: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>, c: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> }</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">示例：</p>
<table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border:1px solid rgb(192, 192, 192);border-collapse:collapse;word-break:break-word;box-sizing:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;border-spacing:0px;display:block;overflow-x:scroll;">
<thead style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<th style="background-color:rgb(250, 250, 250);border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">Example</th>
<th style="background-color:rgb(250, 250, 250);border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">Index Prefix</th>
</tr>
</thead>
<tbody style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find().sort( { a: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find().sort( { a: -1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find().sort( { a: 1, b: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1, b: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find().sort( { a: -1, b: -1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1, b: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find().sort( { a: 1, b: 1, c: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1, b: 1, c: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find( { a: { $gt: 4 } } ).sort( { a: 1, b: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1, b: 1 }</td>
</tr>
</tbody>
</table>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;"><strong style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">复合索引的非前缀子集可以支持sort，前提是前缀子集的元素要在find的查询条件里是equals</strong></p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">这个条件比较绕口，复合索引的非前缀子集，只要find和sort的字段要组成索引前缀，并且find里的条件必须是相等。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">示例</p>
<table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border:1px solid rgb(192, 192, 192);border-collapse:collapse;word-break:break-word;box-sizing:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;border-spacing:0px;display:block;overflow-x:scroll;">
<thead style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<th style="background-color:rgb(250, 250, 250);border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">Example</th>
<th style="background-color:rgb(250, 250, 250);border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">Index Prefix</th>
</tr>
</thead>
<tbody style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find( { a: 5 } ).sort( { b: 1, c: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1 , b: 1, c: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find( { b: 3, a: 4 } ).sort( { c: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1, b: 1, c: 1 }</td>
</tr>
<tr style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">db.data.find( { a: 5, b: { $lt: 3} } ).sort( { b: 1 } )</td>
<td style="border:1px solid rgb(192, 192, 192);border-collapse:collapse;padding:8px 14px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;white-space:nowrap;">{ a: 1, b: 1 }</td>
</tr>
</tbody>
</table>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">find和sort的字段加起来满足前缀子集，find条件中可以使用其他字段进行非equals比较。</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">对于既不是前缀子集，也不是find相等条件的。索引无效。比如，对于索引<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">{a:1, b:1, c:1}</code>。以下两种方式不走索引。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.data</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">a</span>: { $gt: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">2</span> } } )<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.sort</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">c</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">db</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.data</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.find</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">c</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">5</span> } )<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(173, 229, 252);">.sort</span>( { <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">c</span>: <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span> } )</code></pre>
<a name="_caption_4" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"></a><h2 style="font-size:16pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:40px;border-bottom:1px solid rgb(169, 171, 173);color:rgb(0, 0, 0);text-align:left;">Java代码分页</h2>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">由于确实有跳页的需求，目前还没有发现性能问题，仍旧采用skip做分页，当然也兼容条件分页</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> PageResult&lt;StatByClientRs&gt; <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">findByDurationPage</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(FindByDurationPageRq rq)</span> </span>{
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> Criteria criteriaDefinition = Criteria.where(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;duration&quot;</span>).is(rq.getDuration());

    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> Query query = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Query(criteriaDefinition).with(<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Sort(Lists.newArrayList(<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Order(Direction.ASC, <span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span>))));

    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//分页逻辑</span>
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">long</span> total = mongoTemplate.count(query, StatByClient.class);
    Integer pageSize = rq.getPageSize();
    Integer pageNum = rq.getPageNum();
    String lastId = rq.getLastId();
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> Integer pages = (<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span>) Math.ceil(total / (<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">double</span>) pageSize);
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">if</span> (pageNum&lt;=<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">0</span> || pageNum&gt; pages) {
        pageNum = <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>;
    }
   
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">if</span> (StringUtils.isNotBlank(lastId)) {
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">if</span> (pageNum != <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>) {
            criteriaDefinition.and(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span>).gt(<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> ObjectId(lastId));
        }
        query.limit(pageSize);
    } <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">else</span> {
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span> skip = pageSize * (pageNum - <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>);
        query.skip(skip).limit(pageSize);
    }
    List&lt;StatByClient&gt; statByClientList = mongoTemplate.find(query, StatByClient.class);

    PageResult&lt;StatByClientRs&gt; pageResult = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> PageResult&lt;&gt;();
    pageResult.setTotal(total);
    pageResult.setPages(pages);
    pageResult.setPageSize(pageSize);
    pageResult.setPageNum(pageNum);
    pageResult.setList(mapper.mapToListRs(statByClientList));
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> pageResult;
}</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">这个示例中，目标是根据duration查询list，结果集进行分页。当请求体中包含<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">lastId</code>，那就走下一页方案。如果想要跳页，就不传<code style="line-height:20px;margin:1px 5px;vertical-align:middle;display:inline-block;font-family:&quot;Courier New&quot;, sans-serif;font-size:90%;background-color:rgb(249, 242, 244);border:0px dotted rgb(199, 37, 78);padding:0px 5px;border-radius:4px;box-sizing:inherit;background-repeat:no-repeat;color:rgb(199, 37, 78);">lastId</code>，随便你跳吧。</p>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">抽取分页代码为公共工具类</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">考虑分页需求的旺盛，每个集合都这样写感觉比较麻烦，而且容易出错。我们来把这个封装成单独一个PageHelper</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;">
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> com.google.common.collect.Lists;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> com.shuwei.d2.message.PageResult;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> java.util.List;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> java.util.function.Function;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> java.util.stream.Collectors;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.apache.commons.lang3.StringUtils;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.bson.types.ObjectId;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.beans.factory.annotation.Autowired;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.data.domain.Sort;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.data.domain.Sort.Direction;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.data.domain.Sort.Order;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.data.mongodb.core.MongoTemplate;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.data.mongodb.core.query.Criteria;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.data.mongodb.core.query.Query;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> org.springframework.stereotype.Component;

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">/**
 * MongoDB分页查询工具类.
 *
 * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@author</span> Ryan Miao at 2018-06-07 14:46
 **/</span>
<span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@Component</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">class</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">MongoPageHelper</span> </span>{

    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">static</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span> FIRST_PAGE_NUM = <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>;
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">static</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> String ID = <span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;_id&quot;</span>;
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> MongoTemplate mongoTemplate;

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@Autowired</span>
    <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">MongoPageHelper</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(MongoTemplate mongoTemplate)</span> </span>{
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">this</span>.mongoTemplate = mongoTemplate;
    }


    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">/**
     * 分页查询，直接返回集合类型的结果.
     *
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@see</span> MongoPageHelper#pageQuery(org.springframework.data.mongodb.core.query.Query,
     * java.lang.Class, java.util.function.Function, java.lang.Integer, java.lang.Integer,
     * java.lang.String)
     */</span>
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> &lt;T&gt; <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">PageResult&lt;T&gt; <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">pageQuery</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(Query query, Class&lt;T&gt; entityClass, Integer pageSize,
        Integer pageNum)</span> </span>{
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> pageQuery(query, entityClass, Function.identity(), pageSize, pageNum, <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">null</span>);
    }

    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">/**
     * 分页查询，不考虑条件分页，直接使用skip-limit来分页.
     *
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@see</span> MongoPageHelper#pageQuery(org.springframework.data.mongodb.core.query.Query,
     * java.lang.Class, java.util.function.Function, java.lang.Integer, java.lang.Integer,
     * java.lang.String)
     */</span>
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> &lt;T, R&gt; <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">PageResult&lt;R&gt; <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">pageQuery</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(Query query, Class&lt;T&gt; entityClass, Function&lt;T, R&gt; mapper,
        Integer pageSize, Integer pageNum)</span> </span>{
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> pageQuery(query, entityClass, mapper, pageSize, pageNum, <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">null</span>);
    }

    <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">/**
     * 分页查询.
     *
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> query Mongo Query对象，构造你自己的查询条件.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> entityClass Mongo collection定义的entity class，用来确定查询哪个集合.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> mapper 映射器，你从db查出来的list的元素类型是entityClass, 如果你想要转换成另一个对象，比如去掉敏感字段等，可以使用mapper来决定如何转换.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> pageSize 分页的大小.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> pageNum 当前页.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> lastId 条件分页参数, 区别于skip-limit，采用find(_id&gt;lastId).limit分页.
     * 如果不跳页，像朋友圈，微博这样下拉刷新的分页需求，需要传递上一页的最后一条记录的ObjectId。 如果是null，则返回pageNum那一页.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> &lt;T&gt; collection定义的class类型.
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@param</span> &lt;R&gt; 最终返回时，展现给页面时的一条记录的类型。
     * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@return</span> PageResult，一个封装page信息的对象.
     */</span>
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> &lt;T, R&gt; <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">PageResult&lt;R&gt; <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">pageQuery</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(Query query, Class&lt;T&gt; entityClass, Function&lt;T, R&gt; mapper,
        Integer pageSize, Integer pageNum, String lastId)</span> </span>{
        <span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">//分页逻辑</span>
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">long</span> total = mongoTemplate.count(query, entityClass);
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> Integer pages = (<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span>) Math.ceil(total / (<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">double</span>) pageSize);
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">if</span> (pageNum &lt;= <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">0</span> || pageNum &gt; pages) {
            pageNum = FIRST_PAGE_NUM;
        }
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> Criteria criteria = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Criteria();
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">if</span> (StringUtils.isNotBlank(lastId)) {
            <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">if</span> (pageNum != FIRST_PAGE_NUM) {
                criteria.and(ID).gt(<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> ObjectId(lastId));
            }
            query.limit(pageSize);
        } <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">else</span> {
            <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">int</span> skip = pageSize * (pageNum - <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(211, 99, 99);">1</span>);
            query.skip(skip).limit(pageSize);
        }

        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> List&lt;T&gt; entityList = mongoTemplate
            .find(query.addCriteria(criteria)
                    .with(<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Sort(Lists.newArrayList(<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Order(Direction.ASC, ID)))),
                entityClass);

        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> PageResult&lt;R&gt; pageResult = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> PageResult&lt;&gt;();
        pageResult.setTotal(total);
        pageResult.setPages(pages);
        pageResult.setPageSize(pageSize);
        pageResult.setPageNum(pageNum);
        pageResult.setList(entityList.stream().map(mapper).collect(Collectors.toList()));
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> pageResult;
    }

}</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">对了，还有PageResult对象</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;">
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> com.fasterxml.jackson.annotation.JsonInclude;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> com.fasterxml.jackson.annotation.JsonInclude.Include;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> io.swagger.annotations.ApiModelProperty;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> java.util.List;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> lombok.AllArgsConstructor;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> lombok.Data;
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">import</span> lombok.NoArgsConstructor;

<span style="color:rgb(136, 136, 136);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">/**
 * 分页结果.
 * <span style="color:rgb(128, 128, 128);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@author</span> Ryan
 */</span>
<span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@Data</span>
<span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@AllArgsConstructor</span>
<span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@NoArgsConstructor</span>
<span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@JsonInclude</span>(Include.NON_NULL)
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">class</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">PageResult</span>&lt;<span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">T</span>&gt; </span>{

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@ApiModelProperty</span>(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;页码，从1开始&quot;</span>)
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> Integer pageNum;

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@ApiModelProperty</span>(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;页面大小&quot;</span>)
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> Integer pageSize;

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@ApiModelProperty</span>(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;总数&quot;</span>)
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> Long total;

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@ApiModelProperty</span>(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;总页数&quot;</span>)
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> Integer pages;

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@ApiModelProperty</span>(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;数据&quot;</span>)
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> List&lt;T&gt; list;

}
</code></pre>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">使用工具类</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">最初的查询语句，业务逻辑和分页逻辑分开。</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> PageResult&lt;StatByClientRs&gt; <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">findByDurationPage</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">(FindByDurationPageRq rq)</span> </span>{
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">final</span> Query query = <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> Query(Criteria.where(<span style="color:rgb(162, 252, 162);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&quot;duration&quot;</span>).is(rq.getDuration()));

    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> mongoPageHelper.pageQuery(query, StatByClient.class, mapper::mapToRs, rq.getPageSize(),
        rq.getPageNum(), rq.getLastId());
}</code></pre>
<h3 style="font-size:14pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:30px;color:rgb(51, 51, 51);text-align:left;">把工具类共享到maven仓库</h3>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">新建一个maven项目，https://github.com/Ryan-Miao/mongo-page-helper</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">修改并提取刚才的工具类。</p>
<h4 style="font-size:16pt;font-weight:600;margin:10px 0px;box-sizing:inherit;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:20px;color:rgb(51, 51, 51);text-align:left;">如何使用</h4>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">必须结合spring-boot-starter-data-mongodb来使用.</p>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">在pom里添加repository</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">repositories</span>&gt;</span>
    <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">repository</span>&gt;</span>
        <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">id</span>&gt;</span>jitpack.io<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">id</span>&gt;</span>
        <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">url</span>&gt;</span>https://jitpack.io<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">url</span>&gt;</span>
    <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">repository</span>&gt;</span>
<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">repositories</span>&gt;</span></code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">再引入依赖</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">dependency</span>&gt;</span>
    <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">groupId</span>&gt;</span>com.github.Ryan-Miao<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">groupId</span>&gt;</span>
    <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">artifactId</span>&gt;</span>mongo-page-helper<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">artifactId</span>&gt;</span>
    <span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">version</span>&gt;</span>1.0<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">version</span>&gt;</span>
<span style="color:rgb(98, 200, 243);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">&lt;/<span style="color:rgb(143, 255, 0);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-weight:700;">dependency</span>&gt;</span></code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">配置Configuration</p>
<pre style="margin-top:10px;margin-bottom:10px;white-space:pre-wrap;overflow-wrap:break-word;overflow:auto;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:monospace;"><code style="display:block;overflow-x:auto;padding:5px;background:rgb(51, 51, 51);color:rgb(255, 255, 255);line-height:1.5;margin:auto;vertical-align:middle;font-family:&quot;Courier New&quot;, sans-serif;font-size:12px;border:0px dotted rgb(199, 37, 78);border-radius:4px;height:auto;box-sizing:inherit;"><span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@Configuration</span>
<span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">class</span> <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">MongoConfiguration</span></span>{

    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@Autowired</span>
    <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">private</span> MongoTemplate mongoTemplate;
    <span style="color:rgb(252, 155, 155);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">@Bean</span>
    <span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">public</span> MongoPageHelper <span style="color:rgb(255, 255, 170);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">mongoPageHelper</span><span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">()</span> </span>{
        <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">return</span> <span style="color:rgb(252, 194, 140);box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">new</span> MongoPageHelper(mongoTemplate);
    }

}</code></pre>
<p style="margin:10px auto;text-indent:0px;box-sizing:inherit;font-size:1pc;line-height:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;">然后就可以使用MongoPageHelper来注入了。</p>
<a name="_caption_5" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"></a><h2 style="font-size:16pt;font-weight:600;line-height:1.5;margin:10px 0px;box-sizing:inherit;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;margin-top:40px;border-bottom:1px solid rgb(169, 171, 173);color:rgb(0, 0, 0);text-align:left;">参考</h2>
<ul style="margin-left:30px;padding-left:0px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;padding-top:10px;">
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><a href="https://docs.mongodb.com/manual/reference/method/cursor.skip/" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">官方分页推荐</a></li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/index.html" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">官方sort文档</a></li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><a href="https://docs.mongodb.com/manual/tutorial/sort-results-with-indexes/" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">官方使用索引优化sort文档</a></li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><a href="https://docs.mongodb.com/manual/core/index-compound/#index-type-compound" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">官方复合索引</a></li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;"><a href="http://www.ovaistariq.net/404/mysql-paginated-displays-how-to-kill-performance-vs-how-to-improve-performance/#.WxiEK4huaUk" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(36, 132, 193);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">如何正确看待分页的需求</a></li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;">http://ian.wang/35.htm</li>
<li style="list-style-type:disc;box-sizing:inherit;font-size:1pc;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;font-family:Georgia, &quot;Times New Roman&quot;, Times, sans-serif;text-align:left;">https://cnodejs.org/topic/559a0bf493cb46f578f0a601</li>
</ul>

</div>
<div style="display:block;box-sizing:inherit;font-size:20px;line-height:inherit;margin:0px;padding:20px;border-style:solid;border-width:0px;background-repeat:no-repeat;background-color:rgb(245, 245, 245);border-left:8px solid rgb(251, 99, 98);border-radius:4px;box-shadow:rgb(217, 217, 217) 0px 0px 1px;margin-top:24px;"><div style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<p style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">    关注我的公众号</p>
<img src="MongoDB分页的Java实现和分页需求的思考 - Ryan.Miao - 博客园_files/wechat-public.jpg" type="image/jpeg" data-filename="wechat-public.jpg" height="258" style="border:0px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;vertical-align:middle;height:auto;max-width:300px;" width="258"/>
</div>



唯有不断学习方能改变！
-- <b style="font-weight:bolder;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">Ryan Miao</b></div>
<div style="clear:both;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"></div>
<div style="margin-top:20px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"><div style="margin-bottom:10px;box-sizing:inherit;font-size:1em;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
    分类: 
            <a href="https://www.cnblogs.com/woshimrf/category/816093.html" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:4px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;background-color:rgb(64, 74, 88);border-radius:4px;color:rgb(255, 255, 255);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" target="_blank">mongoDB</a></div>
<div style="margin-top:0px;box-sizing:inherit;font-size:1em;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
    标签: 
            <a href="https://www.cnblogs.com/woshimrf/tag/MongoDB/" style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:4px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;background-color:rgb(64, 74, 88);border-radius:4px;color:rgb(255, 255, 255);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">MongoDB</a></div>

    <div style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
<div style="padding:20px;margin-bottom:10px;margin-top:10px;border:medium none;font-size:15px;width:320px;text-align:center;box-sizing:inherit;line-height:inherit;margin:0px;background:none 0px 0px repeat scroll rgb(202, 201, 201);border-radius:4px;color:rgb(255, 255, 255);font-weight:400;">
        <a href="#" style="background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;display:inline-block;padding:3px 8px;color:rgb(255, 255, 255);text-decoration:none;font-weight:400;cursor:pointer;margin-right:10px;border-radius:20px;box-shadow:rgba(0, 0, 0, 0.5) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.25) 0px -1px 1px;vertical-align:middle;background-color:rgb(45, 174, 191);border:none;box-sizing:inherit;font-size:1.2em;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transform:perspective(1px) translateZ(0px);transition-duration:0.3s;transition-property:transform;">好文要顶</a>
        <a href="#" style="background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;display:inline-block;padding:3px 8px;color:rgb(255, 255, 255);text-decoration:none;font-weight:400;cursor:pointer;margin-right:10px;border-radius:20px;box-shadow:rgba(0, 0, 0, 0.5) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.25) 0px -1px 1px;vertical-align:middle;background-color:rgb(227, 49, 0);border:none;box-sizing:inherit;font-size:1.2em;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transform:perspective(1px) translateZ(0px);transition-duration:0.3s;transition-property:transform;">关注我</a>
    <a href="#" style="background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAYAAABIdFAMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNo8zjsOxCAMBFB/KEAUFFR0Cbng3nQPw68ArZdAlOZppPFIBhH5EAB8b+Tlt9MYQ6i1BuqFaq1CKSVcxZ2Acs6406KUgpt5/LCKuVgz5BDCSb13ZO99ZOdcZGvt4mJjzMVKqcha68iIePB86GAiOv8CDADlIUQBs7MD3wAAAABJRU5ErkJggg%3D%3D&quot;) repeat-x;display:inline-block;padding:3px 8px;color:rgb(255, 255, 255);text-decoration:none;font-weight:400;cursor:pointer;margin-right:10px;border-radius:20px;box-shadow:rgba(0, 0, 0, 0.5) 0px 1px 3px;text-shadow:rgba(0, 0, 0, 0.25) 0px -1px 1px;vertical-align:middle;background-color:rgb(255, 181, 21);border:none;box-sizing:inherit;font-size:1.2em;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transform:perspective(1px) translateZ(0px);transition-duration:0.3s;transition-property:transform;">收藏该文</a>
    <a href="#" style="background:none;display:inline-block;padding:3px 2px;color:rgb(255, 255, 255);text-decoration:none;font-weight:400;cursor:pointer;margin-right:10px;border-radius:20px;box-shadow:none;text-shadow:none;vertical-align:middle;border:none;box-sizing:inherit;font-size:1.2em;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transform:perspective(1px) translateZ(0px);transition-duration:0.3s;transition-property:transform;" title="分享至新浪微博"><img src="MongoDB分页的Java实现和分页需求的思考 - Ryan.Miao - 博客园_files/icon_weibo_24.png" type="image/png" data-filename="icon_weibo_24.png" alt="" height="24" style="border:none;vertical-align:middle;margin-left:5px;box-shadow:none;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;width:24px;height:auto;max-width:300px;" width="24"/></a>
    <a href="#" style="background:none;display:inline-block;padding:3px 2px;color:rgb(255, 255, 255);text-decoration:none;font-weight:400;cursor:pointer;margin-right:10px;border-radius:20px;box-shadow:none;text-shadow:none;vertical-align:middle;border:none;box-sizing:inherit;font-size:1.2em;line-height:inherit;margin:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;transform:perspective(1px) translateZ(0px);transition-duration:0.3s;transition-property:transform;" title="分享至微信"><img src="MongoDB分页的Java实现和分页需求的思考 - Ryan.Miao - 博客园_files/wechat.png" type="image/png" data-filename="wechat.png" alt="" height="24" style="border:medium none;width:24px;height:24px;box-shadow:none;margin-left:5px;vertical-align:middle;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;max-width:300px;" width="24"/></a>
</div>

<div style="float:right;margin-bottom:10px;margin-right:30px;font-size:12px;width:136px;text-align:center;margin-top:10px;box-sizing:inherit;line-height:inherit;margin:0px;padding:10px;background-repeat:no-repeat;position:fixed;bottom:5px;right:0px;border:2px solid rgb(111, 168, 51);background-color:rgb(255, 255, 255);box-shadow:rgb(95, 90, 75) 0px 0px 0px 1px, rgba(10, 10, 0, 0.5) 1px 1px 6px 1px;border-radius:5px;">
    <div style="float:left;width:46px;height:52px;background:url(&quot;//static.cnblogs.com/images/upup.gif&quot;) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
        <span style="font-size:1pc;color:rgb(126, 140, 141);font-family:Verdana;line-height:1.5em;box-sizing:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">5</span>
    </div>
    <div style="float:right;margin-left:20px;width:46px;height:52px;background:url(&quot;//static.cnblogs.com/images/downdown.gif&quot;) no-repeat;text-align:center;cursor:pointer;margin-top:2px;padding-top:5px;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
        <span style="font-size:1pc;color:rgb(126, 140, 141);font-family:Verdana;line-height:1.5em;box-sizing:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">0</span>
    </div>
    <div style="clear:both;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"></div>
    <div style="margin-top:5px;margin-left:0px;font-size:0.8em;color:rgb(126, 140, 141);box-sizing:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">
    </div>
</div>

</div>
    <div style="clear:both;box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"></div>
    <div style="line-height:1.8;font-size:12px;box-sizing:inherit;margin:0px;padding:10px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(125, 139, 141);font-weight:600;">

    <a href="https://www.cnblogs.com/woshimrf/p/LocalDate-serialize-json-springboot.html" style="text-decoration:none;box-sizing:inherit;font-size:18px;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(126, 140, 141);font-weight:200;display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">« </a> 上一篇：    <a href="https://www.cnblogs.com/woshimrf/p/LocalDate-serialize-json-springboot.html" style="box-sizing:inherit;font-size:18px;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(126, 140, 141);font-weight:200;display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" title="发布于 2018-05-30 08:43">Jackson序列化LocalDate与Springboot集成</a>
    <br style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;"/>
    <a href="https://www.cnblogs.com/woshimrf/p/springboot-with-feign.html" style="text-decoration:none;box-sizing:inherit;font-size:18px;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;color:rgb(126, 140, 141);font-weight:200;display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">» </a> 下一篇：    <a href="https://www.cnblogs.com/woshimrf/p/springboot-with-feign.html" style="box-sizing:inherit;font-size:18px;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(126, 140, 141);font-weight:200;display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;" title="发布于 2018-06-11 11:12">OpenFeign封装为springboot starter</a>

</div>
</div>
            </div>
            <div style="box-sizing:inherit;font-size:1em;line-height:45px;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;background-color:rgba(255, 255, 255, 0.4);border-top:1px solid rgb(233, 232, 232);box-shadow:rgba(0, 0, 0, 0.3) 0px 0px 3px;clear:both;color:rgb(159, 164, 164);float:none;height:45px;margin-bottom:20px;padding-left:30px;position:relative;text-align:center;z-index:2;">posted @ 
<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">2018-06-07 10:58</span> <a href="https://www.cnblogs.com/woshimrf/" style="box-sizing:inherit;font-size:1em;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(102, 102, 102);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">Ryan.Miao</a> 阅读(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">9636</span>) 评论(<span style="box-sizing:inherit;font-size:inherit;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;">2</span>) <a href="https://i.cnblogs.com/EditPosts.aspx?postid=9149535" rel="nofollow" style="box-sizing:inherit;font-size:1em;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(102, 102, 102);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;"> 编辑</a> <a href="#" style="box-sizing:inherit;font-size:1em;line-height:inherit;margin:0px;padding:0px;border-style:solid;border-width:0px;background-repeat:no-repeat;text-decoration:none;color:rgb(102, 102, 102);display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0px);box-shadow:transparent 0px 0px 1px;transition-duration:0.3s;transition-property:transform;">收藏</a>
</div>
        </div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 