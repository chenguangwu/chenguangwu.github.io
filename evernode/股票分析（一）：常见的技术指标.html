<html>
<head>
  <title>股票分析（一）：常见的技术指标</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8408"/>
<h1>股票分析（一）：常见的技术指标</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/3/26 10:06</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.callmewhy.com/2016/02/27/stock-analyse-1/index.html"><i>http://blog.callmewhy.com/2016/02/27/stock-analyse-1/index.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="font-family:sans-serif;text-size-adjust:100%;"><div style="font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:2;color:rgb(85, 85, 85);background:rgb(255, 255, 255);"><div><span><div><div><div><div><div style="opacity:1;transform:translateY(0px);">
    

    

    

    
      <div style="display:block;">

        
        
          <h2 style="margin:20px 0px 15px;padding:0px;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-weight:400;font-size:26px;text-align:center;word-break:break-word;">
            
            
              
                股票分析（一）：常见的技术指标
              
            
          </h2>
        

        <div style="margin:3px 0px 60px;color:rgb(153, 153, 153);font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:12px;text-align:center;">
          <span>
            
              <span style="margin-right:3px;">
                <i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>
              </span>
              
                <span>发表于</span>
              
              <span title="创建于">
                2016-02-27
              </span>
            

            

            
          </span>

          
            <span>
            
              <span style="margin:0px 0.5em;">|</span>
            
              <span style="margin-right:3px;">
                <i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>
              </span>
              
                <span>分类于</span>
              
              
                <span>
                  <a href="https://blog.callmewhy.com/categories/%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/" rel="index" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;">
                    <span>开发笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span>
                <span style="margin:0px 0.5em;">|</span>
                <span style="margin-right:3px;">
                  <i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>
                </span>
                <a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#comments" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;">
                  <span>11 评论</span>
                </a>
              </span>
            
          

          
          

          

          

          
              <div style="font-size:14px;margin-top:2px;">
                  盆友们，对不起，我画风突变了！
              </div>
          

        </div>
      </div>
    


    <div style="font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;">

      
      

      
        <h2 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:20px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#背景" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="背景"></a>背景</h2><p style="margin:0px 0px 25px;">最近在学习使用 Python 做数据分析，感觉一个比较有意思的场景是用于股市，比如数据可视化、股票技术指标分析等等。准备写一个系列记录用 Python 分析股票的全过程。</p>
<h2 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:20px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#相关技术" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="相关技术"></a>相关技术</h2><p style="margin:0px 0px 25px;">在折腾的过程中，相关的技术如下：</p>
<ul style="list-style:none;">
<li style="list-style:circle;"><a href="https://www.python.org/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" target="_blank">Python</a>：用于分析股票的编程语言，选择 Python 的原因是相关科学计算的库十分丰富。</li>
<li style="list-style:circle;"><a href="https://github.com/pypa/virtualenv" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" target="_blank">Virtualenv</a>：用于创建虚拟的 Python 运行环境，用于保持工作空间互不干扰。</li>
<li style="list-style:circle;"><a href="http://ipython.org/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" target="_blank">iPython</a>：代码编写均在 iPython Notebook 中完成，方便查看运行结果和记录分享。</li>
<li style="list-style:circle;"><a href="http://www.numpy.org/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" target="_blank">NumPy</a>：一个常见的基础运算库，支援矩阵运算，包含大量常用的数学函数。</li>
<li style="list-style:circle;"><a href="http://pandas.pydata.org/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" target="_blank">Pandas</a>：一个基于 NumPy 的数据分析工具，可以简单高效地处理数据。</li>
<li style="list-style:circle;"><a href="http://matplotlib.org/" rel="external" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" target="_blank">Matplotlib</a>：基于 NumPy 的绘图工具，可以用一些通用的 GUI 工具很方便的绘制图表。</li>
</ul>
<h2 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:20px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#基础操作" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="基础操作"></a>基础操作</h2><p style="margin:0px 0px 25px;">股票的数据是通过 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">matplotlib</code> 的 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">finance</code> 模块获取的，它提供了一个获取雅虎股票数据的接口：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">date1 = datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">25</span> )</div><div style="height:20px;">date2 = datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">26</span> )</div><div style="height:20px;">sp = f.quotes_historical_yahoo_ohlc(<span style="color:rgb(113, 140, 0);">'601233.ss'</span>, date1, date2, adjusted=<span style="color:rgb(137, 89, 168);">True</span>)</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">print</span> sp</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">获取到的数据格式是：日期、开盘价、最高价、最低价、收盘价、成交量：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">[(<span style="color:rgb(113, 140, 0);">736019.0</span>, <span style="color:rgb(113, 140, 0);">13.130000000000001</span>, <span style="color:rgb(113, 140, 0);">13.140000000000001</span>, <span style="color:rgb(113, 140, 0);">11.83</span>, <span style="color:rgb(113, 140, 0);">11.83</span>, <span style="color:rgb(113, 140, 0);">17447800.0</span>),</div><div style="height:20px;">(<span style="color:rgb(113, 140, 0);">736020.0</span>, <span style="color:rgb(113, 140, 0);">11.960000000000001</span>, <span style="color:rgb(113, 140, 0);">12.880000000000001</span>, <span style="color:rgb(113, 140, 0);">11.960000000000001</span>, <span style="color:rgb(113, 140, 0);">12.68</span>, <span style="color:rgb(113, 140, 0);">14906700.0</span>)]</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">用 Pandas 处理之后数据会更易读一些：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">pd.DataFrame(sp, columns=[<span style="color:rgb(113, 140, 0);">'date'</span>,<span style="color:rgb(113, 140, 0);">'open'</span>,<span style="color:rgb(113, 140, 0);">'high'</span>,<span style="color:rgb(113, 140, 0);">'low'</span>,<span style="color:rgb(113, 140, 0);">'close'</span>,<span style="color:rgb(113, 140, 0);">'volume'</span>])</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">显示的结果是：</p>
<table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;margin:20px 0px;width:100%;border:1px solid rgb(221, 221, 221);table-layout:fixed;">
<thead>
<tr>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">index</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">date</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">open</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">high</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">low</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">close</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">volume</th>
</tr>
</thead>
<tbody>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">0</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">736019</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">13.13</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">13.14</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.83</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.83</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">17447800</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">1</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">736020</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.96</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12.88</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.96</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12.68</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14906700</td>
</tr>
</tbody>
</table>
<h2 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:20px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#常见指标" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="常见指标"></a>常见指标</h2><p style="margin:0px 0px 25px;">股市中有很多辅助分析的技术指标，后面会逐渐通过 Python 实现这些技术指标的可视化展示。</p>
<h3 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:18px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#VOL-成交量" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="VOL - 成交量"></a>VOL - 成交量</h3><h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#定义" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="定义"></a>定义</h4><p style="margin:0px 0px 25px;">成交量是指在某一时段内具体的交易数，它的变化反映了资金进出市场的情况，是印证市场走势的重要指标。</p>
<p style="margin:0px 0px 25px;"><a href="http://ww2.sinaimg.cn/large/61d238c7jw1f1e60sofulj210908uwhc.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1e60sofulj210908uwhc.jpg" type="image/jpeg" data-filename="61d238c7jw1f1e60sofulj210908uwhc.jpg" alt="" height="167" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="692"/></a></p>
<h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#绘制" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="绘制"></a>绘制</h4><p style="margin:0px 0px 25px;">在绘制成交量的时候，成交量使用柱状图绘制，若收盘价高于开盘价则为红色，否则为绿色。</p>
<p style="margin:0px 0px 25px;">以代码为 601233 的股票『桐昆股份』为例。首先引入基础的类库：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">%matplotlib inline</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">import</span> matplotlib.dates <span style="color:rgb(137, 89, 168);">as</span> dates</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">import</span> matplotlib.finance <span style="color:rgb(137, 89, 168);">as</span> f  </div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">import</span> matplotlib.pyplot <span style="color:rgb(137, 89, 168);">as</span> plt</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">import</span> datetime</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">import</span> pandas <span style="color:rgb(137, 89, 168);">as</span> pd</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">然后获取 2016年1月1日 到 2016年2月20日 期间的股票数据：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">date1 = datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">1</span>, <span style="color:rgb(113, 140, 0);">1</span> )</div><div style="height:20px;">date2 = datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">20</span> )</div><div style="height:20px;">sp = f.quotes_historical_yahoo_ohlc(<span style="color:rgb(113, 140, 0);">'601233.ss'</span>, date1, date2, adjusted=<span style="color:rgb(137, 89, 168);">True</span>)</div><div style="height:20px;">df = pd.DataFrame(sp, columns=[<span style="color:rgb(113, 140, 0);">'date'</span>,<span style="color:rgb(113, 140, 0);">'open'</span>,<span style="color:rgb(113, 140, 0);">'high'</span>,<span style="color:rgb(113, 140, 0);">'low'</span>,<span style="color:rgb(113, 140, 0);">'close'</span>,<span style="color:rgb(113, 140, 0);">'volume'</span>])</div><div style="height:20px;">df[<span style="color:rgb(113, 140, 0);">'date'</span>] = dates.num2date(df[<span style="color:rgb(113, 140, 0);">'date'</span>])</div><div style="height:20px;">df = df[df[<span style="color:rgb(113, 140, 0);">'volume'</span>] != <span style="color:rgb(113, 140, 0);">0</span>]</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">print</span> df</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">可以看到目前的数据是这样的：</p>
<table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;margin:20px 0px;width:100%;border:1px solid rgb(221, 221, 221);table-layout:fixed;">
<thead>
<tr>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">date(index)</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">open</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">high</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">low</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">close</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">volume</th>
</tr>
</thead>
<tbody>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-01 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.34</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.58</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.06</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.46</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14063800</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-02 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.41</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.75</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.20</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.74</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">19108900</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-03 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.42</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.49</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.09</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.37</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14133400</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-04 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.75</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.41</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.71</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.86</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">28524200</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-05 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.21</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.24</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.86</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.96</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11278100</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-15 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.67</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.30</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.45</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.12</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11494100</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-16 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.95</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.67</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14092200</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-17 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.50</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.72</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.30</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.58</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11607800</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-18 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.88</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12.73</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.76</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.93</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">20870100</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-19 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.62</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12.20</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.53</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.96</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">7751300</td>
</tr>
</tbody>
</table>
<p style="margin:0px 0px 25px;">然后就是数据的绘制了，取出 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">volume</code> 列，通过 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">plot</code> 方法进行绘制：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">temp_df = df[df[<span style="color:rgb(113, 140, 0);">'date'</span>] &gt;= datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">1</span> )]</div><div style="height:20px;">fig, ax = plt.subplots()</div><div style="height:20px;">ax = temp_df[<span style="color:rgb(113, 140, 0);">'volume'</span>].plot(kind=<span style="color:rgb(113, 140, 0);">'Bar'</span>, color=[<span style="color:rgb(113, 140, 0);">'r'</span> <span style="color:rgb(137, 89, 168);">if</span> x[<span style="color:rgb(113, 140, 0);">5</span>] &gt; x[<span style="color:rgb(113, 140, 0);">2</span>] <span style="color:rgb(137, 89, 168);">else</span> <span style="color:rgb(113, 140, 0);">'g'</span> <span style="color:rgb(137, 89, 168);">for</span> x <span style="color:rgb(137, 89, 168);">in</span> temp_df.itertuples()])</div><div style="height:20px;">ax.set_xticklabels([x.strftime(<span style="color:rgb(113, 140, 0);">'%Y-%m-%d'</span>) <span style="color:rgb(137, 89, 168);">for</span> x <span style="color:rgb(137, 89, 168);">in</span> temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>]])</div><div style="height:20px;">fig.show()</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">结果如下：</p>
<p style="margin:0px 0px 25px;"><a href="http://ww3.sinaimg.cn/large/61d238c7jw1f1e93jutnwj20a9091wez.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1e93jutnwj20a9091wez.jpg" type="image/jpeg" data-filename="61d238c7jw1f1e93jutnwj20a9091wez.jpg" alt="" height="318" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="369"/></a></p>
<p style="margin:0px 0px 25px;">如果我们希望能够像前面的软件截图一样绘制出均线，可以使用 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">rolling_mean</code> 函数：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">temp_df = df</div><div style="height:20px;">params = [5, 10, 20]</div><div style="height:20px;">for p in params:</div><div style="height:20px;">    temp_df['vol'+str(p)] = pd.rolling_mean(df['volume'], window=p)</div><div style="height:20px;">temp_df = temp_df[temp_df['date'] &gt;= datetime.date( 2016, 2, 1 )]</div><div style="height:20px;">print temp_df</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">结果如下：</p>
<table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;margin:20px 0px;width:100%;border:1px solid rgb(221, 221, 221);table-layout:fixed;">
<thead>
<tr>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">date</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">open</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">high</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">low</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">close</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">volume</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">vol5</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">vol10</th>
<th style="padding:8px;text-align:center;vertical-align:middle;font-weight:700;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding-bottom:10px;">vol20</th>
</tr>
</thead>
<tbody>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-01 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.34</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.58</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.06</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.46</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14063800</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">20885020</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">16664900</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12883440</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-02 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.41</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.75</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.20</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.74</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">19108900</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">19654100</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">17607560</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">13023730</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-03 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.42</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.49</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.09</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.37</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14133400</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">17720800</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">17859820</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">13265350</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-04 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.75</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.41</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.71</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.86</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">28524200</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">19246640</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">19894810</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14542820</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-05 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.21</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.24</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.86</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.96</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11278100</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">17421680</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">20263980</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14495145</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-15 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.67</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.30</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">10.45</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.12</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11494100</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">16907740</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">18896380</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14474330</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-16 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.95</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.67</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14092200</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">15904400</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">17779250</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">14832440</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-17 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.50</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.72</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.30</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.58</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11607800</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">15399280</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">16560040</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">15084490</td>
</tr>
<tr style="background-color:rgb(249, 249, 249);">
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-18 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.88</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12.73</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.76</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.93</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">20870100</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">13868460</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">16557550</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">15712860</td>
</tr>
<tr>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">2016-02-19 00:00:00+00:00</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.62</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">12.20</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.53</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">11.96</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">7751300</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">13163100</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">15292390</td>
<td style="padding:8px;text-align:center;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);border-bottom-width:1px;">15656035</td>
</tr>
</tbody>
</table>
<p style="margin:0px 0px 25px;">然后通过指定 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">ax=ax</code> 可以将多张图标绘制在同一个页面。注意，柱状图默认用 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">range(0,n)</code> 做 x 轴，而折线图会自动填充索引成等距连续序列，这样会导致最后的结果是：柱状图堆在左边早已画完，而折线图会继续往右延伸。所以需要通过 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">use_index=False</code> 明确规定不使用索引，绘图代码如下：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">fig, ax = plt.subplots()</div><div style="height:20px;">param_colors = [(1,0.7,0.2), (0,0.7,0.9), (0.9,0.5,0.9)]</div><div style="height:20px;">for (i,p) in enumerate(params):</div><div style="height:20px;">    temp_df[['vol'+str(p)]].plot(kind='line', ax=ax, color=param_colors[i], use_index=False)</div><div style="height:20px;">temp_df[['volume']].plot(kind='bar', ax=ax, color=['r' if x[5] &gt; x[2] else 'g' for x in temp_df.itertuples()])</div><div style="height:20px;">ax.set_xticklabels([x.strftime('%Y-%m-%d') for x in temp_df['date']])</div><div style="height:20px;">plt.show()</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">绘制结果：</p>
<p style="margin:0px 0px 25px;"><a href="http://ww2.sinaimg.cn/large/61d238c7jw1f1fbh93td9j20a908mdgm.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1fbh93td9j20a908mdgm.jpg" type="image/jpeg" data-filename="61d238c7jw1f1fbh93td9j20a908mdgm.jpg" alt="" height="303" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="369"/></a></p>
<h3 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:18px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#MA-移动平均线" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="MA - 移动平均线"></a>MA - 移动平均线</h3><h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#定义-1" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="定义"></a>定义</h4><p style="margin:0px 0px 25px;">移动平均就是固定窗口然后滑动窗口计算多日收盘价的平均值，通过设置窗口的大小可以查看短期、中期、长期的移动平均线变化情况。一般常用的是5日、10日、20日等。</p>
<p style="margin:0px 0px 25px;"><a href="http://ww1.sinaimg.cn/large/61d238c7jw1f1l2nn8bafj20lm09z40e.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1l2nn8bafj20lm09z40e.jpg" type="image/jpeg" data-filename="61d238c7jw1f1l2nn8bafj20lm09z40e.jpg" alt="" height="316" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="692"/></a></p>
<h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#绘制-1" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="绘制"></a>绘制</h4><p style="margin:0px 0px 25px;">有了前面的 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">rolling_mean</code> 函数，绘制均线并没什么难度。绘制5天、10天、20天均线的代码如下：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">temp_df = df</div><div style="height:20px;">params = [<span style="color:rgb(113, 140, 0);">5</span>, <span style="color:rgb(113, 140, 0);">10</span>, <span style="color:rgb(113, 140, 0);">20</span>]</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">for</span> p <span style="color:rgb(137, 89, 168);">in</span> params:</div><div style="height:20px;">    temp_df[<span style="color:rgb(113, 140, 0);">'ma'</span>+str(p)] = pd.rolling_mean(df[<span style="color:rgb(113, 140, 0);">'close'</span>], window=p)</div><div style="height:20px;">temp_df = temp_df[temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>] &gt;= datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">1</span> )]</div><div style="height:20px;"></div><div style="height:20px;">fig, ax = plt.subplots()</div><div style="height:20px;">param_colors = [(<span style="color:rgb(113, 140, 0);">1</span>,<span style="color:rgb(113, 140, 0);">0.7</span>,<span style="color:rgb(113, 140, 0);">0.2</span>), (<span style="color:rgb(113, 140, 0);">0</span>,<span style="color:rgb(113, 140, 0);">0.7</span>,<span style="color:rgb(113, 140, 0);">0.9</span>), (<span style="color:rgb(113, 140, 0);">0.9</span>,<span style="color:rgb(113, 140, 0);">0.5</span>,<span style="color:rgb(113, 140, 0);">0.9</span>)]</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">for</span> (i,p) <span style="color:rgb(137, 89, 168);">in</span> enumerate(params):</div><div style="height:20px;">    temp_df[[<span style="color:rgb(113, 140, 0);">'ma'</span>+str(p)]].plot(kind=<span style="color:rgb(113, 140, 0);">'line'</span>, ax=ax, color=param_colors[i], use_index=<span style="color:rgb(137, 89, 168);">False</span>)</div><div style="height:20px;">ax.set_xticklabels([x.strftime(<span style="color:rgb(113, 140, 0);">'%d'</span>) <span style="color:rgb(137, 89, 168);">for</span> x <span style="color:rgb(137, 89, 168);">in</span> temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>]])</div><div style="height:20px;">fig.show()</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">绘制结果：</p>
<p style="margin:0px 0px 25px;"><a href="http://ww1.sinaimg.cn/large/61d238c7jw1f1l2eg0a75j20al06zjrq.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1l2eg0a75j20al06zjrq.jpg" type="image/jpeg" data-filename="61d238c7jw1f1l2eg0a75j20al06zjrq.jpg" alt="" height="246" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="381"/></a></p>
<h3 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:18px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#EMA-指数移动平均线" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="EMA - 指数移动平均线"></a>EMA - 指数移动平均线</h3><h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#定义-2" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="定义"></a>定义</h4><p style="margin:0px 0px 25px;">移动平均线需要绘制在中点处才能正确的反映价格的运动趋势，而指数移动平均线在公式中着重考虑了价格当期行情的权重，离当期越近，权重越高，弥补了其他指标的滞后性：</p>
<blockquote style="margin:0px;padding:0px 15px;color:rgb(102, 102, 102);border-left:4px solid rgb(221, 221, 221);">
<p style="margin:0px 0px 25px;">EMAt1 = EMAt0 + α * (p - EMAt0)</p>
</blockquote>
<p style="margin:0px 0px 25px;">和移动平均线一样， EMA 也可以设置不同的参数值查看不同短期、中期、长期的走势情况。</p>
<p style="margin:0px 0px 25px;"><a href="http://ww2.sinaimg.cn/large/61d238c7jw1f1l2podjjkj20ls0a70ul.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1l2podjjkj20ls0a70ul.jpg" type="image/jpeg" data-filename="61d238c7jw1f1l2podjjkj20ls0a70ul.jpg" alt="" height="320" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="692"/></a></p>
<h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#绘制-2" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="绘制"></a>绘制</h4><p style="margin:0px 0px 25px;">主要是通过 <code style="font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;font-size:13px;padding:2px 4px;word-wrap:break-word;color:rgb(77, 77, 76);background:rgb(247, 247, 247);border-radius:3px;">pd.ewma</code> 函数进行绘制：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">params = [<span style="color:rgb(113, 140, 0);">5</span>, <span style="color:rgb(113, 140, 0);">10</span>, <span style="color:rgb(113, 140, 0);">20</span>]</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">for</span> p <span style="color:rgb(137, 89, 168);">in</span> params:</div><div style="height:20px;">    temp_df[<span style="color:rgb(113, 140, 0);">'ema'</span>+str(p)] = pd.ewma(temp_df[<span style="color:rgb(113, 140, 0);">'close'</span>], span=p)</div><div style="height:20px;">temp_df = temp_df[temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>] &gt;= datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">1</span> )]</div><div style="height:20px;"></div><div style="height:20px;">fig, ax = plt.subplots()</div><div style="height:20px;">param_colors = [(<span style="color:rgb(113, 140, 0);">1</span>,<span style="color:rgb(113, 140, 0);">0.7</span>,<span style="color:rgb(113, 140, 0);">0.2</span>), (<span style="color:rgb(113, 140, 0);">0</span>,<span style="color:rgb(113, 140, 0);">0.7</span>,<span style="color:rgb(113, 140, 0);">0.9</span>), (<span style="color:rgb(113, 140, 0);">0.9</span>,<span style="color:rgb(113, 140, 0);">0.5</span>,<span style="color:rgb(113, 140, 0);">0.9</span>)]</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">for</span> (i,p) <span style="color:rgb(137, 89, 168);">in</span> enumerate(params):</div><div style="height:20px;">    temp_df[[<span style="color:rgb(113, 140, 0);">'ema'</span>+str(p)]].plot(kind=<span style="color:rgb(113, 140, 0);">'line'</span>, ax=ax, color=param_colors[i], use_index=<span style="color:rgb(137, 89, 168);">False</span>)</div><div style="height:20px;">ax.set_xticklabels([x.strftime(<span style="color:rgb(113, 140, 0);">'%d'</span>) <span style="color:rgb(137, 89, 168);">for</span> x <span style="color:rgb(137, 89, 168);">in</span> temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>]])</div><div style="height:20px;">fig.show()</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">绘制结果：</p>
<p style="margin:0px 0px 25px;"><a href="http://ww4.sinaimg.cn/large/61d238c7jw1f1l2gil2xej20al07474o.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1l2gil2xej20al07474o.jpg" type="image/jpeg" data-filename="61d238c7jw1f1l2gil2xej20al07474o.jpg" alt="" height="251" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="381"/></a></p>
<h3 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:18px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#MACD-指数异同移动平均线" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="MACD - 指数异同移动平均线"></a>MACD - 指数异同移动平均线</h3><h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#定义-3" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="定义"></a>定义</h4><p style="margin:0px 0px 25px;">MACD 是一种常见的技术分析工具，由一组曲线与图形组成，通过收盘价快变及慢变的指数移动平均值之间的差计算出来。『快』指更短时段的 EMA，而『慢』则指较长时段的 EMA，最常用的是12及26日 EMA。公式如下：</p>
<blockquote style="margin:0px;padding:0px 15px;color:rgb(102, 102, 102);border-left:4px solid rgb(221, 221, 221);">
<p style="margin:0px 0px 25px;">DIF = EMA(close, 12) - EMA(close, 26)<br/>DEM = EMA(DIF, 9)<br/>MACD = (DIF - DEM) * 2</p>
</blockquote>
<p style="margin:0px 0px 25px;"><a href="http://ww1.sinaimg.cn/large/61d238c7jw1f1m2939n7sj20d606n3zn.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1m2939n7sj20d606n3zn.jpg" type="image/jpeg" data-filename="61d238c7jw1f1m2939n7sj20d606n3zn.jpg" alt="" height="235" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="474"/></a></p>
<h4 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:16px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#绘制-3" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="绘制"></a>绘制</h4><p style="margin:0px 0px 25px;">先取出 2015年6月1日至2016年2月20日的股票信息：</p>
<div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">date1 = datetime.date( <span style="color:rgb(113, 140, 0);">2015</span>, <span style="color:rgb(113, 140, 0);">6</span>, <span style="color:rgb(113, 140, 0);">1</span> )</div><div style="height:20px;">date2 = datetime.date( <span style="color:rgb(113, 140, 0);">2016</span>, <span style="color:rgb(113, 140, 0);">2</span>, <span style="color:rgb(113, 140, 0);">20</span> )</div><div style="height:20px;">sp = f.quotes_historical_yahoo_ohlc(<span style="color:rgb(113, 140, 0);">'601233.ss'</span>, date1, date2, adjusted=<span style="color:rgb(137, 89, 168);">True</span>)</div><div style="height:20px;">temp_df = pd.DataFrame(sp, columns=[<span style="color:rgb(113, 140, 0);">'date'</span>,<span style="color:rgb(113, 140, 0);">'open'</span>,<span style="color:rgb(113, 140, 0);">'high'</span>,<span style="color:rgb(113, 140, 0);">'low'</span>,<span style="color:rgb(113, 140, 0);">'close'</span>,<span style="color:rgb(113, 140, 0);">'volume'</span>])</div><div style="height:20px;">temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>] = dates.num2date(temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>])</div><div style="height:20px;">temp_df = temp_df[temp_df[<span style="color:rgb(113, 140, 0);">'volume'</span>] != <span style="color:rgb(113, 140, 0);">0</span>]</div></pre></td></tr></tbody></table></div>
<p style="margin:0px 0px 25px;">然后计算 DIF DEM MACD 的值并存储到列中：<br/></p><div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">params = [<span style="color:rgb(113, 140, 0);">12</span>, <span style="color:rgb(113, 140, 0);">26</span>]</div><div style="height:20px;"><span style="color:rgb(137, 89, 168);">for</span> p <span style="color:rgb(137, 89, 168);">in</span> params:</div><div style="height:20px;">    temp_df[<span style="color:rgb(113, 140, 0);">'ema'</span>+str(p)] = pd.ewma(temp_df[<span style="color:rgb(113, 140, 0);">'close'</span>], span=p)</div><div style="height:20px;">temp_df[<span style="color:rgb(113, 140, 0);">'DIF'</span>] = temp_df[<span style="color:rgb(113, 140, 0);">'ema12'</span>] - temp_df[<span style="color:rgb(113, 140, 0);">'ema26'</span>]</div><div style="height:20px;">temp_df[<span style="color:rgb(113, 140, 0);">'DEM'</span>] = pd.ewma(temp_df[<span style="color:rgb(113, 140, 0);">'DIF'</span>], span=<span style="color:rgb(113, 140, 0);">9</span>)</div><div style="height:20px;">temp_df[<span style="color:rgb(113, 140, 0);">'MACD'</span>] = (temp_df[<span style="color:rgb(113, 140, 0);">'DIF'</span>] - temp_df[<span style="color:rgb(113, 140, 0);">'DEM'</span>]) * <span style="color:rgb(113, 140, 0);">2</span></div><div style="height:20px;">temp_df = temp_df[temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>] &gt;= datetime.date( <span style="color:rgb(113, 140, 0);">2015</span>, <span style="color:rgb(113, 140, 0);">12</span>, <span style="color:rgb(113, 140, 0);">1</span> )]</div></pre></td></tr></tbody></table></div><p style="margin:0px 0px 25px;"></p>
<p style="margin:0px 0px 25px;">最后使用 plot 函数绘制即可<br/></p><div style="display:block;margin:20px 0px;overflow:auto;padding:0px;font-size:13px;color:rgb(77, 77, 76);background:rgb(247, 247, 247);line-height:1.6;border-radius:1px;"><table style="font-weight:inherit;font-style:inherit;font-variant:inherit;font-size:14px;border-collapse:collapse;border-spacing:0px;table-layout:fixed;margin:0px;width:auto;border:none;"><tbody><tr style="background-color:rgb(249, 249, 249);"><td style="text-align:left;vertical-align:middle;font-weight:normal;border-bottom:3px solid rgb(221, 221, 221);border-right:1px solid rgb(238, 238, 238);padding:0px;border:none;"><pre style="background:rgb(247, 247, 247);overflow:auto;font-size:13px;line-height:1.6;font-family:consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;color:rgb(77, 77, 76);padding:10px 0px;margin:0px;border:none;padding-left:10px;padding-right:10px;background-color:rgb(247, 247, 247);"><div style="height:20px;">fig, ax = plt.subplots()</div><div style="height:20px;">param_colors = [(<span style="color:rgb(113, 140, 0);">1</span>,<span style="color:rgb(113, 140, 0);">0.7</span>,<span style="color:rgb(113, 140, 0);">0.2</span>), (<span style="color:rgb(113, 140, 0);">0</span>,<span style="color:rgb(113, 140, 0);">0.7</span>,<span style="color:rgb(113, 140, 0);">0.9</span>), (<span style="color:rgb(113, 140, 0);">0.9</span>,<span style="color:rgb(113, 140, 0);">0.5</span>,<span style="color:rgb(113, 140, 0);">0.9</span>)]</div><div style="height:20px;">temp_df[[<span style="color:rgb(113, 140, 0);">'DIF'</span>,<span style="color:rgb(113, 140, 0);">'DEM'</span>]].plot(kind=<span style="color:rgb(113, 140, 0);">'line'</span>, ax=ax, color=param_colors, use_index=<span style="color:rgb(137, 89, 168);">False</span>)</div><div style="height:20px;">temp_df[[<span style="color:rgb(113, 140, 0);">'MACD'</span>]].plot(kind=<span style="color:rgb(113, 140, 0);">'bar'</span>, ax=ax, color=[<span style="color:rgb(113, 140, 0);">'r'</span> <span style="color:rgb(137, 89, 168);">if</span> x[<span style="color:rgb(113, 140, 0);">-1</span>] &gt; <span style="color:rgb(113, 140, 0);">0</span> <span style="color:rgb(137, 89, 168);">else</span> <span style="color:rgb(113, 140, 0);">'g'</span> <span style="color:rgb(137, 89, 168);">for</span> x <span style="color:rgb(137, 89, 168);">in</span> temp_df.itertuples()])</div><div style="height:20px;">ax.set_xticklabels([x.strftime(<span style="color:rgb(113, 140, 0);">'%d'</span>) <span style="color:rgb(137, 89, 168);">for</span> x <span style="color:rgb(137, 89, 168);">in</span> temp_df[<span style="color:rgb(113, 140, 0);">'date'</span>]])</div><div style="height:20px;">fig.show()</div></pre></td></tr></tbody></table></div><p style="margin:0px 0px 25px;"></p>
<p style="margin:0px 0px 25px;">绘制结果如下：</p>
<p style="margin:0px 0px 25px;"><a href="http://ww2.sinaimg.cn/large/61d238c7jw1f1m2em0pm0j20aj077wfh.jpg" rel="group" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;"><img src="股票分析（一）：常见的技术指标_files/61d238c7jw1f1m2em0pm0j20aj077wfh.jpg" type="image/jpeg" data-filename="61d238c7jw1f1m2em0pm0j20aj077wfh.jpg" alt="" height="254" style="max-width:100%;height:auto;border:1px solid rgb(221, 221, 221);margin:0px auto;cursor:-webkit-zoom-in;box-sizing:border-box;padding:3px;display:block;" width="379"/></a></p>
<h2 style="margin:20px 0px 15px;padding:0px;font-weight:bold;line-height:1.5;font-family:Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:20px;padding-top:10px;"><a href="https://blog.callmewhy.com/2016/02/27/stock-analyse-1/#其他" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;" title="其他"></a>其他</h2><p style="margin:0px 0px 25px;">其他技术指标就不挨个练习了，RiceQuant 或者 UQER 上都已经提供了现成的 API 可以直接调用。这个练手只是为了熟悉一下 Python 在数据处理和数据可视化方便的基础操作，后面开始做一些量化交易的尝试。</p>
<p style="margin:0px 0px 25px;">很有意思，你也试试？</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <div style="display:block;">
      
        <div style="margin-top:40px;text-align:center;">
          
            <a href="https://blog.callmewhy.com/tags/Stock/" rel="tag" style="background-color:transparent;color:rgb(85, 85, 85);text-decoration:none;border-bottom:1px solid rgb(153, 153, 153);word-wrap:break-word;display:inline-block;margin-right:10px;font-size:13px;"># Stock</a>
          
        </div>
      

      
        
      

      
        <div style="display:table;margin-top:15px;width:100%;border-top:1px solid rgb(238, 238, 238);">
          <div style="display:table-cell;padding:10px 0px 0px;width:45%;vertical-align:top;">
            
              <a href="https://blog.callmewhy.com/2016/01/16/curry-for-pubuim/" rel="next" style="background-color:transparent;text-decoration:none;word-wrap:break-word;color:rgb(85, 85, 85);border-bottom:none;position:relative;display:block;line-height:25px;font-size:14px;padding-left:15px;" title="再遇柯里化：瀑布 IM 的消息封装">
                <i style="font-family:FontAwesome;display:inline-block;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-style:normal;-webkit-font-smoothing:antialiased;text-rendering:auto;font-size:12px;position:absolute;top:8px;left:0px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:12px;"></span></i> 再遇柯里化：瀑布 IM 的消息封装
              </a>
            
          </div>

          <span style="display:table-cell;width:10%;"></span>

          <div style="display:table-cell;padding:10px 0px 0px;width:45%;vertical-align:top;text-align:right;">
            
              <a href="https://blog.callmewhy.com/2016/03/06/stock-analyse-2/" rel="prev" style="background-color:transparent;text-decoration:none;word-wrap:break-word;color:rgb(85, 85, 85);border-bottom:none;position:relative;display:block;line-height:25px;font-size:14px;padding-right:15px;" title="股票分析（二）：金叉到底灵不灵">
                股票分析（二）：金叉到底灵不灵 <i style="font-size:12px;display:inline-block;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-style:normal;text-rendering:auto;-webkit-font-smoothing:antialiased;position:absolute;top:8px;left:auto;right:0px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:12px;"></span></i>
              </a>
            
          </div>
        </div>
      

      
      
    </div>
  </div></div></div></div></div></span></div></div></div></div><br/></div></span>
</div></body></html> 