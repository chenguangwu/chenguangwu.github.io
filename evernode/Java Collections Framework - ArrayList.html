<html>
<head>
  <title>Java Collections Framework - ArrayList</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2667"/>
<h1>Java Collections Framework - ArrayList</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/8/7 13:29</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.jianshu.com/p/4b7aa8a022ba"><i>https://www.jianshu.com/p/4b7aa8a022ba</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:10px;-webkit-tap-highlight-color:transparent;"><div style="box-sizing:border-box;font-size:17px;line-height:1.42857;background-color:rgb(255, 255, 255);min-width:768px;color:rgb(51, 51, 51);font-family:-apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;">
        <h1 style="box-sizing:border-box;color:inherit;margin-top:20px;margin-bottom:10px;font-size:34px;margin:20px 0px 0px;font-family:-apple-system, &quot;SF UI Display&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;font-weight:700;line-height:1.3;word-break:break-word;">Java Collections Framework - ArrayList</h1>

        
        <div style="box-sizing:border-box;margin:30px 0px 40px;">
          <a href="https://www.jianshu.com/u/90ab66c248e6" style="box-sizing:border-box;background-color:transparent;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;width:48px;height:48px;display:inline-block;vertical-align:middle;">
            <img src="Java Collections Framework - ArrayList_files/96" type="image/png" data-filename="96" height="46" style="box-sizing:border-box;vertical-align:middle;border:1px solid rgb(221, 221, 221);width:100%;height:100%;border-radius:50%;" width="46"/>
</a>          <div style="box-sizing:border-box;vertical-align:middle;display:inline-block;margin-left:8px;">
            <span style="box-sizing:border-box;margin-right:3px;font-size:16px;vertical-align:middle;"><a href="https://www.jianshu.com/u/90ab66c248e6" style="box-sizing:border-box;background-color:transparent;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;">占小狼</a></span>
              <img src="Java Collections Framework - ArrayList_files/595a1b60-08f6-4beb-998f-2bf55e230555" type="image/png" data-filename="595a1b60-08f6-4beb-998f-2bf55e230555" height="20" style="box-sizing:border-box;vertical-align:middle;border:0px;margin-right:5px;width:20px;height:20px;border-radius:0px;" title="" width="20"/>
            
            <a style="cursor:pointer;box-sizing:border-box;border:1px solid rgba(151, 151, 151, 0.6);text-decoration:none;white-space:nowrap;margin-bottom:0px;text-align:center;vertical-align:middle;touch-action:manipulation;color:rgb(140, 140, 140);display:inline-block;font-weight:400;user-select:none;border-radius:40px;line-height:normal;background:none;font-size:12px;padding:0px 7px 0px 5px;"><i style="box-sizing:border-box;font-size:inherit;font-style:normal;-webkit-font-smoothing:antialiased;font-family:iconfont;font-weight:400;"><span style="font-size:inherit;font-style:normal;font-family:iconfont;font-weight:400;"></span></i><span style="box-sizing:border-box;margin-left:2px;display:inline;">已关注</span></a>
            
            <div style="box-sizing:border-box;margin-top:5px;font-size:12px;color:rgb(150, 150, 150);">
              
                <span style="box-sizing:border-box;padding-right:5px;" title="">2016.07.05 15:44*</span>
              <span style="box-sizing:border-box;padding-right:5px;">字数 783</span>
            <span style="box-sizing:border-box;padding-right:5px;">阅读 5783</span><span style="box-sizing:border-box;padding-right:5px;">评论 22</span><span style="box-sizing:border-box;padding-right:5px;">喜欢 71</span><span style="box-sizing:border-box;padding-right:5px;">赞赏 1</span></div>
          </div>
          
        </div>


        
        <div style="box-sizing:border-box;color:rgb(47, 47, 47);font-size:16px;font-weight:400;line-height:1.7;word-break:break-word;">
          <div style="box-sizing:border-box;">
            <blockquote style="box-sizing:border-box;margin:0px 0px 20px;padding:20px;font-size:16px;border-left:6px solid rgb(180, 180, 180);margin-bottom:25px;background-color:rgb(247, 247, 247);font-weight:400;line-height:30px;word-break:break-word;">
<p style="box-sizing:border-box;margin:0px 0px 25px;font-size:16px;font-weight:400;line-height:1.7;margin-bottom:0px;word-break:break-word;">简书 <a href="https://www.jianshu.com/users/90ab66c248e6/latest_articles" style="box-sizing:border-box;background-color:transparent;text-decoration:none;cursor:pointer;color:rgb(49, 148, 208);" target="_blank">占小狼</a><br style="box-sizing:border-box;"/>
转载请注明原创出处，谢谢！</p>
</blockquote>
<h4 style="box-sizing:border-box;font-family:inherit;margin-top:10px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:20px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">定义</h4>
<blockquote style="box-sizing:border-box;margin:0px 0px 20px;padding:20px;font-size:16px;border-left:6px solid rgb(180, 180, 180);margin-bottom:25px;background-color:rgb(247, 247, 247);font-weight:400;line-height:30px;word-break:break-word;">
<p style="box-sizing:border-box;margin:0px 0px 25px;font-size:16px;font-weight:400;line-height:1.7;margin-bottom:0px;word-break:break-word;">ArrayList底层以数组实现，允许重复，默认第一次插入元素时创建数组的大小为10，超出限制时会增加50%的容量，每次扩容都底层采用System.arrayCopy()复制到新的数组，初始化时最好能给出数组大小的预估值。</p>
</blockquote>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">package</span> java.util;
<span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">class</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">ArrayList</span>&lt;<span style="box-sizing:border-box;color:rgb(230, 192, 123);">E</span>&gt; <span style="box-sizing:border-box;color:rgb(198, 120, 221);">extends</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">AbstractList</span>&lt;<span style="box-sizing:border-box;color:rgb(230, 192, 123);">E</span>&gt; <span style="box-sizing:border-box;color:rgb(198, 120, 221);">implements</span> <span style="box-sizing:border-box;color:rgb(230, 192, 123);">List</span>&lt;<span style="box-sizing:border-box;color:rgb(230, 192, 123);">E</span>&gt;, <span style="box-sizing:border-box;color:rgb(230, 192, 123);">RandomAccess</span>, <span style="box-sizing:border-box;color:rgb(230, 192, 123);">Cloneable</span>, <span style="box-sizing:border-box;color:rgb(230, 192, 123);">java</span>.<span style="box-sizing:border-box;color:rgb(230, 192, 123);">io</span>.<span style="box-sizing:border-box;color:rgb(230, 192, 123);">Serializable</span> </span>{ 
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">private</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">static</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">final</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> DEFAULT_CAPACITY = <span style="box-sizing:border-box;color:rgb(209, 154, 102);">10</span>; 
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">private</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">static</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">final</span> Object[] EMPTY_ELEMENTDATA = {}; 
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">private</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">transient</span> Object[] elementData; 
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">private</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> size;
    <span style="box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;">//其余省略</span>
}
</code></pre>
<h4 style="box-sizing:border-box;font-family:inherit;margin-top:10px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:20px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">概述</h4>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">按数组下标访问元素—get(i)/set(i,e) 的性能很高，这是数组的基本优势。</p>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> E <span style="box-sizing:border-box;color:rgb(97, 174, 238);">get</span><span style="box-sizing:border-box;">(<span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> index)</span> </span>{    
    rangeCheck(index);    
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> elementData(index);
}

<span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> E <span style="box-sizing:border-box;color:rgb(97, 174, 238);">set</span><span style="box-sizing:border-box;">(<span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> index, E element)</span> </span>{    
    rangeCheck(index);    
    E oldValue = elementData(index);    
    elementData[index] = element;    
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">return</span> oldValue;
}
</code></pre>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">直接在数组末尾加入元素—add(e)的性能也高，但如果按下标插入、删除元素—add(i,e), remove(i), remove(e)，则要用System.arraycopy()来移动部分受影响的元素，性能就变差了，<strong style="box-sizing:border-box;font-weight:700;">这是劣势</strong>。</p>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">ArrayList中有一个方法trimToSize()用来缩小elementData数组的大小，这样可以节约内存：</p>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">public</span> <span style="box-sizing:border-box;color:rgb(198, 120, 221);">void</span> <span style="box-sizing:border-box;color:rgb(97, 174, 238);">trimToSize</span><span style="box-sizing:border-box;">()</span> </span>{ 
    modCount++; 
    <span style="box-sizing:border-box;color:rgb(198, 120, 221);">if</span> (size &lt; elementData.length) { 
        elementData = Arrays.copyOf(elementData, size); 
    } 
}
</code></pre>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">考虑这样一种情形，当某个应用需要，一个ArrayList扩容到比如size=10000，之后经过一系列remove操作size=15，在后面的很长一段时间内这个ArrayList的size一直保持在&lt;100以内，那么就造成了很大的空间浪费，这时候建议显式调用一下trimToSize()这个方法，以优化一下内存空间。   <br style="box-sizing:border-box;"/>
或者在一个ArrayList中的容量已经固定，但是由于之前每次扩容都扩充50%，所以有一定的空间浪费，可以调用trimToSize()消除这些空间上的浪费。</p>
<h4 style="box-sizing:border-box;font-family:inherit;margin-top:10px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:20px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">RandomAccess</h4>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">这个接口有什么用？<br style="box-sizing:border-box;"/>
实现RandomAccess接口的集合有：<strong style="box-sizing:border-box;font-weight:700;">ArrayList</strong>, AttributeList, <strong style="box-sizing:border-box;font-weight:700;">CopyOnWriteArrayList</strong>, RoleList, RoleUnresolvedList, <strong style="box-sizing:border-box;font-weight:700;">Stack</strong>, <strong style="box-sizing:border-box;font-weight:700;">Vector</strong>等。<br style="box-sizing:border-box;"/>
在RandomAccess接口的注释中有这么一段话：</p>
<pre style="word-wrap:normal;background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;line-height:1.42857;margin:0px 0px 10px;border-radius:4px;padding:15px;display:block;color:rgb(171, 178, 191);font-size:13px;background:rgb(40, 44, 52);margin-bottom:20px;white-space:pre;overflow-x:auto;overflow:auto;word-break:break-word;"><code style="box-sizing:border-box;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;color:inherit;border-radius:0px;font-size:12px;border:none;vertical-align:middle;background-color:transparent;padding:0px;white-space:pre;"><span style="box-sizing:border-box;color:rgb(198, 120, 221);">for</span> (<span style="box-sizing:border-box;color:rgb(198, 120, 221);">int</span> i=<span style="box-sizing:border-box;color:rgb(209, 154, 102);">0</span>, n=<span style="box-sizing:border-box;color:rgb(230, 192, 123);">list</span>.size(); i &lt; n; i++) {     
    <span style="box-sizing:border-box;color:rgb(230, 192, 123);">list</span>.get(i);
}
runs faster than <span style="box-sizing:border-box;color:rgb(198, 120, 221);">this</span> loop:
<span style="box-sizing:border-box;color:rgb(198, 120, 221);">for</span> (Iterator i=<span style="box-sizing:border-box;color:rgb(230, 192, 123);">list</span>.iterator(); i.hasNext(); ) { 
   i.next();
}
</code></pre>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">说明实现了RandomAccess接口的集合，在数据量很大的情况下，采用迭代器遍历比较慢。</p>
<hr style="border-left-color:initial;box-sizing:content-box;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;border-right-color:initial;border-bottom-color:initial;height:0px;border-image:initial;border-top-style:solid;margin-bottom:20px;margin-top:20px;border-top-color:rgb(238, 238, 238);border-top:1px solid rgb(221, 221, 221);margin:0px 0px 20px;"/>
<h4 style="box-sizing:border-box;font-family:inherit;margin-top:10px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:20px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">和LinkedList的区别</h4>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">1、ArrayList是实现了基于动态数组的数据结构，LinkedList基于链表的数据结构。<br style="box-sizing:border-box;"/>
2、对于随机访问get和set，ArrayList觉得优于LinkedList，因为LinkedList要移动指针。<br style="box-sizing:border-box;"/>
3、对于新增和删除操作add和remove（不是在尾部添加删除），LinkedList比较占优势，因为ArrayList要移动数据。</p>
<hr style="border-left-color:initial;box-sizing:content-box;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;border-right-color:initial;border-bottom-color:initial;height:0px;border-image:initial;border-top-style:solid;margin-bottom:20px;margin-top:20px;border-top-color:rgb(238, 238, 238);border-top:1px solid rgb(221, 221, 221);margin:0px 0px 20px;"/>
<h4 style="box-sizing:border-box;font-family:inherit;margin-top:10px;margin-bottom:10px;font-weight:700;line-height:1.7;color:rgb(47, 47, 47);font-size:20px;margin:0px 0px 15px;text-rendering:optimizeLegibility;">和Vector的区别</h4>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">1、Vector和ArrayList几乎是完全相同的,唯一的区别在于Vector是同步类(synchronized)，属于强同步类。因此开销就比ArrayList要大，访问要慢。正常情况下,大多数的Java程序员使用ArrayList而不是Vector,因为同步完全可以由程序员自己来控制。<br style="box-sizing:border-box;"/>
2、Vector每次扩容请求其大小的2倍空间，而ArrayList是1.5倍。<br style="box-sizing:border-box;"/>
3、Vector还有一个子类Stack.</p>
<p style="box-sizing:border-box;margin:0px 0px 25px;word-break:break-word;">END。<br style="box-sizing:border-box;"/>
我是占小狼。<br style="box-sizing:border-box;"/>
在魔都艰苦奋斗，白天是上班族，晚上是知识服务工作者。<br style="box-sizing:border-box;"/>
读完我的文章有收获，记得关注和点赞哦，如果非要打赏，我也是不会拒绝的啦！</p>

          </div>
        </div>
    </div></div></div></div></div></div>
</div>
</span>
</div></body></html> 