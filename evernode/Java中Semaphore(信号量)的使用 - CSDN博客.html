<html>
<head>
  <title>Java中Semaphore(信号量)的使用 - CSDN博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="11467"/>
<h1>Java中Semaphore(信号量)的使用 - CSDN博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/4/19 11:18</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://blog.csdn.net/zbc1090549839/article/details/53389602"><i>https://blog.csdn.net/zbc1090549839/article/details/53389602</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%; position: relative;"><div><div style="font-family:&quot;microsoft yahei&quot;;background:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/bg-yellow.png) repeat;"><div><div style="min-width:980px;font-size:12px;"><div style="box-sizing:border-box;"><div style="overflow:hidden;"><div style="overflow:hidden;"><div style="background:rgb(255, 255, 255);border-image:initial;">
        <div style="margin-bottom:21px;">
            <span style="display:inline-block;vertical-align:top;width:19px;height:19px;margin-right:10px;margin-top:4px;background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png);background-repeat:no-repeat;background-position:0px 0px;"></span>
            <h1 style="margin:0px;padding:0px;display:inline-block;vertical-align:middle;font-size:18px;width:95%;">
                <span>
                    <a href="https://blog.csdn.net/zbc1090549839/article/details/53389602" style="text-decoration:none;color:rgb(0, 0, 0);">
                        
                                                Java中Semaphore(信号量)的使用                    </a>
                </span>
            </h1>
        </div>
        <div style="font-size:12px;border-bottom:1px solid rgb(237, 237, 237);font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;padding:0px 20px 5px;line-height:22px;font-family:Arial;margin:0px -20px;overflow:hidden;text-align:right;color:rgb(153, 153, 153);"><span style="color:rgb(153, 153, 153);font-style:normal;font-variant:normal;font-weight:400;font-size:12px;line-height:22px;font-family:Arial;text-align:right;display:table;"> </span>
        <div style="width:100%;float:left;">
        <span style="margin:0px 0px 8px;float:left;">
        标签：
                            <a href="http://so.csdn.net/so/search/s.do?q=semaphore&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">semaphore</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=%E7%BA%BF%E7%A8%8B&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">线程</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=%E5%B9%B6%E5%8F%91&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">并发</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=%E5%A4%9A%E7%BA%BF%E7%A8%8B&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">多线程</a>
                    <a href="http://so.csdn.net/so/search/s.do?q=java&amp;t=blog" style="text-decoration:none;display:inline-block;margin-right:10px;color:rgb(200, 131, 38);" target="_blank">java</a>
                        </span>
    </div>
        <div>
        <span style="margin:0px 5px;float:left;margin-right:16px;">2016年11月29日 10:30:44</span>
        <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(https://csdnimg.cn/release/phoenix/dotnet/css/../../../images/ico_view.png) left center no-repeat;margin-right:16px;display:inline-block;background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png);background-repeat:no-repeat;background-position:0px -25px;padding-left:24px;" title="阅读次数">10102人阅读</span>
        <span style="margin:0px 5px;padding:0px 0px 0px 14px;background:url(https://csdnimg.cn/release/phoenix/dotnet/css/../../../images/ico_comm.png) left center no-repeat;margin-right:16px;display:inline-block;background-repeat:no-repeat;background-position:0px -43px;padding-left:17px;background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon-yellow.png);" title="评论次数"> <a href="#" style="text-decoration:none;color:rgb(200, 131, 38);">评论</a>(4)</span>
        <span style="margin:0px 5px;margin-right:16px;display:inline-block;background-repeat:no-repeat;background-position:0px -62px;padding-left:17px;background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon-yellow.png);">
            <a href="#" style="text-decoration:none;color:rgb(200, 131, 38);" target="_blank" title="收藏">收藏</a>
        </span>
                <span style="margin:0px 5px;margin-right:16px;display:inline-block;background-repeat:no-repeat;background-position:0px -81px;padding-left:17px;background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon-yellow.png);">
            <a href="#" style="text-decoration:none;color:rgb(200, 131, 38);" title="举报">举报</a>
        </span>
                    </div>
<span style="color:rgb(153, 153, 153);font-style:normal;font-variant:normal;font-weight:400;font-size:12px;line-height:22px;font-family:Arial;text-align:right;height:0px;visibility:hidden;display:block;clear:both;">.</span></div>

                <div style="border-bottom:1px solid rgb(237, 237, 237);margin:0px -20px;padding:5px 20px;"><span style="display:table;"> </span>
            <div style="font-size:14px;float:left;display:inline-block;color:rgb(51, 51, 51);width:70px;line-height:28px;">
                <img src="Java中Semaphore(信号量)的使用 - CSDN博客_files/category_icon.jpg" type="image/jpeg" data-filename="category_icon.jpg" height="13" style="border:none;vertical-align:middle;" width="15"/>
                <span style="vertical-align:middle;display:inline-block;">分类：</span>
            </div>
            <div style="font-size:14px;float:left;display:inline-block;color:rgb(223, 52, 52);width:90%;">
                                            <span style="display:inline-block;margin-left:15px;cursor:pointer;line-height:28px;position:relative;">
                    <span>
                       JAVA学习笔记<em style="font-style:normal;">（7）</em>
                    </span>
                    <img src="Java中Semaphore(信号量)的使用 - CSDN博客_files/arrow_triangle _down.jpg" type="image/jpeg" data-filename="arrow_triangle _down.jpg" height="5" style="border:none;display:inline;" width="10"/>
                    
                    
                </span>
                                        </div>
        <span style="height:0px;visibility:hidden;display:block;clear:both;">.</span></div>
                <div style="padding:20px 0px;">
                        <p style="margin:0px;padding:0px;color:rgb(102, 102, 102);font-size:12px;line-height:20px;border-left:3px solid rgb(228, 28, 30);padding-left:10px;">
                版权声明：本文为博主原创文章，未经博主允许不得转载。                https://blog.csdn.net/zbc1090549839/article/details/53389602            </p>
                    </div>
        <div style="margin:35px 0px;font-size:15px;color:rgb(85, 85, 85);line-height:35px;word-break:break-all;overflow:hidden;">
                    
            <div style="font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;">
                <p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;color:#660000;"><strong style="box-sizing:border-box;font-weight:700;">Semaphore的作用：</strong></span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;">在java中，使用了synchronized关键字和Lock锁实现了资源的并发访问控制，在同一时间只允许唯一了线程进入临界区访问资源(读锁除外)，这样子控制的主要目的是为了解决多个线程并发同一资源造成的数据不一致的问题。在另外一种场景下，一个资源有多个副本可供同时使用，比如打印机房有多个打印机、厕所有多个坑可供同时使用，这种情况下，Java提供了另外的并发访问控制--资源的多副本的并发访问控制，今天学习的信号量Semaphore即是其中的一种。</span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;color:#660000;"><strong style="box-sizing:border-box;font-weight:700;"><a name="OLE_LINK4" style="box-sizing:border-box;text-decoration:none;color:rgb(12, 137, 207);" target="_blank"></a><a name="OLE_LINK3" style="box-sizing:border-box;text-decoration:none;color:rgb(12, 137, 207);" target="_blank">Semaphore</a>实现原理初探：</strong></span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;">Semaphore是用来保护一个或者多个共享资源的访问，<a name="OLE_LINK2" style="box-sizing:border-box;text-decoration:none;color:rgb(12, 137, 207);" target="_blank"></a><a name="OLE_LINK1" style="box-sizing:border-box;text-decoration:none;color:rgb(12, 137, 207);" target="_blank">Semaphore</a>内部维护了一个计数器，其值为可以访问的共享资源的个数。一个线程要访问共享资源，先获得信号量，如果信号量的计数器值大于1，意味着有共享资源可以访问，则使其计数器值减去1，再访问共享资源。</span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;">如果计数器值为0,线程进入休眠。当某个线程使用完共享资源后，释放信号量，并将信号量内部的计数器加1，之前进入休眠的线程将被唤醒并再次试图获得信号量。</span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;">就好比一个厕所管理员，站在门口，只有厕所有空位，就开门允许与空侧数量等量的人进入厕所。多个人进入厕所后，相当于N个人来分配使用N个空位。为避免多个人来同时竞争同一个侧卫，在内部仍然使用锁来控制资源的同步访问。</span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;color:#660000;"><strong style="box-sizing:border-box;font-weight:700;">Semaphore的使用：</strong></span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-family:'Microsoft YaHei';font-size:18px;">Semaphore使用时需要先构建一个参数来指定共享资源的数量，Semaphore构造完成后即是获取Semaphore、共享资源使用完毕后释放Semaphore。</span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"></p><div style="width:99%;position:relative;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;overflow-y:hidden;background-color:rgb(231, 229, 220);box-sizing:border-box;font-size:12px;text-align:left;overflow-x:auto;border-color:rgb(204, 204, 204);margin:18px 0px;"><div style="box-sizing:border-box;padding-left:45px;"><div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-variant:normal;font-stretch:normal;font-size:9px;font-style:normal;font-weight:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);padding:3px 8px 10px 10px;"><b style="box-sizing:border-box;">[java]</b> <a href="https://blog.csdn.net/zbc1090549839/article/details/53389602#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(https://csdnimg.cn/release/phoenix/images/ico_plain.gif);color:rgb(12, 137, 207);" target="_self" title="view plain">view plain</a><span style="box-sizing:border-box;"> <a href="https://blog.csdn.net/zbc1090549839/article/details/53389602#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(https://csdnimg.cn/release/phoenix/images/ico_copy.gif);color:rgb(12, 137, 207);" target="_self" title="copy">copy</a><div style="box-sizing:border-box;position:absolute;left:569px;top:1059px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;background-color:rgb(255, 255, 255);"></div></div></span><span style="box-sizing:border-box;"> </span></div></div><ol start="1" style="box-sizing:border-box;padding:0px;border:none;list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);margin:0px 0px 1px 45px;"><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">Semaphore semaphore = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> Semaphore(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">10</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">,</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">semaphore.acquire();  </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//do something here</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">semaphore.release();  </span></li></ol></div><br style="box-sizing:border-box;"/><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-size:18px;">下面的代码就是模拟控制商场厕所的并发使用：</span></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-size:10px;"></span></p><div style="width:99%;position:relative;padding-top:1px;font-family:Consolas, &quot;Courier New&quot;, Courier, mono, serif;overflow-y:hidden;background-color:rgb(231, 229, 220);box-sizing:border-box;font-size:12px;text-align:left;overflow-x:auto;border-color:rgb(204, 204, 204);margin:18px 0px;"><div style="box-sizing:border-box;padding-left:45px;"><div style="line-height:normal;box-sizing:border-box;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-variant:normal;font-stretch:normal;font-size:9px;font-style:normal;font-weight:normal;color:silver;background-color:rgb(248, 248, 248);border-left:3px solid rgb(108, 226, 108);border-right:1px solid rgb(231, 229, 220);padding:3px 8px 10px 10px;"><b style="box-sizing:border-box;">[java]</b> <a href="https://blog.csdn.net/zbc1090549839/article/details/53389602#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(https://csdnimg.cn/release/phoenix/images/ico_plain.gif);color:rgb(12, 137, 207);" target="_self" title="view plain">view plain</a><span style="box-sizing:border-box;"> <a href="https://blog.csdn.net/zbc1090549839/article/details/53389602#" style="margin-right:10px;box-sizing:border-box;background-repeat:no-repeat;background:0px 0px;margin:0px;border:none;display:inline-block;background-color:inherit;text-indent:-2000px;font-size:9px;background-position:left top;text-decoration:none;width:16px;height:16px;padding:1px;background-image:url(https://csdnimg.cn/release/phoenix/images/ico_copy.gif);color:rgb(12, 137, 207);" target="_self" title="copy">copy</a><div style="box-sizing:border-box;position:absolute;left:569px;top:1275px;width:16px;height:16px;z-index:99;"><div align="middle" style="box-sizing:border-box;background-color:rgb(255, 255, 255);"></div></div></span><span style="box-sizing:border-box;"> </span></div></div><ol start="1" style="box-sizing:border-box;padding:0px;border:none;list-style:decimal;background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);border-right:1px solid rgb(231, 229, 220);margin:0px 0px 1px 45px;"><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">class</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceManage {    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">final</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> Semaphore semaphore ;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">boolean</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> resourceArray[];    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">final</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ReentrantLock lock;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceManage() {    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">this</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">.resourceArray = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">boolean</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">[</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">10</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">];</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//存放厕所状态  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">this</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">.semaphore = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> Semaphore(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">10</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">,</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//控制10个共享资源的使用，使用先进先出的公平模式进行共享;公平模式的信号量，先来的先获得信号量  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">this</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">.lock = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ReentrantLock(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//公平模式的锁，先来的先选  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">for</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> i=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ;i&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">10</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i++){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            resourceArray[i] = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//初始化为资源可用的情况  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">void</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> useResource(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> userId){   </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        semaphore.acquire();   </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">try</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">{    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//semaphore.acquire();  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> id = getResourceId();</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//占到一个坑  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            System.out.print(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;userId:&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">+userId+</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;正在使用资源，资源id:&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">+id+</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;\n&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            Thread.sleep(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">100</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//do something，相当于于使用资源  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            resourceArray[id] = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">true</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//退出这个坑  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">catch</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> (InterruptedException e){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            e.printStackTrace();    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">finally</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            semaphore.release();<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//释放信号量，计数器加1  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> getResourceId(){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> id = -</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">1</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;   </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        lock.lock();  </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">try</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//lock.lock();//虽然使用了锁控制同步，但由于只是简单的一个数组遍历，效率还是很高的，所以基本不影响性能。  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">for</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> i=</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i&lt;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">10</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i++){    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">if</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">(resourceArray[i]){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                    resourceArray[i] = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">false</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                    id = i;    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">break</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            }    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">catch</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> (Exception e){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            e.printStackTrace();    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">finally</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            lock.unlock();    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">return</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> id;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">}    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">class</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceUser </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">implements</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> Runnable{    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceManage resourceManage;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">private</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> userId;    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceUser(ResourceManage resourceManage, </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> userId) {    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">this</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">.resourceManage = resourceManage;    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">this</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">.userId = userId;    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">void</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> run(){    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        System.out.print(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;userId:&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">+userId+</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;准备使用资源...\n&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        resourceManage.useResource(userId);    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        System.out.print(<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;userId:&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">+userId+</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 255);background-color:inherit;">&quot;使用资源完毕...\n&quot;</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">);    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">public</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">static</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">void</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> main(String[] args){    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        ResourceManage resourceManage = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceManage();    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        Thread[] threads = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> Thread[</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">100</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">];    </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">for</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> (</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> i = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i &lt; </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">100</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i++) {    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            Thread thread = <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> Thread(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">new</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> ResourceUser(resourceManage,i));</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//创建多个资源使用者  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            threads[i] = thread;    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">for</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">(</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">int</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> i = </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">0</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i &lt; </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;background-color:inherit;color:rgb(192, 0, 0);">100</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">; i++){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            Thread thread = threads[i];    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            <span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">try</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> {    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                thread.start();<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//启动线程  </span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">  </span></span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            }<span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:700;">catch</span><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;"> (Exception e){    </span></span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">                e.printStackTrace();    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">            }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">        }    </span></li><li style="background-color:rgb(255, 255, 255);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;box-sizing:border-box;line-height:150%;color:inherit;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">    }    </span></li><li style="background-color:rgb(248, 248, 248);margin-top:8px;border:none;list-style-type:decimal;list-style-image:initial;border-left:3px solid rgb(108, 226, 108);margin-left:40px;color:rgb(92, 92, 92);line-height:150%;box-sizing:border-box;list-style-position:outside;padding:0px 3px 0px 10px;margin:0px;"><span style="box-sizing:border-box;margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">}  </span></li></ol></div><br style="box-sizing:border-box;"/><br style="box-sizing:border-box;"/><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"></p><p style="padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-wrap:break-word;word-break:normal;"><span style="box-sizing:border-box;font-size:18px;">最后，Semaphore除了控制资源的多个副本的并发访问控制，也可以使用二进制信号量来实现类似synchronized关键字和Lock锁的并发访问控制功能。<br style="box-sizing:border-box;"/></span></p>            </div>
                </div>
        
        <ul style="margin-top:30px;">
                                    <li style="margin-bottom:16px;">
                <span style="padding-left:27px;width:51px;line-height:26px;display:inline-block;color:rgb(255, 255, 255);height:26px;margin-right:7px;background:rgb(153, 153, 153);background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png);background-repeat:no-repeat;background-position:8px -111px;">上一篇</span>
                <a href="https://blog.csdn.net/zbc1090549839/article/details/53055386" style="text-decoration:none;color:rgb(51, 51, 51);">CNN在中文文本分类的应用</a>
            </li>
            
                                    <li>
                <span style="padding-left:27px;width:51px;line-height:26px;display:inline-block;color:rgb(255, 255, 255);height:26px;background:rgb(153, 153, 153);margin-right:7px;background-image:url(https://csdnimg.cn/release/phoenix/dotnet/skin/skin-yellow/css/../images/skin-type-icon.png);background-repeat:no-repeat;background-position:8px -140px;">下一篇</span>
                <a href="https://blog.csdn.net/zbc1090549839/article/details/53432677" style="text-decoration:none;color:rgb(51, 51, 51);">TensorFlow实验环境搭建</a>
            </li>
                    </ul>
        <div style="clear:both;height:10px;"></div>
    </div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 