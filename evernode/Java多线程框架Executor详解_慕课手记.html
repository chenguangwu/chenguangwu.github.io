<html>
<head>
  <title>Java多线程框架Executor详解_慕课手记</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1528"/>
<h1>Java多线程框架Executor详解_慕课手记</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/12/17 11:01</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.imooc.com/article/14377"><i>http://www.imooc.com/article/14377</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;"><div style="font:14px/1.5 &quot;PingFang SC&quot;, 微软雅黑, &quot;Microsoft YaHei&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;color:rgb(28, 31, 33);"><div style="background:rgb(255, 255, 255);color:rgb(28, 31, 33);font:14px/1.5 &quot;PingFang SC&quot;, 微软雅黑, &quot;Microsoft YaHei&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;transition:transform 0.3s ease;overflow-x:hidden;background-color:rgb(248, 250, 252);"><div><div><div><div style="background:rgb(255, 255, 255);box-shadow:rgba(7, 17, 27, 0.05) 0px 8px 16px 0px;border-radius:12px;box-sizing:border-box;">
							<div style="margin:0px;padding:0px;background:url(http://static.mukewang.com/static/img/article/original.png?t=2) 0px 0px / 64px;width:64px;height:64px;position:absolute;left:0px;top:0px;"></div>
						
			<div style="margin:0px;padding:0px;font-size:12px;color:rgb(145, 153, 161);line-height:24px;">
				<a href="http://www.imooc.com/" style="outline:0px;text-decoration:none;color:rgb(145, 153, 161);position:relative;z-index:2;cursor:pointer;" target="_blank"><i style="speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;line-height:16px;font-size:20px;vertical-align:text-bottom;font-family:imv2;"><span style="font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:16px;font-family:imv2;font-size:20px;"></span></i></a>
				<a href="http://www.imooc.com/article" style="outline:0px;text-decoration:none;color:rgb(145, 153, 161);" target="_blank">手记</a>  /<a href="http://www.imooc.com/article/be" style="outline:0px;text-decoration:none;color:rgb(145, 153, 161);" target="_blank">后端开发</a>
			</div>
			       
			<div style="margin:0px;padding:0px;">
				<h1 style="padding:0px;font-weight:400;margin:8px 0px;font-size:32px;color:rgb(28, 31, 33);line-height:40px;word-wrap:break-word;word-break:break-all;">
					<span style="font-weight:700;">Java多线程框架Executor详解</span>
				</h1>
				<div style="margin:0px;padding:0px;font-size:12px;color:rgb(145, 153, 161);line-height:24px;">
					<div style="float:left;margin:0px;padding:0px;">
						<span style="vertical-align:middle;margin-right:24px;">2016.11.08 16:46</span>
						<span style="vertical-align:middle;margin-right:24px;">7061浏览</span>
					</div>
					<div style="float:right;margin:0px;padding:0px;">
						<div style="float:left;margin:0px;padding:0px;">
																					
							
						</div> 
					</div>	
				<span style="font-size:12px;color:rgb(145, 153, 161);line-height:24px;display:block;height:0px;clear:both;visibility:hidden;"> </span></div>
			</div> 

			 
			<div style="margin:0px;padding:0px;overflow:hidden;padding-top:24px;">  
				<div style="margin:0px;padding:0px;font-size:16px;word-wrap:break-word;color:rgb(28, 31, 33);font-family:&quot;PingFang SC&quot;, 微软雅黑, &quot;Microsoft YaHei&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;line-height:36px;">
					
					<div style="margin:0px;padding:0px;"><div style="margin:0px;padding:0px;"> <a name="parent_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">为什么引入Executor线程池框架</strong>
<div style="margin:0px;padding:0px;"> <a name="child_1_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">new Thread()的缺点</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">每次new Thread()耗费性能<br/>
调用new Thread()创建的线程缺乏管理，被称为野线程，而且可以无限制创建，之间相互竞争，会导致过多占用系统资源导致系统瘫痪。<br/>
不利于扩展，比如如定时执行、定期执行、线程中断</p>
<div style="margin:0px;padding:0px;"> <a name="child_1_2" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">采用线程池的优点</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">重用存在的线程，减少对象创建、消亡的开销，性能佳<br/>
可有效控制最大并发线程数，提高系统资源的使用率，同时避免过多资源竞争，避免堵塞<br/>
提供定时执行、定期执行、单线程、并发数控制等功能</p>
<div style="margin:0px;padding:0px;"> <a name="parent_2" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">Executor的介绍</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">在Java 5之后，并发编程引入了一堆新的启动、调度和管理线程的API。</p>
<div style="margin:0px;padding:0px;"> <a name="child_2_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">Executor框架便是Java 5中引入的，</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">其内部使用了线程池机制，它在java.util.cocurrent 包下，通过该框架来控制线程的启动、执行和关闭，可以简化并发编程的操作。因此，在Java 5之后，通过Executor来启动线程比使用Thread的start方法更好，除了更易管理，效率更好（用线程池实现，节约开销）外，还有关键的一点：有助于避免this逃逸问题——如果我们在构造器中启动一个线程，因为另一个任务可能会在构造器结束之前开始执行，此时可能会访问到初始化了一半的对象用Executor在构造器中。</p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">Executor框架包括：线程池，Executor，Executors，ExecutorService，CompletionService，Future，Callable等。</p>
<div style="margin:0px;padding:0px;"> <a name="parent_3" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">Executors方法介绍</strong>
<div style="margin:0px;padding:0px;"> <a name="child_3_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">Executors工厂类</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">通过Executors提供四种线程池，newFixedThreadPool、newCachedThreadPool、newSingleThreadExecutor、newScheduledThreadPool。</p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">1.public static ExecutorService newFixedThreadPool(int nThreads)<br/>
创建固定数目线程的线程池。</p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">2.public static ExecutorService newCachedThreadPool()<br/>
创建一个可缓存的线程池，调用execute将重用以前构造的线程（如果线程可用）。如果现有线程没有可用的，则创建一个新线   程并添加到池中。终止并从缓存中移除那些已有 60 秒钟未被使用的线程。</p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">3.public static ExecutorService newSingleThreadExecutor()<br/>
创建一个单线程化的Executor。</p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">4.public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize)<br/>
创建一个支持定时及周期性的任务执行的线程池，多数情况下可用来替代Timer类。</p>
<div style="margin:0px;padding:0px;"> <a name="child_3_2" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">1.newFixedThreadPool创建一个可重用固定线程数的线程池，以共享的无界队列方式来运行这些线程。</strong>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(102, 102, 0);">示例</span><span style="color:rgb(0, 0, 0);">
 </span><span style="color:rgb(102, 0, 102);">ExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newFixedThreadPool</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">5</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">0</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">20</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i</span><span style="color:rgb(102, 102, 0);">++)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> syncRunnable </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(102, 0, 102);">Log</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">e</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">TAG</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 102, 0);">};</span><span style="color:rgb(0, 0, 0);">
            executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">syncRunnable</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 102, 0);">}</span></code></pre>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">运行结果：总共只会创建5个线程， 开始执行五个线程，当五个线程都处于活动状态，再次提交的任务都会加入队列等到其他线程运行结束，当线程处于空闲状态时会被下一个任务复用</p>
<div style="margin:0px;padding:0px;"> <a name="child_3_3" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">2.newCachedThreadPool创建一个可缓存线程池，如果线程池长度超过处理需要，可灵活回收空闲线程</strong>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(102, 102, 0);">示例：</span><span style="color:rgb(0, 0, 0);">

        </span><span style="color:rgb(102, 0, 102);">ExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newCachedThreadPool</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">0</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">100</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i</span><span style="color:rgb(102, 102, 0);">++)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> syncRunnable </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(102, 0, 102);">Log</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">e</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">TAG</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 102, 0);">};</span><span style="color:rgb(0, 0, 0);">
            executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">syncRunnable</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 102, 0);">}</span></code></pre>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">运行结果：可以看出缓存线程池大小是不定值，可以需要创建不同数量的线程，在使用缓存型池时，先查看池中有没有以前创建的线程，如果有，就复用.如果没有，就新建新的线程加入池中，缓存型池子通常用于执行一些生存期很短的异步型任务</p>
<div style="margin:0px;padding:0px;"> <a name="child_3_4" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">3.newScheduledThreadPool创建一个定长线程池，支持定时及周期性任务执行</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">schedule(Runnable command,long delay, TimeUnit unit)创建并执行在给定延迟后启用的一次性操作</p>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(102, 102, 0);">示例：表示从提交任务开始计时，</span><span style="color:rgb(0, 102, 102);">5000</span><span style="color:rgb(102, 102, 0);">毫秒后执行</span><span style="color:rgb(0, 0, 0);">
    </span><span style="color:rgb(102, 0, 102);">ScheduledExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newScheduledThreadPool</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">5</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">0</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">20</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i</span><span style="color:rgb(102, 102, 0);">++)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> syncRunnable </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(102, 0, 102);">Log</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">e</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">TAG</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 102, 0);">};</span><span style="color:rgb(0, 0, 0);">
            executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">schedule</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">syncRunnable</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">5000</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">MILLISECONDS</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 102, 0);">}</span></code></pre>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">运行结果和newFixedThreadPool类似，不同的是newScheduledThreadPool是延时一定时间之后才执行</p>
<div style="margin:0px;padding:0px;"> <a name="child_3_5" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnitunit)</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">创建并执行一个在给定初始延迟后首次启用的定期操作，后续操作具有给定的周期；也就是将在 initialDelay 后开始执行，然后在initialDelay+period 后执行，接着在 initialDelay + 2 * period 后执行，依此类推 </p>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(102, 0, 102);">ScheduledExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newScheduledThreadPool</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">5</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> syncRunnable </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 0, 102);">Log</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">e</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">TAG</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 102, 0);">};</span><span style="color:rgb(0, 0, 0);">
        executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">scheduleAtFixedRate</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">syncRunnable</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">5000</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">3000</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">MILLISECONDS</span><span style="color:rgb(102, 102, 0);">);</span></code></pre>
<div style="margin:0px;padding:0px;"> <a name="child_3_6" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit)</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">创建并执行一个在给定初始延迟后首次启用的定期操作，随后，在每一次执行终止和下一次执行开始之间都存在给定的延迟</p>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ScheduledExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newScheduledThreadPool</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">5</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> syncRunnable </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 0, 102);">Log</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">e</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">TAG</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 0, 136);">try</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">sleep</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">1000</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">catch</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(0, 0, 0);"> e</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                    e</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">printStackTrace</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 102, 0);">};</span><span style="color:rgb(0, 0, 0);">
        executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">scheduleWithFixedDelay</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">syncRunnable</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">5000</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">3000</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">MILLISECONDS</span><span style="color:rgb(102, 102, 0);">);</span></code></pre>
<div style="margin:0px;padding:0px;"> <a name="child_3_7" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">4.newSingleThreadExecutor创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行</strong>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(102, 0, 102);">ExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newSingleThreadExecutor</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">0</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">20</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i</span><span style="color:rgb(102, 102, 0);">++)</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> syncRunnable </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(102, 0, 102);">Log</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">e</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">TAG</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 102, 0);">};</span><span style="color:rgb(0, 0, 0);">
            executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">syncRunnable</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 102, 0);">}</span></code></pre>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">运行结果：只会创建一个线程，当上一个执行完之后才会执行第二个</p>
<div style="margin:0px;padding:0px;"> <a name="parent_4" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">ExecutorService</strong>
<div style="margin:0px;padding:0px;"> <a name="child_4_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">ExecutorService是一个接口，ExecutorService接口继承了Executor接口，定义了一些生命周期的方法。</strong>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">interface</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ExecutorService</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">extends</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executor</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> shutdown</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(136, 0, 0);">//顺次地关闭ExecutorService,停止接收新的任务，等待所有已经提交的任务执行完毕之后，关闭ExecutorService</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 0, 102);">List</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> shutdownNow</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(136, 0, 0);">//阻止等待任务启动并试图停止当前正在执行的任务，停止接收新的任务，返回处于等待的任务列表</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(0, 0, 136);">boolean</span><span style="color:rgb(0, 0, 0);"> isShutdown</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(136, 0, 0);">//判断线程池是否已经关闭</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(0, 0, 136);">boolean</span><span style="color:rgb(0, 0, 0);"> isTerminated</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(136, 0, 0);">//如果关闭后所有任务都已完成，则返回 true。注意，除非首先调用 shutdown 或 shutdownNow，否则 isTerminated 永不为 true。</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(0, 0, 136);">boolean</span><span style="color:rgb(0, 0, 0);"> awaitTermination</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">long</span><span style="color:rgb(0, 0, 0);"> timeout</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(0, 0, 0);"> unit</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(136, 0, 0);">//等待（阻塞）直到关闭或最长等待时间或发生中断,timeout - 最长等待时间 ,unit - timeout 参数的时间单位  如果此执行程序终止，则返回 true；如果终止前超时期满，则返回 false </span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> submit</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Callable</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> task</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(136, 0, 0);">//提交一个返回值的任务用于执行，返回一个表示任务的未决结果的 Future。该 Future 的 get 方法在成功完成时将会返回该任务的结果。</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> submit</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> task</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> T result</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(136, 0, 0);">//提交一个 Runnable 任务用于执行，并返回一个表示该任务的 Future。该 Future 的 get 方法在成功完成时将会返回给定的结果。</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;?&gt;</span><span style="color:rgb(0, 0, 0);"> submit</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> task</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(136, 0, 0);">//提交一个 Runnable 任务用于执行，并返回一个表示该任务的 Future。该 Future 的 get 方法在成功 完成时将会返回 null</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">List</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> invokeAll</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Collection</span><span style="color:rgb(102, 102, 0);">&lt;?</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">extends</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Callable</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> tasks</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(136, 0, 0);">//执行给定的任务，当所有任务完成时，返回保持任务状态和结果的 Future 列表。返回列表的所有元素的 Future.isDone() 为 true。</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">throws</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">List</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> invokeAll</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Collection</span><span style="color:rgb(102, 102, 0);">&lt;?</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">extends</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Callable</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> tasks</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);">
                                  </span><span style="color:rgb(0, 0, 136);">long</span><span style="color:rgb(0, 0, 0);"> timeout</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(0, 0, 0);"> unit</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(136, 0, 0);">//执行给定的任务，当所有任务完成时，返回保持任务状态和结果的 Future 列表。返回列表的所有元素的 Future.isDone() 为 true。</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">throws</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> T invokeAny</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Collection</span><span style="color:rgb(102, 102, 0);">&lt;?</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">extends</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Callable</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> tasks</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(136, 0, 0);">//执行给定的任务，如果在给定的超时期满前某个任务已成功完成（也就是未抛出异常），则返回其结果。一旦正常或异常返回后，则取消尚未完成的任务。</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">throws</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ExecutionException</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">

    </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> T invokeAny</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Collection</span><span style="color:rgb(102, 102, 0);">&lt;?</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">extends</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Callable</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);">T</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> tasks</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(0, 0, 136);">long</span><span style="color:rgb(0, 0, 0);"> timeout</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(0, 0, 0);"> unit</span><span style="color:rgb(102, 102, 0);">)</span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">throws</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ExecutionException</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TimeoutException</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(102, 102, 0);">}</span></code></pre>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">ExecutorService接口继承自Executor接口，它提供了更丰富的实现多线程的方法，比如，ExecutorService提供了关闭自己的方法，以及可为跟踪一个或多个异步任务执行状况而生成 Future 的方法。 可以调用ExecutorService的shutdown（）方法来平滑地关闭 ExecutorService，调用该方法后，将导致ExecutorService停止接受任何新的任务且等待已经提交的任务执行完成(已经提交的任务会分两类：一类是已经在执行的，另一类是还没有开始执行的)，当所有已经提交的任务执行完毕后将会关闭ExecutorService。因此我们一般用该接口来实现和管理多线程。</p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">ExecutorService的生命周期包括三种状态：运行、关闭、终止。创建后便进入运行状态，当调用了shutdown（）方法时，便进入关闭状态，此时意味着ExecutorService不再接受新的任务，但它还在执行已经提交了的任务，当素有已经提交了的任务执行完后，便到达终止状态。如果不调用shutdown（）方法，ExecutorService会一直处在运行状态，不断接收新的任务，执行新的任务，服务器端一般不需要关闭它，保持一直运行即可。</p>
<div style="margin:0px;padding:0px;"> <a name="parent_5" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">Executor执行Runnable任务</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">一旦Runnable任务传递到execute（）方法，该方法便会自动在一个线程上执行。下面是是Executor执行Runnable任务的示例代码：</p>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">class</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TestCachedThreadPool</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">static</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> main</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">[]</span><span style="color:rgb(0, 0, 0);"> args</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">ExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newCachedThreadPool</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(136, 0, 0);">//      ExecutorService executorService = Executors.newFixedThreadPool(5);  </span><span style="color:rgb(0, 0, 0);">
</span><span style="color:rgb(136, 0, 0);">//      ExecutorService executorService = Executors.newSingleThreadExecutor();  </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">0</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">5</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i</span><span style="color:rgb(102, 102, 0);">++){</span><span style="color:rgb(0, 0, 0);">   
            executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TestRunnable</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">   
            </span><span style="color:rgb(102, 0, 102);">System</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 136);">out</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">println</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;************* a&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot; *************&quot;</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
        executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">shutdown</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   

</span><span style="color:rgb(0, 0, 136);">class</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TestRunnable</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">implements</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">(){</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">System</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 136);">out</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">println</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;线程被调用了。&quot;</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">  </span></code></pre>
<div style="margin:0px;padding:0px;"> <a name="child_5_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">结果</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;"><img src="Java多线程框架Executor详解_慕课手记_files/Image.png" type="image/png" data-filename="Image.png" height="240" style="border:0px;margin:10px auto 14px;position:static;max-width:576px;cursor:pointer;display:block;width:100%;height:240px;transform:none;" title="Java多线程框架Executor详解_" width="576"/></p>
<div style="margin:0px;padding:0px;"> <a name="parent_6" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">Executor执行Callable任务</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">在Java 5之后，任务分两类：一类是实现了Runnable接口的类，一类是实现了Callable接口的类。两者都可以被ExecutorService执行，但是Runnable任务没有返回值，而Callable任务有返回值。并且Callable的call()方法只能通过ExecutorService的submit(Callable&lt;T&gt; task) 方法来执行，并且返回一个 &lt;T&gt;Future&lt;T&gt;，是表示任务等待完成的 Future。</p>
<div style="margin:0px;padding:0px;"> <a name="child_6_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">下面给出一个Executor执行Callable任务的示例代码：</strong>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">class</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">CallableDemo</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">static</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> main</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">[]</span><span style="color:rgb(0, 0, 0);"> args</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">ExecutorService</span><span style="color:rgb(0, 0, 0);"> executorService </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Executors</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">newCachedThreadPool</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">List</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">&gt;&gt;</span><span style="color:rgb(0, 0, 0);"> resultList </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ArrayList</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">&gt;&gt;();</span><span style="color:rgb(0, 0, 0);">   

        </span><span style="color:rgb(136, 0, 0);">//创建10个任务并执行   </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">0</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i </span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 102, 102);">10</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);"> i</span><span style="color:rgb(102, 102, 0);">++){</span><span style="color:rgb(0, 0, 0);">   
            </span><span style="color:rgb(136, 0, 0);">//使用ExecutorService执行Callable类型的任务，并将结果保存在future变量中   </span><span style="color:rgb(0, 0, 0);">
            </span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> future </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">submit</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TaskWithResult</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">i</span><span style="color:rgb(102, 102, 0);">));</span><span style="color:rgb(0, 0, 0);">   
            </span><span style="color:rgb(136, 0, 0);">//将任务执行结果存储到List中   </span><span style="color:rgb(0, 0, 0);">
            resultList</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">add</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">future</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   

        </span><span style="color:rgb(136, 0, 0);">//遍历任务的结果   </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">for</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Future</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> fs </span><span style="color:rgb(102, 102, 0);">:</span><span style="color:rgb(0, 0, 0);"> resultList</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
                </span><span style="color:rgb(0, 0, 136);">try</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
                    </span><span style="color:rgb(0, 0, 136);">while</span><span style="color:rgb(102, 102, 0);">(!</span><span style="color:rgb(0, 0, 0);">fs</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">isDone</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(136, 0, 0);">//Future返回如果没有完成，则一直循环等待，直到Future返回完成  </span><span style="color:rgb(0, 0, 0);">
                    </span><span style="color:rgb(102, 0, 102);">System</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 136);">out</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">println</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">fs</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 136);">get</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">     </span><span style="color:rgb(136, 0, 0);">//打印各个线程（任务）执行的结果   </span><span style="color:rgb(0, 0, 0);">
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 136);">catch</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(0, 0, 0);"> e</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
                    e</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">printStackTrace</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 136);">catch</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">ExecutionException</span><span style="color:rgb(0, 0, 0);"> e</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
                    e</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">printStackTrace</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 136);">finally</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
                    </span><span style="color:rgb(136, 0, 0);">//启动一次顺序关闭，执行以前提交的任务，但不接受新任务  </span><span style="color:rgb(0, 0, 0);">
                    executorService</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">shutdown</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
                </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   

</span><span style="color:rgb(0, 0, 136);">class</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TaskWithResult</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">implements</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Callable</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">&gt;{</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">private</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> id</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">   

    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">TaskWithResult</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 136);">int</span><span style="color:rgb(0, 0, 0);"> id</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(0, 0, 136);">this</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">id </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> id</span><span style="color:rgb(102, 102, 0);">;</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   

    </span><span style="color:rgb(136, 0, 0);">/**  
     * 任务的具体过程，一旦任务传给ExecutorService的submit方法， 
     * 则该方法自动在一个线程上执行 
     */</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(0, 0, 0);"> call</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">throws</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Exception</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">  
        </span><span style="color:rgb(102, 0, 102);">System</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 136);">out</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">println</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 136, 0);">&quot;call()方法被自动调用！！！    &quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">());</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(136, 0, 0);">//该返回结果将被Future的get方法得到  </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(0, 0, 136);">return</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;call()方法被自动调用，任务返回的结果是：&quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> id </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;    &quot;</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">  </span></code></pre>
<div style="margin:0px;padding:0px;"> <a name="child_6_2" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">某次执行结果如下：</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;"><img src="Java多线程框架Executor详解_慕课手记_files/Image [1].png" type="image/png" data-filename="Image.png" height="240" style="border:0px;margin:10px auto 14px;position:static;max-width:576px;cursor:pointer;display:block;width:100%;height:240px;transform:none;" title="Java多线程框架Executor详解_" width="576"/></p>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">从结果中可以同样可以看出，submit也是首先选择空闲线程来执行任务，如果没有，才会创建新的线程来执行任务。另外，需要注意：如果Future的返回尚未完成，则get（）方法会阻塞等待，直到Future完成返回，可以通过调用isDone（）方法判断Future是否完成了返回。</p>
<div style="margin:0px;padding:0px;"> <a name="parent_7" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:25px;padding-bottom:8px;">自定义线程池</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;">自定义线程池，可以用ThreadPoolExecutor类创建，它有多个构造方法来创建线程池，用该类很容易实现自定义的线程池，这里先贴上示例程序：</p>
<pre style="word-wrap:break-word;margin:0.8em 0px;font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;display:block;font-size:0.92857em;line-height:1.3;color:rgb(51, 51, 51);word-break:break-all;padding:10px;border-radius:4px;text-indent:0px;position:relative;border:none;overflow:auto;margin-top:25px;background-color:rgb(238, 238, 238);"><code style="font-family:Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;margin:0px;font-style:normal;font-weight:400;padding:0px;color:rgb(199, 37, 78);border-radius:3px;text-indent:0px;word-break:break-all;font-size:1em;background-color:transparent;"><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">class</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ThreadPoolTest</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">static</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> main</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">String</span><span style="color:rgb(102, 102, 0);">[]</span><span style="color:rgb(0, 0, 0);"> args</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(136, 0, 0);">//创建等待队列   </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 0, 102);">BlockingQueue</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">&gt;</span><span style="color:rgb(0, 0, 0);"> bqueue </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ArrayBlockingQueue</span><span style="color:rgb(102, 102, 0);">&lt;</span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">&gt;(</span><span style="color:rgb(0, 102, 102);">20</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(136, 0, 0);">//创建线程池，池中保存的线程数为3，允许的最大线程数为5  </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 0, 102);">ThreadPoolExecutor</span><span style="color:rgb(0, 0, 0);"> pool </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">ThreadPoolExecutor</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">3</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 102, 102);">5</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 102, 102);">50</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(102, 0, 102);">TimeUnit</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">MILLISECONDS</span><span style="color:rgb(102, 102, 0);">,</span><span style="color:rgb(0, 0, 0);">bqueue</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(136, 0, 0);">//创建七个任务   </span><span style="color:rgb(0, 0, 0);">
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t1 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t2 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t3 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t4 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t5 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t6 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(0, 0, 0);"> t7 </span><span style="color:rgb(102, 102, 0);">=</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">new</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(136, 0, 0);">//每个任务会在一个线程上执行  </span><span style="color:rgb(0, 0, 0);">
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t1</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t2</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t3</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t4</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t5</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t6</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">execute</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 0, 0);">t7</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(136, 0, 0);">//关闭线程池   </span><span style="color:rgb(0, 0, 0);">
        pool</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">shutdown</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   

</span><span style="color:rgb(0, 0, 136);">class</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">MyThread</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">implements</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 0, 102);">Runnable</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 102, 102);">@Override</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(0, 0, 136);">public</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 0, 136);">void</span><span style="color:rgb(0, 0, 0);"> run</span><span style="color:rgb(102, 102, 0);">(){</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 0, 102);">System</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 136);">out</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">println</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">currentThread</span><span style="color:rgb(102, 102, 0);">().</span><span style="color:rgb(0, 0, 0);">getName</span><span style="color:rgb(102, 102, 0);">()</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(102, 102, 0);">+</span><span style="color:rgb(0, 0, 0);"> </span><span style="color:rgb(0, 136, 0);">&quot;正在执行。。。&quot;</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(0, 0, 136);">try</span><span style="color:rgb(102, 102, 0);">{</span><span style="color:rgb(0, 0, 0);">   
            </span><span style="color:rgb(102, 0, 102);">Thread</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">sleep</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(0, 102, 102);">100</span><span style="color:rgb(102, 102, 0);">);</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 136);">catch</span><span style="color:rgb(102, 102, 0);">(</span><span style="color:rgb(102, 0, 102);">InterruptedException</span><span style="color:rgb(0, 0, 0);"> e</span><span style="color:rgb(102, 102, 0);">){</span><span style="color:rgb(0, 0, 0);">   
            e</span><span style="color:rgb(102, 102, 0);">.</span><span style="color:rgb(0, 0, 0);">printStackTrace</span><span style="color:rgb(102, 102, 0);">();</span><span style="color:rgb(0, 0, 0);">   
        </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
    </span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">   
</span><span style="color:rgb(102, 102, 0);">}</span><span style="color:rgb(0, 0, 0);">  </span></code></pre>
<div style="margin:0px;padding:0px;"> <a name="child_7_1" style="outline:0px;"></a></div> <strong style="font-style:inherit;font-weight:700;margin-top:2px;display:block;font-size:22px;margin:22px 0 10px;">参考</strong>
<p style="padding:0px;margin:0.8em 0px;text-indent:0px;line-height:1.75;color:rgb(28, 31, 33);overflow-x:auto;margin-bottom:14px;margin-top:0px;"><a href="http://gold.xitu.io/entry/57cbaf667db2a2007895256e" rel="nofollow" style="outline:0px;text-decoration:none;color:rgb(0, 136, 204);" target="_blank">http://gold.xitu.io/entry/57cbaf667db2a2007895256e</a><br/>
<a href="http://blog.csdn.net/ns_code/article/details/17465497" rel="nofollow" style="outline:0px;text-decoration:none;color:rgb(0, 136, 204);" target="_blank">http://blog.csdn.net/ns_code/article/details/17465497</a><br/>
<a href="http://www.infoq.com/cn/articles/executor-framework-thread-pool-task-execution-part-01" rel="nofollow" style="outline:0px;text-decoration:none;color:rgb(0, 136, 204);" target="_blank">http://www.infoq.com/cn/articles/executor-framework-thread-pool-task-execution-part-01</a><br/>
<a href="http://www.cnblogs.com/limingluzhu/p/4858776.html" rel="nofollow" style="outline:0px;text-decoration:none;color:rgb(0, 136, 204);" target="_blank">http://www.cnblogs.com/limingluzhu/p/4858776.html</a></p></div>
					<div style="margin:0px;padding:0px;">
						<div style="margin:0px;padding:0px;"></div>
						
					</div>
				</div>
				
												<div style="margin:0px;padding:0px;margin-top:24px;width:100%;text-align:center;">
					<div style="margin:0px;padding:0px;display:inline-block;">
																		<a href="http://www.imooc.com/article/tag/3" style="margin-right:12px;text-decoration:none;float:left;outline:0px;display:inline-block;color:rgb(84, 92, 99);padding:4px 12px;background:rgba(84, 92, 99, 0.1);border-radius:12px;font-size:12px;line-height:16px;" target="_blank">JAVA</a>
																		<a href="http://www.imooc.com/article/tag/12" style="margin-right:12px;text-decoration:none;float:left;outline:0px;display:inline-block;color:rgb(84, 92, 99);padding:4px 12px;background:rgba(84, 92, 99, 0.1);border-radius:12px;font-size:12px;line-height:16px;" target="_blank">Android</a>
																		<a href="http://www.imooc.com/article/tag/39" style="margin-right:12px;text-decoration:none;float:left;outline:0px;display:inline-block;color:rgb(84, 92, 99);padding:4px 12px;background:rgba(84, 92, 99, 0.1);border-radius:12px;font-size:12px;line-height:16px;" target="_blank">数据结构</a>
											<span style="display:block;height:0px;clear:both;visibility:hidden;"> </span></div>
											<div style="margin:0px;padding:0px;">
							<p style="margin:0px;padding:0px;margin-top:8px;text-align:center;font-size:12px;color:rgb(145, 153, 161);line-height:18px;display:inline-block;">本文原创发布于慕课网 ，转载请注明出处，谢谢合作</p>    
						</div>                    
					                    				</div>
								 
				<div style="padding:0px;margin:48px 0px 0px;position:relative;width:100%;text-align:center;">
										
										<div style="margin:0px;padding:0px;margin-top:4px;font-size:14px;color:rgb(84, 92, 99);line-height:22px;cursor:pointer;"><em style="font-style:normal;font-weight:400;">24</em>人点赞</div>
					
				</div>
				
			</div>

			
		</div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 