<html>
<head>
  <title>Java获取URL对应的资源 - 熔 岩 - 51CTO技术博客</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7004"/>
<h1>Java获取URL对应的资源 - 熔 岩 - 51CTO技术博客</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2015/9/18 17:36</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://lavasoft.blog.51cto.com/62575/120445/"><i>http://lavasoft.blog.51cto.com/62575/120445/</i></a></td></tr>
</table>
</div>
<br/>

<div><span><br/><div style="font-size: 16px"><div><div style="font-family:宋体, 'Arial Narrow', arial, serif;font-size:12px;color:rgb(85, 85, 85);background:rgb(228, 228, 228);"><div><div style="overflow:hidden;"><div style="background:rgb(255, 255, 255);margin-top:5px;"><div><div style="margin:0 0 10px;"><div style="line-height:2;font-size:14px;overflow:hidden;word-wrap:break-word;word-break:normal;"><div>注意，<a href="http://lavasoft.blog.51cto.com/mk:@MSITStore:Q:\DEV_SOFT\07_JDK\jdk150.ZH_cn.chm::/jdk150/api/java/net/URI.html" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;" title="java.net"><code style="padding:0px;margin:0px;"><font face="新宋体" style="padding:0px;margin:0px;">URI</font></code></a> 类在某些特定情况下对其组成字段执行转义。建议使用 <a href="http://lavasoft.blog.51cto.com/mk:@MSITStore:Q:\DEV_SOFT\07_JDK\jdk150.ZH_cn.chm::/jdk150/api/java/net/URI.html" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;" title="java.net"><code style="padding:0px;margin:0px;"><font face="新宋体" style="padding:0px;margin:0px;">URI</font></code></a> 管理 URL 的编码和解码，并使用 <a href="http://lavasoft.blog.51cto.com/mk:@MSITStore:Q:\DEV_SOFT\07_JDK\jdk150.ZH_cn.chm::/jdk150/api/java/net/URL.html#toURI()" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;"><code style="padding:0px;margin:0px;"><font face="新宋体" style="padding:0px;margin:0px;">toURI()</font></code></a> 和 <a href="http://lavasoft.blog.51cto.com/mk:@MSITStore:Q:\DEV_SOFT\07_JDK\jdk150.ZH_cn.chm::/jdk150/api/java/net/URI.html#toURL()" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;"><code style="padding:0px;margin:0px;"><font face="新宋体" style="padding:0px;margin:0px;">URI.toURL()</font></code></a> 实现这两个类之间的转换。 
<div style="padding:0px;margin:0px;">  
<div style="padding:0px;margin:0px;">也可以使用 <a href="http://lavasoft.blog.51cto.com/mk:@MSITStore:Q:\DEV_SOFT\07_JDK\jdk150.ZH_cn.chm::/jdk150/api/java/net/URLEncoder.html" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;" title="java.net"><code style="padding:0px;margin:0px;"><font face="新宋体" style="padding:0px;margin:0px;">URLEncoder</font></code></a> 和 <a href="http://lavasoft.blog.51cto.com/mk:@MSITStore:Q:\DEV_SOFT\07_JDK\jdk150.ZH_cn.chm::/jdk150/api/java/net/URLDecoder.html" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;" title="java.net"><code style="padding:0px;margin:0px;"><font face="新宋体" style="padding:0px;margin:0px;">URLDecoder</font></code></a> 类，但是只适用于 HTML 形式的编码，它与 RFC2396 中定义的编码机制不同。</div>
<div style="padding:0px;margin:0px;">（以上介绍来自Java API doc）</div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;"><strong style="padding:0px;margin:0px;">二、URL对象的构建</strong></div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;">方式很多，可以看看API文档。</div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;"><strong style="padding:0px;margin:0px;">三、获取URL指定的资源</strong></div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;">下面给个例子，说明如何获取到指定的资源。</div>
<div style="padding:0px;margin:0px;">
<div style="border-left:#cccccc 1px solid;padding:0px;border-right:#cccccc 1px solid;padding-right:4px;border-top:#cccccc 1px solid;padding-left:4px;font-size:10pt;padding-bottom:4px;margin:0px;width:98%;color:#000000;word-break:break-all;line-height:16px;padding-top:4px;border-bottom:#cccccc 1px solid;font-family:verdana,宋体;background-color:#eeeeee;"><font color="#0000ff" style="padding:0px;margin:0px;">import</font> java.io.*; <br style="padding:0px;margin:0px;"/><font color="#0000ff" style="padding:0px;margin:0px;">import</font> java.net.URL; <br style="padding:0px;margin:0px;"/><font color="#0000ff" style="padding:0px;margin:0px;">import</font> java.net.URLConnection; <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/><font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">class</font> TestURL { <br style="padding:0px;margin:0px;"/>        <font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">static</font> <font color="#0000ff" style="padding:0px;margin:0px;">void</font> main(String[] args) <font color="#0000ff" style="padding:0px;margin:0px;">throws</font> IOException { <br style="padding:0px;margin:0px;"/>                test4(); <br style="padding:0px;margin:0px;"/>                test3(); <br style="padding:0px;margin:0px;"/>                test2(); <br style="padding:0px;margin:0px;"/>                test(); <br style="padding:0px;margin:0px;"/>        } <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>        <font color="#008000" style="padding:0px;margin:0px;">/** <br style="padding:0px;margin:0px;"/>         * 获取URL指定的资源。 <br style="padding:0px;margin:0px;"/>         * <br style="padding:0px;margin:0px;"/>         * @throws IOException <br style="padding:0px;margin:0px;"/>         */</font> <br style="padding:0px;margin:0px;"/>        <font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">static</font> <font color="#0000ff" style="padding:0px;margin:0px;">void</font> test4() <font color="#0000ff" style="padding:0px;margin:0px;">throws</font> IOException { <br style="padding:0px;margin:0px;"/>                URL url = <font color="#0000ff" style="padding:0px;margin:0px;">new</font> URL(<font color="#800000" style="padding:0px;margin:0px;">&quot;http:<font color="#008000" style="padding:0px;margin:0px;">//lavasoft.blog.51cto.com/attachment/200811/200811271227767778082.jpg&quot;); </font><br style="padding:0px;margin:0px;"/>                <font color="#008000" style="padding:0px;margin:0px;">//获得此 URL 的内容。 </font><br style="padding:0px;margin:0px;"/>                Object obj = url.getContent(); <br style="padding:0px;margin:0px;"/>                System.out.println(obj.getClass().getName()); <br style="padding:0px;margin:0px;"/>        } <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>        <font color="#008000" style="padding:0px;margin:0px;">/** <br style="padding:0px;margin:0px;"/>         * 获取URL指定的资源 <br style="padding:0px;margin:0px;"/>         * <br style="padding:0px;margin:0px;"/>         * @throws IOException <br style="padding:0px;margin:0px;"/>         */</font> <br style="padding:0px;margin:0px;"/>        <font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">static</font> <font color="#0000ff" style="padding:0px;margin:0px;">void</font> test3() <font color="#0000ff" style="padding:0px;margin:0px;">throws</font> IOException { <br style="padding:0px;margin:0px;"/>                URL url = <font color="#0000ff" style="padding:0px;margin:0px;">new</font> URL(<font color="#800000" style="padding:0px;margin:0px;">&quot;http:<font color="#008000" style="padding:0px;margin:0px;">//www.hrtsea.com/down/soft/45.htm&quot;); </font><br style="padding:0px;margin:0px;"/>                <font color="#008000" style="padding:0px;margin:0px;">//返回一个 URLConnection 对象，它表示到 URL 所引用的远程对象的连接。 </font><br style="padding:0px;margin:0px;"/>                URLConnection uc = url.openConnection(); <br style="padding:0px;margin:0px;"/>                <font color="#008000" style="padding:0px;margin:0px;">//打开的连接读取的输入流。 </font><br style="padding:0px;margin:0px;"/>                InputStream in = uc.getInputStream(); <br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">int</font> c; <br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">while</font> ((c = in.read()) != -1) <br style="padding:0px;margin:0px;"/>                        System.out.print(c); <br style="padding:0px;margin:0px;"/>                in.close(); <br style="padding:0px;margin:0px;"/>        } <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>        <font color="#008000" style="padding:0px;margin:0px;">/** <br style="padding:0px;margin:0px;"/>         * 读取URL指定的网页内容 <br style="padding:0px;margin:0px;"/>         * <br style="padding:0px;margin:0px;"/>         * @throws IOException <br style="padding:0px;margin:0px;"/>         */</font> <br style="padding:0px;margin:0px;"/>        <font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">static</font> <font color="#0000ff" style="padding:0px;margin:0px;">void</font> test2() <font color="#0000ff" style="padding:0px;margin:0px;">throws</font> IOException { <br style="padding:0px;margin:0px;"/>                URL url = <font color="#0000ff" style="padding:0px;margin:0px;">new</font> URL(<font color="#800000" style="padding:0px;margin:0px;">&quot;http:<font color="#008000" style="padding:0px;margin:0px;">//www.hrtsea.com/down/soft/45.htm&quot;); </font><br style="padding:0px;margin:0px;"/>                <font color="#008000" style="padding:0px;margin:0px;">//打开到此 URL 的连接并返回一个用于从该连接读入的 InputStream。 </font><br style="padding:0px;margin:0px;"/>                Reader reader = <font color="#0000ff" style="padding:0px;margin:0px;">new</font> InputStreamReader(<font color="#0000ff" style="padding:0px;margin:0px;">new</font> BufferedInputStream(url.openStream())); <br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">int</font> c; <br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">while</font> ((c = reader.read()) != -1) { <br style="padding:0px;margin:0px;"/>                        System.out.print((<font color="#0000ff" style="padding:0px;margin:0px;">char</font>) c); <br style="padding:0px;margin:0px;"/>                } <br style="padding:0px;margin:0px;"/>                reader.close(); <br style="padding:0px;margin:0px;"/>        } <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>        <font color="#008000" style="padding:0px;margin:0px;">/** <br style="padding:0px;margin:0px;"/>         * 获取URL的输入流，并输出 <br style="padding:0px;margin:0px;"/>         * <br style="padding:0px;margin:0px;"/>         * @throws IOException <br style="padding:0px;margin:0px;"/>         */</font> <br style="padding:0px;margin:0px;"/>        <font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">static</font> <font color="#0000ff" style="padding:0px;margin:0px;">void</font> test() <font color="#0000ff" style="padding:0px;margin:0px;">throws</font> IOException { <br style="padding:0px;margin:0px;"/>                URL url = <font color="#0000ff" style="padding:0px;margin:0px;">new</font> URL(<font color="#800000" style="padding:0px;margin:0px;">&quot;http:<font color="#008000" style="padding:0px;margin:0px;">//lavasoft.blog.51cto.com/62575/120430&quot;); </font><br style="padding:0px;margin:0px;"/>                <font color="#008000" style="padding:0px;margin:0px;">//打开到此 URL 的连接并返回一个用于从该连接读入的 InputStream。 </font><br style="padding:0px;margin:0px;"/>                InputStream in = url.openStream(); <br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">int</font> c; <br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">while</font> ((c = in.read()) != -1) <br style="padding:0px;margin:0px;"/>                        System.out.print(c); <br style="padding:0px;margin:0px;"/>                in.close(); <br style="padding:0px;margin:0px;"/>        } <br style="padding:0px;margin:0px;"/>}</font></font></font></font></div></div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;"><strong style="padding:0px;margin:0px;">四、Java所支持的URL类型</strong></div>
<div style="padding:0px;margin:0px;"><strong style="padding:0px;margin:0px;"></strong> </div>
<div style="padding:0px;margin:0px;">类型很多，通过下面这个工具可以测试，这个类来自<a href="http://www.java2s.com/Tutorial/Java/0320__Network/ProtocolTester.htm" style="padding:0px;margin:0px;color:rgb(67, 67, 67);text-decoration:none;">[url]http://www.java2s.com/Tutorial/Java/0320__Network/ProtocolTester.htm[/url]</a>。</div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;">
<div style="padding:0px;margin:0px;">
<div style="border-left:#cccccc 1px solid;padding:0px;border-right:#cccccc 1px solid;padding-right:4px;border-top:#cccccc 1px solid;padding-left:4px;font-size:10pt;padding-bottom:4px;margin:0px;width:98%;color:#000000;word-break:break-all;line-height:16px;padding-top:4px;border-bottom:#cccccc 1px solid;font-family:verdana,宋体;background-color:#eeeeee;"><font color="#0000ff" style="padding:0px;margin:0px;">import</font> java.net.URL; <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/><font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">class</font> MainClass { <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>        <font color="#0000ff" style="padding:0px;margin:0px;">public</font> <font color="#0000ff" style="padding:0px;margin:0px;">static</font> <font color="#0000ff" style="padding:0px;margin:0px;">void</font> main(String[] args) { <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>                String host = <font color="#800000" style="padding:0px;margin:0px;">&quot;www.java2s.com&quot;</font>; <br style="padding:0px;margin:0px;"/>                String file = <font color="#800000" style="padding:0px;margin:0px;">&quot;/index.html&quot;</font>; <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>                String[] schemes = {<font color="#800000" style="padding:0px;margin:0px;">&quot;http&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;https&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;ftp&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;mailto&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;telnet&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;file&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;ldap&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;gopher&quot;</font>, <br style="padding:0px;margin:0px;"/>                                <font color="#800000" style="padding:0px;margin:0px;">&quot;jdbc&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;rmi&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;jndi&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;jar&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;doc&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;netdoc&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;nfs&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;verbatim&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;finger&quot;</font>, <font color="#800000" style="padding:0px;margin:0px;">&quot;daytime&quot;</font>, <br style="padding:0px;margin:0px;"/>                                <font color="#800000" style="padding:0px;margin:0px;">&quot;systemresource&quot;</font>}; <br style="padding:0px;margin:0px;"/><br style="padding:0px;margin:0px;"/>                <font color="#0000ff" style="padding:0px;margin:0px;">for</font> (<font color="#0000ff" style="padding:0px;margin:0px;">int</font> i = 0; i &lt; schemes.length; i++) { <br style="padding:0px;margin:0px;"/>                        <font color="#0000ff" style="padding:0px;margin:0px;">try</font> { <br style="padding:0px;margin:0px;"/>                                URL u = <font color="#0000ff" style="padding:0px;margin:0px;">new</font> URL(schemes[i], host, file); <br style="padding:0px;margin:0px;"/>                                System.out.println(schemes[i] + <font color="#800000" style="padding:0px;margin:0px;">&quot; is supported\r\n&quot;</font>); <br style="padding:0px;margin:0px;"/>                        } <font color="#0000ff" style="padding:0px;margin:0px;">catch</font> (Exception ex) { <br style="padding:0px;margin:0px;"/>                                System.out.println(schemes[i] + <font color="#800000" style="padding:0px;margin:0px;">&quot; is not supported\r\n&quot;</font>); <br style="padding:0px;margin:0px;"/>                        } <br style="padding:0px;margin:0px;"/>                } <br style="padding:0px;margin:0px;"/>        } <br style="padding:0px;margin:0px;"/>}</div></div></div>
<div style="padding:0px;margin:0px;"> </div>
<div style="padding:0px;margin:0px;">另外，还可以通过协议处理器自定义协议。</div>
<div style="padding:0px;margin:0px;"> </div></div></div></div></div></div></div></div></div></div></div></div><br/></span>
</div></body></html> 