<html>
<head>
  <title>消费者驱动的微服务契约测试套件：Spring Cloud Contract</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6934"/>
<h1>消费者驱动的微服务契约测试套件：Spring Cloud Contract</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/4/23 13:56</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://mp.weixin.qq.com/s?src=11&timestamp=1524462946&ver=833&signature=x2M0nfz4QPNgLMPCrpu0csd49RE2JQsLjCYFlG4GRTjV9jLh9XGg0JtjodVdhRSlLFk4RkJVxZiBC67298yNi7OTkRF1Pn9O3VVS8kgVKKF8Kj3jAYrEUMkmvz2GY4OK&new=1"><i>https://mp.weixin.qq.com/s?src=11&amp;timestamp=1524462946&amp;ver=833&amp;signature=x2M0nfz4QPNgLMPCrpu0csd49RE2JQsLjCYFlG4GRTjV9jLh9XGg0JtjodVdhRSlLFk4RkJVxZiBC67298yNi7OTkRF1Pn9O3VVS8kgVKKF8Kj3jAYrEUMkmvz2GY4OK&amp;new=1</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%; position: relative;"><div style="text-size-adjust:100%;line-height:1.6;"><div style="font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;line-height:inherit;background-color:rgb(255, 255, 255);"><div><div style="background-color:rgb(255, 255, 255);font-size:16px;word-wrap:break-word;"><div style="background-color:rgb(255, 255, 255);"><div>
                
                <h2 style="margin:0px;padding:0px;font-weight:400;font-size:24px;margin-bottom:14px;line-height:1.4;padding-bottom:10px;border-bottom:1px solid rgb(231, 231, 235);">
                    消费者驱动的微服务契约测试套件：Spring Cloud Contract                                    </h2>
                <div style="margin:0px;padding:0px;margin-bottom:18px;line-height:20px;font-size:0px;position:relative;z-index:1;">
                                                            <em style="margin:0px;padding:0px;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;color:rgb(140, 140, 140);max-width:none;font-style:normal;">2017-11-21</em>

                                        <em style="margin:0px;padding:0px;display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;color:rgb(140, 140, 140);max-width:none;font-style:normal;">贺卓凡</em>
                                        <a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1524462946&amp;ver=833&amp;signature=x2M0nfz4QPNgLMPCrpu0csd49RE2JQsLjCYFlG4GRTjV9jLh9XGg0JtjodVdhRSlLFk4RkJVxZiBC67298yNi7OTkRF1Pn9O3VVS8kgVKKF8Kj3jAYrEUMkmvz2GY4OK&amp;new=1##" style="margin:0px;padding:0px;color:rgb(96, 127, 166);text-decoration:none;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:16px;max-width:none;display:inline-block;">程序猿DD</a>
                    


                    
                </div>
                                
                
                
                
                                                
                                                                
                
                <div style="margin:0px;padding:0px;overflow:hidden;color:rgb(62, 62, 62);min-height:350px;position:relative;">
                    

                    

                    
                    
                    <p style="min-height:1em;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;padding:0px;margin-bottom:15px;font-size:16px;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">在微服务架构下，你的服务可能由不同的团队提供和维护，在这种情况下，接口的开发和维护可能会带来一些问题，比如服务端调整架构或接口调整而对消费者不透明，导致接口调用失败。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">为解决这些问题，Ian Robinson提出了一个以服务消费者定义契约为驱动的开发模式：“Consumer-Driver Contracts(CDC)”，就是：消费者驱动契约。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">通常我们开发中主要由服务提供方约定接口，虽然提供方架构调整或改变接口之前通常会通知消费者，但可能还存在上述风险，如果上线出现问题就GG了，而CDC则是以消费者提出接口契约，交由服务提供方实现，并以测试用例对契约进行产生约束，所以服务提供方在满足测试用例的情况下可以自行更改接口或架构实现而不影响消费者。</p><blockquote style="margin-bottom:1.2em;margin:0px;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing:border-box;background:rgb(242, 247, 251);padding-left:10px;border-left:3px solid rgb(219, 219, 219);margin-top:1em;padding:15px 15px 15px 1rem;color:rgb(129, 145, 152);border-left-width:6px;border-left-color:rgb(220, 230, 240);font-size:14px;line-height:22px;word-wrap:break-word;max-width:100%;white-space:normal;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;clear:both;min-height:1em;word-wrap:break-word;white-space:pre-line;line-height:30px;color:rgb(74, 74, 74);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">消费者驱动的契约测试</strong>（Consumer-Driven Contracts，简称CDC），是指从消费者业务实现的角度出发，驱动出契约，再基于契约，对提供者验证的一种测试方式。</p></blockquote><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">如果你目前使用SpringCloud作为微服务基础环境，那么集成SpringCloud Contracts也是比较好的选择。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">原本你要测试的话必须启动相应的服务。像下面这样：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640" type="image/webp" data-filename="640" height="403" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="631"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">使用了Spring Cloud Contract之后，你就不需要启动这么多的服务了。像下面这样：</p><p style="margin-top:15px;margin:0px;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing:border-box;color:rgb(74, 74, 74);line-height:30px;white-space:pre-line;padding:0px;margin-bottom:15px;font-size:16px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;text-align:center;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [1]" type="image/webp" data-filename="640" height="392" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="422"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">也许你发现了，出现了一个新的生物，叫<strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">STUB</strong>。这是个什么东西呢？稍后会详细说，这里你先就认为它可以模拟出provider，然后消费者直接调用就可以模拟服务调用了。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">是不是不错。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">好，接下来我们透过代码来详细的讲解下这个套件吧。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">我们接下来模拟一个流程。现在有两个团队，分别负责不同的服务。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">这里就假设有provider团队和consumer团队。那么当provider团队的服务还没有开发好，或者provider的团队的服务没有在启动的时候，我们可不可以进行开发呢？</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">答案是可以的。</p><h3 style="word-wrap:break-word;font-weight:400;margin:0px;padding:0px;line-height:1.35;box-sizing:border-box;font-size:20px;margin-top:1.5rem;margin-bottom:1rem;color:rgb(21, 153, 87);max-width:100%;white-space:normal;">契约（Contract）</h3><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">这里引入一个重要的概念，就是<strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">契约，Contract</strong>。这是什么呢？很简单，就是provider和consumer事先要约定好一个接口的规范，之后双方提供服务接口和消费服务接口都要按照这个契约来。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">先来看看代码的基本结构：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [2]" type="image/webp" data-filename="640" height="242" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">分别有三个模块：common、consumer、provider。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">接下来一一介绍：</p><h3 style="word-wrap:break-word;font-weight:400;margin:0px;padding:0px;line-height:1.35;box-sizing:border-box;font-size:20px;margin-top:1.5rem;margin-bottom:1rem;color:rgb(21, 153, 87);max-width:100%;white-space:normal;">Common模块</h3><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [3]" type="image/webp" data-filename="640" height="261" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">然后分别有两个类，一个是分页Page实体，另外一个是Customer实体类。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">1、Customer：</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [4]" type="image/webp" data-filename="640" height="176" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">2、Page：</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [5]" type="image/webp" data-filename="640" height="79" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">待会我们会在provider和consumer中都用到。</p><h3 style="word-wrap:break-word;font-weight:400;margin:0px;padding:0px;line-height:1.35;box-sizing:border-box;font-size:20px;margin-top:1.5rem;margin-bottom:1rem;color:rgb(21, 153, 87);max-width:100%;white-space:normal;">Provider程序</h3><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">先来看看pom依赖：<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">*</span>*</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">1、引入spring-cloud-starter-contract-verifier</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [6]" type="image/webp" data-filename="640" height="106" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">注：引入verfier是为了验证是否符合契约</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">2、引入spring-cloud-contract-maven-plugin:</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [7]" type="image/webp" data-filename="640" height="121" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">baseClassForTests这个就是你要符合契约的测试代码。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">这里主要介绍和contract紧相关的依赖。其他依赖你可以到具体的源码中查看（点击“<strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">阅读原文</strong>”）。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">3、契约</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">先来看看契约的定义是什么样。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [8]" type="image/webp" data-filename="640" height="529" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">我们在provider的test下的resources下新建了一个contracts目录，这个就是放置契约的地方，里边有个shouldReturnAllCustomers的groovy文件就是我们的契约，来看看吧。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">shouldReturnAllCustomers.grovvy:</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [9]" type="image/webp" data-filename="640" height="413" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">我们看到有三个部分：description、request、response。通过request定义了请求时的url和method，然后通过response约定返回时的headers和body信息。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">契约采用groovy的DSL描述，所以一目了然</strong>，就是通过url：/ api / customers来取得一个json格式的客户列表，返回两个客户信息。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">契约约定好了。接下来我们就来实现这个契约吧：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">CustomerRepository:</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [10]" type="image/webp" data-filename="640" height="65" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">CustomerRestController:</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [11]" type="image/webp" data-filename="640" height="387" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">接下来我们就来生成stub jar文件。这个jar文件的目的就是可以被消费者拿来当做一个模拟服务来启动然后在本地跑测试用例，而不需要真正的服务提供者启动。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">4、生成stub jar：</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">执行install把stubjar包安装到本地（在正式开发的时候可以deploy仓库）</p><pre style="margin-bottom:0px;margin:0px;font-size:10px;box-sizing:border-box;color:rgb(80, 97, 109);margin-top:0px;padding:8px 0px 6px;background-color:rgb(27, 25, 24);border-radius:0px;overflow-y:auto;word-wrap:break-word;max-width:100%;line-height:12px;"><ol style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(74, 74, 74);display:block;line-height:22px;font-size:14px !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;line-height:22px;display:block;word-break:inherit !important;"><code style="overflow:initial;margin:0px;font-family:inherit !important;box-sizing:border-box;word-wrap:normal;margin-left:-20px;display:flex;padding:0px;line-height:12px;border-width:0px;border-style:initial;border-color:initial;font-size:10px;max-width:100%;white-space:pre !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">clean install </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(64, 126, 231);line-height:20px;font-size:13px !important;white-space:inherit !important;">Dmaven</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">test</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">skip</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">=</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">true</span></code></span></span></p></li></ol></pre><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">发现已经安装好了：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [12]" type="image/webp" data-filename="640" height="231" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">这时候我们可以通过contract插件简单的看下效果：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [13]" type="image/webp" data-filename="640" height="454" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">run之后，我们会看到通过启动stub 的jar文件，我们可以模拟一个真实的服务：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [14]" type="image/webp" data-filename="640" height="178" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">然后我们访问：http://localhost:8080/api/customers</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [15]" type="image/webp" data-filename="640" height="128" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">可以发现，我们通过契约然后生成了stub jar，然后启动stub jar居然模拟了契约约定好的服务。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">接下来我们去编写一个consumer程序吧。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">另外启动stub也可以通过以下命令来启动：</p><pre style="margin-bottom:0px;margin:0px;font-size:10px;box-sizing:border-box;color:rgb(80, 97, 109);margin-top:0px;padding:8px 0px 6px;background-color:rgb(27, 25, 24);border-radius:0px;overflow-y:auto;word-wrap:break-word;max-width:100%;line-height:12px;"><ol style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(74, 74, 74);display:block;line-height:22px;font-size:14px !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;line-height:22px;display:block;word-break:inherit !important;"><code style="overflow:initial;margin:0px;font-family:inherit !important;box-sizing:border-box;word-wrap:normal;margin-left:-20px;display:flex;padding:0px;line-height:12px;border-width:0px;border-style:initial;border-color:initial;font-size:10px;max-width:100%;white-space:pre !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">java </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">jar spring</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">cloud</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">contract</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">provider</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(223, 83, 32);line-height:20px;font-size:13px !important;white-space:inherit !important;">0.0</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(223, 83, 32);line-height:20px;font-size:13px !important;white-space:inherit !important;">1</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">SNAPSHOT</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">stubs</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">jar </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">--</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">stubrunner</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">ids</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">=</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">com</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">importsource</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">springcloud</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">:</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">spring</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">cloud</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">contract</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">-</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">provider</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">:+:</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(223, 83, 32);line-height:20px;font-size:13px !important;white-space:inherit !important;">8080</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;"> </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">--</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">stubrunner</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">.</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">workOffline</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">=</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">true</span></code></span></span></p></li></ol></pre><h3 style="word-wrap:break-word;font-weight:400;margin:0px;padding:0px;line-height:1.35;box-sizing:border-box;font-size:20px;margin-top:1.5rem;margin-bottom:1rem;color:rgb(21, 153, 87);max-width:100%;white-space:normal;">Consumer程序</h3><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">1、spring-cloud-starter-contract-stub-runner</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">依赖spring-cloud-starter-contract-stub-runner:</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [16]" type="image/webp" data-filename="640" height="105" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">通过这个依赖，我们一会就可以启动stub来模拟启动一个契约好的服务了。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">接下来，作为消费者端，来写一个测试用例，来模拟测试服务吧：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [17]" type="image/webp" data-filename="640" height="285" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">2、SpringCloudContractConsumerApplicationTests：</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [18]" type="image/webp" data-filename="640" height="454" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">这里使用到了以下的注解：</p><pre style="margin-bottom:0px;margin:0px;font-size:10px;box-sizing:border-box;color:rgb(80, 97, 109);margin-top:0px;padding:8px 0px 6px;background-color:rgb(27, 25, 24);border-radius:0px;overflow-y:auto;word-wrap:break-word;max-width:100%;line-height:12px;"><ol style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;list-style-type:none;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;clear:both;min-height:1em;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(74, 74, 74);display:block;line-height:22px;font-size:14px !important;word-break:inherit !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;line-height:22px;display:block;word-break:inherit !important;"><code style="overflow:initial;margin:0px;font-family:inherit !important;box-sizing:border-box;word-wrap:normal;margin-left:-20px;display:flex;padding:0px;line-height:12px;border-width:0px;border-style:initial;border-color:initial;font-size:10px;max-width:100%;white-space:pre !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(223, 83, 32);line-height:20px;font-size:13px !important;white-space:inherit !important;">@AutoConfigureStubRunner</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">(</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">ids </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">=</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;"> </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">{</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(123, 151, 38);line-height:20px;font-size:13px !important;white-space:inherit !important;">&quot;com.importsource.springcloud:spring-cloud-contract-provider:+:8080&quot;</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">},</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;"> workOffline </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">=</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;"> </span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(102, 102, 234);line-height:20px;font-size:13px !important;white-space:inherit !important;">true</span><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(241, 239, 238);line-height:20px;font-size:13px !important;white-space:inherit !important;">)</span></code></span></span></p></li></ol></pre><h3 style="word-wrap:break-word;font-weight:400;margin:0px;padding:0px;line-height:1.35;box-sizing:border-box;font-size:20px;margin-top:1.5rem;margin-bottom:1rem;color:rgb(21, 153, 87);max-width:100%;white-space:normal;">@AutoConfigureStubRunner</h3><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">通过@AutoConfigureStubRunner来自动配置注入一个StubRunner。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">1、ids：</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">然后通过ids去定位到刚刚通过clean install好的那个stub jar 包，然后在8080端口去启动这个stub jar。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">ids的格式是长这样：</strong></p><blockquote style="margin-bottom:1.2em;margin:0px;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing:border-box;background:rgb(242, 247, 251);padding-left:10px;border-left:3px solid rgb(219, 219, 219);margin-top:1em;padding:15px 15px 15px 1rem;color:rgb(129, 145, 152);border-left-width:6px;border-left-color:rgb(220, 230, 240);font-size:14px;line-height:22px;word-wrap:break-word;max-width:100%;white-space:normal;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;clear:both;min-height:1em;word-wrap:break-word;white-space:pre-line;line-height:30px;color:rgb(74, 74, 74);">groupId:artifactId:version:classifier:port</p></blockquote><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 0, 0);">2、workOffline = true</strong></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">是指使用本地maven库，不要使用线上的版本，所以你只要把Consumer在你本机上安装过就可以了。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">然后运行测试：</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/640 [19]" type="image/webp" data-filename="640" height="216" style="border-width:2px;margin:0px;width:auto !important;box-sizing:border-box;border-radius:6px;height:auto !important;padding:0px;border-style:solid;border-color:rgb(238, 238, 238);word-wrap:break-word;max-width:100%;visibility:visible !important;" width="666"/></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">发现测试通过了。</p><h3 style="word-wrap:break-word;font-weight:400;margin:0px;padding:0px;line-height:1.35;box-sizing:border-box;font-size:20px;margin-top:1.5rem;margin-bottom:1rem;color:rgb(21, 153, 87);max-width:100%;white-space:normal;">总结</h3><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">你应该发现了，我们根本没有真正的启动服务提供者，而是在本地启动了stub就模拟测试了一次服务调用。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">本文首先向你介绍了消费者驱动测试的基本背景，然后我们编写了一个服务的契约，并介绍如何定义Spring Cloud Contract的契约，然后我们借助contract maven插件生成了stub jar包，然后install到本地。接着我们编写了消费者端的测试用例，通过stub runner来模拟服务提供者完成了一次消费者调用服务的测试。</p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;">契约测试的工具除了Spring Cloud Contract外，还有其他的一些工具可供你选择，比如：Janus，Pact，Pacto等。</p><p style="margin-top:15px;margin:0px;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing:border-box;color:rgb(74, 74, 74);line-height:30px;white-space:pre-line;padding:0px;margin-bottom:15px;font-size:16px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;text-align:center;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">示例代码请点击“<span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">阅读</strong><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">原文</strong></span>”查看</span></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(21, 153, 87);">推荐阅读</span></p><p style="margin-top:15px;margin:0px;color:rgb(74, 74, 74);box-sizing:border-box;line-height:30px;white-space:pre-line;font-size:16px;padding:0px;margin-bottom:15px;min-height:1em;clear:both;word-wrap:break-word;max-width:100%;font-family:Avenir, -apple-system-font, 微软雅黑, sans-serif;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"></span></p><ul style="margin:0px;padding:0px;padding-left:2.2em;max-width:100%;box-sizing:border-box;word-wrap:break-word;list-style-type:circle;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247484451&amp;idx=1&amp;sn=eff6238016076e52d505c37bc12502d3&amp;chksm=9bd0a9bbaca720ad0c18945d8c8bca89275822d278384fbe128a17ce4ce08cfb055afdd36edf&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(0, 128, 255);text-decoration:underline;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;outline:0px;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 128, 255);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">白话：服务降级与熔断的区别</strong></span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;"/></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247484468&amp;idx=1&amp;sn=8d03cf501ffc515f0f693832936accf1&amp;chksm=9bd0a9acaca720ba993244607c681e4c411e9cb7ba005d1cda2a5a479b34d2c90d9f20b218bf&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(0, 128, 255);text-decoration:underline;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;outline:0px;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 128, 255);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">JPA的多表复杂查询：详细篇</strong></span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;"/></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247484420&amp;idx=1&amp;sn=76bc1bc0d4a95ba978cbd94131719de8&amp;chksm=9bd0a99caca7208ad15265cca93964b7fbb804380724cdd637676eb959418b8f1f84582777b4&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(0, 128, 255);text-decoration:underline;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;outline:0px;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 128, 255);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">博客搭建攻略（三）：创造收益</strong></span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;"/></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247484101&amp;idx=2&amp;sn=5b5097d01eda7bbcd3949bd5a49bd412&amp;chksm=9bd0af5daca7264b067cbff508aca998ba6b731f9433211140c1d210224c789ba87b9d7948ed&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(0, 128, 255);text-decoration:underline;max-width:100%;box-sizing:border-box;word-wrap:break-word;" target="_blank"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;color:rgb(0, 128, 255);"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;">近期关于Spring Boot/Cloud的文章汇总</strong></span></a><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;"/></p></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><p style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;outline:0px;color:rgb(0, 128, 255);text-decoration:underline;"><strong style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;word-wrap:break-word;"><a href="http://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247484375&amp;idx=1&amp;sn=ac19066f568d57e27ac319a5e5ddbed4&amp;chksm=9bd0ae4faca72759f9c4af93cb083f68aceb4c9fee7388f42a41acd9e8d93e5a60a1e7c91f4f&amp;scene=21#wechat_redirect" style="margin:0px;padding:0px;color:rgb(0, 128, 255);text-decoration:underline;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;outline:0px;" target="_blank">海外IT工程师工作福利揭秘</a></strong></span></p></li></ul>
                </div>
                
                
                
                                <a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1524462946&amp;ver=833&amp;signature=x2M0nfz4QPNgLMPCrpu0csd49RE2JQsLjCYFlG4GRTjV9jLh9XGg0JtjodVdhRSlLFk4RkJVxZiBC67298yNi7OTkRF1Pn9O3VVS8kgVKKF8Kj3jAYrEUMkmvz2GY4OK&amp;new=1##" style="text-decoration:none;margin:20px 0px;padding:0.75em 1em 0px;color:rgb(62, 62, 62);display:block;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border:1px solid rgb(234, 234, 234);">
                    <p style="margin:0px;padding:0px;color:rgb(140, 140, 140);position:relative;padding-bottom:0.5em;font-size:15px;">内容转载自公众号<span style="font-size:15px;color:rgb(140, 140, 140);position:absolute;left:0px;bottom:0px;right:0px;height:1px;border-bottom:1px solid rgb(219, 219, 219);transform-origin:0px 100% 0px;transform:scaleY(0.5);"> </span></p>
                    <div style="margin:0px;padding:10px 0px;display:flex;-webkit-box-align:center;align-items:center;">
                        <div style="margin:0px;padding:0px;">
                            <span style="margin:0px;display:inline-block;background-color:rgb(255, 255, 255);border-radius:50%;overflow:hidden;vertical-align:middle;padding:0px;width:27px;height:27px;margin-right:0.5em;">
                                                                <img src="消费者驱动的微服务契约测试套件：Spring Cloud Contract_files/0" type="image/jpeg" data-filename="0" height="27" style="margin:0px;padding:0px;display:block;width:100%;border-radius:50%;background-color:rgb(238, 238, 238);height:100%;" width="27"/>
                                                            </span>
                        </div>
                        <div style="margin:0px;padding:0px;-webkit-box-flex:1;flex:1 1 0%;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;">
                            ImportSource
                        </div>
                        <div style="margin:0px;padding:0px;font-size:14px;color:rgb(140, 140, 140);padding-left:1em;white-space:nowrap;">了解更多<span style="font-size:14px;color:rgb(140, 140, 140);white-space:nowrap;display:inline-block;height:8px;width:8px;border-width:1px 1px 0px 0px;border-color:rgb(203, 202, 208);border-style:solid;transform:matrix(0.71, 0.71, -0.71, 0.71, 0, 0);position:relative;top:-1px;"> </span></div>
                    </div>
                </a>
                                
                

                
                                
                
                            </div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 