<html>
<head>
  <title>Spring常用注解 - 孤傲苍狼 - 博客园</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="9444"/>
<h1>Spring常用注解 - 孤傲苍狼 - 博客园</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/7/5 10:58</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="https://www.cnblogs.com/xdp-gacl/p/3495887.html"><i>https://www.cnblogs.com/xdp-gacl/p/3495887.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div><div style="font-family:&quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;word-wrap:break-word;line-height:1.6em;font-size:14px;"><div><div><div><div><div style="word-break:break-word;"><h2 style="margin-top:10px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">使用注解来构造IoC容器</h2>
<p style="margin:10px auto;text-indent:0px;"><strong>用注解来向</strong><strong>Spring</strong><strong>容器注册</strong><strong>Bean</strong><strong>。需要在</strong><strong>applicationContext.xml</strong><strong>中注册</strong><strong>&lt;context:component-scan base-package=”pagkage1[,pagkage2,…,pagkageN]”/&gt;</strong>。</p>
<p style="margin:10px auto;text-indent:0px;">如：在base-package指明一个包</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">&lt;</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#800000;">context:component-scan </span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#ff0000;">base-package</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">=&quot;cn.gacl.java&quot;</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">/&gt;</span></pre>
</div>
<p style="margin:10px auto;text-indent:0px;">表明<strong>cn.gacl.java</strong>包及其子包中，如果某个类的头上带有特定的注解【@Component/@Repository/@Service/@Controller】，就会将这个对象作为Bean注册进Spring容器。也可以在&lt;context:component-scan base-package=” ”/&gt;中指定多个包，如：</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">&lt;</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#800000;">context:component-scan </span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#ff0000;">base-package</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">=&quot;cn.gacl.dao.impl,cn.gacl.service.impl,cn.gacl.action&quot;</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">/&gt;</span></pre>
</div>
<p style="margin:10px auto;text-indent:0px;">多个包逗号隔开。</p>
<h2 style="margin-top:10px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">1、@Component</h2>
<p style="margin:10px auto;text-indent:0px;"><span lang="EN-US" style="line-height:150%;font-family:'Verdana','sans-serif';font-size:10.5pt;mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;mso-fareast-font-family:宋体;">@Component<br/></span><span style="mso-hansi-font-family:Verdana;line-height:150%;font-size:10.5pt;mso-ascii-font-family:Verdana;mso-fareast-theme-font:minor-fareast;font-family:宋体;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;">是所有受</span><span lang="EN-US" style="line-height:150%;font-family:'Verdana','sans-serif';font-size:10.5pt;mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;mso-fareast-font-family:宋体;">Spring </span><span style="mso-hansi-font-family:Verdana;line-height:150%;font-size:10.5pt;mso-ascii-font-family:Verdana;mso-fareast-theme-font:minor-fareast;font-family:宋体;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;">管理组件的通用形式，</span><span lang="EN-US" style="line-height:150%;font-family:'Verdana','sans-serif';font-size:10.5pt;mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;mso-fareast-font-family:宋体;">@Component</span><span style="mso-hansi-font-family:Verdana;line-height:150%;font-size:10.5pt;mso-ascii-font-family:Verdana;mso-fareast-theme-font:minor-fareast;font-family:宋体;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;">注解可以放在类的头上，</span><span lang="EN-US" style="line-height:150%;font-family:'Verdana','sans-serif';font-size:10.5pt;mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;mso-fareast-font-family:宋体;">@Component</span><span style="mso-hansi-font-family:Verdana;line-height:150%;font-size:10.5pt;mso-ascii-font-family:Verdana;mso-fareast-theme-font:minor-fareast;font-family:宋体;mso-bidi-font-family:'Times New Roman';mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA;">不推荐使用。</span></p>
<h2 style="margin-top:10px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">2、@Controller</h2>
<p style="margin:10px auto;text-indent:0px;">@Controller对应表现层的Bean，也就是Action，例如：</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">@Controller
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">2</span> @Scope(&quot;prototype&quot;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">)
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">3</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">public</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">class</span> UserAction <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">extends</span> BaseAction&lt;User&gt;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">{
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">4</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">……
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">5</span> }</pre>
</div>
<p align="left" style="margin:10px auto;text-indent:0px;"><strong>使用</strong><strong>@Controller</strong><strong>注解标识</strong><strong>UserAction</strong><strong>之后，就表示要把</strong><strong>UserAction</strong><strong>交给</strong><strong>Spring</strong><strong>容器管理，</strong><strong>在</strong><strong>Spring</strong><strong>容器中会存在一个名字为</strong><strong>&quot;userAction&quot;</strong><strong>的</strong><strong>action</strong><strong>，这个名字是根据</strong><strong>UserAction</strong><strong>类名来取的。</strong><strong>注意：<span style="line-height:150%;color:#ff0000;">如果</span></strong><span style="line-height:150%;color:#ff0000;">@Controller<strong>不指定其</strong>value【@Controller】，<strong>则默认的</strong><strong>bean</strong><strong>名字为这个类的类名首字母小写</strong><strong>，</strong><strong>如果指定</strong>value【@Controller(value=&quot;UserAction&quot;)】<strong>或者</strong>【@Controller(&quot;UserAction&quot;)】，<strong>则使用</strong><strong>value</strong><strong>作为</strong><strong>bean</strong><strong>的名字</strong>。</span></p>
<p align="left" style="margin:10px auto;text-indent:0px;">这里的UserAction还使用了@Scope注解，@Scope(&quot;prototype&quot;)表示将Action的范围声明为原型，<span style="line-height:150%;color:#ff0000;"><strong>可以利用容器的</strong><strong>scope=&quot;prototype&quot;</strong><strong>来保证每一个请求有一个单独的</strong><strong>Action</strong><strong>来处理，避免</strong><strong>struts</strong><strong>中</strong><strong>Action</strong><strong>的线程安全问题。</strong><strong>spring </strong><strong>默认</strong><strong>scope </strong><strong>是单例模式</strong><strong>(scope=&quot;singleton&quot;)</strong><strong>，这样只会创建一个</strong><strong>Action</strong><strong>对象，每次访问都是同一</strong><strong>Action</strong><strong>对象，数据不安全，</strong><strong>struts2 </strong><strong>是要求</strong><strong>每次次访问</strong><strong>都对应不同的</strong><strong>Action</strong><strong>，</strong><strong>scope=&quot;prototype&quot; </strong><strong>可以保证</strong><strong>当有请求的时候</strong><strong>都创建一个</strong><strong>Action</strong><strong>对象</strong></span></p>
<h2 style="margin-top:10px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">3、@ Service</h2>
<p style="margin:10px auto;text-indent:0px;">@Service对应的是业务层Bean，例如：</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> @Service(&quot;userService&quot;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">)
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">2</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">public</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">class</span> UserServiceImpl <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">implements</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;"> UserService {
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">3</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">………
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">4</span> }</pre>
</div>
<p align="left" style="margin:10px auto;text-indent:0px;">@Service(&quot;userService&quot;)注解是告诉Spring，当Spring要创建UserServiceImpl的的实例时，bean的名字必须叫做&quot;userService&quot;，这样当Action需要使用UserServiceImpl的的实例时,就可以由Spring创建好的&quot;userService&quot;，然后注入给Action：在Action只需要声明一个名字叫“userService”的变量来接收由Spring注入的&quot;userService&quot;即可，具体代码如下：</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008000;">//</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008000;"> 注入userService</span>
<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">2</span> @Resource(name = &quot;userService&quot;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">)
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">3</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">private</span> UserService userService;</pre>
</div>
<p align="left" style="margin:10px auto;text-indent:0px;">注意：在Action声明的“userService”变量的类型必须是“UserServiceImpl”或者是其父类“UserService”，否则由于类型不一致而无法注入，由于Action中的声明的“userService”变量使用了@Resource注解去标注，并且指明了其name = &quot;userService&quot;，这就等于告诉Spring，说我Action要实例化一个“userService”，你Spring快点帮我实例化好，然后给我，当Spring看到userService变量上的@Resource的注解时，根据其指明的name属性可以知道，Action中需要用到一个UserServiceImpl的实例，此时Spring就会把自己创建好的名字叫做&quot;userService&quot;的UserServiceImpl的实例注入给Action中的“userService”变量，帮助Action完成userService的实例化，这样在Action中就不用通过“UserService userService = new UserServiceImpl();”这种最原始的方式去实例化userService了。如果没有Spring，那么当Action需要使用UserServiceImpl时，必须通过“UserService userService = new UserServiceImpl();”主动去创建实例对象，但使用了Spring之后，Action要使用UserServiceImpl时，就不用主动去创建UserServiceImpl的实例了，创建UserServiceImpl实例已经交给Spring来做了，Spring把创建好的UserServiceImpl实例给Action，Action拿到就可以直接用了。Action由原来的主动创建UserServiceImpl实例后就可以马上使用，变成了被动等待由Spring创建好UserServiceImpl实例之后再注入给Action，Action才能够使用。这说明Action对“UserServiceImpl”类的“控制权”已经被“反转”了，原来主动权在自己手上，自己要使用“UserServiceImpl”类的实例，自己主动去new一个出来马上就可以使用了，但现在自己不能主动去new“UserServiceImpl”类的实例，new“UserServiceImpl”类的实例的权力已经被Spring拿走了，只有Spring才能够new“UserServiceImpl”类的实例，而Action只能等Spring创建好“UserServiceImpl”类的实例后，再“恳求”Spring把创建好的“UserServiceImpl”类的实例给他，这样他才能够使用“UserServiceImpl”，这就是Spring核心思想“<strong>控制反转</strong>”，也叫“<strong>依赖注入</strong>”，“依赖注入”也很好理解，Action需要使用UserServiceImpl干活，那么就是对UserServiceImpl产生了依赖，Spring把Acion需要依赖的UserServiceImpl注入(也就是“给”)给Action，这就是所谓的“依赖注入”。对Action而言，Action依赖什么东西，就请求Spring注入给他，对Spring而言，Action需要什么，Spring就主动注入给他。</p>
<h2 style="margin-top:10px;font-size:21px;font-weight:bold;line-height:1.5;margin:10px 0px;">4、@ Repository</h2>
<p style="margin:10px auto;text-indent:0px;">@Repository对应数据访问层Bean ，例如：</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> @Repository(value=&quot;userDao&quot;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">)
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">2</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">public</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">class</span> UserDaoImpl <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">extends</span> BaseDaoImpl&lt;User&gt;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;"> {
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">3</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">………
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">4</span> }</pre>
</div>
<p align="left" style="margin:10px auto;text-indent:0px;">@Repository(value=&quot;userDao&quot;)注解是告诉Spring，让Spring创建一个名字叫“userDao”的UserDaoImpl实例。</p>
<p style="margin:10px auto;text-indent:0px;">当Service需要使用Spring创建的名字叫“userDao”的UserDaoImpl实例时，就可以使用@Resource(name = &quot;userDao&quot;)注解告诉Spring，Spring把创建好的userDao注入给Service即可。</p>
<div style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;overflow:auto;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;">
<pre style="margin-top:0px;margin-bottom:0px;word-wrap:break-word;white-space:pre-wrap;font-family:&quot;Courier New&quot;;font-size:12px;"><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">1</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008000;">//</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008000;"> 注入userDao，从数据库中根据用户Id取出指定用户时需要用到</span>
<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">2</span> @Resource(name = &quot;userDao&quot;<span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#000000;">)
</span><span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#008080;">3</span> <span style="font-family:&quot;Courier New&quot;;font-size:12px;line-height:1.5;color:#0000ff;">private</span> BaseDao&lt;User&gt; userDao;</pre>
</div>
<p style="margin:10px auto;text-indent:0px;"> </p></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 