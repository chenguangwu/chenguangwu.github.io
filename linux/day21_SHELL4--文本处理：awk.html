<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>文本处理：awk</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="ULE____课程笔记说明.html">ULE    课程笔记说明</a></p>

<p><a href="软件包.html">软件包</a></p>

<p><a href="day1___bash.html">day1   bash</a></p>

<p><a href="day2___文件管理.html">day2   文件管理</a></p>

<p><a href="day3___用户管理-文件权限.html">day3   用户管理/文件权限</a></p>

<ol>
<li><a href="day3___用户管理-文件权限--用户组管理.html">用户组管理</a></li>
<li><a href="day3___用户管理-文件权限--文件基本权限（1）.html">文件基本权限（1）</a></li>
</ol>
<p><a href="day4___权限-软件包管理.html">day4   权限/软件包管理</a></p>

<ol>
<li><a href="day4___权限-软件包管理--文件高级权限（2）.html">文件高级权限（2）</a></li>
<li><a href="day4___权限-软件包管理--软件包管理（1）.html">软件包管理（1）</a></li>
<ol>
<li><a href="day4___权限-软件包管理--软件包管理（1）--软件包管理概述.html">软件包管理概述</a></li>
<li><a href="day4___权限-软件包管理--软件包管理（1）--rpm管理RPM包.html">rpm管理RPM包</a></li>
<li><a href="day4___权限-软件包管理--软件包管理（1）--yum管理RPM包.html">yum管理RPM包</a></li>
</ol>
</ol>
<p><a href="day5___软件包管理-SHELL.html">day5   软件包管理/SHELL</a></p>

<ol>
<li><a href="day5___软件包管理-SHELL--软件包管理（2）.html">软件包管理（2）</a></li>
<li><a href="day5___软件包管理-SHELL--Bash_Shell基础.html">Bash Shell基础</a></li>
</ol>
<p><a href="day6___进程管理-管道-重定向.html">day6   进程管理/管道/重定向</a></p>

<ol>
<li><a href="day6___进程管理-管道-重定向--进程管理.html">进程管理</a></li>
<li><a href="day6___进程管理-管道-重定向--管道、重定向.html">管道、重定向</a></li>
</ol>
<p><a href="day7___存储管理（1）.html">day7   存储管理（1）</a></p>

<ol>
<li><a href="day7___存储管理（1）--存储基础知识.html">存储基础知识</a></li>
<li><a href="day7___存储管理（1）--基本分区管理.html">基本分区管理</a></li>
<li><a href="day7___存储管理（1）--逻辑卷管理LVM.html">逻辑卷管理LVM</a></li>
</ol>
<p><a href="day8___存储管理（2）.html">day8   存储管理（2）</a></p>

<ol>
<li><a href="day8___存储管理（2）--交换分区swap.html">交换分区swap</a></li>
<li><a href="day8___存储管理（2）--Mount挂载详解.html">Mount挂载详解</a></li>
<li><a href="day8___存储管理（2）--Autofs自动挂载.html">Autofs自动挂载</a></li>
<li><a href="day8___存储管理（2）--Ext3-4文件系统.html">Ext3/4文件系统</a></li>
<li><a href="day8___存储管理（2）--文件链接原理.html">文件链接原理</a></li>
</ol>
<p><a href="day9___存储管理（3）.html">day9   存储管理（3）</a></p>

<ol>
<li><a href="day9___存储管理（3）--磁盘限额.html">磁盘限额</a></li>
<li><a href="day9___存储管理（3）--磁盘阵列RAID.html">磁盘阵列RAID</a></li>
<li><a href="day9___存储管理（3）--文件查找.html">文件查找</a></li>
<li><a href="day9___存储管理（3）--文件打包及压缩.html">文件打包及压缩</a></li>
</ol>
<p><a href="day10_kernel-Modules.html">day10 kernel/Modules</a></p>

<ol>
<li><a href="day10_kernel-Modules--kernel基本概念.html">kernel基本概念</a></li>
<li><a href="day10_kernel-Modules--Kernel升级.html">Kernel升级</a></li>
<li><a href="day10_kernel-Modules--增加内核模块.html">增加内核模块</a></li>
<li><a href="day10_kernel-Modules--硬件驱动安装.html">硬件驱动安装</a></li>
</ol>
<p><a href="day11_系统启动-故障修复.html">day11 系统启动/故障修复</a></p>

<ol>
<li><a href="day11_系统启动-故障修复--系统引导流程.html">系统引导流程</a></li>
<li><a href="day11_系统启动-故障修复--常见故障处理.html">常见故障处理</a></li>
</ol>
<p><a href="day12_Cron-Network.html">day12 Cron/Network</a></p>

<ol>
<li><a href="day12_Cron-Network--计划任务cron.html">计划任务cron</a></li>
<li><a href="day12_Cron-Network--网络基础.html">网络基础</a></li>
</ol>
<p><a href="day13_Rsyslog.html">day13 Rsyslog</a></p>

<ol>
<li><a href="day13_Rsyslog--日志管理基础.html">日志管理基础</a></li>
<li><a href="day13_Rsyslog--集中式日志管理.html">集中式日志管理</a></li>
<li><a href="day13_Rsyslog--日志logrotate.html">日志logrotate</a></li>
</ol>
<p><a href="day14_SSHD-DHCP-NTP.html">day14 SSHD/DHCP/NTP</a></p>

<ol>
<li><a href="day14_SSHD-DHCP-NTP--服务概述.html">服务概述</a></li>
<li><a href="day14_SSHD-DHCP-NTP--SSHD.html">SSHD</a></li>
<li><a href="day14_SSHD-DHCP-NTP--DHCP.html">DHCP</a></li>
<li><a href="day14_SSHD-DHCP-NTP--NTPD.html">NTPD</a></li>
</ol>
<p><a href="day15_Vsftpd-NFS-CIFS.html">day15 Vsftpd/NFS/CIFS</a></p>

<ol>
<li><a href="day15_Vsftpd-NFS-CIFS--Vsftpd.html">Vsftpd</a></li>
<li><a href="day15_Vsftpd-NFS-CIFS--NAS之：_NFS.html">NAS之： NFS</a></li>
<li><a href="day15_Vsftpd-NFS-CIFS--NAS之：_CIFS.html">NAS之： CIFS</a></li>
</ol>
<p><a href="day16_DNS.html">day16 DNS</a></p>

<ol>
<li><a href="day16_DNS--DNS基本概念.html">DNS基本概念</a></li>
<li><a href="day16_DNS--Master_正向区-反向区.html">Master: 正向区/反向区</a></li>
<li><a href="day16_DNS--Slave___正向区-反向区.html">Slave:   正向区/反向区</a></li>
<li><a href="day16_DNS--DNS区域传输限制.html">DNS区域传输限制</a></li>
<li><a href="day16_DNS--根提示区、Forward.html">根提示区、Forward</a></li>
<li><a href="day16_DNS--Client使用DNS解析.html">Client使用DNS解析</a></li>
<li><a href="day16_DNS--扩展：_子域授权.html">扩展： 子域授权</a></li>
<li><a href="day16_DNS--扩展：_DNS_Round_Robin.html">扩展： DNS Round Robin</a></li>
</ol>
<p><a href="day17_Apache-Mail.html">day17 Apache/Mail</a></p>

<ol>
<li><a href="day17_Apache-Mail--常见WEB服务器.html">常见WEB服务器</a></li>
<li><a href="day17_Apache-Mail--Apache_基本配置.html">Apache 基本配置</a></li>
<li><a href="day17_Apache-Mail--Apache_虚拟主机.html">Apache 虚拟主机</a></li>
<li><a href="day17_Apache-Mail--Apache_访问控制.html">Apache 访问控制</a></li>
<li><a href="day17_Apache-Mail--Apache_Alias.html">Apache Alias</a></li>
<li><a href="day17_Apache-Mail--Apache_LAMP_(rpm).html">Apache LAMP (rpm)</a></li>
<li><a href="day17_Apache-Mail--Mail_Postfix.html">Mail: Postfix</a></li>
<li><a href="day17_Apache-Mail--部署邮件系统.html">部署邮件系统</a></li>
</ol>
<p><a href="day18_SHELL1.html">day18 SHELL1</a></p>

<ol>
<li><a href="day18_SHELL1--Bash_Shell.html">Bash Shell</a></li>
<li><a href="day18_SHELL1--Shell变量.html">Shell变量</a></li>
<li><a href="day18_SHELL1--Shell条件测试.html">Shell条件测试</a></li>
<li><a href="day18_SHELL1--流程控制：if.html">流程控制：if</a></li>
</ol>
<p><a href="day19_SHELL2.html">day19 SHELL2</a></p>

<ol>
<li><a href="day19_SHELL2--模式匹配：case.html">模式匹配：case</a></li>
<li><a href="day19_SHELL2--Shell循环：for.html">Shell循环：for</a></li>
<li><a href="day19_SHELL2--Shell循环：while_until.html">Shell循环：while until</a></li>
<li><a href="day19_SHELL2--Shell数组变量.html">Shell数组变量</a></li>
<li><a href="day19_SHELL2--day2作业.html">day2作业</a></li>
</ol>
<p><a href="day20_SHELL3.html">day20 SHELL3</a></p>

<ol>
<li><a href="day20_SHELL3--Shell_函数.html">Shell 函数</a></li>
<ol>
<li><a href="day20_SHELL3--Shell_函数--shell脚本的相互调用.html">shell脚本的相互调用</a></li>
</ol>
<li><a href="day20_SHELL3--影响程序的Shell命令.html">影响程序的Shell命令</a></li>
<li><a href="day20_SHELL3--expect.html">expect</a></li>
<li><a href="day20_SHELL3--正则表达式RE.html">正则表达式RE</a></li>
</ol>
<p><a href="day21_SHELL4.html">day21 SHELL4</a></p>

<ol>
<li><a href="day21_SHELL4--文本处理：grep.html">文本处理：grep</a></li>
<li><a href="day21_SHELL4--文本处理：sed.html">文本处理：sed</a></li>
<ol>
<li><a href="day21_SHELL4--文本处理：sed--文本处理：sed（随堂笔记）.html">文本处理：sed（随堂笔记）</a></li>
</ol>
<li><a href="day21_SHELL4--文本处理：awk.html">文本处理：awk</a></li>
<ol>
<li><a href="day21_SHELL4--文本处理：awk--文件处理：awk（随堂笔记）.html">文件处理：awk（随堂笔记）</a></li>
</ol>
</ol>
<p><a href="day22_SHELL5.html">day22 SHELL5</a></p>

<ol>
<li><a href="day22_SHELL5--进程锁.html">进程锁</a></li>
<li><a href="day22_SHELL5--并行进程.html">并行进程</a></li>
<li><a href="day22_SHELL5--使用sleep.html">使用sleep</a></li>
<li><a href="day22_SHELL5--Shell案例.html">Shell案例</a></li>
</ol>
<p><a href="mysql_5.6(new).html">mysql 5.6(new)</a></p>

<ol>
<li><a href="mysql_5.6(new)--mysql_概述.html">mysql 概述</a></li>
<li><a href="mysql_5.6(new)--mysql_的安装.html">mysql 的安装</a></li>
<li><a href="mysql_5.6(new)--mysql_的并发处理.html">mysql 的并发处理</a></li>
<li><a href="mysql_5.6(new)--mysql_的引擎.html">mysql 的引擎</a></li>
<li><a href="mysql_5.6(new)--数据库范式.html">数据库范式</a></li>
</ol>
<p><a href="day23_MySQL1.html">day23 MySQL1</a></p>

<ol>
<li><a href="day23_MySQL1--MySQL基础.html">MySQL基础</a></li>
<li><a href="day23_MySQL1--MySQL安装.html">MySQL安装</a></li>
<li><a href="day23_MySQL1--MySQL数据库操作.html">MySQL数据库操作</a></li>
<li><a href="day23_MySQL1--MySQL存储引擎.html">MySQL存储引擎</a></li>
<li><a href="day23_MySQL1--MySQL数据类型.html">MySQL数据类型</a></li>
<ol>
<li><a href="day23_MySQL1--MySQL数据类型--MySQL_5.5.html">MySQL 5.5</a></li>
<li><a href="day23_MySQL1--MySQL数据类型--MySQL_5.6.html">MySQL 5.6</a></li>
</ol>
<li><a href="day23_MySQL1--MySQL表操作.html">MySQL表操作</a></li>
<li><a href="day23_MySQL1--mysql运算符.html">mysql运算符</a></li>
</ol>
<p><a href="day24_MySQL2.html">day24 MySQL2</a></p>

<ol>
<li><a href="day24_MySQL2--MySQL数据操作.html">MySQL数据操作</a></li>
<li><a href="day24_MySQL2--MySQL单表查询.html">MySQL单表查询</a></li>
<li><a href="day24_MySQL2--MySQL索引.html">MySQL索引</a></li>
<li><a href="day24_MySQL2--mysql触发器.html">mysql触发器</a></li>
<li><a href="day24_MySQL2--MySQL视图.html">MySQL视图</a></li>
<li><a href="day24_MySQL2--mysql_存储过程与函数.html">mysql 存储过程与函数</a></li>
<li><a href="day24_MySQL2--mysql_流程控制.html">mysql 流程控制</a></li>
</ol>
<p><a href="day25_MySQL3.html">day25 MySQL3</a></p>

<ol>
<li><a href="day25_MySQL3--MySQL多表查询.html">MySQL多表查询</a></li>
<li><a href="day25_MySQL3--MySQL数据库分区.html">MySQL数据库分区</a></li>
<li><a href="day25_MySQL3--MySQL安全机制.html">MySQL安全机制</a></li>
<li><a href="day25_MySQL3--MySQL日志管理.html">MySQL日志管理</a></li>
<li><a href="day25_MySQL3--MySQL事务与隔离级别.html">MySQL事务与隔离级别</a></li>
<li><a href="day25_MySQL3--MySQL数据备份.html">MySQL数据备份</a></li>
<ol>
<li><a href="day25_MySQL3--MySQL数据备份--mysqldump与mysqlhotcopy.html">mysqldump与mysqlhotcopy</a></li>
<li><a href="day25_MySQL3--MySQL数据备份--基于snapshot备份.html">基于snapshot备份</a></li>
<li><a href="day25_MySQL3--MySQL数据备份--xtrabackup.html">xtrabackup</a></li>
<li><a href="day25_MySQL3--MySQL数据备份--innobackupex.html">innobackupex</a></li>
<li><a href="day25_MySQL3--MySQL数据备份--mysqlbackup.html">mysqlbackup</a></li>
</ol>
</ol>
<p><a href="day26_MySQL4.html">day26 MySQL4</a></p>

<ol>
<li><a href="day26_MySQL4--MySQL复制技术.html">MySQL复制技术</a></li>
<li><a href="day26_MySQL4--MySQL读写分离.html">MySQL读写分离</a></li>
<ol>
<li><a href="day26_MySQL4--MySQL读写分离--MySQL_Proxy.html">MySQL Proxy</a></li>
<li><a href="day26_MySQL4--MySQL读写分离--Amoeba.html">Amoeba</a></li>
</ol>
</ol>
<p><a href="day27_MySQL5.html">day27 MySQL5</a></p>

<ol>
<li><a href="day27_MySQL5--LNMP环境搭建.html">LNMP环境搭建</a></li>
<li><a href="day27_MySQL5--MySQL集群技术.html">MySQL集群技术</a></li>
</ol>
<p><a href="memcached_(new).html">memcached (new)</a></p>

<ol>
<li><a href="memcached_(new)--memcache简介与工作原理.html">memcache简介与工作原理</a></li>
<li><a href="memcached_(new)--Memcache的应用.html">Memcache的应用</a></li>
<li><a href="memcached_(new)--memcache_session.html">memcache_session</a></li>
</ol>
<p><a href="day28_Project1.html">day28 Project1</a></p>

<ol>
<li><a href="day28_Project1--Nginx_基本配置.html">Nginx 基本配置</a></li>
<li><a href="day28_Project1--Nginx_虚拟主机.html">Nginx 虚拟主机</a></li>
<li><a href="day28_Project1--Nginx_访问控制.html">Nginx 访问控制</a></li>
<li><a href="day28_Project1--Nginx_查看状态.html">Nginx 查看状态</a></li>
<li><a href="day28_Project1--Nginx_LNMP.html">Nginx LNMP</a></li>
<li><a href="day28_Project1--Nginx_Upstream.html">Nginx Upstream</a></li>
<li><a href="day28_Project1--项目一：_Nginx实现基本LB.html">项目一： Nginx实现基本LB</a></li>
</ol>
<p><a href="day29_Project2.html">day29 Project2</a></p>

<ol>
<li><a href="day29_Project2--项目安排.html">项目安排</a></li>
<li><a href="day29_Project2--Nginx_Rewrite.html">Nginx Rewrite</a></li>
<li><a href="day29_Project2--Tomcat_JSP.html">Tomcat JSP</a></li>
<li><a href="day29_Project2--Tomcat_虚拟主机.html">Tomcat 虚拟主机</a></li>
<li><a href="day29_Project2--Nginx_模块.html">Nginx 模块</a></li>
<ol>
<li><a href="day29_Project2--Nginx_模块--限速模块.html">限速模块</a></li>
<li><a href="day29_Project2--Nginx_模块--限线程数.html">限线程数</a></li>
<li><a href="day29_Project2--Nginx_模块--隐藏版本号.html">隐藏版本号</a></li>
<li><a href="day29_Project2--Nginx_模块--访问控制模块.html">访问控制模块</a></li>
<li><a href="day29_Project2--Nginx_模块--增加第三方模块.html">增加第三方模块</a></li>
</ol>
</ol>
<p><a href="day30_Project3.html">day30 Project3</a></p>

<ol>
<li><a href="day30_Project3--网络安全：_iptables.html">网络安全： iptables</a></li>
<li><a href="day30_Project3--七层过滤(选讲).html">七层过滤(选讲)</a></li>
</ol>
<p><a href="day31_Project4.html">day31 Project4</a></p>

<ol>
<li><a href="day31_Project4--项目介绍.html">项目介绍</a></li>
<li><a href="day31_Project4--代理服务器：_Squid.html">代理服务器： Squid</a></li>
<li><a href="day31_Project4--代理服务器：_Nginx.html">代理服务器： Nginx</a></li>
</ol>
<p><a href="day32_Project5.html">day32 Project5</a></p>

<ol>
<li><a href="day32_Project5--智能DNS：view.html">智能DNS：view</a></li>
<li><a href="day32_Project5--内容分发网络：CDN.html">内容分发网络：CDN</a></li>
</ol>
<p><a href="day33_Project6.html">day33 Project6</a></p>

<ol>
<li><a href="day33_Project6--Puppet简介.html">Puppet简介</a></li>
<li><a href="day33_Project6--Puppet部署.html">Puppet部署</a></li>
<li><a href="day33_Project6--实例：File资源.html">实例：File资源</a></li>
<li><a href="day33_Project6--实例：创建模块test1.html">实例：创建模块test1</a></li>
<li><a href="day33_Project6--实例：创建模块httpd.html">实例：创建模块httpd</a></li>
<li><a href="day33_Project6--Puppet命名规范.html">Puppet命名规范</a></li>
<li><a href="day33_Project6--Puppet资源.html">Puppet资源</a></li>
<ol>
<li><a href="day33_Project6--Puppet资源--file.html">file</a></li>
<li><a href="day33_Project6--Puppet资源--group.html">group</a></li>
<li><a href="day33_Project6--Puppet资源--user.html">user</a></li>
<li><a href="day33_Project6--Puppet资源--exec.html">exec</a></li>
<li><a href="day33_Project6--Puppet资源--cron.html">cron</a></li>
<li><a href="day33_Project6--Puppet资源--yumrepo.html">yumrepo</a></li>
<li><a href="day33_Project6--Puppet资源--package.html">package</a></li>
<li><a href="day33_Project6--Puppet资源--service.html">service</a></li>
</ol>
<li><a href="day33_Project6--资源的依赖关系.html">资源的依赖关系</a></li>
<li><a href="day33_Project6--notify_subscribe.html">notify subscribe</a></li>
<li><a href="day33_Project6--Puppet部署Nginx.html">Puppet部署Nginx</a></li>
<li><a href="day33_Project6--Puppet部署MySQL.html">Puppet部署MySQL</a></li>
<li><a href="day33_Project6--Master自动签发证书.html">Master自动签发证书</a></li>
<li><a href="day33_Project6--Puppet_Dashboard.html">Puppet Dashboard</a></li>
<li><a href="day33_Project6--Puppet_Git.html">Puppet Git</a></li>
<li><a href="day33_Project6--Puppet_Cobbler.html">Puppet Cobbler</a></li>
</ol>
<p><a href="day34_Project7.html">day34 Project7</a></p>

<ol>
<li><a href="day34_Project7--项目介绍.html">项目介绍</a></li>
<li><a href="day34_Project7--MRTG.html">MRTG</a></li>
<li><a href="day34_Project7--nagios.html">nagios</a></li>
<ol>
<li><a href="day34_Project7--nagios--基本概念.html">基本概念</a></li>
<li><a href="day34_Project7--nagios--部署监控中心.html">部署监控中心</a></li>
<li><a href="day34_Project7--nagios--监控本地主机.html">监控本地主机</a></li>
<li><a href="day34_Project7--nagios--监控远程主机.html">监控远程主机</a></li>
<li><a href="day34_Project7--nagios--nagios配置文件.html">nagios配置文件</a></li>
<li><a href="day34_Project7--nagios--nagios_插件.html">nagios 插件</a></li>
<li><a href="day34_Project7--nagios--性能分析图表.html">性能分析图表</a></li>
<li><a href="day34_Project7--nagios--nagios报警机制.html">nagios报警机制</a></li>
<li><a href="day34_Project7--nagios--管理工具nagiosql.html">管理工具nagiosql</a></li>
<li><a href="day34_Project7--nagios--大型环境监控规划.html">大型环境监控规划</a></li>
</ol>
</ol>
<p><a href="day35_Project8.html">day35 Project8</a></p>

<ol>
<li><a href="day35_Project8--cacti.html">cacti</a></li>
<ol>
<li><a href="day35_Project8--cacti--cacti简介.html">cacti简介</a></li>
<li><a href="day35_Project8--cacti--安装cacti.html">安装cacti</a></li>
<li><a href="day35_Project8--cacti--监控本地Linux服务器.html">监控本地Linux服务器</a></li>
<li><a href="day35_Project8--cacti--监控远程Linux服务器.html">监控远程Linux服务器</a></li>
<li><a href="day35_Project8--cacti--添加模块监控应用.html">添加模块监控应用</a></li>
<li><a href="day35_Project8--cacti--添加插件增加功能.html">添加插件增加功能</a></li>
<li><a href="day35_Project8--cacti--整合nagios+cacti.html">整合nagios+cacti</a></li>
</ol>
<li><a href="day35_Project8--Ganglia部署.html">Ganglia部署</a></li>
<ol>
<li><a href="day35_Project8--Ganglia部署--Ganglia简介.html">Ganglia简介</a></li>
<li><a href="day35_Project8--Ganglia部署--Ganglia部署.html">Ganglia部署</a></li>
</ol>
</ol>
<p><a href="day36_Project9.html">day36 Project9</a></p>

<ol>
<li><a href="day36_Project9--Splunk简介.html">Splunk简介</a></li>
<li><a href="day36_Project9--Splunk安装.html">Splunk安装</a></li>
<li><a href="day36_Project9--Splunk本地日志导入.html">Splunk本地日志导入</a></li>
<li><a href="day36_Project9--Splunk远程Apache日志导入.html">Splunk远程Apache日志导入</a></li>
<li><a href="day36_Project9--Splunk生成报表与视图.html">Splunk生成报表与视图</a></li>
<li><a href="day36_Project9--Splunk应用扩展.html">Splunk应用扩展</a></li>
</ol>
<p><a href="day37_Project10.html">day37 Project10</a></p>

<ol>
<li><a href="day37_Project10--PXE批量部署Linux.html">PXE批量部署Linux</a></li>
<ol>
<li><a href="day37_Project10--PXE批量部署Linux--实现网络安装.html">实现网络安装</a></li>
<li><a href="day37_Project10--PXE批量部署Linux--Kickstart自动安装.html">Kickstart自动安装</a></li>
<li><a href="day37_Project10--PXE批量部署Linux--Kickstart配置详解.html">Kickstart配置详解</a></li>
</ol>
</ol>
<p><a href="day38_Project11.html">day38 Project11</a></p>

<ol>
<li><a href="day38_Project11--Mail基础.html">Mail基础</a></li>
<li><a href="day38_Project11--部署邮件系统.html">部署邮件系统</a></li>
<ol>
<li><a href="day38_Project11--部署邮件系统--基本环境.html">基本环境</a></li>
<li><a href="day38_Project11--部署邮件系统--MTA_Postfix.html">MTA Postfix</a></li>
<li><a href="day38_Project11--部署邮件系统--SMTP_Authentication.html">SMTP Authentication</a></li>
<ol>
<li><a href="day38_Project11--部署邮件系统--SMTP_Authentication--Courier-Authlib.html">Courier-Authlib </a></li>
<li><a href="day38_Project11--部署邮件系统--SMTP_Authentication--Cyrus-SASL.html">Cyrus-SASL</a></li>
</ol>
<li><a href="day38_Project11--部署邮件系统--MDA_Maildrop.html">MDA Maildrop</a></li>
<li><a href="day38_Project11--部署邮件系统--Webmail-ExtMail.html">Webmail-ExtMail</a></li>
<li><a href="day38_Project11--部署邮件系统--Management_ExtMan.html">Management ExtMan </a></li>
<li><a href="day38_Project11--部署邮件系统--MRA_Courier-IMAP.html">MRA Courier-IMAP</a></li>
<li><a href="day38_Project11--部署邮件系统--Apache.html">Apache</a></li>
<li><a href="day38_Project11--部署邮件系统--内容、病毒过滤.html">内容、病毒过滤</a></li>
<li><a href="day38_Project11--部署邮件系统--测试.html">测试</a></li>
<ol>
<li><a href="day38_Project11--部署邮件系统--测试--测试SMTP认证.html">测试SMTP认证</a></li>
<li><a href="day38_Project11--部署邮件系统--测试--测试Courier-authlib.html">测试Courier-authlib</a></li>
</ol>
<li><a href="day38_Project11--部署邮件系统--Mail_Error.html">Mail Error</a></li>
</ol>
</ol>
<p><a href="day39_Project12.html">day39 Project12</a></p>

<ol>
<li><a href="day39_Project12--Postfix队列.html">Postfix队列</a></li>
<li><a href="day39_Project12--Extmail模板修改.html">Extmail模板修改</a></li>
<li><a href="day39_Project12--客户端Outlook.html">客户端Outlook</a></li>
</ol>
<p><a href="day40_ULE_Exam.html">day40 ULE Exam</a></p>

</div>
<div class="page"><h1><b><u>文本处理：awk</u></b></h1><br /><br /><strong><span style="color:#0000ff;">文本处理 awk</span></strong><br />========================================================<br /><br /><span style="background-color:#00ff00;">一、awk简介</span><br />	awk 是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入、一个<br />或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是linux/unix<br />下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。<br />	awk的处理文本和数据的方式是这样的，它逐行扫描文件，从第一行到最后一行，寻找匹配的特定<br />模式的行，并在这些行上进行你想要的操作。如果没有指定处理动作，则把匹配的行显示到标准输出(<br />屏幕)，如果没有指定模式，则所有被操作所指定的行都被处理。awk分别代表其作者姓氏的第一个字<br />母。因为它的作者是三个人，分别是Alfred Aho、Brian Kernighan、Peter Weinberger。gawk是<br />awk的GNU版本，它提供了Bell实验室和GNU的一些扩展。<br /><br /><span style="background-color:#00ff00;">二、awk的两种形式语法格式</span><br />awk [options] 'commands' filename<br />awk [options] -f awk-script-file filename<br /><br /><span style="color:#ff0000;">＝＝options：</span><br />-F 		定义字段分隔符，默认的分隔符是空格或制表符(tab)<br /><br /><span style="color:#ff0000;">＝＝command：</span><br />BEGIN{}       {}         	END{}<br />读前处理        行处理 		处理后<br /><br /><span style="color:#ff0000;">＝＝awk命令格式：</span><br />awk 'pattern' filename						示例：awk -F: '/root/' /etc/passwd		<br />awk '{action}' filename					示例：awk -F: '{print $1}' /etc/passwd			<br />awk 'pattern {action}' filename		示例：awk -F: '/root/{print $1,$3}' /etc/passwd		<br />														示例：awk 'BEGIN{FS=":"} /root/{print $1,$3}' /etc/passwd<br />command |awk 'pattern' <br />command |awk '{action}'			<br />command |awk 'pattern {action}' 	示例：df -P |awk '$4 &gt; 25000'<br /><br /><br />========================================================<br /><span style="color:#ff0000;">awk工作原理</span><br /># awk -F: '{print $1,$3}' /etc/passwd<br />(1)awk使用一行作为输入，并将这一行赋给内部变量<span style="color:#ff0000;">$0</span>，每一行也可称为一个记录，以换行符结束<br />(2)然后，行被空格分解成<span style="color:#ff0000;">字段（或域）</span>，每个字段存储在已编号的变量中，从<span style="color:#ff0000;">$1</span>开始，最多达100个字段<br />(3)awk如何知道用空格来分隔字段的呢？ 因为有一个内部变量<span style="color:#ff0000;">FS</span>来确定字段分隔符。初始时，FS赋为空格<br />(4)awk打印字段时，将以设置的方法使用print函数打印，awk在打印的字段间加上空格，因为$1,$3之间<br />有一个<span style="color:#ff0000;">逗号</span>。逗号比较特殊，它映射为另一个内部变量，称为输出字段分隔符<span style="color:#ff0000;">OFS</span>，OFS默认为空格<br />(5)awk输出之后，将从文件中获取另一行，并将其存储在$0中，覆盖原来的内容，然后将新的字符串分隔<br />成字段并进行处理。该过程将持续到所有行处理完毕<br />========================================================<br /><br /><span style="color:#ff0000;">＝＝记录与字段相关内部变量：</span><br />$0：	awk变量$0保存当前记录的内容				# awk -F: '{print $0}' /etc/passwd<br />NR：	记录号，每处理完一条记录，NR值加1（行数）	# awk -F: '{print NR, $0}' /etc/passwd<br />NF：	保存记录的字段数，$1,$2...$100	（列数）	# awk -F: '{print $0,NF}' /etc/passwd<br />FS：	输入字段分隔符，默认空格						# awk -F: '/alice/{print $1, $3}' /etc/passwd<br />																	# awk -F'[ :\t]' '{print $1,$2,$3}' /etc/passwd	<br />																	# awk 'BEGIN{FS=":"} {print $1,$3}' /etc/passwd<br />OFS：输出字段分隔符									# awk -F: '/alice/{print $1,$2,$3,$4}' /etc/passwd<br />								# awk -F: 'BEGIN{OFS="+++"} /^root/{print $1,$2,$3,$4}' /etc/passwd<br />								<br />========================================================<br /><br /><br /><span style="color:#ff0000;">＝＝格式化输出：</span><br />print函数<br /># date |awk '{print "Month: "$2 "\nYear: "$6}'<br /># awk -F: '{print "username is: " $1 "\t uid is: "$3}' /etc/passwd<br /># awk -F: '/root/{print "\t\tusername and uid: " $1,$3 "!"}' /etc/passwd<br /><br />printf函数<br /># awk -F: '{printf "%-15s %-10s %-15s\n", $1,$2,$3}'  /etc/passwd<br /># awk -F: '{printf "|%-15s| %-10s| %-15s|\n", $1,$2,$3}' /etc/passwd<br /><br /><br />%s 字符类型<br />%d 数值类型<br />占15格的字符串<br />- 表示左对齐，默认是右对齐<br />printf默认不会在行尾自动换行，加\n<br />========================================================<br /><br /><br /><span style="background-color:#00ff00;">三、awk模式和动作</span><br />	任何awk语句都由<strong><span style="color:#ff0000;">模式</span></strong>和动作组成。模式部分决定动作语句何时触发及触发事件。处理即对数据进行的操作。<br />如果省略模式部分，动作将时刻保持执行状态。模式可以是任何<span style="color:#ff0000;">条件语句</span>或<span style="color:#ff0000;">复合语句</span>或<span style="color:#ff0000;">正则表达式</span>。模式包括两<br />个特殊字段 BEGIN和END。使用BEGIN语句设置计数和打印头。BEGIN语句使用在任何文本浏览动作之前，之<br />后文本浏览动作依据输入文本开始执行。END语句用来在awk完成文本浏览动作后打印输出文本总数和结尾状态。<br /><br /><strong><span style="color:#ff0000;">模式可以是：</span></strong><br /><br /><span style="color:#ff0000;">==正则表达式：</span><br /># awk -F: '<span style="color:#ff0000;">/alice/</span>{print $1,$3}' /etc/passwd<br /><br />匹配整行：<br /># awk '/^alice/'  /etc/passwd<br /># awk '<span style="text-decoration:line-through;">$0 ~</span> /^alice/'  /etc/passwd<br /><br />匹配操作符：匹配操作符（<span style="color:#ff0000;">~</span>）用于对<span style="color:#ff0000;">记录</span>或<span style="color:#ff0000;">字段</span>的表达式进行匹配<br /># awk '$0 ~ /^alice/'  /etc/passwd<br /># awk '$1 ~ /^alice/'  /etc/passwd<br /># awk '$7 !~ /bash$/'  /etc/passwd<br /><br />  <br /><span style="color:#ff0000;">==比较表达式：</span><br />比较表达式采用对文本进行比较，只有当条件为真，才执行指定的动作。比较表达式使用关系运算符，<br />用于比较<span style="color:#ff0000;">数字</span>与<span style="color:#ff0000;">字符串</span>。<br /><br /><span style="background-color:#90ee90;">关系运算符</span><br />运算符			含义						示例<br />&lt;					小于						x&lt;y<br />&lt;=				小于或等于			x&lt;=y<br />==				等于						x==y<br />!=					不等于					x!=y<br />&gt;=				大于等于				x&gt;=y<br />&gt;					大于						x&gt;y<br />~					正则表达式匹配		x~/y/<br />!~					正则表达式不匹配	x!~/y/<br /><br />示例：<br /># awk -F: '$3 == 0' /etc/passwd<br /># awk -F: '$3 &lt; 10' /etc/passwd<br /># awk -F: '$7 == "/bin/bash"' /etc/passw<br /># awk -F: '$1 == "root" ' /etc/passwd<br /><br /><br /><span style="color:#ff0000;">==条件表达式：</span><br /># awk -F: '{if($3&gt;300) print $0}' /etc/passwd<br /># awk -F: '{if($3&gt;300) {print $0}}' /etc/passwd<br /># awk -F: '{if($3&gt;300) {print $3} else{print $1}}' /etc/passwd<br /><br /># awk -F: '{if($3&gt;300) {max=$3;print max} else{max=$1;print max}}' /etc/passwd<br /># awk -F: '{max=($3&gt;300) <span style="color:#ff0000;">?</span> $3 <span style="color:#ff0000;">: </span>$1; print max}' /etc/passwd<br /><br /># awk -F: '{if($3&gt;$4) {max=$3;print max} else{max=$4; print max}}' /etc/passwd<br /># awk -F: '{max=($3 &gt; $4)<span style="color:#ff0000;"> ?</span> $3<span style="color:#ff0000;">:</span> $4; print max}' /etc/passwd	<br /><span style="color:#ff0000;">相当于：</span><br />if ($3 &gt; $4)<br />	max=$3<br />else<br />	max=$4<br />	<br /><br /><span style="color:#ff0000;">==算术运算：+ - * / %(模) ^(幂2^3)</span><br />可以在模式中执行计算，awk都将按浮点数方式执行算术运算<br /># awk -F: '$3 * 10 &gt; 500' /etc/passwd<br /><br /><br /><span style="color:#ff0000;">＝＝逻辑操作符和复合模式</span><br />&amp;&amp;		逻辑与		a&amp;&amp;b<br />||			逻辑或		a||b<br />!			逻辑非		!a<br /># awk '$2 &gt; 5 &amp;&amp; $2 &lt;= 15' filename<br /># awk '$3 == 100 || $4 &gt; 50' filename<br /># awk '!($2 &lt; 100 &amp;&amp; $3 &lt; 20)' filename	<br /><br /><span style="color:#ff0000;">＝＝范围模式</span><br /># awk '/Tom/,/Suzanne/' filename	<br /><br /><br /><span style="background-color:#00ff00;">awk示例：</span><br /># awk '/west/' datafile<br /># awk '/^north/' datafile<br /># awk '/^(no|so)/' datafile<br /># awk '{print $3<span style="color:#ff0000;">,</span>$2}' datafile<br /># awk '{print $3 $2}' datafile<br /># awk '{print $0}' datafile<br /># awk '{print "Number of fields: "NF}' datafile<br /># awk '/northeast/{print $3,$2}' datafile<br /># awk '/E/' datafile<br /># awk '/^[ns]/{print $1}' datafile<br /># awk '$5 ~ /\.[7-9]+/' datafile<br /># awk '$2 !~ /E/{print $1,$2}' datafile<br /># awk '$3 ~ /^Joel/{print $3 " is a nice guy."}' datafile<br /># awk '$8 ~ /[0-9][0-9]$/{print $8}' datafile<br /># awk '$4 ~ /Chin$/{print "The price is $" $8 "."}' datafile<br /># awk '/Tj/{print $0}' datafile<br /># awk '{print $1}' datafile2		<br /># awk -F: '{print $1}' datafile2<br /># awk '{print "Number of fields: "NF}' datafile2<br /># awk -F: '{print "Number of fields: "NF}' datafile2<br /># awk -F"[ :]" '{print $1,$2}' datafile2<br />   <br /># awk '$7 == 5' datafile<br /># awk '$2 == "CT" {print $1, $2}' datafile<br /># awk '$7 != 5' datafile<br /># awk '$7 &lt; 5 {print $4, $7}' datafile<br /># awk '$6 &gt; .9 {print $1,$6}' datafile<br /># awk '$8 &lt;= 17 {print $8}' datafile<br /># awk '$8 &gt;= 17 {print $8}' datafile<br /># awk '$8 &gt; 10 &amp;&amp; $8 &lt; 17' datafile<br /># awk '$2 == "NW" || $1 ~ /south/ {print $1, $2}' datafile<br /># awk '!($8 == 13){print $8}' datafile<br /># awk '/southem/{print $5 + 10}' datafile<br /><br /># awk '/southem/{print $8 + 10}' datafile<br /># awk '/southem/{print $5 + 10.56}' datafile<br /># awk '/southem/{print $8 - 10}' datafile<br /># awk '/southem/{print $8 / 2 }' datafile<br /># awk '/southem/{print $8 / 3 }' datafile<br /># awk '/southem/{print $8 * 2 }' datafile<br /># awk '/southem/{print $8 % 2 }' datafile<br /><br /># awk '$3 ~ /^Suan/ {print "Percentage: "$6 + .2   " Volume: " $8}' datafile<br /># awk '/^western/,/^eastern/' datafile<br /># awk '{print ($7 &gt; 4 <span style="color:#ff0000;">?</span> "high "$7 <span style="color:#ff0000;">:</span> "low "$7)}' datafile			//条件运算符<br /># awk '$3 == "Chris" {$3 = "Christian"; print}' datafile			//赋值运算符<br /># awk '/Derek/ {$8 += 12; print $8}' datafile							//$8 += 12等价于$8 = $8 + 12<br /># awk '{$7 %= 3; print $7}' datafile										//$7 %= 3等价于$7 = $7 % 3 <br /><br /><br /><span style="background-color:#00ff00;">四、awk流程控制</span><br /><span style="color:#a020f0;">＝＝条件判断</span><br /><span style="color:#ff0000;">if语句：</span><br />格式<br />{if(表达式)｛语句;语句；...｝}<br />awk -F: '{if($3==0) print $1 " is administrator."}' /etc/passwd<br />awk -F: '{if($3&gt;0 &amp;&amp; $3&lt;500){count++; print $1}} END{print count}' /etc/passwd	//统计系统用户数<br /><br /><span style="color:#ff0000;">if...else语句:</span><br />格式<br />{if(表达式)｛语句;语句;...｝else｛语句;语句;...}}<br />awk -F: '{if($3==0){print $1} else {print $7}}' /etc/passwd<br />awk -F: '{if($3&gt;0) {count++} else{i++}' /etc/passwd<br />awk -F: '{if($3&gt;0){count++} else{i++}} END{print "管理员个数: "i "\n系统用户数: "count}' /etc/passwd<br /><br /><span style="color:#ff0000;">if...else if...else语句：</span><br />格式<br />{if(表达式)｛语句;语句；...｝else if(表达式)｛语句;语句；...｝else if(表达式)｛语句;语句；...｝else｛语句;语句；...｝}<br />awk -F: '{if($3==0){i++} else if($3&gt;499){k++} else{j++}} END{print i; print k; print j}' /etc/passwd<br />awk -F: '{if($3==0){i++} else if($3&gt;499){k++} else{j++}} END{print "管理员个数: "i; print "普通用个数: "k; print "系统用户: "j}' /etc/passwd <br /><br /><br /><span style="color:#a020f0;">＝＝循环</span><br /><span style="color:#ff0000;">while:</span><br />awk -F: '{i=1; while(i&lt;=10) {print $0;  i++}}' /etc/passwd		//将每行打印10次<br /><br /><span style="color:#ff0000;">for:</span><br />awk -F: '{for(i=1;i&lt;=10;i++) print $0}' /etc/passwd					//将每行打印10次<br /><br /><br /><span style="color:#a020f0;">＝＝数组</span><br /># awk -F: '{username[<span style="color:#ff0000;">++i</span>]=$1} END{print username[1]}' /etc/passwd<br />root<br /># awk -F: '{username[<span style="color:#0000ff;">i++</span>]=$1} END{print username[1]}' /etc/passwd <br />bin<br /># awk -F: '{username[<span style="color:#0000ff;">i++</span>]=$1} END{print username[0]}' /etc/passwd <br />root<br /><br /># awk -F: '{username[x++]=$1} END{for(i=0;i<span style="color:#ff0000;">&lt;NR</span>;i++) print i,username[i]}' /etc/passwd<br />0 root<br />1 bin<br />2 daemon<br />3 adm<br />4 lp<br />5 sync<br />6 shutdown<br />7 halt<br />...<br /># awk -F: 'BEGIN{x=1} {user[x++]=$1} END{for(i=1;i<span style="color:#ff0000;">&lt;=NR</span>;i++) {print i,user[i]} }' /etc/passwd<br /># awk -F: 'BEGIN{j=1} <span style="text-decoration:line-through;">{if($3&lt;5)</span>{user[j++]=$1}<span style="text-decoration:line-through;">}</span>   END{for(i=1;i&lt;j;i++) {print i,user[i]} }' /etc/passwd<br /><br /><span style="color:#ff0000;"># awk -F: 'BEGIN{i=1} {username[i]=$1;i++}'</span><br /><br /># awk -F: 'BEGIN{i=1} $3&lt;10{username[i]=$1;++i} END{for(j=1;<strong><span style="color:#ff0000;">j&lt;i</span></strong>;j++){print j,username[j]}}' /etc/passwd<br />1 root<br />2 bin<br />3 daemon<br />4 adm<br />5 lp<br />6 sync<br />7 shutdown<br />8 halt<br />9 mail<br />10 admin<br /><br />========================================================<br /># awk -F: '{username[++x]=$1} END{for(i=1;i&lt;=NR;i++) {print i,username[i]}}' passwd1 <br />1 root<br />2 bin<br />3 daemon<br />4 adm<br />5 lp<br />6 sync<br />7 shutdown<br />8 halt<br />9 mail<br />10 uucp<br /><br /># awk -F: '{<span style="color:#ff0000;">username</span>[++x]=$1} END{for(i in <span style="color:#ff0000;">username</span>) {print username[i]} }' passwd1 <br />adm<br />lp<br />sync<br />shutdown<br />halt<br />mail<br />uucp<br />root<br />bin<br />daemon<br /><br /># awk -F: '{user_id[$1]=$3} END{for(i in user_id) {print i,user_id[i]}}' passwd1 <br />bin 1<br />uucp 10<br />mail 8<br />sync 5<br />shutdown 6<br />adm 3<br />daemon 2<br />halt 7<br />root 0<br />lp 4<br /><br /><br />========================================================<br /><br /><span style="color:#ff0000;">统计用户名为4个字符的用户：</span><br />[root@tianyun ~]# awk -F: '$1~/^....$/{count++; print $1} END{print "count is: " count}' /etc/passwd<br />root<br />sync<br />halt<br />mail<br />news<br />uucp<br />nscd<br />vcsa<br />pcap<br />sshd<br />dbus<br />jack<br />count is: 12<br /><br /><br />[root@tianyun ~]#  awk -F: '<span style="color:#ff0000;">length(</span>$1<span style="color:#ff0000;">)</span>==4{count++; print $1} END{print "count is: "count}' /etc/passwd<br />root<br />sync<br />halt<br />mail<br />news<br />uucp<br />nscd<br />vcsa<br />pcap<br />sshd<br />dbus<br />jack<br />count is: 12<br /><br /><br /><span style="background-color:#00ff00;">作业：</span><br />1. 取得网卡IP（除ipv6以外的所有IP）<br />2. 获得内存使用情况<br />3. 获得磁盘使用情况<br />4. 清空本机的ARP缓存<br />5. 打印出/etc/hosts文件的最后一个字段（按空格分隔）<br />6. 打印指定目录下的目录名<br /><br /><br />[root@tianyun dir1]# arp -a |awk -F"[()]" '{print "arp -d", $2}'<br />arp -d 192.168.2.26<br />arp -d 192.168.2.44<br />arp -d 192.168.2.28<br />arp -d 192.168.2.130<br />arp -d 192.168.2.90<br />arp -d 192.168.2.18<br />arp -d 192.168.2.129<br />[root@tianyun dir1]# arp -a |awk -F"[()]" '{print "arp -d " $2}' |sh<br /><br /><br />[root@tianyun ~]# awk -F: '{print $7}' /etc/passwd<br />[root@tianyun ~]# awk -F: '{print $NF}' /etc/passwd<br />[root@tianyun ~]# awk -F: '{print $(NF-1)}' /etc/passwd<br /><br />[root@tianyun ~]# ll |grep '^d'<br />drwxr-xr-x 104 root root     12288 09-22 05:37 192.168.0.48<br />drwxr-xr-x   2 root root      4096 10-30 15:47 apache_log<br />drwxr-xr-x   2 root root      4096 10-30 15:23 awk<br />drwxr-xr-x   2 root root      4096 10-24 09:09 Desktop<br />drwxr-xr-x  12 root root      4096 10-08 06:12 LEMP_Soft<br />drwxr-xr-x   2 root root      4096 10-24 07:38 scripts<br />drwxr-xr-x   6 root root      4096 2012-03-29 uplayer<br />drwxr-xr-x   7 root root      4096 10-23 04:53 vmware<br />[root@tianyun ~]# <br />[root@tianyun ~]# ll |grep '^d' |awk '{print $NF}'<br />192.168.0.48<br />apache_log<br />awk<br />Desktop<br />LEMP_Soft<br />scripts<br />uplayer<br />vmware<br /><br /><br /><br />awk脚本：<br />user1.awk<br />BEGIN {<br />        FS=":"<br />}<br /><br />{<br />        if($3==0){<br />                print $1<br />        }<br />        else{<br />                print $7<br />        }<br />}<br /><br /><br />user2.awk<br />BEGIN{<br />        FS=":"<br />        OFS="\t\t"<br />        print "username\tuid"<br />        print "-------------------"<br />}<br /><br />{if($3==0){<br />        print $1,$3;i++<br />        }<br /><br />}<br /><br />END{<br />        print "-------------------"<br />        print "total users is: "i<br />}<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div></div>
</body></html>